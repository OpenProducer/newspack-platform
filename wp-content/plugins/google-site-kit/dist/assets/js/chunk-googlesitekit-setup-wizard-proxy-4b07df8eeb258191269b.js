(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{221:function(e,t,n){"use strict";(function(e){var i=n(20),a=n.n(i),s=n(4),o=n.n(s),r=n(5),c=n.n(r),l=n(6),u=n.n(l),d=n(7),g=n.n(d),h=n(15),p=n.n(h),m=n(8),k=n.n(m),f=n(1),b=n(3),v=n.n(b),_=n(14),y=n.n(_),x=n(43),O=n(0),S=n(2),E=n(222),w=n(45),C=function(t){function OptIn(e){var t;return o()(this,OptIn),(t=u()(this,g()(OptIn).call(this,e))).state={optIn:Object(w.a)(),error:!1},t.handleOptIn=t.handleOptIn.bind(p()(t)),t}return k()(OptIn,t),c()(OptIn,[{key:"handleOptIn",value:function(e){var t=this,n=!!e.target.checked,i=Object(S.k)("googlesitekit_tracking_optin");Object(w.b)(n),n&&Object(w.c)("tracking_plugin",this.props.optinAction),Object(x.default)({path:"/wp/v2/users/me",method:"POST",data:{meta:a()({},i,n)}}).then((function(){t.setState({optIn:n,error:!1})})).catch((function(e){t.setState({optIn:!n,error:{errorCode:e.code,errorMsg:e.message}})}))}},{key:"render",value:function(){var t=this.state,n=t.optIn,i=t.error,a=this.props,s=a.id,o=a.name,r=a.className,c=Object(O.sprintf)(
/* translators: %s: privacy policy URL */
Object(O.__)('Help us improve the Site Kit plugin by allowing tracking of anonymous usage stats. All data are treated in accordance with <a href="%s" target="_blank" rel="noopener noreferrer">Google Privacy Policy</a>',"google-site-kit"),"https://policies.google.com/privacy");return e.createElement("div",{className:y()("googlesitekit-opt-in",r)},e.createElement(E.a,{id:s,name:o,value:"1",checked:n,onChange:this.handleOptIn},e.createElement("span",{dangerouslySetInnerHTML:Object(S.w)(c,{ALLOWED_TAGS:["a"],ALLOWED_ATTR:["href","target","rel"]})})),i&&e.createElement("div",{className:"googlesitekit-error-text"},i.errorMsg))}}]),OptIn}(f.a);C.propTypes={id:v.a.string,name:v.a.string,className:v.a.string,optinAction:v.a.string},C.defaultProps={id:"googlesitekit-opt-in",name:"optIn"},t.a=C}).call(this,n(11))},222:function(e,t,n){"use strict";(function(e){var i=n(4),a=n.n(i),s=n(5),o=n.n(s),r=n(6),c=n.n(r),l=n(7),u=n.n(l),d=n(8),g=n.n(d),h=n(1),p=n(3),m=n.n(p),k=n(14),f=n.n(k),b=n(25),v=function(t){function Checkbox(e){var t;return a()(this,Checkbox),(t=c()(this,u()(Checkbox).call(this,e))).formFieldRef=Object(h.h)(),t.checkboxRef=Object(h.h)(),t}return g()(Checkbox,t),o()(Checkbox,[{key:"componentDidMount",value:function(){new b.e(this.formFieldRef.current).input=new b.c(this.checkboxRef.current)}},{key:"render",value:function(){var t=this.props,n=t.onChange,i=t.id,a=t.name,s=t.value,o=t.checked,r=t.disabled,c=t.children;return e.createElement("div",{className:"mdc-form-field",ref:this.formFieldRef},e.createElement("div",{className:f()("mdc-checkbox",{"mdc-checkbox--disabled":r}),ref:this.checkboxRef},e.createElement("input",{className:"mdc-checkbox__native-control",type:"checkbox",id:i,name:a,value:s,checked:o,disabled:r,onChange:n}),e.createElement("div",{className:"mdc-checkbox__background"},e.createElement("svg",{className:"mdc-checkbox__checkmark",viewBox:"0 0 24 24"},e.createElement("path",{className:"mdc-checkbox__checkmark-path",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"})),e.createElement("div",{className:"mdc-checkbox__mixedmark"}))),e.createElement("label",{htmlFor:i},c))}}]),Checkbox}(h.a);v.propTypes={onChange:m.a.func.isRequired,id:m.a.string.isRequired,name:m.a.string.isRequired,value:m.a.string.isRequired,checked:m.a.bool,disabled:m.a.bool,children:m.a.node.isRequired},v.defaultProps={checked:!1,disabled:!1},t.a=v}).call(this,n(11))},265:function(e,t,n){"use strict";(function(e,i){n.d(t,"a",(function(){return j}));var a=n(114),s=n.n(a),o=n(4),r=n.n(o),c=n(5),l=n.n(c),u=n(6),d=n.n(u),g=n(7),h=n.n(g),p=n(8),m=n.n(p),k=n(10),f=n.n(k),b=n(1),v=n(0),_=n(3),y=n.n(_),x=n(95),O=n(31),S=n(2),E=n(9),w=n(19),C=[function(){var t;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.location.hostname,!["localhost","127.0.0.1"].includes(t)&&!t.match(/\.(example|invalid|localhost|test)$/)){n.next=3;break}throw"invalid_hostname";case 3:case"end":return n.stop()}}))},function(){var e,t,n;return f.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,f.a.awrap(E.c.set(E.a,"site","setup-tag"));case 2:return e=i.sent,t=e.token,i.next=6,f.a.awrap(Object(S.j)("setup").catch((function(){throw"tag_fetch_failed"})));case 6:if(n=i.sent,t===n){i.next=9;break}throw"setup_token_mismatch";case 9:case"end":return i.stop()}}))}],j=function(t){function CompatibilityChecks(t){var n;r()(this,CompatibilityChecks);var i=e.googlesitekit.setup.isSiteKitConnected;return(n=d()(this,h()(CompatibilityChecks).call(this,t))).state={complete:i,error:null,developerPlugin:{}},n}return m()(CompatibilityChecks,t),l()(CompatibilityChecks,[{key:"componentDidMount",value:function(){var e,t,n,i;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!this.state.complete){a.next=2;break}return a.abrupt("return");case 2:a.prev=2,e=0,t=C;case 4:if(!(e<t.length)){a.next=11;break}return n=t[e],a.next=8,f.a.awrap(n());case 8:e++,a.next=4;break;case 11:a.next=19;break;case 13:return a.prev=13,a.t0=a.catch(2),a.next=17,f.a.awrap(E.c.get(E.a,"site","developer-plugin"));case 17:i=a.sent,this.setState({error:a.t0,developerPlugin:i});case 19:this.setState({complete:!0});case 20:case"end":return a.stop()}}),null,this,[[2,13]])}},{key:"helperCTA",value:function(){var e=this.state.developerPlugin,t=e.installed,n=e.active,i=e.installURL,a=e.activateURL,s=e.configureURL;return!t&&i?{labelHTML:Object(v.__)('Install<span class="screen-reader-text"> the helper plugin</span>',"google-site-kit"),href:i,external:!1}:t&&!n&&a?{labelHTML:Object(v.__)('Activate<span class="screen-reader-text"> the helper plugin</span>',"google-site-kit"),href:a,external:!1}:t&&n&&s?{labelHTML:Object(v.__)('Configure<span class="screen-reader-text"> the helper plugin</span>',"google-site-kit"),href:s,external:!1}:{labelHTML:Object(v.__)('Learn how<span class="screen-reader-text"> to install and use the helper plugin</span>',"google-site-kit"),href:"https://sitekit.withgoogle.com/documentation/using-site-kit-on-a-staging-environment/",external:!0}}},{key:"renderError",value:function(e){var t=this.state.developerPlugin.installed,n=this.helperCTA(),a=n.labelHTML,s=n.href,o=n.external;switch(e){case"invalid_hostname":case"tag_fetch_failed":return i.createElement(b.b,null,!t&&Object(v.__)("Looks like this may be a staging environment. If so, you’ll need to install a helper plugin and verify your production site in Search Console.","google-site-kit"),t&&Object(v.__)("Looks like this may be a staging environment and you already have the helper plugin. Before you can use Site Kit, please make sure you’ve provided the necessary credentials in the Authentication section and verified your production site in Search Console.","google-site-kit")," ",i.createElement(w.a,{href:s,dangerouslySetInnerHTML:{__html:a},external:o,inherit:!0}));case"setup_token_mismatch":return Object(v.__)("Looks like you may be using a caching plugin which could interfere with setup. Please deactivate any caching plugins before setting up Site Kit. You may reactivate them once setup has been completed.","google-site-kit")}}},{key:"render",value:function(){var e,t,n=this.state,a=n.complete,o=n.error,r=this.props,c=r.children,l=s()(r,["children"]);return o&&(e=i.createElement(b.b,null,i.createElement("div",{className:"googlesitekit-setup-compat mdc-layout-grid mdc-layout-grid--align-left"},i.createElement("div",{className:"mdc-layout-grid__inner"},i.createElement(x.a,null),i.createElement("div",{className:"googlesitekit-heading-4 mdc-layout-grid__cell--span-11"},Object(v.__)("Your site may not be ready for Site Kit","google-site-kit"))),i.createElement("p",null,this.renderError(o))))),a||(t=i.createElement("div",{style:{alignSelf:"center",marginLeft:"1rem"}},i.createElement("small",null,Object(v.__)("Checking Compatibility...","google-site-kit")),i.createElement(O.a,{small:!0,compress:!0}))),c({restProps:l,complete:a,error:o,inProgressFeedback:t,CTAFeedback:e})}}]),CompatibilityChecks}(b.a);j.propTypes={children:y.a.func.isRequired}}).call(this,n(16),n(11))},266:function(e,t,n){"use strict";(function(e,i){n.d(t,"a",(function(){return w}));var a=n(10),s=n.n(a),o=n(4),r=n.n(o),c=n(5),l=n.n(c),u=n(6),d=n.n(u),g=n(7),h=n.n(g),p=n(15),m=n.n(p),k=n(8),f=n.n(k),b=n(1),v=n(0),_=n(42),y=n(2),x=n(9),O=n(111),S=n(19),E=n(123),w=function(t){function ResetButton(t){var n;r()(this,ResetButton),n=d()(this,h()(ResetButton).call(this,t));var i=e._googlesitekitBaseData.splashURL;return n.state={dialogActive:!1,postResetURL:Object(_.a)(i,{notification:"reset_success"})},n.handleDialog=n.handleDialog.bind(m()(n)),n.handleUnlinkConfirm=n.handleUnlinkConfirm.bind(m()(n)),n.handleCloseModal=n.handleCloseModal.bind(m()(n)),n}return f()(ResetButton,t),l()(ResetButton,[{key:"componentDidMount",value:function(){e.addEventListener("keyup",this.handleCloseModal,!1)}},{key:"componentWillUnmount",value:function(){e.removeEventListener("keyup",this.handleCloseModal)}},{key:"handleUnlinkConfirm",value:function(){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.awrap(x.c.set(x.a,"site","reset"));case 2:Object(y.c)(),this.handleDialog(),document.location=this.state.postResetURL;case 5:case"end":return e.stop()}}),null,this)}},{key:"handleCloseModal",value:function(e){27===e.keyCode&&this.setState({dialogActive:!1})}},{key:"handleDialog",value:function(){this.setState((function(e){return{dialogActive:!e.dialogActive}}))}},{key:"render",value:function(){var e=this,t=this.props.children,n=this.state.dialogActive;return i.createElement(b.b,null,i.createElement(S.a,{className:"googlesitekit-reset-button",onClick:function(){return e.setState({dialogActive:!0})},inherit:!0},t||Object(v.__)("Reset Site Kit","google-site-kit")),i.createElement(E.a,null,i.createElement(O.a,{dialogActive:n,handleConfirm:this.handleUnlinkConfirm,handleDialog:this.handleDialog,title:Object(v.__)("Reset Site Kit","google-site-kit"),subtitle:Object(v.__)("Resetting this site will remove access to all services. After disconnecting, you will need to re-authorize your access to restore service.","google-site-kit"),confirmButton:Object(v.__)("Reset","google-site-kit"),provides:[]})))}}]),ResetButton}(b.a)}).call(this,n(16),n(11))},407:function(e,t,n){"use strict";n.r(t),function(e,i){var a=n(4),s=n.n(a),o=n(5),r=n.n(o),c=n(6),l=n.n(c),u=n(7),d=n.n(u),g=n(8),h=n.n(g),p=n(1),m=n(306),k=n.n(m),f=n(13),b=n(0),v=n(233),_=n(2),y=n(56),x=n(30),O=n(266),S=n(21),E=n(29),w=n(221),C=n(265),j=function(t){function SetupUsingProxy(t){var n;s()(this,SetupUsingProxy),n=l()(this,d()(SetupUsingProxy).call(this,t));var i=e.googlesitekit.admin,a=i.proxySetupURL,o=i.siteURL,r=e.googlesitekit.setup,c=r.isSiteKitConnected,u=r.isResettable,g=r.errorMessage,h=e.googlesitekit.permissions.canSetup;return n.state={canSetup:h,errorMessage:g,isSiteKitConnected:c,isResettable:u,completeSetup:!1,proxySetupURL:a,resetSuccess:"reset_success"===Object(v.a)(location.href,"notification"),context:Object(v.a)(location.href,"googlesitekit_context"),siteHostname:k.a.toUnicode(new URL(o).hostname)},n}return h()(SetupUsingProxy,t),r()(SetupUsingProxy,[{key:"isSetupFinished",value:function(){var e=this.state,t=e.isSiteKitConnected,n=e.completeSetup;return t&&n}},{key:"render",value:function(){if(this.isSetupFinished()){var t=Object(_.o)("googlesitekit-dashboard",{notification:"authentication_success"});Object(f.delay)((function(){e.location.replace(t)}),500,"later")}var n,a,s,o=this.state,r=o.context,c=o.errorMessage,l=o.isResettable,u=o.proxySetupURL,d=o.resetSuccess,g=o.siteHostname,h=l;return"revoked"===r?(n=Object(b.sprintf)(
/* translators: %s is the site's hostname. (e.g. example.com) */
Object(b.__)("You revoked access to Site Kit for %s","google-site-kit"),g),a=Object(b.__)('Site Kit will no longer have access to your account. If you’d like to reconnect Site Kit, click "Start Setup" below to generate new credentials.',"google-site-kit"),s=Object(b.__)("Sign in with Google","google-site-kit")):h?(n=Object(b.__)("Sign in with Google to configure Site Kit","google-site-kit"),a=Object(b.__)("To use Site Kit, sign in with your Google account. The Site Kit service will guide you through 3 simple steps to complete the connection and configure the plugin.","google-site-kit"),s=Object(b.__)("Sign in with Google","google-site-kit")):(n=Object(b.__)("Sign in with Google to set up Site Kit","google-site-kit"),a=Object(b.__)("The Site Kit service will guide you through 3 simple setup steps.","google-site-kit"),s=Object(b.__)("Start setup","google-site-kit")),i.createElement(p.b,null,i.createElement(y.a,null),c&&i.createElement(E.a,{id:"setup_error",type:"win-error",title:Object(b.__)("Oops! There was a problem during set up. Please try again.","google-site-kit"),description:c,isDismissable:!1}),d&&i.createElement(E.a,{id:"reset_success",title:Object(b.__)("Site Kit by Google was successfully reset.","google-site-kit"),isDismissable:!1}),i.createElement("div",{className:"googlesitekit-wizard"},i.createElement("div",{className:"mdc-layout-grid"},i.createElement("div",{className:"mdc-layout-grid__inner"},i.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},i.createElement(S.a,null,i.createElement("section",{className:"googlesitekit-wizard-progress"},i.createElement("div",{className:"googlesitekit-setup__footer"},i.createElement("div",{className:"mdc-layout-grid"},i.createElement("div",{className:"mdc-layout-grid__inner"},i.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},i.createElement("h1",{className:"googlesitekit-setup__title"},n),i.createElement("p",{className:"googlesitekit-setup__description"},a),i.createElement(C.a,null,(function(e){var t=e.complete,n=e.inProgressFeedback,a=e.CTAFeedback;return i.createElement(p.b,null,a,i.createElement(w.a,{optinAction:"analytics_optin_setup_fallback"}),i.createElement("div",{className:"googlesitekit-start-setup-wrap"},i.createElement(x.a,{className:"googlesitekit-start-setup",href:u,onClick:function(){Object(_.A)("plugin_setup","proxy_start_setup_landing_page")},disabled:!t},s),n,l&&i.createElement(O.a,null)))})))))))))))))}}]),SetupUsingProxy}(p.a);t.default=j}.call(this,n(16),n(11))}}]);