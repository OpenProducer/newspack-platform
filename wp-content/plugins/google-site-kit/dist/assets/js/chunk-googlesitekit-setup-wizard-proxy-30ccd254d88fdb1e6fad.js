(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{258:function(e,t,i){"use strict";(function(e){var n=i(21),a=i.n(n),o=i(5),s=i.n(o),c=i(6),l=i.n(c),r=i(7),u=i.n(r),d=i(8),g=i.n(d),m=i(15),h=i.n(m),p=i(9),k=i.n(p),f=i(259),_=i(2),v=i.n(_),b=i(3),y=i(46),E=i(1),S=i(0),O=i(70),w=function(t){function i(e){var t;return s()(this,i),(t=u()(this,g()(i).call(this,e))).state={optIn:Object(O.a)(),error:!1},t.handleOptIn=t.handleOptIn.bind(h()(t)),t}return k()(i,t),l()(i,[{key:"handleOptIn",value:function(e){var t=this,i=!!e.target.checked,n=Object(b.k)("googlesitekit_tracking_optin");Object(O.b)(i),Object(y.default)({path:"/wp/v2/users/me",method:"POST",data:{meta:a()({},n,i)}}).then((function(){t.setState({optIn:i,error:!1})})).catch((function(e){t.setState({optIn:!i,error:{errorCode:e.code,errorMsg:e.message}})}))}},{key:"render",value:function(){var t=this.state,i=t.optIn,n=t.error,a=this.props,o=a.id,s=a.name,c=a.className;return e.createElement("div",{className:"googlesitekit-opt-in ".concat(c)},e.createElement(f.a,{id:o,name:s,value:"1",checked:i,onChange:this.handleOptIn},Object(S.__)("Help us improve the Site Kit plugin by allowing tracking of anonymous usage stats. All data are treated in accordance with ","google-site-kit"),e.createElement("a",{href:"https://policies.google.com/privacy",target:"_blank",rel:"noopener noreferrer"},Object(S.__)("Google Privacy Policy","google-site-kit")),"."),n&&e.createElement("div",{className:"googlesitekit-error-text"},n.errorMsg))}}]),i}(E.Component);w.propTypes={id:v.a.string,name:v.a.string,className:v.a.string},w.defaultProps={id:"googlesitekit-opt-in",name:"optIn"},t.a=w}).call(this,i(1))},259:function(e,t,i){"use strict";(function(e){var n=i(5),a=i.n(n),o=i(6),s=i.n(o),c=i(7),l=i.n(c),r=i(8),u=i.n(r),d=i(9),g=i.n(d),m=i(26),h=i(2),p=i.n(h),k=i(1),f=function(t){function i(e){var t;return a()(this,i),(t=l()(this,u()(i).call(this,e))).formFieldRef=Object(k.createRef)(),t.checkboxRef=Object(k.createRef)(),t}return g()(i,t),s()(i,[{key:"componentDidMount",value:function(){new m.e(this.formFieldRef.current).input=new m.c(this.checkboxRef.current)}},{key:"render",value:function(){var t=this.props,i=t.onChange,n=t.id,a=t.name,o=t.value,s=t.checked,c=t.disabled,l=t.children;return e.createElement("div",{className:"mdc-form-field",ref:this.formFieldRef},e.createElement("div",{className:"\n\t\t\t\t\t\tmdc-checkbox\n\t\t\t\t\t\t".concat(c?"mdc-checkbox--disabled":"","\n\t\t\t\t\t"),ref:this.checkboxRef},e.createElement("input",{className:"mdc-checkbox__native-control",type:"checkbox",id:n,name:a,value:o,checked:s,disabled:c,onChange:i}),e.createElement("div",{className:"mdc-checkbox__background"},e.createElement("svg",{className:"mdc-checkbox__checkmark",viewBox:"0 0 24 24"},e.createElement("path",{className:"mdc-checkbox__checkmark-path",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"})),e.createElement("div",{className:"mdc-checkbox__mixedmark"}))),e.createElement("label",{htmlFor:n},l))}}]),i}(k.Component);f.propTypes={onChange:p.a.func.isRequired,id:p.a.string.isRequired,name:p.a.string.isRequired,value:p.a.string.isRequired,checked:p.a.bool,disabled:p.a.bool,children:p.a.node.isRequired},f.defaultProps={checked:!1,disabled:!1},t.a=f}).call(this,i(1))},278:function(e,t,i){"use strict";(function(e,n){i.d(t,"a",(function(){return j}));var a=i(11),o=i.n(a),s=i(5),c=i.n(s),l=i(6),r=i.n(l),u=i(7),d=i.n(u),g=i(8),m=i.n(g),h=i(15),p=i.n(h),k=i(9),f=i.n(k),_=i(10),v=i(3),b=i(140),y=i(0),E=i(1),S=i(44),O=i(17),w=i(150),j=function(t){function i(t){var n;c()(this,i),n=d()(this,m()(i).call(this,t));var a=e._googlesitekitBase.splashURL;return n.state={dialogActive:!1,postResetURL:Object(S.a)(a,{notification:"reset_success"})},n.handleDialog=n.handleDialog.bind(p()(n)),n.handleUnlinkConfirm=n.handleUnlinkConfirm.bind(p()(n)),n.handleCloseModal=n.handleCloseModal.bind(p()(n)),n}return f()(i,t),r()(i,[{key:"componentDidMount",value:function(){e.addEventListener("keyup",this.handleCloseModal,!1)}},{key:"componentWillUnmount",value:function(){e.removeEventListener("keyup",this.handleCloseModal)}},{key:"handleUnlinkConfirm",value:function(){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.awrap(_.c.set(_.a,"site","reset"));case 2:Object(v.c)(),this.handleDialog(),document.location=this.state.postResetURL;case 5:case"end":return e.stop()}}),null,this)}},{key:"handleCloseModal",value:function(e){27===e.keyCode&&this.setState({dialogActive:!1})}},{key:"handleDialog",value:function(){this.setState((function(e){return{dialogActive:!e.dialogActive}}))}},{key:"render",value:function(){var e=this,t=this.props.children,i=this.state.dialogActive;return n.createElement(E.Fragment,null,n.createElement(O.a,{className:"googlesitekit-reset-button",onClick:function(){return e.setState({dialogActive:!0})},inherit:!0},t||Object(y.__)("Reset Site Kit","google-site-kit")),n.createElement(w.a,null,n.createElement(b.a,{dialogActive:i,handleConfirm:this.handleUnlinkConfirm,handleDialog:this.handleDialog,title:Object(y.__)("Reset Site Kit","google-site-kit"),subtitle:Object(y.__)("Resetting this site will remove access to all services. After disconnecting, you will need to re-authorize your access to restore service.","google-site-kit"),confirmButton:Object(y.__)("Reset","google-site-kit"),provides:[]})))}}]),i}(E.Component)}).call(this,i(14),i(1))},342:function(e,t,i){"use strict";i.r(t),function(e,n){var a=i(5),o=i.n(a),s=i(6),c=i.n(s),l=i(7),r=i.n(l),u=i(8),d=i.n(u),g=i(9),m=i.n(g),h=i(66),p=i(32),k=i(278),f=i(20),_=i(30),v=i(258),b=i(3),y=i(13),E=i(1),S=i(0),O=i(72),w=i(93),j=function(t){function i(t){var n;o()(this,i),n=r()(this,d()(i).call(this,t));var a=e.googlesitekit.admin,s=a.proxySetupURL,c=a.siteURL,l=e.googlesitekit.setup,u=l.isSiteKitConnected,g=l.isResettable,m=l.errorMessage,h=e.googlesitekit.permissions.canSetup;return n.state={canSetup:h,errorMessage:m,isSiteKitConnected:u,isResettable:g,completeSetup:!1,proxySetupURL:s,resetSuccess:"reset_success"===Object(O.a)(location.href,"notification"),context:Object(O.a)(location.href,"googlesitekit_context"),siteHostname:new URL(c).hostname},n}return m()(i,t),c()(i,[{key:"isSetupFinished",value:function(){var e=this.state,t=e.isSiteKitConnected,i=e.completeSetup;return t&&i}},{key:"render",value:function(){if(this.isSetupFinished()){var t=Object(b.n)("googlesitekit-dashboard",{notification:"authentication_success"});Object(y.delay)((function(){e.location.replace(t)}),500,"later")}var i,a,o,s=this.state,c=s.context,l=s.errorMessage,r=s.isResettable,u=s.proxySetupURL,d=s.resetSuccess,g=s.siteHostname,m=r;return"revoked"===c?(i=Object(S.sprintf)(
/* translators: %s is the site's hostname. (e.g. example.com) */
Object(S.__)("You revoked access to Site Kit for %s","google-site-kit"),g),a=Object(S.__)('Site Kit will no longer have access to your account. If youâ€™d like to reconnect Site Kit, click "Start Setup" below to generate new credentials.',"google-site-kit"),o=Object(S.__)("Sign in with Google","google-site-kit")):m?(i=Object(S.__)("Sign in with Google to configure Site Kit"),a=Object(S.__)("To use Site Kit, sign in with your Google account. The Site Kit service will guide you through 3 simple steps to complete the connection and configure the plugin."),o=Object(S.__)("Sign in with Google","google-site-kit")):(i=Object(S.__)("Sign in with Google to set up Site Kit","google-site-kit"),a=Object(S.__)("The Site Kit service will guide you through 3 simple setup steps.","google-site-kit"),o=Object(S.__)("Start setup","google-site-kit")),n.createElement(E.Fragment,null,n.createElement(h.a,null),l&&n.createElement(_.a,{id:"setup_error",type:"win-error",title:Object(S.__)("Oops! There was a problem during set up. Please try again.","google-site-kit"),description:l,isDismissable:!1}),d&&n.createElement(_.a,{id:"reset_success",title:Object(S.__)("Site Kit by Google was successfully reset.","google-site-kit"),isDismissable:!1}),n.createElement("div",{className:"googlesitekit-wizard"},n.createElement("div",{className:"mdc-layout-grid"},n.createElement("div",{className:"mdc-layout-grid__inner"},n.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},n.createElement(f.a,null,n.createElement("section",{className:"googlesitekit-wizard-progress"},n.createElement("div",{className:"googlesitekit-setup__footer"},n.createElement("div",{className:"mdc-layout-grid"},n.createElement("div",{className:"mdc-layout-grid__inner"},n.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},n.createElement("h1",{className:"googlesitekit-setup__title"},i),n.createElement("p",{className:"googlesitekit-setup__description"},a),n.createElement(w.a,null,(function(e){var t=e.complete,i=e.inProgressFeedback,a=e.CTAFeedback;return n.createElement(E.Fragment,null,a,n.createElement(v.a,null),n.createElement("div",{className:"googlesitekit-start-setup-wrap"},n.createElement(p.a,{className:"googlesitekit-start-setup",href:u,onClick:function(){Object(b.z)("plugin_setup","proxy_start_setup_landing_page")},disabled:!t},o),i,r&&n.createElement(k.a,null)))})))))))))))))}}]),i}(E.Component);t.default=j}.call(this,i(14),i(1))}}]);