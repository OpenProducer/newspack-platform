(window.webpackJsonp=window.webpackJsonp||[]).push([[3,18],{180:function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=n(1),o=n(78),s=n(242),a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setFocusTrapElement=function(e){n.focusTrapElement=e},"undefined"!=typeof document&&(n.previouslyFocusedElement=document.activeElement),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this.props.focusTrapOptions,t={returnFocusOnDeactivate:!1};for(var n in e)e.hasOwnProperty(n)&&"returnFocusOnDeactivate"!==n&&(t[n]=e[n]);var i=o.findDOMNode(this.focusTrapElement);this.focusTrap=this.props._createFocusTrap(i,t),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause()}},{key:"componentDidUpdate",value:function(e){if(e.active&&!this.props.active){var t={returnFocus:this.props.focusTrapOptions.returnFocusOnDeactivate||!1};this.focusTrap.deactivate(t)}else!e.active&&this.props.active&&this.focusTrap.activate();e.paused&&!this.props.paused?this.focusTrap.unpause():!e.paused&&this.props.paused&&this.focusTrap.pause()}},{key:"componentWillUnmount",value:function(){this.focusTrap.deactivate(),!1!==this.props.focusTrapOptions.returnFocusOnDeactivate&&this.previouslyFocusedElement&&this.previouslyFocusedElement.focus&&this.previouslyFocusedElement.focus()}},{key:"render",value:function(){var e=this,t=r.Children.only(this.props.children);return r.cloneElement(t,{ref:function(n){e.setFocusTrapElement(n),"function"==typeof t.ref&&t.ref(n)}})}}]),t}(r.Component);a.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:s},e.exports=a},242:function(e,t,n){var i=n(243),r=n(129),o=null;function s(e){return setTimeout(e,0)}e.exports=function(e,t){var n=document,a="string"==typeof e?n.querySelector(e):e,c=r({returnFocusOnDeactivate:!0,escapeDeactivates:!0},t),l={firstTabbableNode:null,lastTabbableNode:null,nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1},u={activate:function(e){if(l.active)return;b(),l.active=!0,l.paused=!1,l.nodeFocusedBeforeActivation=n.activeElement;var t=e&&e.onActivate?e.onActivate:c.onActivate;t&&t();return p(),u},deactivate:d,pause:function(){if(l.paused||!l.active)return;l.paused=!0,g()},unpause:function(){if(!l.paused||!l.active)return;l.paused=!1,p()}};return u;function d(e){if(l.active){g(),l.active=!1,l.paused=!1;var t=e&&void 0!==e.onDeactivate?e.onDeactivate:c.onDeactivate;return t&&t(),(e&&void 0!==e.returnFocus?e.returnFocus:c.returnFocusOnDeactivate)&&s((function(){y(l.nodeFocusedBeforeActivation)})),u}}function p(){if(l.active)return o&&o.pause(),o=u,b(),s((function(){y(h())})),n.addEventListener("focusin",v,!0),n.addEventListener("mousedown",f,!0),n.addEventListener("touchstart",f,!0),n.addEventListener("click",k,!0),n.addEventListener("keydown",_,!0),u}function g(){if(l.active&&o===u)return n.removeEventListener("focusin",v,!0),n.removeEventListener("mousedown",f,!0),n.removeEventListener("touchstart",f,!0),n.removeEventListener("click",k,!0),n.removeEventListener("keydown",_,!0),o=null,u}function m(e){var t=c[e],i=t;if(!t)return null;if("string"==typeof t&&!(i=n.querySelector(t)))throw new Error("`"+e+"` refers to no known node");if("function"==typeof t&&!(i=t()))throw new Error("`"+e+"` did not return a node");return i}function h(){var e;if(!(e=null!==m("initialFocus")?m("initialFocus"):a.contains(n.activeElement)?n.activeElement:l.firstTabbableNode||m("fallbackFocus")))throw new Error("You can't have a focus-trap without at least one focusable element");return e}function f(e){a.contains(e.target)||(c.clickOutsideDeactivates?d({returnFocus:!i.isFocusable(e.target)}):e.preventDefault())}function v(e){a.contains(e.target)||e.target instanceof Document||(e.stopImmediatePropagation(),y(l.mostRecentlyFocusedNode||h()))}function _(e){if(!1!==c.escapeDeactivates&&function(e){return"Escape"===e.key||"Esc"===e.key||27===e.keyCode}(e))return e.preventDefault(),void d();(function(e){return"Tab"===e.key||9===e.keyCode})(e)&&function(e){if(b(),e.shiftKey&&e.target===l.firstTabbableNode)return e.preventDefault(),void y(l.lastTabbableNode);if(!e.shiftKey&&e.target===l.lastTabbableNode)e.preventDefault(),y(l.firstTabbableNode)}(e)}function k(e){c.clickOutsideDeactivates||a.contains(e.target)||(e.preventDefault(),e.stopImmediatePropagation())}function b(){var e=i(a);l.firstTabbableNode=e[0]||h(),l.lastTabbableNode=e[e.length-1]||h()}function y(e){e!==n.activeElement&&(e&&e.focus?(e.focus(),l.mostRecentlyFocusedNode=e,function(e){return e.tagName&&"input"===e.tagName.toLowerCase()&&"function"==typeof e.select}(e)&&e.select()):y(h()))}}},243:function(e,t){var n=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'],i=n.join(","),r="undefined"==typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;function o(e,t){t=t||{};var n,o,a,c=[],d=[],g=new p(e.ownerDocument||e),m=e.querySelectorAll(i);for(t.includeContainer&&r.call(e,i)&&(m=Array.prototype.slice.apply(m)).unshift(e),n=0;n<m.length;n++)s(o=m[n],g)&&(0===(a=l(o))?c.push(o):d.push({documentOrder:n,tabIndex:a,node:o}));return d.sort(u).map((function(e){return e.node})).concat(c)}function s(e,t){return!(!a(e,t)||function(e){return function(e){return d(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t=function(e){for(var t=0;t<e.length;t++)if(e[t].checked)return e[t]}(e.ownerDocument.querySelectorAll('input[type="radio"][name="'+e.name+'"]'));return!t||t===e}(e)}(e)||l(e)<0)}function a(e,t){return t=t||new p(e.ownerDocument||e),!(e.disabled||function(e){return d(e)&&"hidden"===e.type}(e)||t.isUntouchable(e))}o.isTabbable=function(e,t){if(!e)throw new Error("No node provided");return!1!==r.call(e,i)&&s(e,t)},o.isFocusable=function(e,t){if(!e)throw new Error("No node provided");return!1!==r.call(e,c)&&a(e,t)};var c=n.concat("iframe").join(",");function l(e){var t=parseInt(e.getAttribute("tabindex"),10);return isNaN(t)?function(e){return"true"===e.contentEditable}(e)?0:e.tabIndex:t}function u(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex}function d(e){return"INPUT"===e.tagName}function p(e){this.doc=e,this.cache=[]}p.prototype.hasDisplayNone=function(e,t){if(e===this.doc.documentElement)return!1;var n=function(e,t){for(var n=0,i=e.length;n<i;n++)if(t(e[n]))return e[n]}(this.cache,(function(t){return t===e}));if(n)return n[1];var i=!1;return"none"===(t=t||this.doc.defaultView.getComputedStyle(e)).display?i=!0:e.parentNode&&(i=this.hasDisplayNone(e.parentNode)),this.cache.push([e,i]),i},p.prototype.isUntouchable=function(e){if(e===this.doc.documentElement)return!1;var t=this.doc.defaultView.getComputedStyle(e);return!!this.hasDisplayNone(e,t)||"hidden"===t.visibility},e.exports=o},258:function(e,t,n){"use strict";(function(e){var i=n(21),r=n.n(i),o=n(5),s=n.n(o),a=n(6),c=n.n(a),l=n(7),u=n.n(l),d=n(8),p=n.n(d),g=n(15),m=n.n(g),h=n(9),f=n.n(h),v=n(259),_=n(2),k=n.n(_),b=n(3),y=n(46),E=n(1),S=n(0),w=n(70),C=function(t){function n(e){var t;return s()(this,n),(t=u()(this,p()(n).call(this,e))).state={optIn:Object(w.a)(),error:!1},t.handleOptIn=t.handleOptIn.bind(m()(t)),t}return f()(n,t),c()(n,[{key:"handleOptIn",value:function(e){var t=this,n=!!e.target.checked,i=Object(b.k)("googlesitekit_tracking_optin");Object(w.b)(n),Object(y.default)({path:"/wp/v2/users/me",method:"POST",data:{meta:r()({},i,n)}}).then((function(){t.setState({optIn:n,error:!1})})).catch((function(e){t.setState({optIn:!n,error:{errorCode:e.code,errorMsg:e.message}})}))}},{key:"render",value:function(){var t=this.state,n=t.optIn,i=t.error,r=this.props,o=r.id,s=r.name,a=r.className;return e.createElement("div",{className:"googlesitekit-opt-in ".concat(a)},e.createElement(v.a,{id:o,name:s,value:"1",checked:n,onChange:this.handleOptIn},Object(S.__)("Help us improve the Site Kit plugin by allowing tracking of anonymous usage stats. All data are treated in accordance with ","google-site-kit"),e.createElement("a",{href:"https://policies.google.com/privacy",target:"_blank",rel:"noopener noreferrer"},Object(S.__)("Google Privacy Policy","google-site-kit")),"."),i&&e.createElement("div",{className:"googlesitekit-error-text"},i.errorMsg))}}]),n}(E.Component);C.propTypes={id:k.a.string,name:k.a.string,className:k.a.string},C.defaultProps={id:"googlesitekit-opt-in",name:"optIn"},t.a=C}).call(this,n(1))},259:function(e,t,n){"use strict";(function(e){var i=n(5),r=n.n(i),o=n(6),s=n.n(o),a=n(7),c=n.n(a),l=n(8),u=n.n(l),d=n(9),p=n.n(d),g=n(26),m=n(2),h=n.n(m),f=n(1),v=function(t){function n(e){var t;return r()(this,n),(t=c()(this,u()(n).call(this,e))).formFieldRef=Object(f.createRef)(),t.checkboxRef=Object(f.createRef)(),t}return p()(n,t),s()(n,[{key:"componentDidMount",value:function(){new g.e(this.formFieldRef.current).input=new g.c(this.checkboxRef.current)}},{key:"render",value:function(){var t=this.props,n=t.onChange,i=t.id,r=t.name,o=t.value,s=t.checked,a=t.disabled,c=t.children;return e.createElement("div",{className:"mdc-form-field",ref:this.formFieldRef},e.createElement("div",{className:"\n\t\t\t\t\t\tmdc-checkbox\n\t\t\t\t\t\t".concat(a?"mdc-checkbox--disabled":"","\n\t\t\t\t\t"),ref:this.checkboxRef},e.createElement("input",{className:"mdc-checkbox__native-control",type:"checkbox",id:i,name:r,value:o,checked:s,disabled:a,onChange:n}),e.createElement("div",{className:"mdc-checkbox__background"},e.createElement("svg",{className:"mdc-checkbox__checkmark",viewBox:"0 0 24 24"},e.createElement("path",{className:"mdc-checkbox__checkmark-path",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"})),e.createElement("div",{className:"mdc-checkbox__mixedmark"}))),e.createElement("label",{htmlFor:i},c))}}]),n}(f.Component);v.propTypes={onChange:h.a.func.isRequired,id:h.a.string.isRequired,name:h.a.string.isRequired,value:h.a.string.isRequired,checked:h.a.bool,disabled:h.a.bool,children:h.a.node.isRequired},v.defaultProps={checked:!1,disabled:!1},t.a=v}).call(this,n(1))},343:function(e,t,n){"use strict";n.r(t),function(e,i){var r=n(11),o=n.n(r),s=n(5),a=n.n(s),c=n(6),l=n.n(c),u=n(7),d=n.n(u),p=n(8),g=n.n(p),m=n(15),h=n.n(m),f=n(9),v=n.n(f),_=n(13),k=n(0),b=n(1),y=n(66),E=n(32),S=n(20),w=n(10),C=n(3),N=n(345),O=n(352),R=function(t){function n(t){var i;a()(this,n),i=d()(this,g()(n).call(this,t));var r=e.googlesitekit.admin.connectURL,o=e.googlesitekit.setup,s=o.isAuthenticated,c=o.hasSearchConsoleProperty,l=o.isSiteKitConnected,u=o.isVerified,p=o.needReauthenticate,m=e.googlesitekit.permissions.canSetup;return i.state={canSetup:m,isAuthenticated:s,isVerified:u,needReauthenticate:p,hasSearchConsoleProperty:c,hasSearchConsolePropertyFromTheStart:c,connectURL:r,errorMsg:"",isSiteKitConnected:l,completeSetup:!1},i.siteConnectedSetup=i.siteConnectedSetup.bind(h()(i)),i.siteVerificationSetup=i.siteVerificationSetup.bind(h()(i)),i.searchConsoleSetup=i.searchConsoleSetup.bind(h()(i)),i.resetAndRestart=i.resetAndRestart.bind(h()(i)),i.completeSetup=i.completeSetup.bind(h()(i)),i.setErrorMessage=i.setErrorMessage.bind(h()(i)),i}return v()(n,t),l()(n,[{key:"resetAndRestart",value:function(){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.awrap(w.c.set(w.a,"site","reset"));case 2:Object(C.c)(),this.setState({isSiteKitConnected:!1,isAuthenticated:!1,isVerified:!1,hasSearchConsoleProperty:!1,completeSetup:!1,errorMsg:""});case 4:case"end":return e.stop()}}),null,this)}},{key:"completeSetup",value:function(){this.setState({completeSetup:!0})}},{key:"siteConnectedSetup",value:function(e){this.setState({isSiteKitConnected:e})}},{key:"siteVerificationSetup",value:function(e){this.setState({isVerified:e})}},{key:"searchConsoleSetup",value:function(e){this.setState({hasSearchConsoleProperty:e})}},{key:"isSetupFinished",value:function(){var e=this.state,t=e.isSiteKitConnected,n=e.isAuthenticated,i=e.isVerified,r=e.hasSearchConsoleProperty,o=e.completeSetup;return t&&n&&i&&r&&o}},{key:"setErrorMessage",value:function(e){this.setState({errorMsg:e})}},{key:"getApplicableSteps",value:function(){var e,t=N.a,n=Object.keys(t);for(e=0;e<n.length;e++)t[n[e]].isApplicable(this.state)||delete t[n[e]];return t}},{key:"currentStep",value:function(e){var t,n=Object.keys(e);for(t=0;t<n.length-1;t++)if(!e[n[t]].isCompleted(this.state))return n[t];return n[t]}},{key:"stepStatus",value:function(e,t){return e[t].isCompleted(this.state)?"completed":t===this.currentStep(e)?"inprogress":""}},{key:"render",value:function(){var t=this,n=this.state,r=n.canSetup,o=n.isAuthenticated,s=n.isVerified,a=n.needReauthenticate,c=n.hasSearchConsoleProperty,l=n.connectURL,u=n.isSiteKitConnected;if(this.isSetupFinished()){var d=Object(C.n)("googlesitekit-dashboard",{notification:"authentication_success"});Object(_.delay)((function(){e.location.replace(d)}),500,"later")}var p=this.getApplicableSteps(),g=this.currentStep(p),m=p[g].Component,h=i.createElement(m,{siteConnectedSetup:this.siteConnectedSetup,connectURL:l,siteVerificationSetup:this.siteVerificationSetup,searchConsoleSetup:this.searchConsoleSetup,completeSetup:this.completeSetup,isSiteKitConnected:u,isAuthenticated:o,isVerified:s,needReauthenticate:a,hasSearchConsoleProperty:c,setErrorMessage:this.setErrorMessage,resetAndRestart:p.clientCredentials?this.resetAndRestart:void 0}),f=r,v=!f&&!o;return i.createElement(b.Fragment,null,i.createElement(y.a,null),i.createElement("div",{className:"googlesitekit-wizard"},i.createElement("div",{className:"mdc-layout-grid"},i.createElement("div",{className:"mdc-layout-grid__inner"},i.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},i.createElement(S.a,null,i.createElement("section",{className:"googlesitekit-wizard-progress"},i.createElement("div",{className:"mdc-layout-grid"},i.createElement("div",{className:"mdc-layout-grid__inner"},f&&i.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},i.createElement("div",{className:"googlesitekit-wizard-progress__steps"},Object.keys(p).map((function(e,n){return i.createElement(O.a,{key:p[e].title,currentStep:g===e,title:p[e].title,step:n+1,status:t.stepStatus(p,e),warning:p[e].warning,error:p[e].error,stepKey:e})})))))),v&&i.createElement("div",{className:"googlesitekit-setup__footer"},i.createElement("div",{className:"mdc-layout-grid"},i.createElement("div",{className:"mdc-layout-grid__inner"},i.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},i.createElement("h1",{className:"googlesitekit-setup__title"},Object(k.__)("Authenticate Site Kit","google-site-kit")),i.createElement("p",{className:"googlesitekit-setup__description"},Object(k.__)("Please sign into your Google account to begin.","google-site-kit")),i.createElement(E.a,{href:"#",onClick:function(){Object(C.z)("plugin_setup","signin_with_google"),document.location=l}},Object(k.__)("Sign in with Google","google-site-kit"))))))),f&&h))))))}}]),n}(b.Component);t.default=R}.call(this,n(14),n(1))},345:function(e,t,n){"use strict";var i=n(346),r=n(347),o=n(349),s=n(351),a=n(0),c={authentication:{title:Object(a.__)("Authenticate","google-site-kit"),required:!0,isApplicable:function(){return!0},isCompleted:function(e){return e.isSiteKitConnected&&e.isAuthenticated&&!e.needReauthenticate},Component:i.a},verification:{title:Object(a.__)("Verify URL","google-site-kit"),required:!0,isApplicable:function(){return!0},isCompleted:function(e){return e.isSiteKitConnected&&e.isAuthenticated&&e.isVerified},Component:r.a},seachConsoleProperty:{title:Object(a.__)("Connect Search Console","google-site-kit"),required:!0,isApplicable:function(){return!0},isCompleted:function(e){return e.isSiteKitConnected&&e.isAuthenticated&&e.isVerified&&e.hasSearchConsoleProperty},Component:o.a},completeSetup:{title:Object(a.__)("Finish","google-site-kit"),required:!1,isApplicable:function(){return!0},isCompleted:function(e){return e.isSiteKitConnected&&e.isAuthenticated&&e.isVerified&&e.hasSearchConsoleProperty},Component:s.a}};t.a=c},346:function(e,t,n){"use strict";(function(e){var i=n(5),r=n.n(i),o=n(6),s=n.n(o),a=n(7),c=n.n(a),l=n(8),u=n.n(l),d=n(9),p=n.n(d),g=n(2),m=n.n(g),h=n(32),f=n(17),v=n(3),_=n(258),k=n(65),b=n(0),y=n(1),E=function(t){function n(){return r()(this,n),c()(this,u()(n).apply(this,arguments))}return p()(n,t),s()(n,[{key:"render",value:function(){var t=this.props,n=t.connectURL,i=t.needReauthenticate,r=t.resetAndRestart;return e.createElement("section",{className:"googlesitekit-wizard-step googlesitekit-wizard-step--two"},e.createElement("div",{className:"mdc-layout-grid"},e.createElement("div",{className:"mdc-layout-grid__inner"},e.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},e.createElement("h2",{className:" googlesitekit-heading-3 googlesitekit-wizard-step__title "},Object(b.__)("Authenticate with Google","google-site-kit")),e.createElement("p",null,Object(b.__)("Please sign into your Google account to begin.","google-site-kit")),i&&e.createElement("p",{className:"googlesitekit-error-text"},Object(b.__)("You did not grant access to one or more of the requested scopes. Please grant all scopes that you are prompted for.","google-site-kit")),e.createElement("p",null,e.createElement(h.a,{onClick:function(){Object(v.z)("plugin_setup","signin_with_google"),document.location=n}},Object(b.__)("Sign in with Google","google-site-kit")),r&&e.createElement(f.a,{className:"googlesitekit-wizard-step__back",onClick:r},Object(b.__)("Back","google-site-kit"))),e.createElement("div",{className:"googlesitekit-wizard-step__action googlesitekit-wizard-step__action--justify"},e.createElement(_.a,null),e.createElement(k.a,null))))))}}]),n}(y.Component);E.propTypes={connectURL:m.a.string.isRequired,resetAndRestart:m.a.func},t.a=E}).call(this,n(1))},347:function(e,t,n){"use strict";(function(e){var i=n(64),r=n.n(i),o=n(5),s=n.n(o),a=n(6),c=n.n(a),l=n(7),u=n.n(l),d=n(8),p=n.n(d),g=n(9),m=n.n(g),h=n(2),f=n.n(h),v=n(348),_=n(1),k=function(t){function n(){return s()(this,n),u()(this,p()(n).apply(this,arguments))}return m()(n,t),c()(n,[{key:"render",value:function(){var t=!this.props.isVerified;return e.createElement("section",{className:"googlesitekit-wizard-step googlesitekit-wizard-step--three"},e.createElement("div",{className:"mdc-layout-grid"},e.createElement("div",{className:"mdc-layout-grid__inner"},e.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},e.createElement(v.a,r()({shouldSetup:t},this.props))))))}}]),n}(_.Component);k.propTypes={siteVerificationSetup:f.a.func.isRequired},t.a=k}).call(this,n(1))},348:function(e,t,n){"use strict";(function(e,i){var r=n(11),o=n.n(r),s=n(5),a=n.n(s),c=n(6),l=n.n(c),u=n(7),d=n.n(u),p=n(8),g=n.n(p),m=n(15),h=n.n(m),f=n(9),v=n.n(f),_=n(10),k=n(32),b=n(31),y=n(26),E=n(2),S=n.n(E),w=n(3),C=n(65),N=n(0),O=n(1),R=function(t){function n(e){var t;a()(this,n);var i=(t=d()(this,g()(n).call(this,e))).props,r=i.isAuthenticated,o=i.shouldSetup;return t.state={loading:r&&o,loadingMsg:Object(N.__)("Getting your verified sites...","google-site-kit"),siteURL:" ",selectedURL:"",errorCode:!1,errorMsg:""},t.onProceed=t.onProceed.bind(h()(t)),t}return v()(n,t),l()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isAuthenticated,n=e.shouldSetup;t&&n&&this.requestSitePropertyList()}},{key:"requestSitePropertyList",value:function(){var t,n,i,r,s,a=this,c=this.props.setErrorMessage;o.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,o.a.awrap(_.c.get(_.b,"site-verification","verification"));case 3:if(t=l.sent,n=t.verified,i=t.identifier,!n){l.next=16;break}return Object(w.z)("verification_setup","verification_check_true"),l.next=10,o.a.awrap(a.insertSiteVerification(i));case 10:if(!0!==l.sent.verified){l.next=14;break}return a.props.siteVerificationSetup(!0),l.abrupt("return",!0);case 14:l.next=17;break;case 16:Object(w.z)("verification_setup","verification_check_false");case 17:a.setState({loading:!1,siteURL:i}),l.next=26;break;case 20:l.prev=20,l.t0=l.catch(0),r=l.t0.message,Object(w.A)(l.t0.message)&&(s=JSON.parse(l.t0.message),r=s.error.message||l.t0.message),c(r),a.setState({loading:!1,errorCode:l.t0.code,errorMsg:r,siteURL:e.googlesitekit.admin.siteURL});case 26:case"end":return l.stop()}}),null,null,[[0,20]])}},{key:"insertSiteVerification",value:function(e){return o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.awrap(_.c.set(_.b,"site-verification","verification",{siteURL:e}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))}},{key:"onProceed",value:function(){var t,n,i,r;return o.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t=this.props.setErrorMessage,n=this.state.siteURL?this.state.siteURL:e.googlesitekit.admin.siteURL,t(""),this.setState({loading:!0,loadingMsg:Object(N.__)("Verifying...","google-site-kit"),errorCode:!1,errorMsg:""}),s.prev=4,s.next=7,o.a.awrap(this.insertSiteVerification(n));case 7:!0===s.sent.verified&&(Object(w.z)("verification_setup","verification_insert_tag"),this.props.siteVerificationSetup(!0)),s.next=17;break;case 11:s.prev=11,s.t0=s.catch(4),i=s.t0.message,Object(w.A)(s.t0.message)&&(r=JSON.parse(s.t0.message),i=r.error.message||s.t0.message),t(i),this.setState({loading:!1,errorCode:s.t0.code,errorMsg:i});case 17:case"end":return s.stop()}}),null,this,[[4,11]])}},{key:"renderForm",value:function(){var e=this.state,t=e.loading,n=e.loadingMsg,r=e.siteURL,o=i.createElement(O.Fragment,null,n&&i.createElement("p",null,n),i.createElement(b.a,null));return t?o:i.createElement(O.Fragment,null,i.createElement("div",{className:"googlesitekit-wizard-step__inputs"},i.createElement(y.l,{label:Object(N.__)("Website Address","google-site-kit"),name:"siteProperty",floatingLabelClassName:"mdc-floating-label--float-above",outlined:!0,disabled:!0},i.createElement(y.b,{value:r}))),i.createElement("div",{className:"googlesitekit-wizard-step__action googlesitekit-wizard-step__action--justify"},i.createElement(k.a,{onClick:this.onProceed},Object(N.__)("Continue","google-site-kit")),i.createElement(C.a,null)))}},{key:"render",value:function(){var e=this.props,t=e.isAuthenticated,r=e.shouldSetup,o=this.state.errorMsg;return r?i.createElement(O.Fragment,null,i.createElement("h2",{className:" googlesitekit-heading-3 googlesitekit-wizard-step__title "},Object(N.__)("Verify URL","google-site-kit")),i.createElement("p",{className:"googlesitekit-wizard-step__text"},Object(N.__)("We will need to verify your URL for Site Kit.","google-site-kit")),o&&0<o.length&&i.createElement("p",{className:"googlesitekit-error-text"},o),t&&this.renderForm()):n.renderSetupDone()}}],[{key:"renderSetupDone",value:function(){return i.createElement(O.Fragment,null,i.createElement("h2",{className:" googlesitekit-heading-3 googlesitekit-wizard-step__title "},Object(N.__)("Verify URL","google-site-kit")),i.createElement("p",{className:"googlesitekit-wizard-step__text"},Object(N.__)("Congratulations, your site has been verified!","google-site-kit")))}}]),n}(O.Component);R.propTypes={isAuthenticated:S.a.bool.isRequired,shouldSetup:S.a.bool.isRequired,siteVerificationSetup:S.a.func.isRequired,completeSetup:S.a.func,setErrorMessage:S.a.func.isRequired},t.a=R}).call(this,n(14),n(1))},349:function(e,t,n){"use strict";(function(e){var i=n(64),r=n.n(i),o=n(5),s=n.n(o),a=n(6),c=n.n(a),l=n(7),u=n.n(l),d=n(8),p=n.n(d),g=n(9),m=n.n(g),h=n(2),f=n.n(h),v=n(350),_=n(1),k=function(t){function n(){return s()(this,n),u()(this,p()(n).apply(this,arguments))}return m()(n,t),c()(n,[{key:"render",value:function(){var t=this.props,n=t.isVerified,i=t.hasSearchConsoleProperty,o=n&&!i;return e.createElement("section",{className:"googlesitekit-wizard-step googlesitekit-wizard-step--four"},e.createElement("div",{className:"mdc-layout-grid"},e.createElement("div",{className:"mdc-layout-grid__inner"},e.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},o?e.createElement(v.a,r()({shouldSetup:o},this.props)):v.a.connected()))))}}]),n}(_.Component);k.propTypes={searchConsoleSetup:f.a.func.isRequired},t.a=k}).call(this,n(1))},350:function(e,t,n){"use strict";(function(e,i){var r=n(11),o=n.n(r),s=n(5),a=n.n(s),c=n(6),l=n.n(c),u=n(7),d=n.n(u),p=n(8),g=n.n(p),m=n(15),h=n.n(m),f=n(9),v=n.n(f),_=n(10),k=n(31),b=n(26),y=n(2),E=n.n(y),S=n(32),w=n(65),C=n(3),N=n(0),O=n(1),R=function(t){function n(t){var i;a()(this,n),i=d()(this,g()(n).call(this,t));var r=e.googlesitekit.admin.siteURL;return i.state={loading:!0,sites:!1,selectedURL:r,siteURL:r,connected:!1,errorCode:!1,errorMsg:""},i.handleURLSelect=i.handleURLSelect.bind(h()(i)),i.insertPropertyToSearchConsole=i.insertPropertyToSearchConsole.bind(h()(i)),i.submitPropertyEventHandler=i.submitPropertyEventHandler.bind(h()(i)),i}return v()(n,t),l()(n,[{key:"componentDidMount",value:function(){var e,t,n;return o.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(e=this.props,t=e.isAuthenticated,n=e.shouldSetup,t&&n){i.next=3;break}return i.abrupt("return");case 3:this.requestSearchConsoleSiteList();case 4:case"end":return i.stop()}}),null,this)}},{key:"requestSearchConsoleSiteList",value:function(){var e,t=this,n=this.props.setErrorMessage;o.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,o.a.awrap(_.c.get(_.b,"search-console","matched-sites"));case 3:if(1!==(e=i.sent).length){i.next=9;break}return i.next=7,o.a.awrap(t.insertPropertyToSearchConsole(e[0].siteURL));case 7:return t.props.searchConsoleSetup(e[0].siteURL),i.abrupt("return");case 9:if(e.length){i.next=11;break}throw{code:"no_property_matched",message:Object(N.__)("Your site has not been added to Search Console yet. Would you like to add it now?","google-site-kit")};case 11:throw n(""),t.setState({loading:!1,selectedURL:e[0].siteURL,sites:e}),{code:"multiple_properties_matched",message:Object(N.sprintf)(
/* translators: %d: the number of matching properties */
Object(N.__)("We found %d existing accounts. Please choose which one to use below.","google-site-kit"),e.length)};case 16:i.prev=16,i.t0=i.catch(0),n(i.t0.message),t.setState({loading:!1,errorCode:i.t0.code,errorMsg:i.t0.message});case 20:case"end":return i.stop()}}),null,null,[[0,16]])}},{key:"insertPropertyToSearchConsole",value:function(e){var t,n=arguments;return o.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=n.length>1&&void 0!==n[1]&&n[1],i.next=3,o.a.awrap(_.c.set(_.b,"search-console","site",{siteURL:e}));case 3:t&&Object(C.z)("search_console_setup","add_new_sc_property"),this.setState({loading:!1,connected:!0});case 5:case"end":return i.stop()}}),null,this)}},{key:"submitPropertyEventHandler",value:function(){var e=this,t=this.state,n=t.selectedURL,i=t.errorCode,r=this.props.setErrorMessage;o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.awrap(e.insertPropertyToSearchConsole(n,"no_property_matched"===i));case 3:r(""),e.props.searchConsoleSetup(n),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),r(t.t0.message[0].message),e.setState({loading:!1,errorCode:t.t0.code,errorMsg:t.t0.message[0].message});case 11:case"end":return t.stop()}}),null,null,[[0,7]])}},{key:"handleURLSelect",value:function(e,t){this.setState({selectedURL:t.getAttribute("data-value")})}},{key:"matchedForm",value:function(){var e=this.state,t=e.sites,n=e.selectedURL;if(!t)return null;var r=t.map((function(e){var t=e.siteURL;return t.startsWith("sc-domain:")&&(
/* translators: %s: Search Console property domain name */
t=Object(N.sprintf)(Object(N.__)("%s (domain property)","google-site-kit"),t.replace(/^sc-domain:/,""))),{label:t,value:e.siteURL}}));return i.createElement(O.Fragment,null,i.createElement("div",{className:"googlesitekit-setup-module__inputs"},i.createElement(b.k,{enhanced:!0,name:"siteProperty",label:Object(N.__)("Choose URL","google-site-kit"),outlined:!0,onEnhancedChange:this.handleURLSelect,options:r,value:n})),i.createElement("div",{className:"googlesitekit-wizard-step__action googlesitekit-wizard-step__action--justify"},i.createElement(S.a,{onClick:this.submitPropertyEventHandler},Object(N.__)("Continue","google-site-kit")),i.createElement(w.a,null)))}},{key:"noSiteForm",value:function(){var e=this.state.siteURL;return i.createElement(O.Fragment,null,i.createElement("div",{className:"googlesitekit-setup-module__inputs"},i.createElement(b.l,{label:Object(N.__)("Website Address","google-site-kit"),name:"siteProperty",floatingLabelClassName:"mdc-floating-label--float-above",outlined:!0,disabled:!0},i.createElement(b.b,{value:e}))),i.createElement("div",{className:"googlesitekit-wizard-step__action googlesitekit-wizard-step__action--justify"},i.createElement(S.a,{onClick:this.submitPropertyEventHandler},Object(N.__)("Continue","google-site-kit")),i.createElement(w.a,null)))}},{key:"renderForm",value:function(){var e=this.state,t=e.loading,n=e.sites;return t?i.createElement(O.Fragment,null,i.createElement("p",null,Object(N.__)("We’re locating your Search Console account.","google-site-kit")),i.createElement(k.a,null)):0===n.length?this.noSiteForm():this.matchedForm()}},{key:"render",value:function(){var e=this.props,t=e.isAuthenticated,r=e.shouldSetup,o=this.state,s=o.errorMsg,a=o.connected;return!r||a?n.connected():i.createElement("section",{className:"googlesitekit-setup-module googlesitekit-setup-module--search-console"},i.createElement("h2",{className:" googlesitekit-heading-3 googlesitekit-setup-module__title "},Object(N._x)("Search Console","Service name","google-site-kit")),s&&0<s.length&&i.createElement("p",{className:"googlesitekit-error-text"},s),t&&r&&this.renderForm())}}],[{key:"connected",value:function(){return i.createElement("section",{className:"googlesitekit-setup-module googlesitekit-setup-module--search-console"},i.createElement("h2",{className:" googlesitekit-heading-3 googlesitekit-setup-module__title "},Object(N._x)("Search Console","Service name","google-site-kit")),i.createElement("p",{className:"googlesitekit-setup-module__text--no-margin"},Object(N.__)("Your Search Console is set up with Site Kit.","google-site-kit")))}}]),n}(O.Component);R.propTypes={isAuthenticated:E.a.bool.isRequired,shouldSetup:E.a.bool.isRequired,searchConsoleSetup:E.a.func.isRequired,setErrorMessage:E.a.func.isRequired},t.a=R}).call(this,n(14),n(1))},351:function(e,t,n){"use strict";(function(e,i){var r=n(5),o=n.n(r),s=n(6),a=n.n(s),c=n(7),l=n.n(c),u=n(8),d=n.n(u),p=n(9),g=n.n(p),m=n(2),h=n.n(m),f=n(32),v=n(3),_=n(0),k=n(1),b=function(t){function n(t){var i;return o()(this,n),i=l()(this,d()(n).call(this,t)),e.googlesitekit.setup.hasSearchConsoleProperty?Object(v.z)("plugin_setup","user_verified"):Object(v.z)("plugin_setup","site_verified"),i}return g()(n,t),a()(n,[{key:"render",value:function(){return i.createElement("section",{className:"googlesitekit-wizard-step googlesitekit-wizard-step--five"},i.createElement("div",{className:"mdc-layout-grid"},i.createElement("div",{className:"mdc-layout-grid__inner"},i.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-4-phone mdc-layout-grid__cell--span-5-tablet mdc-layout-grid__cell--span-9-desktop "},i.createElement("h2",{className:" googlesitekit-heading-3 googlesitekit-wizard-step__title "},Object(_.__)("Congratulations!","google-site-kit")),i.createElement("p",null,Object(_.__)("You successfully completed the Site Kit setup and connected Search Console. Check the dashboard for more services to connect.","google-site-kit")),i.createElement("div",{className:"googlesitekit-wizard-step__action"},i.createElement(f.a,{id:"wizard-step-five-proceed",onClick:this.props.completeSetup},Object(_.__)("Go to Dashboard","google-site-kit")))),i.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-4-phone mdc-layout-grid__cell--span-3-tablet mdc-layout-grid__cell--span-3-desktop "},i.createElement("div",{className:"googlesitekit-rocket"},i.createElement("img",{className:"googlesitekit-rocket__body",alt:"",src:e.googlesitekit.admin.assetsRoot+"images/rocket-body.png"}),i.createElement("img",{className:"googlesitekit-rocket__clouds",alt:"",src:e.googlesitekit.admin.assetsRoot+"images/rocket-clouds.png"}),i.createElement("img",{className:"googlesitekit-rocket__dust",alt:"",src:e.googlesitekit.admin.assetsRoot+"images/rocket-dust.png"}))))))}}]),n}(k.Component);b.propTypes={completeSetup:h.a.func.isRequired},t.a=b}).call(this,n(14),n(1))},352:function(e,t,n){"use strict";var i=n(5),r=n.n(i),o=n(6),s=n.n(o),a=n(7),c=n.n(a),l=n(8),u=n.n(l),d=n(9),p=n.n(d),g=n(2),m=n.n(g),h=n(23),f=n(1),v=n.n(f),_=function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return p()(t,e),s()(t,[{key:"render",value:function(){var e=this.props,t=e.currentStep,n=e.step,i=e.title,r=e.status,o=e.warning,s=e.error,a=e.stepKey,c=r;o?c="warning":s&&(c="error");var l=!1;switch(c){case"warning":case"error":l=v.a.createElement(h.a,{id:"exclamation",height:"12",width:"2"});break;case"completed":l=v.a.createElement(h.a,{id:"check",height:"12",width:"16"})}return v.a.createElement("div",{className:"\n\t\t\t\tgooglesitekit-wizard-progress-step\n\t\t\t\tgooglesitekit-wizard-progress-step--".concat(n,"\n\t\t\t\t").concat(t?"googlesitekit-wizard-progress-step--current":"","\n\t\t\t\tgooglesitekit-wizard-progress-step--").concat(a,"\n\t\t\t")},v.a.createElement("div",{className:"googlesitekit-wizard-progress-step__number-wrapper"},v.a.createElement("div",{className:"\n\t\t\t\t\t\tgooglesitekit-wizard-progress-step__number\n\t\t\t\t\t\tgooglesitekit-wizard-progress-step__number--".concat(c,"\n\t\t\t\t\t")},v.a.createElement("span",{className:"\n\t\t\t\t\t\t\tgooglesitekit-wizard-progress-step__number-text\n\t\t\t\t\t\t\tgooglesitekit-wizard-progress-step__number-text--".concat(c,"\n\t\t\t\t\t\t")},n),l&&v.a.createElement("span",{className:"\n\t\t\t\t\t\t\t\tgooglesitekit-wizard-progress-step__number-icon\n\t\t\t\t\t\t\t\tgooglesitekit-wizard-progress-step__number-icon--".concat(c,"\n\t\t\t\t\t\t\t")},l))),v.a.createElement("p",{className:"googlesitekit-wizard-progress-step__text"},i))}}]),t}(f.Component);_.propTypes={currentStep:m.a.bool.isRequired,step:m.a.number.isRequired,title:m.a.string,status:m.a.string,warning:m.a.bool,error:m.a.bool},_.defaultProps={title:"",status:"",warning:!1,error:!1,removeFirstStep:!1},t.a=_},65:function(e,t,n){"use strict";(function(e){var i=n(0),r=n(17);t.a=function(){var t=Object(i.__)("Need help?","google-site-kit");return e.createElement(r.a,{className:"googlesitekit-help-link",href:"https://sitekit.withgoogle.com/documentation/",external:!0},t)}}).call(this,n(1))}}]);