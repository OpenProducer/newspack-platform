(()=>{"use strict";const e=window.React,t=window.wp.blocks,n=window.wp.blockEditor,a=window.wp.i18n,c=window.wp.components,l=window.wp.data,o=window.wp.element,r=window.wp.coreData,i=(0,l.withSelect)(((e,{clientId:t})=>({innerBlocks:e("core/block-editor").getBlocksByClientId(t)})))((({attributes:i,setAttributes:s,isSelected:p,innerBlocks:d,clientId:m})=>{const u=(0,n.useBlockProps)({}),g=(0,l.useSelect)((e=>e("core/editor").getCurrentPostType()),[]),[w,k]=(0,r.useEntityProp)("postType",g,"meta");(0,o.useEffect)((()=>{d.length&&k({...w,podcast_transcript:(0,t.serialize)(d[0].innerBlocks)})}),[d]);const b=(0,l.useSelect)((e=>e("core/block-editor").hasSelectedInnerBlock(m)));console.log(b);const{display:B,linkText:h}=i;return(0,e.createElement)("section",{...u},(p||b)&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(c.Card,null,(0,e.createElement)(c.CardBody,null,(0,e.createElement)(c.RadioControl,{label:(0,a.__)("Transcript Display","simple-podcasting"),selected:B,options:[{label:(0,a.__)("Display Transcript on Post","simple-podcasting"),value:"post"},{label:(0,a.__)("Display Link to Transcript","simple-podcasting"),value:"link"},{label:(0,a.__)("Do not display - only show link in RSS feed","simple-podcasting"),value:"none"}],onChange:e=>s({display:e})}))),(0,e.createElement)("br",null)),"none"===B&&!p&&(0,e.createElement)(c.Placeholder,{icon:"microphone",label:(0,a.__)("Podcast Transcript","simple-podcasting")}),"link"===B&&(0,e.createElement)(n.RichText,{tagName:"a",value:h,onChange:e=>s({linkText:e}),placeholder:(0,a.__)("Transcript Link","simple-podcasting"),allowedFormats:[]}),(p||b||"post"===B)&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("section",null,(0,e.createElement)(n.InnerBlocks,{allowedBlocks:["core/paragraph","podcasting/podcast-transcript-cite","podcasting/podcast-transcript-time"]}))))}));(0,t.registerBlockType)("podcasting/podcast-transcript-cite",{edit:({attributes:a,attributes:{text:c},setAttributes:l,clientId:o,onReplace:r})=>{const i=(0,n.useBlockProps)();return(0,e.createElement)(n.RichText,{tagName:"cite",value:c,onChange:e=>l({text:e}),allowedFormats:[],withoutInteractiveFormatting:!0,onSplit:(e,n)=>{let c;return c=n||e?(0,t.createBlock)("podcasting/podcast-transcript-cite",{...a,content:e}):(0,t.createBlock)("core/paragraph"),n&&(c.clientId=o),c},onReplace:r,...i})},save:({attributes:{text:t}})=>(0,e.createElement)("cite",null,t)}),(0,t.registerBlockType)("podcasting/podcast-transcript-time",{edit:({attributes:a,attributes:{text:c},setAttributes:l,clientId:o,onReplace:r})=>{const i=(0,n.useBlockProps)();return(0,e.createElement)(n.RichText,{tagName:"time",value:c,onChange:e=>l({text:e}),allowedFormats:[],withoutInteractiveFormatting:!0,onSplit:(e,n)=>{let c;return c=n||e?(0,t.createBlock)("podcasting/podcast-transcript-time",{...a,content:e}):(0,t.createBlock)("core/paragraph"),n&&(c.clientId=o),c},onReplace:r,...i})},save:({attributes:{text:t}})=>(0,e.createElement)("time",null,t)}),(0,t.registerBlockType)("podcasting/podcast-transcript",{edit:i,save:()=>(0,e.createElement)(n.InnerBlocks.Content,null)})})();