(()=>{"use strict";const e=window.React,t=window.wp.plugins,a=window.wp.editPost,s=window.wp.i18n,l=window.wp.components,o=window.wp.blockEditor,n=window.wp.element,i=window.wp.data,{store:c}=wp.editor,{store:d}=wp.coreData,r={per_page:-1,orderby:"name",order:"asc",_fields:"id,name,parent",context:"view"},m=({isModalOpen:t,closeModal:a})=>{const[i,c]=(0,n.useState)(""),[r,m]=(0,n.useState)(""),[p,g]=(0,n.useState)(""),[_,u]=(0,n.useState)(""),[w,h]=(0,n.useState)(0),[y,E]=(0,n.useState)(""),[x,v]=(0,n.useState)(!1),[C,b]=(0,n.useState)(!1),P={marginBottom:"26px"};if(!t)return!1;const S=Object.keys(podcastingShowPluginVars.categories).map((e=>({value:e,label:podcastingShowPluginVars.categories[e]})));return(0,e.createElement)(l.Modal,{title:C?(0,s.__)("Podcast created!","simple-podcasting"):(0,s.__)("Add New Podcast","simple-podcasting"),style:{maxWidth:"645px",width:"100%"},onRequestClose:e=>{e.target.closest(".podcasting__select-image-btn")||a()}},C?(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.Button,{variant:"link",text:(0,s.__)("Add another Podcast","simple-podcasting"),onClick:()=>{b(!1),c(""),g(""),u(""),h(0),E("")}})):(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"podcasting__modal-field-row",style:P},(0,e.createElement)(l.TextControl,{className:"podcasting__modal-name-field",label:(0,s.__)("Podcast name*","simple-podcasting"),help:(0,s.__)("This is the name that listeners will see when searching or subscribing.","simple-podcasting"),value:i,onChange:e=>c(e),required:!0})),(0,e.createElement)("div",{className:"podcasting__modal-field-row",style:P},(0,e.createElement)(l.TextControl,{className:"podcasting__modal-artist-field",label:(0,s.__)("Artist name*","simple-podcasting"),help:(0,s.__)("Whoâ€™s the artist or author of your podcast show that listeners will see?","simple-podcasting"),value:r,onChange:e=>m(e),required:!0})),(0,e.createElement)("div",{className:"podcasting__modal-field-row",style:P},(0,e.createElement)(l.SelectControl,{className:"podcasting__modal-category-field",label:(0,s.__)("Category*","simple-podcasting"),help:(0,s.__)("Select the category listeners will use to discover your show when browsing  podcatchers. You can also add subcategories later.","simple-podcasting"),options:S,value:p,onChange:e=>g(e),required:!0})),(0,e.createElement)("div",{className:"podcasting__modal-field-row",style:P},(0,e.createElement)(l.TextareaControl,{className:"podcasting__modal-summary-field",label:(0,s.__)("Summary*","simple-podcasting"),help:(0,s.__)("Briefly describe to your listeners what your show is about. (No HTML please.)","simple-podcasting"),rows:6,value:_,onChange:e=>u(e),required:!0})),(0,e.createElement)("div",{className:"podcasting__modal-field-row",style:P},(0,e.createElement)(o.MediaUploadCheck,null,(0,e.createElement)(o.MediaUpload,{onSelect:e=>{h(e.id),E(e.url)},allowedTypes:["image"],value:w,render:({open:t})=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.BaseControl,{label:(0,s.__)("Cover Image*","simple-podcasting")}),(0,e.createElement)(l.Flex,{justify:"normal"},(0,e.createElement)(l.FlexItem,null,(0,e.createElement)(l.Button,{className:"podcasting__select-image-btn",variant:"secondary",text:w?(0,s.__)("Replace Image","simple-podcasting"):(0,s.__)("Select Image","simple-podcasting"),onClick:t})),w?(0,e.createElement)(l.FlexItem,null,(0,e.createElement)(l.Button,{className:"podcasting__remove-image-btn",variant:"secondary",text:(0,s.__)("Remove","simple-podcasting"),isDestructive:!0,onClick:()=>{h(0),E("")}})):null),w?(0,e.createElement)("div",{className:"podcasting-cover-preview",style:{maxWidth:"256px",marginTop:"1rem"}},(0,e.createElement)("img",{src:y,style:{width:"100%"}})):null,(0,e.createElement)(l.BaseControl,{help:(0,s.__)("Square images are required to properly display within podcatcher apps.Minimum size: 1400 px x 1400 px. Maximum size: 2048 px x 2048 px.","simple-podcasting")}))}))),(0,e.createElement)(l.Flex,{justify:"normal",gap:9},(0,e.createElement)(l.FlexItem,null,(0,e.createElement)(l.Button,{className:"podcasting__create-podcast-btn",variant:"primary",text:(0,s.__)("Create Podcast","simple-podcasting"),disabled:!(i&&""!==p&&r&&_&&w),onClick:async()=>{v(!0);try{await wp.data.dispatch(d).saveEntityRecord("taxonomy","podcasting_podcasts",{name:i,meta:{podcasting_summary:_,podcasting_category_1:p,podcasting_image:w,podcasting_image_url:y,podcasting_talent_name:r}})&&b(!0)}catch(e){v(!1)}v(!1)},isBusy:x})),(0,e.createElement)(l.FlexItem,null,(0,e.createElement)(l.Button,{variant:"link",text:(0,s.__)("Cancel","simple-podcasting"),onClick:a})))))};(0,t.registerPlugin)("podcasting-create-podcast-show",{render:()=>{const{allPodcasts:t,attachedPodcasts:o,currentPostId:p}=(0,i.useSelect)((e=>{const{getEntityRecords:t}=e(d),{getCurrentPostId:a}=e(c);return{allPodcasts:t("taxonomy","podcasting_podcasts",r)||[],attachedPodcasts:t("taxonomy","podcasting_podcasts",{post:a()})||[],currentPostId:a()}}));(0,n.useEffect)((()=>{(0,i.dispatch)(a.store).removeEditorPanel("taxonomy-panel-podcasting_podcasts")}),[]);const[g,_]=(0,n.useState)(!1),u=()=>_(!0),w=o.map((e=>e.id)),[h,y]=(0,n.useState)([]),[E,x]=(0,n.useState)(!0);return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(a.PluginDocumentSettingPanel,{title:(0,s.__)("Podcasts","simple-podcasting"),className:"podcasting__podcast-list"},t.map(((t,a)=>(0,e.createElement)(l.CheckboxControl,{className:"podcasting__podcast-list-item",key:a,label:t.name,onChange:e=>function(e,t){let a=[...w,...h,t];a=e?[...w,...h,t]:[...w,...h].filter((e=>e!==t)),(0,i.dispatch)(d).editEntityRecord("postType","post",p,{podcasting_podcasts:a}),y(a),x(!1)}(e,t.id),checked:E?w.includes(t.id):h.includes(t.id)}))),(0,e.createElement)(l.Button,{variant:"link",text:(0,s.__)("Add New Podcast","simple-podcasting"),onClick:u,style:{marginTop:"12px"},className:"podcasting__add-new-podcast"})),(0,e.createElement)(m,{isModalOpen:g,openModal:u,closeModal:()=>_(!1)}))}})})();