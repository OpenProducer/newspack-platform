var q=Object.create;var g=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var j=Object.getOwnPropertyNames;var E=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var p=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var K=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of j(t))!F.call(e,s)&&s!==r&&g(e,s,{get:()=>t[s],enumerable:!(i=M(t,s))||i.enumerable});return e};var o=(e,t,r)=>(r=e!=null?q(E(e)):{},K(t||!e||!e.__esModule?g(r,"default",{value:e,enumerable:!0}):r,e));var c=p((O,m)=>{m.exports=window.wp.data});var y=p((Q,w)=>{w.exports=window.wp.coreData});var V=p((W,h)=>{h.exports=window.wp.element});var f=p((Y,x)=>{x.exports=window.wp.preferences});var A=o(c()),L=o(y());function u(e,t,r){return`dataviews-${e}-${t}-${r}`}var v=o(V()),P=o(c()),R=o(f());var T=o(c()),I=o(f());async function d(e){let{kind:t,name:r,slug:i,defaultView:s,queryParams:a}=e,n=u(t,r,i),D=(0,T.select)(I.store).get("core/views",n)??s,k=a?.page??1,U=a?.search??"";return{...D,page:k,search:U}}var l={type:"grid",perPage:20,sort:{field:"title",direction:"asc"},fields:["author","active","slug"],titleField:"title",descriptionField:"description",mediaField:"preview",filters:[]};function $(e){return e==="user"?{...l,sort:{field:"date",direction:"desc"},fields:["author","active","slug","theme"]}:e==="active"||!e?{...l}:{...l,filters:[{field:"author",operator:"isAny",value:[e]}]}}async function S(e,t){let r=$(e);return d({kind:"postType",name:"wp_template",slug:e??"active",defaultView:r,queryParams:t})}function _(e){let t={};return e.perPage!==void 0&&(t.per_page=e.perPage),e.page!==void 0&&(t.page=e.page),[void 0,""].includes(e.search)||(t.search=e.search),e.sort?.field!==void 0&&(t.orderby=e.sort.field),e.sort?.direction!==void 0&&(t.order=e.sort.direction),t}var ae={async canvas(e){let{params:t,search:r}=e,i=await S(t.activeView,{page:r.page,search:r.search});if(i.type!=="list")return;if(r.postIds&&r.postIds.length>0){let n=r.postIds[0].toString();return{postType:"wp_template",postId:n,isPreview:!0,editLink:`/types/wp_template/edit/${encodeURIComponent(n)}`}}let s=_(i),a=await(0,A.resolveSelect)(L.store).getEntityRecords("postType","wp_template",{...s,per_page:1});if(a&&a.length>0){let n=a[0].id.toString();return{postType:"wp_template",postId:n,isPreview:!0,editLink:`/types/wp_template/edit/${encodeURIComponent(n)}`}}}};export{ae as route};
