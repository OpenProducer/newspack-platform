var j=Object.create;var h=Object.defineProperty;var q=Object.getOwnPropertyDescriptor;var U=Object.getOwnPropertyNames;var K=Object.getPrototypeOf,O=Object.prototype.hasOwnProperty;var c=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var z=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of U(r))!O.call(e,s)&&s!==t&&h(e,s,{get:()=>r[s],enumerable:!(n=q(r,s))||n.enumerable});return e};var u=(e,r,t)=>(t=e!=null?j(K(e)):{},z(r||!e||!e.__esModule?h(t,"default",{value:e,enumerable:!0}):t,e));var p=c((R,w)=>{w.exports=window.wp.data});var d=c((B,v)=>{v.exports=window.wp.coreData});var x=c((G,V)=>{V.exports=window.wp.element});var m=c((H,T)=>{T.exports=window.wp.preferences});var k=u(p()),E=u(d());function g(e,r,t){return`dataviews-${e}-${r}-${t}`}var P=u(x()),_=u(p()),C=u(m());var S=u(p()),b=u(m());async function y(e){let{kind:r,name:t,slug:n,defaultView:s,queryParams:a}=e,o=g(r,t,n),i=(0,S.select)(b.store).get("core/views",o)??s,F=a?.page??1,$=a?.search??"";return{...i,page:F,search:$}}var L=u(p()),A=u(d()),l={type:"table",sort:{field:"date",direction:"desc"},fields:["author","status","date"],titleField:"title",mediaField:"featured_media",descriptionField:"excerpt"};var M=[{slug:"all",label:"All",view:{...l}},{slug:"publish",label:"Published",view:{...l,filters:[{field:"status",operator:"is",value:"publish"}]}},{slug:"draft",label:"Draft",view:{...l,filters:[{field:"status",operator:"is",value:"draft"}]}},{slug:"pending",label:"Pending",view:{...l,filters:[{field:"status",operator:"is",value:"pending"}]}},{slug:"private",label:"Private",view:{...l,filters:[{field:"status",operator:"is",value:"private"}]}},{slug:"trash",label:"Trash",view:{...l,filters:[{field:"status",operator:"is",value:"trash"}]}}];function N(e,r){return{...M.find(s=>s.slug===r)?.view||l,showLevels:e?.hierarchical}}async function D(e,r,t){let n=await(0,L.resolveSelect)(A.store).getPostType(e),s=N(n,r);return y({kind:"postType",name:e,slug:r??"all",defaultView:s,queryParams:t})}function I(e,r){let t={};if(e.perPage!==void 0&&(t.per_page=e.perPage),e.page!==void 0&&(t.page=e.page),[void 0,""].includes(e.search)||(t.search=e.search),e.sort?.field!==void 0){let i=e.sort.field;i==="attached_to"&&(i="parent"),t.orderby=i}e.sort?.direction!==void 0&&(t.order=e.sort.direction),e.showLevels&&(t.orderby_hierarchy=!0);let n=e.filters?.find(i=>i.field==="status");n?t.status=n.value:r==="attachment"?t.status="inherit":t.status="draft,future,pending,private,publish";let s=e.filters?.find(i=>i.field==="author");s&&s.operator==="is"?t.author=s.value:s&&s.operator==="isNot"&&(t.author_exclude=s.value);let a=e.filters?.find(i=>i.field==="comment_status");a&&a.operator==="is"?t.comment_status=a.value:a&&a.operator==="isNot"&&(t.comment_status_exclude=a.value);let o=e.filters?.find(i=>i.field==="media_type");o&&(t.media_type=o.value);let f=e.filters?.find(i=>i.field==="date");return f&&f.value&&(f.operator==="before"?t.before=f.value:f.operator==="after"&&(t.after=f.value)),r==="attachment"&&(t._embed="wp:attached-to"),t}var le={async canvas(e){let{params:r,search:t}=e,n=await D(r.type,r.slug,{page:t.page,search:t.search});if(n.type!=="list")return;if(t.postIds&&t.postIds.length>0){let o=t.postIds[0].toString();return{postType:r.type,postId:o,isPreview:!0,editLink:`/types/${r.type}/edit/${o}`}}let s=I(n,r.type),a=await(0,k.resolveSelect)(E.store).getEntityRecords("postType",r.type,{...s,per_page:1});if(a&&a.length>0){let o=a[0].id.toString();return{postType:r.type,postId:o,isPreview:!0,editLink:`/types/${r.type}/edit/${o}`}}}};export{le as route};
