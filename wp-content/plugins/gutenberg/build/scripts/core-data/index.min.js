"use strict";var wp;(wp||={}).coreData=(()=>{var Pd=Object.create;var Zn=Object.defineProperty;var Vd=Object.getOwnPropertyDescriptor;var Bd=Object.getOwnPropertyNames;var Fd=Object.getPrototypeOf,jd=Object.prototype.hasOwnProperty;var ne=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),jt=(t,e)=>{for(var r in e)Zn(t,r,{get:e[r],enumerable:!0})},La=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Bd(e))!jd.call(t,s)&&s!==r&&Zn(t,s,{get:()=>e[s],enumerable:!(n=Vd(e,s))||n.enumerable});return t};var x=(t,e,r)=>(r=t!=null?Pd(Fd(t)):{},La(e||!t||!t.__esModule?Zn(r,"default",{value:t,enumerable:!0}):r,t)),Gd=t=>La(Zn({},"__esModule",{value:!0}),t);var Ee=ne((NE,Ma)=>{Ma.exports=window.wp.data});var yt=ne((PE,Na)=>{"use strict";Na.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e instanceof Map&&r instanceof Map){if(e.size!==r.size)return!1;for(s of e.entries())if(!r.has(s[0]))return!1;for(s of e.entries())if(!t(s[1],r.get(s[0])))return!1;return!0}if(e instanceof Set&&r instanceof Set){if(e.size!==r.size)return!1;for(s of e.entries())if(!r.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(r)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(e[s]!==r[s])return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var o=i[s];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r}});var Ei=ne((VE,Pa)=>{Pa.exports=window.wp.compose});var Ba=ne((BE,Va)=>{Va.exports=window.wp.undoManager});var Ka=ne((pw,$a)=>{"use strict";function $t(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$t=function(e){return typeof e}:$t=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$t(t)}function Wd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ya(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Jd(t,e,r){return e&&Ya(t.prototype,e),r&&Ya(t,r),t}function Ha(t,e){var r=t._map,n=t._arrayTreeMap,s=t._objectTreeMap;if(r.has(e))return r.get(e);for(var i=Object.keys(e).sort(),o=Array.isArray(e)?n:s,a=0;a<i.length;a++){var c=i[a];if(o=o.get(c),o===void 0)return;var l=e[c];if(o=o.get(l),o===void 0)return}var u=o.get("_ekm_value");if(u)return r.delete(u[0]),u[0]=e,o.set("_ekm_value",u),r.set(e,u),u}var Qd=(function(){function t(e){if(Wd(this,t),this.clear(),e instanceof t){var r=[];e.forEach(function(s,i){r.push([i,s])}),e=r}if(e!=null)for(var n=0;n<e.length;n++)this.set(e[n][0],e[n][1])}return Jd(t,[{key:"set",value:function(r,n){if(r===null||$t(r)!=="object")return this._map.set(r,n),this;for(var s=Object.keys(r).sort(),i=[r,n],o=Array.isArray(r)?this._arrayTreeMap:this._objectTreeMap,a=0;a<s.length;a++){var c=s[a];o.has(c)||o.set(c,new t),o=o.get(c);var l=r[c];o.has(l)||o.set(l,new t),o=o.get(l)}var u=o.get("_ekm_value");return u&&this._map.delete(u[0]),o.set("_ekm_value",i),this._map.set(r,i),this}},{key:"get",value:function(r){if(r===null||$t(r)!=="object")return this._map.get(r);var n=Ha(this,r);if(n)return n[1]}},{key:"has",value:function(r){return r===null||$t(r)!=="object"?this._map.has(r):Ha(this,r)!==void 0}},{key:"delete",value:function(r){return this.has(r)?(this.set(r,void 0),!0):!1}},{key:"forEach",value:function(r){var n=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this;this._map.forEach(function(i,o){o!==null&&$t(o)==="object"&&(i=i[1]),r.call(s,i,o,n)})}},{key:"clear",value:function(){this._map=new Map,this._arrayTreeMap=new Map,this._objectTreeMap=new Map}},{key:"size",get:function(){return this._map.size}}]),t})();$a.exports=Qd});var wt=ne((gw,za)=>{za.exports=window.wp.url});var ct=ne((Pw,nc)=>{nc.exports=window.wp.apiFetch});var yr=ne((Vw,sc)=>{sc.exports=window.wp.blocks});var Ci=ne((Bw,ic)=>{ic.exports=window.wp.i18n});var ns=ne((Fw,oc)=>{oc.exports=window.wp.blockEditor});var Wl=ne((Ms,ql)=>{(function(t,e){typeof Ms=="object"&&typeof ql<"u"?e(Ms):typeof define=="function"&&define.amd?define(["exports"],e):(t=t||self,e(t.Diff={}))})(Ms,function(t){"use strict";function e(){}e.prototype={diff:function(p,y){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},S=w.callback;typeof w=="function"&&(S=w,w={}),this.options=w;var v=this;function R(F){return S?(setTimeout(function(){S(void 0,F)},0),!0):F}p=this.castInput(p),y=this.castInput(y),p=this.removeEmpty(this.tokenize(p)),y=this.removeEmpty(this.tokenize(y));var C=y.length,I=p.length,U=1,V=C+I,j=[{newPos:-1,components:[]}],N=this.extractCommon(j[0],y,p,0);if(j[0].newPos+1>=C&&N+1>=I)return R([{value:this.join(y),count:y.length}]);function z(){for(var F=-1*U;F<=U;F+=2){var me=void 0,Se=j[F-1],ye=j[F+1],Re=(ye?ye.newPos:0)-F;Se&&(j[F-1]=void 0);var oe=Se&&Se.newPos+1<C,it=ye&&0<=Re&&Re<I;if(!oe&&!it){j[F]=void 0;continue}if(!oe||it&&Se.newPos<ye.newPos?(me=n(ye),v.pushComponent(me.components,void 0,!0)):(me=Se,me.newPos++,v.pushComponent(me.components,!0,void 0)),Re=v.extractCommon(me,y,p,F),me.newPos+1>=C&&Re+1>=I)return R(r(v,me.components,y,p,v.useLongestToken));j[F]=me}U++}if(S)(function F(){setTimeout(function(){if(U>V)return S();z()||F()},0)})();else for(;U<=V;){var ie=z();if(ie)return ie}},pushComponent:function(p,y,w){var S=p[p.length-1];S&&S.added===y&&S.removed===w?p[p.length-1]={count:S.count+1,added:y,removed:w}:p.push({count:1,added:y,removed:w})},extractCommon:function(p,y,w,S){for(var v=y.length,R=w.length,C=p.newPos,I=C-S,U=0;C+1<v&&I+1<R&&this.equals(y[C+1],w[I+1]);)C++,I++,U++;return U&&p.components.push({count:U}),p.newPos=C,I},equals:function(p,y){return this.options.comparator?this.options.comparator(p,y):p===y||this.options.ignoreCase&&p.toLowerCase()===y.toLowerCase()},removeEmpty:function(p){for(var y=[],w=0;w<p.length;w++)p[w]&&y.push(p[w]);return y},castInput:function(p){return p},tokenize:function(p){return p.split("")},join:function(p){return p.join("")}};function r(g,p,y,w,S){for(var v=0,R=p.length,C=0,I=0;v<R;v++){var U=p[v];if(U.removed){if(U.value=g.join(w.slice(I,I+U.count)),I+=U.count,v&&p[v-1].added){var j=p[v-1];p[v-1]=p[v],p[v]=j}}else{if(!U.added&&S){var V=y.slice(C,C+U.count);V=V.map(function(z,ie){var F=w[I+ie];return F.length>z.length?F:z}),U.value=g.join(V)}else U.value=g.join(y.slice(C,C+U.count));C+=U.count,U.added||(I+=U.count)}}var N=p[R-1];return R>1&&typeof N.value=="string"&&(N.added||N.removed)&&g.equals("",N.value)&&(p[R-2].value+=N.value,p.pop()),p}function n(g){return{newPos:g.newPos,components:g.components.slice(0)}}var s=new e;function i(g,p,y){return s.diff(g,p,y)}function o(g,p){if(typeof g=="function")p.callback=g;else if(g)for(var y in g)g.hasOwnProperty(y)&&(p[y]=g[y]);return p}var a=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,c=/\S/,l=new e;l.equals=function(g,p){return this.options.ignoreCase&&(g=g.toLowerCase(),p=p.toLowerCase()),g===p||this.options.ignoreWhitespace&&!c.test(g)&&!c.test(p)},l.tokenize=function(g){for(var p=g.split(/(\s+|[()[\]{}'"]|\b)/),y=0;y<p.length-1;y++)!p[y+1]&&p[y+2]&&a.test(p[y])&&a.test(p[y+2])&&(p[y]+=p[y+2],p.splice(y+1,2),y--);return p};function u(g,p,y){return y=o(y,{ignoreWhitespace:!0}),l.diff(g,p,y)}function f(g,p,y){return l.diff(g,p,y)}var d=new e;d.tokenize=function(g){var p=[],y=g.split(/(\n|\r\n)/);y[y.length-1]||y.pop();for(var w=0;w<y.length;w++){var S=y[w];w%2&&!this.options.newlineIsToken?p[p.length-1]+=S:(this.options.ignoreWhitespace&&(S=S.trim()),p.push(S))}return p};function h(g,p,y){return d.diff(g,p,y)}function m(g,p,y){var w=o(y,{ignoreWhitespace:!0});return d.diff(g,p,w)}var E=new e;E.tokenize=function(g){return g.split(/(\S.+?[.!?])(?=\s+|$)/)};function _(g,p,y){return E.diff(g,p,y)}var b=new e;b.tokenize=function(g){return g.split(/([{}:;,]|\s+)/)};function T(g,p,y){return b.diff(g,p,y)}function A(g){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?A=function(p){return typeof p}:A=function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},A(g)}function D(g){return k(g)||$(g)||te()}function k(g){if(Array.isArray(g)){for(var p=0,y=new Array(g.length);p<g.length;p++)y[p]=g[p];return y}}function $(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}function te(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var Z=Object.prototype.toString,K=new e;K.useLongestToken=!0,K.tokenize=d.tokenize,K.castInput=function(g){var p=this.options,y=p.undefinedReplacement,w=p.stringifyReplacer,S=w===void 0?function(v,R){return typeof R>"u"?y:R}:w;return typeof g=="string"?g:JSON.stringify(re(g,null,null,S),S,"  ")},K.equals=function(g,p){return e.prototype.equals.call(K,g.replace(/,([\r\n])/g,"$1"),p.replace(/,([\r\n])/g,"$1"))};function le(g,p,y){return K.diff(g,p,y)}function re(g,p,y,w,S){p=p||[],y=y||[],w&&(g=w(S,g));var v;for(v=0;v<p.length;v+=1)if(p[v]===g)return y[v];var R;if(Z.call(g)==="[object Array]"){for(p.push(g),R=new Array(g.length),y.push(R),v=0;v<g.length;v+=1)R[v]=re(g[v],p,y,w,S);return p.pop(),y.pop(),R}if(g&&g.toJSON&&(g=g.toJSON()),A(g)==="object"&&g!==null){p.push(g),R={},y.push(R);var C=[],I;for(I in g)g.hasOwnProperty(I)&&C.push(I);for(C.sort(),v=0;v<C.length;v+=1)I=C[v],R[I]=re(g[I],p,y,w,I);p.pop(),y.pop()}else R=g;return R}var st=new e;st.tokenize=function(g){return g.slice()},st.join=st.removeEmpty=function(g){return g};function ui(g,p,y){return st.diff(g,p,y)}function gr(g){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y=g.split(/\r\n|[\n\v\f\r\x85]/),w=g.match(/\r\n|[\n\v\f\r\x85]/g)||[],S=[],v=0;function R(){var U={};for(S.push(U);v<y.length;){var V=y[v];if(/^(\-\-\-|\+\+\+|@@)\s/.test(V))break;var j=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(V);j&&(U.index=j[1]),v++}for(C(U),C(U),U.hunks=[];v<y.length;){var N=y[v];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(N))break;if(/^@@/.test(N))U.hunks.push(I());else{if(N&&p.strict)throw new Error("Unknown line "+(v+1)+" "+JSON.stringify(N));v++}}}function C(U){var V=/^(---|\+\+\+)\s+(.*)$/.exec(y[v]);if(V){var j=V[1]==="---"?"old":"new",N=V[2].split("	",2),z=N[0].replace(/\\\\/g,"\\");/^".*"$/.test(z)&&(z=z.substr(1,z.length-2)),U[j+"FileName"]=z,U[j+"Header"]=(N[1]||"").trim(),v++}}function I(){for(var U=v,V=y[v++],j=V.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),N={oldStart:+j[1],oldLines:+j[2]||1,newStart:+j[3],newLines:+j[4]||1,lines:[],linedelimiters:[]},z=0,ie=0;v<y.length&&!(y[v].indexOf("--- ")===0&&v+2<y.length&&y[v+1].indexOf("+++ ")===0&&y[v+2].indexOf("@@")===0);v++){var F=y[v].length==0&&v!=y.length-1?" ":y[v][0];if(F==="+"||F==="-"||F===" "||F==="\\")N.lines.push(y[v]),N.linedelimiters.push(w[v]||`
`),F==="+"?z++:F==="-"?ie++:F===" "&&(z++,ie++);else break}if(!z&&N.newLines===1&&(N.newLines=0),!ie&&N.oldLines===1&&(N.oldLines=0),p.strict){if(z!==N.newLines)throw new Error("Added line count did not match for hunk at line "+(U+1));if(ie!==N.oldLines)throw new Error("Removed line count did not match for hunk at line "+(U+1))}return N}for(;v<y.length;)R();return S}function gt(g,p,y){var w=!0,S=!1,v=!1,R=1;return function C(){if(w&&!v){if(S?R++:w=!1,g+R<=y)return R;v=!0}if(!S)return v||(w=!0),p<=g-R?-R++:(S=!0,C())}}function Pt(g,p){var y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof p=="string"&&(p=gr(p)),Array.isArray(p)){if(p.length>1)throw new Error("applyPatch only works with a single input.");p=p[0]}var w=g.split(/\r\n|[\n\v\f\r\x85]/),S=g.match(/\r\n|[\n\v\f\r\x85]/g)||[],v=p.hunks,R=y.compareLine||function(mi,Zr,Xn,Ft){return Zr===Ft},C=0,I=y.fuzzFactor||0,U=0,V=0,j,N;function z(mi,Zr){for(var Xn=0;Xn<mi.lines.length;Xn++){var Ft=mi.lines[Xn],yi=Ft.length>0?Ft[0]:" ",Nd=Ft.length>0?Ft.substr(1):Ft;if(yi===" "||yi==="-"){if(!R(Zr+1,w[Zr],yi,Nd)&&(C++,C>I))return!1;Zr++}}return!0}for(var ie=0;ie<v.length;ie++){for(var F=v[ie],me=w.length-F.oldLines,Se=0,ye=V+F.oldStart-1,Re=gt(ye,U,me);Se!==void 0;Se=Re())if(z(F,ye+Se)){F.offset=V+=Se;break}if(Se===void 0)return!1;U=F.offset+F.oldStart+F.oldLines}for(var oe=0,it=0;it<v.length;it++){var Le=v[it],Fe=Le.oldStart+Le.offset+oe-1;oe+=Le.newLines-Le.oldLines,Fe<0&&(Fe=0);for(var ot=0;ot<Le.lines.length;ot++){var at=Le.lines[ot],mt=at.length>0?at[0]:" ",Qn=at.length>0?at.substr(1):at,gi=Le.linedelimiters[ot];if(mt===" ")Fe++;else if(mt==="-")w.splice(Fe,1),S.splice(Fe,1);else if(mt==="+")w.splice(Fe,0,Qn),S.splice(Fe,0,gi),Fe++;else if(mt==="\\"){var Xr=Le.lines[ot-1]?Le.lines[ot-1][0]:null;Xr==="+"?j=!0:Xr==="-"&&(N=!0)}}}if(j)for(;!w[w.length-1];)w.pop(),S.pop();else N&&(w.push(""),S.push(`
`));for(var Bt=0;Bt<w.length-1;Bt++)w[Bt]=w[Bt]+S[Bt];return w.join("")}function fi(g,p){typeof g=="string"&&(g=gr(g));var y=0;function w(){var S=g[y++];if(!S)return p.complete();p.loadFile(S,function(v,R){if(v)return p.complete(v);var C=Pt(R,S,p);p.patched(S,C,function(I){if(I)return p.complete(I);w()})})}w()}function mr(g,p,y,w,S,v,R){R||(R={}),typeof R.context>"u"&&(R.context=4);var C=h(y,w,R);C.push({value:"",lines:[]});function I(Se){return Se.map(function(ye){return" "+ye})}for(var U=[],V=0,j=0,N=[],z=1,ie=1,F=function(ye){var Re=C[ye],oe=Re.lines||Re.value.replace(/\n$/,"").split(`
`);if(Re.lines=oe,Re.added||Re.removed){var it;if(!V){var Le=C[ye-1];V=z,j=ie,Le&&(N=R.context>0?I(Le.lines.slice(-R.context)):[],V-=N.length,j-=N.length)}(it=N).push.apply(it,D(oe.map(function(Bt){return(Re.added?"+":"-")+Bt}))),Re.added?ie+=oe.length:z+=oe.length}else{if(V)if(oe.length<=R.context*2&&ye<C.length-2){var Fe;(Fe=N).push.apply(Fe,D(I(oe)))}else{var ot,at=Math.min(oe.length,R.context);(ot=N).push.apply(ot,D(I(oe.slice(0,at))));var mt={oldStart:V,oldLines:z-V+at,newStart:j,newLines:ie-j+at,lines:N};if(ye>=C.length-2&&oe.length<=R.context){var Qn=/\n$/.test(y),gi=/\n$/.test(w),Xr=oe.length==0&&N.length>mt.oldLines;!Qn&&Xr&&N.splice(mt.oldLines,0,"\\ No newline at end of file"),(!Qn&&!Xr||!gi)&&N.push("\\ No newline at end of file")}U.push(mt),V=0,j=0,N=[]}z+=oe.length,ie+=oe.length}},me=0;me<C.length;me++)F(me);return{oldFileName:g,newFileName:p,oldHeader:S,newHeader:v,hunks:U}}function Ra(g,p,y,w,S,v,R){var C=mr(g,p,y,w,S,v,R),I=[];g==p&&I.push("Index: "+g),I.push("==================================================================="),I.push("--- "+C.oldFileName+(typeof C.oldHeader>"u"?"":"	"+C.oldHeader)),I.push("+++ "+C.newFileName+(typeof C.newHeader>"u"?"":"	"+C.newHeader));for(var U=0;U<C.hunks.length;U++){var V=C.hunks[U];I.push("@@ -"+V.oldStart+","+V.oldLines+" +"+V.newStart+","+V.newLines+" @@"),I.push.apply(I,V.lines)}return I.join(`
`)+`
`}function Td(g,p,y,w,S,v){return Ra(g,g,p,y,w,S,v)}function Cd(g,p){return g.length!==p.length?!1:di(g,p)}function di(g,p){if(p.length>g.length)return!1;for(var y=0;y<p.length;y++)if(p[y]!==g[y])return!1;return!0}function Id(g){var p=pi(g.lines),y=p.oldLines,w=p.newLines;y!==void 0?g.oldLines=y:delete g.oldLines,w!==void 0?g.newLines=w:delete g.newLines}function Ad(g,p,y){g=xa(g,y),p=xa(p,y);var w={};(g.index||p.index)&&(w.index=g.index||p.index),(g.newFileName||p.newFileName)&&(Ta(g)?Ta(p)?(w.oldFileName=Jn(w,g.oldFileName,p.oldFileName),w.newFileName=Jn(w,g.newFileName,p.newFileName),w.oldHeader=Jn(w,g.oldHeader,p.oldHeader),w.newHeader=Jn(w,g.newHeader,p.newHeader)):(w.oldFileName=g.oldFileName,w.newFileName=g.newFileName,w.oldHeader=g.oldHeader,w.newHeader=g.newHeader):(w.oldFileName=p.oldFileName||g.oldFileName,w.newFileName=p.newFileName||g.newFileName,w.oldHeader=p.oldHeader||g.oldHeader,w.newHeader=p.newHeader||g.newHeader)),w.hunks=[];for(var S=0,v=0,R=0,C=0;S<g.hunks.length||v<p.hunks.length;){var I=g.hunks[S]||{oldStart:1/0},U=p.hunks[v]||{oldStart:1/0};if(Ca(I,U))w.hunks.push(Ia(I,R)),S++,C+=I.newLines-I.oldLines;else if(Ca(U,I))w.hunks.push(Ia(U,C)),v++,R+=U.newLines-U.oldLines;else{var V={oldStart:Math.min(I.oldStart,U.oldStart),oldLines:0,newStart:Math.min(I.newStart+R,U.oldStart+C),newLines:0,lines:[]};Dd(V,I.oldStart,I.lines,U.oldStart,U.lines),v++,S++,w.hunks.push(V)}}return w}function xa(g,p){if(typeof g=="string"){if(/^@@/m.test(g)||/^Index:/m.test(g))return gr(g)[0];if(!p)throw new Error("Must provide a base reference or pass in a patch");return mr(void 0,void 0,p,g)}return g}function Ta(g){return g.newFileName&&g.newFileName!==g.oldFileName}function Jn(g,p,y){return p===y?p:(g.conflict=!0,{mine:p,theirs:y})}function Ca(g,p){return g.oldStart<p.oldStart&&g.oldStart+g.oldLines<p.oldStart}function Ia(g,p){return{oldStart:g.oldStart,oldLines:g.oldLines,newStart:g.newStart+p,newLines:g.newLines,lines:g.lines}}function Dd(g,p,y,w,S){var v={offset:p,lines:y,index:0},R={offset:w,lines:S,index:0};for(Da(g,v,R),Da(g,R,v);v.index<v.lines.length&&R.index<R.lines.length;){var C=v.lines[v.index],I=R.lines[R.index];if((C[0]==="-"||C[0]==="+")&&(I[0]==="-"||I[0]==="+"))Ud(g,v,R);else if(C[0]==="+"&&I[0]===" "){var U;(U=g.lines).push.apply(U,D(Vt(v)))}else if(I[0]==="+"&&C[0]===" "){var V;(V=g.lines).push.apply(V,D(Vt(R)))}else C[0]==="-"&&I[0]===" "?Aa(g,v,R):I[0]==="-"&&C[0]===" "?Aa(g,R,v,!0):C===I?(g.lines.push(C),v.index++,R.index++):hi(g,Vt(v),Vt(R))}Ua(g,v),Ua(g,R),Id(g)}function Ud(g,p,y){var w=Vt(p),S=Vt(y);if(ka(w)&&ka(S)){if(di(w,S)&&Oa(y,w,w.length-S.length)){var v;(v=g.lines).push.apply(v,D(w));return}else if(di(S,w)&&Oa(p,S,S.length-w.length)){var R;(R=g.lines).push.apply(R,D(S));return}}else if(Cd(w,S)){var C;(C=g.lines).push.apply(C,D(w));return}hi(g,w,S)}function Aa(g,p,y,w){var S=Vt(p),v=kd(y,S);if(v.merged){var R;(R=g.lines).push.apply(R,D(v.merged))}else hi(g,w?v:S,w?S:v)}function hi(g,p,y){g.conflict=!0,g.lines.push({conflict:!0,mine:p,theirs:y})}function Da(g,p,y){for(;p.offset<y.offset&&p.index<p.lines.length;){var w=p.lines[p.index++];g.lines.push(w),p.offset++}}function Ua(g,p){for(;p.index<p.lines.length;){var y=p.lines[p.index++];g.lines.push(y)}}function Vt(g){for(var p=[],y=g.lines[g.index][0];g.index<g.lines.length;){var w=g.lines[g.index];if(y==="-"&&w[0]==="+"&&(y="+"),y===w[0])p.push(w),g.index++;else break}return p}function kd(g,p){for(var y=[],w=[],S=0,v=!1,R=!1;S<p.length&&g.index<g.lines.length;){var C=g.lines[g.index],I=p[S];if(I[0]==="+")break;if(v=v||C[0]!==" ",w.push(I),S++,C[0]==="+")for(R=!0;C[0]==="+";)y.push(C),C=g.lines[++g.index];I.substr(1)===C.substr(1)?(y.push(C),g.index++):R=!0}if((p[S]||"")[0]==="+"&&v&&(R=!0),R)return y;for(;S<p.length;)w.push(p[S++]);return{merged:w,changes:y}}function ka(g){return g.reduce(function(p,y){return p&&y[0]==="-"},!0)}function Oa(g,p,y){for(var w=0;w<y;w++){var S=p[p.length-y+w].substr(1);if(g.lines[g.index+w]!==" "+S)return!1}return g.index+=y,!0}function pi(g){var p=0,y=0;return g.forEach(function(w){if(typeof w!="string"){var S=pi(w.mine),v=pi(w.theirs);p!==void 0&&(S.oldLines===v.oldLines?p+=S.oldLines:p=void 0),y!==void 0&&(S.newLines===v.newLines?y+=S.newLines:y=void 0)}else y!==void 0&&(w[0]==="+"||w[0]===" ")&&y++,p!==void 0&&(w[0]==="-"||w[0]===" ")&&p++}),{oldLines:p,newLines:y}}function Od(g){for(var p=[],y,w,S=0;S<g.length;S++)y=g[S],y.added?w=1:y.removed?w=-1:w=0,p.push([w,y.value]);return p}function Ld(g){for(var p=[],y=0;y<g.length;y++){var w=g[y];w.added?p.push("<ins>"):w.removed&&p.push("<del>"),p.push(Md(w.value)),w.added?p.push("</ins>"):w.removed&&p.push("</del>")}return p.join("")}function Md(g){var p=g;return p=p.replace(/&/g,"&amp;"),p=p.replace(/</g,"&lt;"),p=p.replace(/>/g,"&gt;"),p=p.replace(/"/g,"&quot;"),p}t.Diff=e,t.diffChars=i,t.diffWords=u,t.diffWordsWithSpace=f,t.diffLines=h,t.diffTrimmedLines=m,t.diffSentences=_,t.diffCss=T,t.diffJson=le,t.diffArrays=ui,t.structuredPatch=mr,t.createTwoFilesPatch=Ra,t.createPatch=Td,t.applyPatch=Pt,t.applyPatches=fi,t.parsePatch=gr,t.merge=Ad,t.convertChangesToDMP=Od,t.convertChangesToXML=Ld,t.canonicalize=re,Object.defineProperty(t,"__esModule",{value:!0})})});var uu=ne((zv,lu)=>{lu.exports=window.wp.hooks});var Fo=ne((H_,Au)=>{Au.exports=window.wp.richText});var pr=ne((Tb,af)=>{af.exports=window.wp.deprecated});var lf=ne((Cb,cf)=>{cf.exports=window.wp.privateApis});var ua=ne((nS,If)=>{If.exports=window.wp.htmlEntities});var Mt=ne((IS,zf)=>{zf.exports=window.wp.element});var Jf=ne((DS,Wf)=>{Wf.exports=window.ReactJSXRuntime});var fd=ne((qS,ud)=>{ud.exports=window.wp.warning});var LE={};jt(LE,{EntityProvider:()=>Xf,__experimentalFetchLinkSuggestions:()=>Df,__experimentalFetchUrlData:()=>kf,__experimentalUseEntityRecord:()=>id,__experimentalUseEntityRecords:()=>cd,__experimentalUseResourcePermissions:()=>md,fetchBlockPatterns:()=>da,privateApis:()=>xd,store:()=>ce,useEntityBlockEditor:()=>bd,useEntityId:()=>Qr,useEntityProp:()=>Rd,useEntityRecord:()=>ma,useEntityRecords:()=>oi,useResourcePermissions:()=>gd});var li=x(Ee(),1);var qo=x(yt(),1),nf=x(Ei(),1),Fn=x(Ee(),1),sf=x(Ba(),1);var Fa=x(yt(),1);function wi(t,e){if(!t)return e;let r=!1,n={};for(let s in e)(0,Fa.default)(t[s],e[s])?n[s]=t[s]:(r=!0,n[s]=e[s]);if(!r)return t;for(let s in t)n.hasOwnProperty(s)||(n[s]=t[s]);return n}function Yd(t){return typeof t=="string"?t.split(","):Array.isArray(t)?t:null}var we=Yd;var Hd=t=>e=>(r,n)=>r===void 0||t(n)?e(r,n):r,en=Hd;var $d=t=>(...e)=>async({resolveSelect:r})=>{await r[t](...e)},Gt=$d;var Kd=t=>e=>(r={},n)=>{let s=n[t];if(s===void 0)return r;let i=e(r[s],n);return i===r[s]?r:{...r,[s]:i}},es=Kd;var zd=t=>e=>(r,n)=>e(r,t(n)),tn=zd;function qd(t){let e=new WeakMap;return r=>{let n;return e.has(r)?n=e.get(r):(n=t(r),r!==null&&typeof r=="object"&&e.set(r,n)),n}}var vi=qd;function _i(t,e){return(t.rawAttributes||[]).includes(e)}function Et(t,e,r){if(!t||typeof t!="object")return t;let n=Array.isArray(e)?e:e.split(".");return n.reduce((s,i,o)=>(s[i]===void 0&&(Number.isInteger(n[o+1])?s[i]=[]:s[i]={}),o===n.length-1&&(s[i]=r),s[i]),t),t}function bi(t,e,r){if(!t||typeof t!="object"||typeof e!="string"&&!Array.isArray(e))return t;let n=Array.isArray(e)?e:e.split("."),s=t;return n.forEach(i=>{s=s?.[i]}),s!==void 0?s:r}function rn(t){return/^\s*\d+\s*$/.test(t)}var Yt=["create","read","update","delete"];function nn(t){let e={};if(!t)return e;let r={create:"POST",read:"GET",update:"PUT",delete:"DELETE"};for(let[n,s]of Object.entries(r))e[n]=t.includes(s);return e}function Ht(t,e,r){return(typeof e=="object"?[t,e.kind,e.name,e.id]:[t,e,r]).filter(Boolean).join("/")}var sn=Symbol("RECEIVE_INTERMEDIATE_RESULTS");function Si(t,e,r){return{type:"RECEIVE_ITEMS",items:Array.isArray(t)?t:[t],persistedEdits:e,meta:r}}function ja(t,e,r,n=!1){return{type:"REMOVE_ITEMS",itemIds:Array.isArray(r)?r:[r],kind:t,name:e,invalidateCache:n}}function Ga(t,e={},r,n){return{...Si(t,r,n),query:e}}var Ja=x(Ka(),1),Qa=x(Ee(),1);var qa=x(wt(),1);function Xd(t){let e={stableKey:"",page:1,perPage:10,fields:null,include:null,context:"default"},r=Object.keys(t).sort();for(let n=0;n<r.length;n++){let s=r[n],i=t[s];switch(s){case"page":e[s]=Number(i);break;case"per_page":e.perPage=Number(i);break;case"context":e.context=i;break;default:s==="_fields"&&(e.fields=we(i)??[],i=e.fields.join()),s==="include"&&(typeof i=="number"&&(i=i.toString()),e.include=(we(i)??[]).map(Number),i=e.include.join()),e.stableKey+=(e.stableKey?"&":"")+(0,qa.addQueryArgs)("",{[s]:i}).slice(1)}}return e}var vt=vi(Xd);var Wa=new WeakMap;function Zd(t,e){let{stableKey:r,page:n,perPage:s,include:i,fields:o,context:a}=vt(e),c;if(t.queries?.[a]?.[r]&&(c=t.queries[a][r].itemIds),!c)return null;let l=s===-1?0:(n-1)*s,u=s===-1?c.length:Math.min(l+s,c.length),f=[];for(let d=l;d<u;d++){let h=c[d];if(Array.isArray(i)&&!i.includes(h)||h===void 0)continue;if(!t.items[a]?.hasOwnProperty(h))return null;let m=t.items[a][h],E;if(Array.isArray(o)){E={};for(let _=0;_<o.length;_++){let b=o[_].split("."),T=m;b.forEach(A=>{T=T?.[A]}),Et(E,b,T)}}else{if(!t.itemIsComplete[a]?.[h])return null;E=m}f.push(E)}return f}var Ri=(0,Qa.createSelector)((t,e={})=>{let r=Wa.get(t);if(r){let s=r.get(e);if(s!==void 0)return s}else r=new Ja.default,Wa.set(t,r);let n=Zd(t,e);return r.set(e,n),n});function xi(t,e={}){let{stableKey:r,context:n}=vt(e);return t.queries?.[n]?.[r]?.meta?.totalItems??null}function Xa(t,e={}){let{stableKey:r,context:n}=vt(e);return t.queries?.[n]?.[r]?.meta?.totalPages??null}var Zu=x(Ee(),1),ef=x(Ei(),1);var _t=function(){return _t=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},_t.apply(this,arguments)};function Za(t){return t.toLowerCase()}var eh=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],th=/[^A-Z0-9]+/gi;function ts(t,e){e===void 0&&(e={});for(var r=e.splitRegexp,n=r===void 0?eh:r,s=e.stripRegexp,i=s===void 0?th:s,o=e.transform,a=o===void 0?Za:o,c=e.delimiter,l=c===void 0?" ":c,u=ec(ec(t,n,"$1\0$2"),i,"\0"),f=0,d=u.length;u.charAt(f)==="\0";)f++;for(;u.charAt(d-1)==="\0";)d--;return u.slice(f,d).split("\0").map(a).join(l)}function ec(t,e,r){return e instanceof RegExp?t.replace(e,r):e.reduce(function(n,s){return n.replace(s,r)},t)}function Ti(t,e){var r=t.charAt(0),n=t.substr(1).toLowerCase();return e>0&&r>="0"&&r<="9"?"_"+r+n:""+r.toUpperCase()+n}function on(t,e){return e===void 0&&(e={}),ts(t,_t({delimiter:"",transform:Ti},e))}function rh(t,e){return e===0?t.toLowerCase():Ti(t,e)}function rs(t,e){return e===void 0&&(e={}),on(t,_t({transform:rh},e))}function tc(t){return t.charAt(0).toUpperCase()+t.substr(1)}function nh(t){return tc(t.toLowerCase())}function rc(t,e){return e===void 0&&(e={}),ts(t,_t({delimiter:" ",transform:nh},e))}var zs=x(ct(),1),qs=x(yr(),1),Q=x(Ci(),1);var $r=x(Ee(),1),Tu=x(ns(),1);var yu=x(Ee(),1);var H={};jt(H,{AbsolutePosition:()=>vs,AbstractConnector:()=>eo,AbstractStruct:()=>Nr,AbstractType:()=>ee,Array:()=>ir,ContentAny:()=>Dt,ContentBinary:()=>cr,ContentDeleted:()=>Pr,ContentEmbed:()=>pt,ContentFormat:()=>J,ContentJSON:()=>Ln,ContentString:()=>Ge,ContentType:()=>Ve,Doc:()=>ht,GC:()=>pe,ID:()=>ft,Item:()=>Y,Map:()=>or,PermanentUserData:()=>ro,RelativePosition:()=>Or,Snapshot:()=>Cn,Text:()=>Lr,Transaction:()=>bs,UndoManager:()=>nr,UpdateEncoderV1:()=>Xe,XmlElement:()=>Mr,XmlFragment:()=>ar,XmlHook:()=>On,XmlText:()=>As,YArrayEvent:()=>xs,YEvent:()=>sr,YMapEvent:()=>Ts,YTextEvent:()=>Cs,YXmlEvent:()=>Is,applyUpdate:()=>cp,applyUpdateV2:()=>Ut,cleanupYTextFormatting:()=>Gl,compareIDs:()=>er,compareRelativePositions:()=>Rp,convertUpdateFormatV1ToV2:()=>$p,convertUpdateFormatV2ToV1:()=>Tl,createAbsolutePositionFromRelativePosition:()=>Sp,createDeleteSet:()=>Us,createDeleteSetFromStructStore:()=>uo,createDocFromSnapshot:()=>Dp,createID:()=>L,createRelativePositionFromJSON:()=>mp,createRelativePositionFromTypeIndex:()=>Ep,createSnapshot:()=>yo,decodeRelativePosition:()=>bp,decodeSnapshot:()=>Cp,decodeSnapshotV2:()=>hl,decodeStateVector:()=>po,decodeUpdate:()=>Vp,decodeUpdateV2:()=>vl,diffUpdate:()=>Gp,diffUpdateV2:()=>Eo,emptySnapshot:()=>Ip,encodeRelativePosition:()=>vp,encodeSnapshot:()=>Tp,encodeSnapshotV2:()=>dl,encodeStateAsUpdate:()=>up,encodeStateAsUpdateV2:()=>Br,encodeStateVector:()=>hp,encodeStateVectorFromUpdate:()=>Bp,encodeStateVectorFromUpdateV2:()=>bl,equalDeleteSets:()=>cl,equalSnapshots:()=>xp,findIndexSS:()=>Pe,findRootTypeKey:()=>mo,getItem:()=>bn,getState:()=>q,getTypeChildren:()=>Wp,isDeleted:()=>lr,isParentOf:()=>Tn,iterateDeletedStructs:()=>tr,logType:()=>pp,logUpdate:()=>Pp,logUpdateV2:()=>wl,mergeUpdates:()=>_l,mergeUpdatesV2:()=>An,obfuscateUpdate:()=>Yp,obfuscateUpdateV2:()=>Hp,parseUpdateMeta:()=>Fp,parseUpdateMetaV2:()=>Sl,readUpdate:()=>ap,readUpdateV2:()=>ho,relativePositionToJSON:()=>gp,snapshot:()=>Ap,snapshotContainsUpdate:()=>kp,transact:()=>G,tryGc:()=>Mp,typeListToArraySnapshot:()=>Jp,typeMapGetSnapshot:()=>Zp});var se=()=>new Map,ss=t=>{let e=se();return t.forEach((r,n)=>{e.set(n,r)}),e},ue=(t,e,r)=>{let n=t.get(e);return n===void 0&&t.set(e,n=r()),n},ac=(t,e)=>{let r=[];for(let[n,s]of t)r.push(e(s,n));return r},cc=(t,e)=>{for(let[r,n]of t)if(e(n,r))return!0;return!1};var lt=()=>new Set;var is=t=>t[t.length-1];var lc=(t,e)=>{for(let r=0;r<e.length;r++)t.push(e[r])},$e=Array.from;var uc=(t,e)=>{for(let r=0;r<t.length;r++)if(e(t[r],r,t))return!0;return!1};var fc=(t,e)=>{let r=new Array(t);for(let n=0;n<t;n++)r[n]=e(n,r);return r};var Kt=Array.isArray;var Ke=class{constructor(){this._observers=se()}on(e,r){ue(this._observers,e,lt).add(r)}once(e,r){let n=(...s)=>{this.off(e,n),r(...s)};this.on(e,n)}off(e,r){let n=this._observers.get(e);n!==void 0&&(n.delete(r),n.size===0&&this._observers.delete(e))}emit(e,r){return $e((this._observers.get(e)||se()).values()).forEach(n=>n(...r))}destroy(){this._observers=se()}};var xe=Math.floor;var wr=Math.abs;var os=(t,e)=>t<e?t:e,ut=(t,e)=>t>e?t:e,Gw=Number.isNaN;var as=t=>t!==0?t<0:1/t<0;var Ai=String.fromCharCode,Yw=String.fromCodePoint,Hw=Ai(65535),sh=t=>t.toLowerCase(),ih=/^\s*/g,oh=t=>t.replace(ih,""),ah=/([A-Z])/g,Di=(t,e)=>oh(t.replace(ah,r=>`${e}${sh(r)}`));var ch=t=>{let e=unescape(encodeURIComponent(t)),r=e.length,n=new Uint8Array(r);for(let s=0;s<r;s++)n[s]=e.codePointAt(s);return n},_r=typeof TextEncoder<"u"?new TextEncoder:null,lh=t=>_r.encode(t),dc=_r?lh:ch;var vr=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});vr&&vr.decode(new Uint8Array).length===1&&(vr=null);var hc=(t,e)=>fc(e,()=>t).join("");var Ui=t=>t===void 0?null:t;var ki=class{constructor(){this.map=new Map}setItem(e,r){this.map.set(e,r)}getItem(e){return this.map.get(e)}},pc=new ki,fh=!0;try{typeof localStorage<"u"&&(pc=localStorage,fh=!1)}catch{}var gc=pc;var mc=Object.assign,hh=Object.keys,yc=(t,e)=>{for(let r in t)e(t[r],r)};var un=t=>hh(t).length;var Ec=t=>{for(let e in t)return!1;return!0},ph=(t,e)=>{for(let r in t)if(!e(t[r],r))return!1;return!0},Oi=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),Li=(t,e)=>t===e||un(t)===un(e)&&ph(t,(r,n)=>(r!==void 0||Oi(e,n))&&e[n]===r);var dn=(t,e,r=0)=>{try{for(;r<t.length;r++)t[r](...e)}finally{r<t.length&&dn(t,e,r+1)}};var Mi=t=>t,gh=(t,e)=>t===e;var fn=(t,e)=>{if(t==null||e==null)return gh(t,e);if(t.constructor!==e.constructor)return!1;if(t===e)return!0;switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:{if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;break}case Set:{if(t.size!==e.size)return!1;for(let r of t)if(!e.has(r))return!1;break}case Map:{if(t.size!==e.size)return!1;for(let r of t.keys())if(!e.has(r)||!fn(t.get(r),e.get(r)))return!1;break}case Object:if(un(t)!==un(e))return!1;for(let r in t)if(!Oi(t,r)||!fn(t[r],e[r]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!fn(t[r],e[r]))return!1;break;default:return!1}return!0},vc=(t,e)=>e.includes(t);var br=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name),cs=typeof window<"u"&&typeof document<"u"&&!br,$w=typeof navigator<"u"?/Mac/.test(navigator.platform):!1,ze,mh=[],yh=()=>{if(ze===void 0)if(br){ze=se();let t=process.argv,e=null;for(let r=0;r<t.length;r++){let n=t[r];n[0]==="-"?(e!==null&&ze.set(e,""),e=n):e!==null?(ze.set(e,n),e=null):mh.push(n)}e!==null&&ze.set(e,"")}else typeof location=="object"?(ze=se(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){let[e,r]=t.split("=");ze.set(`--${Di(e,"-")}`,r),ze.set(`-${Di(e,"-")}`,r)}})):ze=se();return ze},Pi=t=>yh().has(t);var Vi=t=>br?Ui(process.env[t.toUpperCase()]):Ui(gc.getItem(t));var Eh=t=>Pi("--"+t)||Vi(t)!==null,Kw=Eh("production"),_c=br&&vc(process.env.FORCE_COLOR,["true","1","2"]),bc=!Pi("no-colors")&&(!br||process.stdout.isTTY||_c)&&(!br||Pi("color")||_c||Vi("COLORTERM")!==null||(Vi("TERM")||"").includes("color"));var Bi=Number.MAX_SAFE_INTEGER,zw=Number.MIN_SAFE_INTEGER,qw=1<<31;var Rc=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&xe(t)===t),Ww=Number.isNaN,Jw=Number.parseInt;var qe=t=>new Error(t),je=()=>{throw qe("Method unimplemented")},ve=()=>{throw qe("Unexpected case")};var Ic=qe("Unexpected end of array"),Ac=qe("Integer out of Range"),Sr=class{constructor(e){this.arr=e,this.pos=0}},fe=t=>new Sr(t),Fi=t=>t.pos!==t.arr.length;var wh=(t,e)=>{let r=gn(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,r},Te=t=>wh(t,M(t));var zt=t=>t.arr[t.pos++];var M=t=>{let e=0,r=1,n=t.arr.length;for(;t.pos<n;){let s=t.arr[t.pos++];if(e=e+(s&127)*r,r*=128,s<128)return e;if(e>Bi)throw Ac}throw Ic},pn=t=>{let e=t.arr[t.pos++],r=e&63,n=64,s=(e&64)>0?-1:1;if((e&128)===0)return s*r;let i=t.arr.length;for(;t.pos<i;){if(e=t.arr[t.pos++],r=r+(e&127)*n,n*=128,e<128)return s*r;if(r>Bi)throw Ac}throw Ic};var vh=t=>{let e=M(t);if(e===0)return"";{let r=String.fromCodePoint(zt(t));if(--e<100)for(;e--;)r+=String.fromCodePoint(zt(t));else for(;e>0;){let n=e<1e4?e:1e4,s=t.arr.subarray(t.pos,t.pos+n);t.pos+=n,r+=String.fromCodePoint.apply(null,s),e-=n}return decodeURIComponent(escape(r))}},_h=t=>vr.decode(Te(t)),bt=vr?_h:vh;var ji=(t,e)=>{let r=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,r},bh=t=>ji(t,4).getFloat32(0,!1),Sh=t=>ji(t,8).getFloat64(0,!1),Rh=t=>ji(t,8).getBigInt64(0,!1);var xh=[t=>{},t=>null,pn,bh,Sh,Rh,t=>!1,t=>!0,bt,t=>{let e=M(t),r={};for(let n=0;n<e;n++){let s=bt(t);r[s]=Rr(t)}return r},t=>{let e=M(t),r=[];for(let n=0;n<e;n++)r.push(Rr(t));return r},Te],Rr=t=>xh[127-zt(t)](t),hn=class extends Sr{constructor(e,r){super(e),this.reader=r,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),Fi(this)?this.count=M(this)+1:this.count=-1),this.count--,this.s}};var qt=class extends Sr{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=pn(this);let e=as(this.s);this.count=1,e&&(this.s=-this.s,this.count=M(this)+2)}return this.count--,this.s}};var xr=class extends Sr{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){let e=pn(this),r=e&1;this.diff=xe(e/2),this.count=1,r&&(this.count=M(this)+2)}return this.s+=this.diff,this.count--,this.s}},ls=class{constructor(e){this.decoder=new qt(e),this.str=bt(this.decoder),this.spos=0}read(){let e=this.spos+this.decoder.read(),r=this.str.slice(this.spos,e);return this.spos=e,r}};var Dc=t=>new Uint8Array(t),gn=(t,e,r)=>new Uint8Array(t,e,r);var Ch=t=>{let e="";for(let r=0;r<t.byteLength;r++)e+=Ai(t[r]);return btoa(e)},Ih=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),Ah=t=>{let e=atob(t),r=Dc(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r},Dh=t=>{let e=Buffer.from(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},Uc=cs?Ch:Ih,kc=cs?Ah:Dh;var Oc=t=>{let e=Dc(t.byteLength);return e.set(t),e};var Wt=class{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}},Qt=()=>new Wt;var Uh=t=>{let e=t.cpos;for(let r=0;r<t.bufs.length;r++)e+=t.bufs[r].length;return e};var De=t=>{let e=new Uint8Array(Uh(t)),r=0;for(let n=0;n<t.bufs.length;n++){let s=t.bufs[n];e.set(s,r),r+=s.length}return e.set(gn(t.cbuf.buffer,0,t.cpos),r),e},kh=(t,e)=>{let r=t.cbuf.length;r-t.cpos<e&&(t.bufs.push(gn(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(ut(r,e)*2),t.cpos=0)},ae=(t,e)=>{let r=t.cbuf.length;t.cpos===r&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(r*2),t.cpos=0),t.cbuf[t.cpos++]=e};var Ar=ae;var O=(t,e)=>{for(;e>127;)ae(t,128|127&e),e=xe(e/128);ae(t,127&e)},yn=(t,e)=>{let r=as(e);for(r&&(e=-e),ae(t,(e>63?128:0)|(r?64:0)|63&e),e=xe(e/64);e>0;)ae(t,(e>127?128:0)|127&e),e=xe(e/128)},Gi=new Uint8Array(3e4),Oh=Gi.length/3,Lh=(t,e)=>{if(e.length<Oh){let r=_r.encodeInto(e,Gi).written||0;O(t,r);for(let n=0;n<r;n++)ae(t,Gi[n])}else Ce(t,dc(e))},Mh=(t,e)=>{let r=unescape(encodeURIComponent(e)),n=r.length;O(t,n);for(let s=0;s<n;s++)ae(t,r.codePointAt(s))},Rt=_r&&_r.encodeInto?Lh:Mh;var Pc=(t,e)=>Dr(t,De(e)),Dr=(t,e)=>{let r=t.cbuf.length,n=t.cpos,s=os(r-n,e.length),i=e.length-s;t.cbuf.set(e.subarray(0,s),n),t.cpos+=s,i>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(ut(r*2,i)),t.cbuf.set(e.subarray(s)),t.cpos=i)},Ce=(t,e)=>{O(t,e.byteLength),Dr(t,e)},Yi=(t,e)=>{kh(t,e);let r=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,r},Nh=(t,e)=>Yi(t,4).setFloat32(0,e,!1),Ph=(t,e)=>Yi(t,8).setFloat64(0,e,!1),Vh=(t,e)=>Yi(t,8).setBigInt64(0,e,!1);var Lc=new DataView(new ArrayBuffer(4)),Bh=t=>(Lc.setFloat32(0,t),Lc.getFloat32(0)===t),Cr=(t,e)=>{switch(typeof e){case"string":ae(t,119),Rt(t,e);break;case"number":Rc(e)&&wr(e)<=2147483647?(ae(t,125),yn(t,e)):Bh(e)?(ae(t,124),Nh(t,e)):(ae(t,123),Ph(t,e));break;case"bigint":ae(t,122),Vh(t,e);break;case"object":if(e===null)ae(t,126);else if(Kt(e)){ae(t,117),O(t,e.length);for(let r=0;r<e.length;r++)Cr(t,e[r])}else if(e instanceof Uint8Array)ae(t,116),Ce(t,e);else{ae(t,118);let r=Object.keys(e);O(t,r.length);for(let n=0;n<r.length;n++){let s=r[n];Rt(t,s),Cr(t,e[s])}}break;case"boolean":ae(t,e?120:121);break;default:ae(t,127)}},mn=class extends Wt{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&O(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}};var Mc=t=>{t.count>0&&(yn(t.encoder,t.count===1?t.s:-t.s),t.count>1&&O(t.encoder,t.count-2))},Jt=class{constructor(){this.encoder=new Wt,this.s=0,this.count=0}write(e){this.s===e?this.count++:(Mc(this),this.count=1,this.s=e)}toUint8Array(){return Mc(this),De(this.encoder)}};var Nc=t=>{if(t.count>0){let e=t.diff*2+(t.count===1?0:1);yn(t.encoder,e),t.count>1&&O(t.encoder,t.count-2)}},Ir=class{constructor(){this.encoder=new Wt,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(Nc(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return Nc(this),De(this.encoder)}},fs=class{constructor(){this.sarr=[],this.s="",this.lensE=new Jt}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){let e=new Wt;return this.sarr.push(this.s),this.s="",Rt(e,this.sarr.join("")),Dr(e,this.lensE.toUint8Array()),De(e)}};var Zw=crypto.subtle,Vc=crypto.getRandomValues.bind(crypto);var Hi=()=>Vc(new Uint32Array(1))[0];var jh="10000000-1000-4000-8000"+-1e11,Bc=()=>jh.replace(/[018]/g,t=>(t^Hi()&15>>t/4).toString(16));var xt=Date.now;var Ki=t=>new Promise(t);var rv=Promise.all.bind(Promise);var zi=class{constructor(e,r){this.left=e,this.right=r}},We=(t,e)=>new zi(t,e);var Xt=typeof document<"u"?document:{};var nv=typeof DOMParser<"u"?new DOMParser:null;var Fc=t=>ac(t,(e,r)=>`${r}:${e};`).join("");var sv=Xt.ELEMENT_NODE,iv=Xt.TEXT_NODE,ov=Xt.CDATA_SECTION_NODE,av=Xt.COMMENT_NODE,cv=Xt.DOCUMENT_NODE,lv=Xt.DOCUMENT_TYPE_NODE,uv=Xt.DOCUMENT_FRAGMENT_NODE;var Je=Symbol;var En=Je(),wn=Je(),qi=Je(),Wi=Je(),Ji=Je(),vn=Je(),Qi=Je(),_n=Je(),Xi=Je(),jc=t=>{let e=[],r=[],n=0;for(;n<t.length;n++){let s=t[n];s.constructor===String||s.constructor===Number?e.push(s):s.constructor===Object&&r.push(JSON.stringify(s))}return r};var fv=xt();var qh={[En]:We("font-weight","bold"),[wn]:We("font-weight","normal"),[qi]:We("color","blue"),[Ji]:We("color","green"),[Wi]:We("color","grey"),[vn]:We("color","red"),[Qi]:We("color","purple"),[_n]:We("color","orange"),[Xi]:We("color","black")},Wh=t=>{let e=[],r=[],n=se(),s=[],i=0;for(;i<t.length;i++){let o=t[i],a=qh[o];if(a!==void 0)n.set(a.left,a.right);else if(o.constructor===String||o.constructor===Number){let c=Fc(n);i>0||c.length>0?(e.push("%c"+o),r.push(c)):e.push(o)}else break}for(i>0&&(s=r,s.unshift(e.join("")));i<t.length;i++){let o=t[i];o instanceof Symbol||s.push(o)}return s},Jh=bc?Wh:jc,ds=(...t)=>{console.log(...Jh(t)),Qh.forEach(e=>e.print(t))};var Qh=lt();var Gc=t=>({[Symbol.iterator](){return this},next:t}),Yc=(t,e)=>Gc(()=>{let r;do r=t.next();while(!r.done&&!e(r.value));return r}),hs=(t,e)=>Gc(()=>{let{done:r,value:n}=t.next();return{done:r,value:r?void 0:e(n)}});var eo=class extends Ke{constructor(e,r){super(),this.doc=e,this.awareness=r}},Rn=class{constructor(e,r){this.clock=e,this.len=r}},It=class{constructor(){this.clients=new Map}},tr=(t,e,r)=>e.clients.forEach((n,s)=>{let i=t.doc.store.clients.get(s);for(let o=0;o<n.length;o++){let a=n[o];gl(t,i,a.clock,a.len,r)}}),rp=(t,e)=>{let r=0,n=t.length-1;for(;r<=n;){let s=xe((r+n)/2),i=t[s],o=i.clock;if(o<=e){if(e<o+i.len)return s;r=s+1}else n=s-1}return null},lr=(t,e)=>{let r=t.clients.get(e.client);return r!==void 0&&rp(r,e.clock)!==null},lo=t=>{t.clients.forEach(e=>{e.sort((s,i)=>s.clock-i.clock);let r,n;for(r=1,n=1;r<e.length;r++){let s=e[n-1],i=e[r];s.clock+s.len>=i.clock?s.len=ut(s.len,i.clock+i.len-s.clock):(n<r&&(e[n]=i),n++)}e.length=n})},Ur=t=>{let e=new It;for(let r=0;r<t.length;r++)t[r].clients.forEach((n,s)=>{if(!e.clients.has(s)){let i=n.slice();for(let o=r+1;o<t.length;o++)lc(i,t[o].clients.get(s)||[]);e.clients.set(s,i)}});return lo(e),e},xn=(t,e,r,n)=>{ue(t.clients,e,()=>[]).push(new Rn(r,n))},Us=()=>new It,uo=t=>{let e=Us();return t.clients.forEach((r,n)=>{let s=[];for(let i=0;i<r.length;i++){let o=r[i];if(o.deleted){let a=o.id.clock,c=o.length;if(i+1<r.length)for(let l=r[i+1];i+1<r.length&&l.deleted;l=r[++i+1])c+=l.length;s.push(new Rn(a,c))}}s.length>0&&e.clients.set(n,s)}),e},Qe=(t,e)=>{O(t.restEncoder,e.clients.size),$e(e.clients.entries()).sort((r,n)=>n[0]-r[0]).forEach(([r,n])=>{t.resetDsCurVal(),O(t.restEncoder,r);let s=n.length;O(t.restEncoder,s);for(let i=0;i<s;i++){let o=n[i];t.writeDsClock(o.clock),t.writeDsLen(o.len)}})},dt=t=>{let e=new It,r=M(t.restDecoder);for(let n=0;n<r;n++){t.resetDsCurVal();let s=M(t.restDecoder),i=M(t.restDecoder);if(i>0){let o=ue(e.clients,s,()=>[]);for(let a=0;a<i;a++)o.push(new Rn(t.readDsClock(),t.readDsLen()))}}return e},Kc=(t,e,r)=>{let n=new It,s=M(t.restDecoder);for(let i=0;i<s;i++){t.resetDsCurVal();let o=M(t.restDecoder),a=M(t.restDecoder),c=r.clients.get(o)||[],l=q(r,o);for(let u=0;u<a;u++){let f=t.readDsClock(),d=f+t.readDsLen();if(f<l){l<d&&xn(n,o,l,d-l);let h=Pe(c,f),m=c[h];for(!m.deleted&&m.id.clock<f&&(c.splice(h+1,0,Ds(e,m,f-m.id.clock)),h++);h<c.length&&(m=c[h++],m.id.clock<d);)m.deleted||(d<m.id.clock+m.length&&c.splice(h,0,Ds(e,m,d-m.id.clock)),m.delete(e))}else xn(n,o,f,d-f)}}if(n.clients.size>0){let i=new Ne;return O(i.restEncoder,0),Qe(i,n),i.toUint8Array()}return null},cl=(t,e)=>{if(t.clients.size!==e.clients.size)return!1;for(let[r,n]of t.clients.entries()){let s=e.clients.get(r);if(s===void 0||n.length!==s.length)return!1;for(let i=0;i<n.length;i++){let o=n[i],a=s[i];if(o.clock!==a.clock||o.len!==a.len)return!1}}return!0},ll=Hi,ht=class t extends Ke{constructor({guid:e=Bc(),collectionid:r=null,gc:n=!0,gcFilter:s=()=>!0,meta:i=null,autoLoad:o=!1,shouldLoad:a=!0}={}){super(),this.gc=n,this.gcFilter=s,this.clientID=ll(),this.guid=e,this.collectionid=r,this.share=new Map,this.store=new _s,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=o,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.whenLoaded=Ki(l=>{this.on("load",()=>{this.isLoaded=!0,l(this)})});let c=()=>Ki(l=>{let u=f=>{(f===void 0||f===!0)&&(this.off("sync",u),l())};this.on("sync",u)});this.on("sync",l=>{l===!1&&this.isSynced&&(this.whenSynced=c()),this.isSynced=l===void 0||l===!0,this.isLoaded||this.emit("load",[])}),this.whenSynced=c()}load(){let e=this._item;e!==null&&!this.shouldLoad&&G(e.parent.doc,r=>{r.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set($e(this.subdocs).map(e=>e.guid))}transact(e,r=null){return G(this,e,r)}get(e,r=ee){let n=ue(this.share,e,()=>{let i=new r;return i._integrate(this,null),i}),s=n.constructor;if(r!==ee&&s!==r)if(s===ee){let i=new r;i._map=n._map,n._map.forEach(o=>{for(;o!==null;o=o.left)o.parent=i}),i._start=n._start;for(let o=i._start;o!==null;o=o.right)o.parent=i;return i._length=n._length,this.share.set(e,i),i._integrate(this,null),i}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return n}getArray(e=""){return this.get(e,ir)}getText(e=""){return this.get(e,Lr)}getMap(e=""){return this.get(e,or)}getXmlFragment(e=""){return this.get(e,ar)}toJSON(){let e={};return this.share.forEach((r,n)=>{e[n]=r.toJSON()}),e}destroy(){$e(this.subdocs).forEach(r=>r.destroy());let e=this._item;if(e!==null){this._item=null;let r=e.content;r.doc=new t({guid:this.guid,...r.opts,shouldLoad:!1}),r.doc._item=e,G(e.parent.doc,n=>{let s=r.doc;e.deleted||n.subdocsAdded.add(s),n.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(e,r){super.on(e,r)}off(e,r){super.off(e,r)}},rr=class{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return M(this.restDecoder)}readDsLen(){return M(this.restDecoder)}},Ue=class extends rr{readLeftID(){return L(M(this.restDecoder),M(this.restDecoder))}readRightID(){return L(M(this.restDecoder),M(this.restDecoder))}readClient(){return M(this.restDecoder)}readInfo(){return zt(this.restDecoder)}readString(){return bt(this.restDecoder)}readParentInfo(){return M(this.restDecoder)===1}readTypeRef(){return M(this.restDecoder)}readLen(){return M(this.restDecoder)}readAny(){return Rr(this.restDecoder)}readBuf(){return Oc(Te(this.restDecoder))}readJSON(){return JSON.parse(bt(this.restDecoder))}readKey(){return bt(this.restDecoder)}},ws=class{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=M(this.restDecoder),this.dsCurrVal}readDsLen(){let e=M(this.restDecoder)+1;return this.dsCurrVal+=e,e}},Ie=class extends ws{constructor(e){super(e),this.keys=[],M(e),this.keyClockDecoder=new xr(Te(e)),this.clientDecoder=new qt(Te(e)),this.leftClockDecoder=new xr(Te(e)),this.rightClockDecoder=new xr(Te(e)),this.infoDecoder=new hn(Te(e),zt),this.stringDecoder=new ls(Te(e)),this.parentInfoDecoder=new hn(Te(e),zt),this.typeRefDecoder=new qt(Te(e)),this.lenDecoder=new qt(Te(e))}readLeftID(){return new ft(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new ft(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Rr(this.restDecoder)}readBuf(){return Te(this.restDecoder)}readJSON(){return Rr(this.restDecoder)}readKey(){let e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{let r=this.stringDecoder.read();return this.keys.push(r),r}}},At=class{constructor(){this.restEncoder=Qt()}toUint8Array(){return De(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){O(this.restEncoder,e)}writeDsLen(e){O(this.restEncoder,e)}},Xe=class extends At{writeLeftID(e){O(this.restEncoder,e.client),O(this.restEncoder,e.clock)}writeRightID(e){O(this.restEncoder,e.client),O(this.restEncoder,e.clock)}writeClient(e){O(this.restEncoder,e)}writeInfo(e){Ar(this.restEncoder,e)}writeString(e){Rt(this.restEncoder,e)}writeParentInfo(e){O(this.restEncoder,e?1:0)}writeTypeRef(e){O(this.restEncoder,e)}writeLen(e){O(this.restEncoder,e)}writeAny(e){Cr(this.restEncoder,e)}writeBuf(e){Ce(this.restEncoder,e)}writeJSON(e){Rt(this.restEncoder,JSON.stringify(e))}writeKey(e){Rt(this.restEncoder,e)}},kr=class{constructor(){this.restEncoder=Qt(),this.dsCurrVal=0}toUint8Array(){return De(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){let r=e-this.dsCurrVal;this.dsCurrVal=e,O(this.restEncoder,r)}writeDsLen(e){e===0&&ve(),O(this.restEncoder,e-1),this.dsCurrVal+=e}},Ne=class extends kr{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new Ir,this.clientEncoder=new Jt,this.leftClockEncoder=new Ir,this.rightClockEncoder=new Ir,this.infoEncoder=new mn(Ar),this.stringEncoder=new fs,this.parentInfoEncoder=new mn(Ar),this.typeRefEncoder=new Jt,this.lenEncoder=new Jt}toUint8Array(){let e=Qt();return O(e,0),Ce(e,this.keyClockEncoder.toUint8Array()),Ce(e,this.clientEncoder.toUint8Array()),Ce(e,this.leftClockEncoder.toUint8Array()),Ce(e,this.rightClockEncoder.toUint8Array()),Ce(e,De(this.infoEncoder)),Ce(e,this.stringEncoder.toUint8Array()),Ce(e,De(this.parentInfoEncoder)),Ce(e,this.typeRefEncoder.toUint8Array()),Ce(e,this.lenEncoder.toUint8Array()),Dr(e,De(this.restEncoder)),De(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){Cr(this.restEncoder,e)}writeBuf(e){Ce(this.restEncoder,e)}writeJSON(e){Cr(this.restEncoder,e)}writeKey(e){let r=this.keyMap.get(e);r===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(r)}},np=(t,e,r,n)=>{n=ut(n,e[0].id.clock);let s=Pe(e,n);O(t.restEncoder,e.length-s),t.writeClient(r),O(t.restEncoder,n);let i=e[s];i.write(t,n-i.id.clock);for(let o=s+1;o<e.length;o++)e[o].write(t,0)},fo=(t,e,r)=>{let n=new Map;r.forEach((s,i)=>{q(e,i)>s&&n.set(i,s)}),Mn(e).forEach((s,i)=>{r.has(i)||n.set(i,0)}),O(t.restEncoder,n.size),$e(n.entries()).sort((s,i)=>i[0]-s[0]).forEach(([s,i])=>{np(t,e.clients.get(s),s,i)})},sp=(t,e)=>{let r=se(),n=M(t.restDecoder);for(let s=0;s<n;s++){let i=M(t.restDecoder),o=new Array(i),a=t.readClient(),c=M(t.restDecoder);r.set(a,{i:0,refs:o});for(let l=0;l<i;l++){let u=t.readInfo();switch(31&u){case 0:{let f=t.readLen();o[l]=new pe(L(a,c),f),c+=f;break}case 10:{let f=M(t.restDecoder);o[l]=new ge(L(a,c),f),c+=f;break}default:{let f=(u&192)===0,d=new Y(L(a,c),null,(u&128)===128?t.readLeftID():null,null,(u&64)===64?t.readRightID():null,f?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,f&&(u&32)===32?t.readString():null,$l(t,u));o[l]=d,c+=d.length}}}}return r},ip=(t,e,r)=>{let n=[],s=$e(r.keys()).sort((h,m)=>h-m);if(s.length===0)return null;let i=()=>{if(s.length===0)return null;let h=r.get(s[s.length-1]);for(;h.refs.length===h.i;)if(s.pop(),s.length>0)h=r.get(s[s.length-1]);else return null;return h},o=i();if(o===null&&n.length===0)return null;let a=new _s,c=new Map,l=(h,m)=>{let E=c.get(h);(E==null||E>m)&&c.set(h,m)},u=o.refs[o.i++],f=new Map,d=()=>{for(let h of n){let m=h.id.client,E=r.get(m);E?(E.i--,a.clients.set(m,E.refs.slice(E.i)),r.delete(m),E.i=0,E.refs=[]):a.clients.set(m,[h]),s=s.filter(_=>_!==m)}n.length=0};for(;;){if(u.constructor!==ge){let m=ue(f,u.id.client,()=>q(e,u.id.client))-u.id.clock;if(m<0)n.push(u),l(u.id.client,u.id.clock-1),d();else{let E=u.getMissing(t,e);if(E!==null){n.push(u);let _=r.get(E)||{refs:[],i:0};if(_.refs.length===_.i)l(E,q(e,E)),d();else{u=_.refs[_.i++];continue}}else(m===0||m<u.length)&&(u.integrate(t,m),f.set(u.id.client,u.id.clock+u.length))}}if(n.length>0)u=n.pop();else if(o!==null&&o.i<o.refs.length)u=o.refs[o.i++];else{if(o=i(),o===null)break;u=o.refs[o.i++]}}if(a.clients.size>0){let h=new Ne;return fo(h,a,new Map),O(h.restEncoder,0),{missing:c,update:h.toUint8Array()}}return null},op=(t,e)=>fo(t,e.doc.store,e.beforeState),ho=(t,e,r,n=new Ie(t))=>G(e,s=>{s.local=!1;let i=!1,o=s.doc,a=o.store,c=sp(n,o),l=ip(s,a,c),u=a.pendingStructs;if(u){for(let[d,h]of u.missing)if(h<q(a,d)){i=!0;break}if(l){for(let[d,h]of l.missing){let m=u.missing.get(d);(m==null||m>h)&&u.missing.set(d,h)}u.update=An([u.update,l.update])}}else a.pendingStructs=l;let f=Kc(n,s,a);if(a.pendingDs){let d=new Ie(fe(a.pendingDs));M(d.restDecoder);let h=Kc(d,s,a);f&&h?a.pendingDs=An([f,h]):a.pendingDs=f||h}else a.pendingDs=f;if(i){let d=a.pendingStructs.update;a.pendingStructs=null,Ut(s.doc,d)}},r,!1),ap=(t,e,r)=>ho(t,e,r,new Ue(t)),Ut=(t,e,r,n=Ie)=>{let s=fe(e);ho(s,t,r,new n(s))},cp=(t,e,r)=>Ut(t,e,r,Ue),lp=(t,e,r=new Map)=>{fo(t,e.store,r),Qe(t,uo(e.store))},Br=(t,e=new Uint8Array([0]),r=new Ne)=>{let n=po(e);lp(r,t,n);let s=[r.toUint8Array()];if(t.store.pendingDs&&s.push(t.store.pendingDs),t.store.pendingStructs&&s.push(Eo(t.store.pendingStructs.update,e)),s.length>1){if(r.constructor===Xe)return _l(s.map((i,o)=>o===0?i:Tl(i)));if(r.constructor===Ne)return An(s)}return s[0]},up=(t,e)=>Br(t,e,new Xe),ul=t=>{let e=new Map,r=M(t.restDecoder);for(let n=0;n<r;n++){let s=M(t.restDecoder),i=M(t.restDecoder);e.set(s,i)}return e},po=t=>ul(new rr(fe(t))),go=(t,e)=>(O(t.restEncoder,e.size),$e(e.entries()).sort((r,n)=>n[0]-r[0]).forEach(([r,n])=>{O(t.restEncoder,r),O(t.restEncoder,n)}),t),fp=(t,e)=>go(t,Mn(e.store)),dp=(t,e=new kr)=>(t instanceof Map?go(e,t):fp(e,t),e.toUint8Array()),hp=t=>dp(t,new At),to=class{constructor(){this.l=[]}},zc=()=>new to,qc=(t,e)=>t.l.push(e),Wc=(t,e)=>{let r=t.l,n=r.length;t.l=r.filter(s=>e!==s),n===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},fl=(t,e,r)=>dn(t.l,[e,r]),ft=class{constructor(e,r){this.client=e,this.clock=r}},er=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,L=(t,e)=>new ft(t,e),Jc=(t,e)=>{O(t,e.client),O(t,e.clock)},Qc=t=>L(M(t),M(t)),mo=t=>{for(let[e,r]of t.doc.share.entries())if(r===t)return e;throw ve()},Tn=(t,e)=>{for(;e!==null;){if(e.parent===t)return!0;e=e.parent._item}return!1},pp=t=>{let e=[],r=t._start;for(;r;)e.push(r),r=r.right;console.log("Children: ",e),console.log("Children content: ",e.filter(n=>!n.deleted).map(n=>n.content))},ro=class{constructor(e,r=e.getMap("users")){let n=new Map;this.yusers=r,this.doc=e,this.clients=new Map,this.dss=n;let s=(i,o)=>{let a=i.get("ds"),c=i.get("ids"),l=u=>this.clients.set(u,o);a.observe(u=>{u.changes.added.forEach(f=>{f.content.getContent().forEach(d=>{d instanceof Uint8Array&&this.dss.set(o,Ur([this.dss.get(o)||Us(),dt(new rr(fe(d)))]))})})}),this.dss.set(o,Ur(a.map(u=>dt(new rr(fe(u)))))),c.observe(u=>u.changes.added.forEach(f=>f.content.getContent().forEach(l))),c.forEach(l)};r.observe(i=>{i.keysChanged.forEach(o=>s(r.get(o),o))}),r.forEach(s)}setUserMapping(e,r,n,{filter:s=()=>!0}={}){let i=this.yusers,o=i.get(n);o||(o=new or,o.set("ids",new ir),o.set("ds",new ir),i.set(n,o)),o.get("ids").push([r]),i.observe(a=>{setTimeout(()=>{let c=i.get(n);if(c!==o){o=c,this.clients.forEach((f,d)=>{n===f&&o.get("ids").push([d])});let l=new At,u=this.dss.get(n);u&&(Qe(l,u),o.get("ds").push([l.toUint8Array()]))}},0)}),e.on("afterTransaction",a=>{setTimeout(()=>{let c=o.get("ds"),l=a.deleteSet;if(a.local&&l.clients.size>0&&s(a,l)){let u=new At;Qe(u,l),c.push([u.toUint8Array()])}})})}getUserByClientId(e){return this.clients.get(e)||null}getUserByDeletedId(e){for(let[r,n]of this.dss.entries())if(lr(n,e))return r;return null}},Or=class{constructor(e,r,n,s=0){this.type=e,this.tname=r,this.item=n,this.assoc=s}},gp=t=>{let e={};return t.type&&(e.type=t.type),t.tname&&(e.tname=t.tname),t.item&&(e.item=t.item),t.assoc!=null&&(e.assoc=t.assoc),e},mp=t=>new Or(t.type==null?null:L(t.type.client,t.type.clock),t.tname||null,t.item==null?null:L(t.item.client,t.item.clock),t.assoc==null?0:t.assoc),vs=class{constructor(e,r,n=0){this.type=e,this.index=r,this.assoc=n}},yp=(t,e,r=0)=>new vs(t,e,r),ps=(t,e,r)=>{let n=null,s=null;return t._item===null?s=mo(t):n=L(t._item.id.client,t._item.id.clock),new Or(n,s,e,r)},Ep=(t,e,r=0)=>{let n=t._start;if(r<0){if(e===0)return ps(t,null,r);e--}for(;n!==null;){if(!n.deleted&&n.countable){if(n.length>e)return ps(t,L(n.id.client,n.id.clock+e),r);e-=n.length}if(n.right===null&&r<0)return ps(t,n.lastId,r);n=n.right}return ps(t,null,r)},wp=(t,e)=>{let{type:r,tname:n,item:s,assoc:i}=e;if(s!==null)O(t,0),Jc(t,s);else if(n!==null)Ar(t,1),Rt(t,n);else if(r!==null)Ar(t,2),Jc(t,r);else throw ve();return yn(t,i),t},vp=t=>{let e=Qt();return wp(e,t),De(e)},_p=t=>{let e=null,r=null,n=null;switch(M(t)){case 0:n=Qc(t);break;case 1:r=bt(t);break;case 2:e=Qc(t)}let s=Fi(t)?pn(t):0;return new Or(e,r,n,s)},bp=t=>_p(fe(t)),Sp=(t,e)=>{let r=e.store,n=t.item,s=t.type,i=t.tname,o=t.assoc,a=null,c=0;if(n!==null){if(q(r,n.client)<=n.clock)return null;let l=ao(r,n),u=l.item;if(!(u instanceof Y))return null;if(a=u.parent,a._item===null||!a._item.deleted){c=u.deleted||!u.countable?0:l.diff+(o>=0?0:1);let f=u.left;for(;f!==null;)!f.deleted&&f.countable&&(c+=f.length),f=f.left}}else{if(i!==null)a=e.get(i);else if(s!==null){if(q(r,s.client)<=s.clock)return null;let{item:l}=ao(r,s);if(l instanceof Y&&l.content instanceof Ve)a=l.content.type;else return null}else throw ve();o>=0?c=a._length:c=0}return yp(a,c,t.assoc)},Rp=(t,e)=>t===e||t!==null&&e!==null&&t.tname===e.tname&&er(t.item,e.item)&&er(t.type,e.type)&&t.assoc===e.assoc,Cn=class{constructor(e,r){this.ds=e,this.sv=r}},xp=(t,e)=>{let r=t.ds.clients,n=e.ds.clients,s=t.sv,i=e.sv;if(s.size!==i.size||r.size!==n.size)return!1;for(let[o,a]of s.entries())if(i.get(o)!==a)return!1;for(let[o,a]of r.entries()){let c=n.get(o)||[];if(a.length!==c.length)return!1;for(let l=0;l<a.length;l++){let u=a[l],f=c[l];if(u.clock!==f.clock||u.len!==f.len)return!1}}return!0},dl=(t,e=new kr)=>(Qe(e,t.ds),go(e,t.sv),e.toUint8Array()),Tp=t=>dl(t,new At),hl=(t,e=new ws(fe(t)))=>new Cn(dt(e),ul(e)),Cp=t=>hl(t,new rr(fe(t))),yo=(t,e)=>new Cn(t,e),Ip=yo(Us(),new Map),Ap=t=>yo(uo(t.store),Mn(t.store)),Zt=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!lr(e.ds,t.id),no=(t,e)=>{let r=ue(t.meta,no,lt),n=t.doc.store;r.has(e)||(e.sv.forEach((s,i)=>{s<q(n,i)&&_e(t,L(i,s))}),tr(t,e.ds,s=>{}),r.add(e))},Dp=(t,e,r=new ht)=>{if(t.gc)throw new Error("Garbage-collection must be disabled in `originDoc`!");let{sv:n,ds:s}=e,i=new Ne;return t.transact(o=>{let a=0;n.forEach(c=>{c>0&&a++}),O(i.restEncoder,a);for(let[c,l]of n){if(l===0)continue;l<q(t.store,c)&&_e(o,L(c,l));let u=t.store.clients.get(c)||[],f=Pe(u,l-1);O(i.restEncoder,f+1),i.writeClient(c),O(i.restEncoder,0);for(let d=0;d<=f;d++)u[d].write(i,0)}Qe(i,s)}),Ut(r,i.toUint8Array(),"snapshot"),r},Up=(t,e,r=Ie)=>{let n=new r(fe(e)),s=new Ze(n,!1);for(let o=s.curr;o!==null;o=s.next())if((t.sv.get(o.id.client)||0)<o.id.clock+o.length)return!1;let i=Ur([t.ds,dt(n)]);return cl(t.ds,i)},kp=(t,e)=>Up(t,e,Ue),_s=class{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}},Mn=t=>{let e=new Map;return t.clients.forEach((r,n)=>{let s=r[r.length-1];e.set(n,s.id.clock+s.length)}),e},q=(t,e)=>{let r=t.clients.get(e);if(r===void 0)return 0;let n=r[r.length-1];return n.id.clock+n.length},pl=(t,e)=>{let r=t.clients.get(e.id.client);if(r===void 0)r=[],t.clients.set(e.id.client,r);else{let n=r[r.length-1];if(n.id.clock+n.length!==e.id.clock)throw ve()}r.push(e)},Pe=(t,e)=>{let r=0,n=t.length-1,s=t[n],i=s.id.clock;if(i===e)return n;let o=xe(e/(i+s.length-1)*n);for(;r<=n;){if(s=t[o],i=s.id.clock,i<=e){if(e<i+s.length)return o;r=o+1}else n=o-1;o=xe((r+n)/2)}throw ve()},Op=(t,e)=>{let r=t.clients.get(e.client);return r[Pe(r,e.clock)]},bn=Op,so=(t,e,r)=>{let n=Pe(e,r),s=e[n];return s.id.clock<r&&s instanceof Y?(e.splice(n+1,0,Ds(t,s,r-s.id.clock)),n+1):n},_e=(t,e)=>{let r=t.doc.store.clients.get(e.client);return r[so(t,r,e.clock)]},Xc=(t,e,r)=>{let n=e.clients.get(r.client),s=Pe(n,r.clock),i=n[s];return r.clock!==i.id.clock+i.length-1&&i.constructor!==pe&&n.splice(s+1,0,Ds(t,i,r.clock-i.id.clock+1)),i},Lp=(t,e,r)=>{let n=t.clients.get(e.id.client);n[Pe(n,e.id.clock)]=r},gl=(t,e,r,n,s)=>{if(n===0)return;let i=r+n,o=so(t,e,r),a;do a=e[o++],i<a.id.clock+a.length&&so(t,e,i),s(a);while(o<e.length&&e[o].id.clock<i)},bs=class{constructor(e,r,n){this.doc=e,this.deleteSet=new It,this.beforeState=Mn(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=r,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}},Zc=(t,e)=>e.deleteSet.clients.size===0&&!cc(e.afterState,(r,n)=>e.beforeState.get(n)!==r)?!1:(lo(e.deleteSet),op(t,e),Qe(t,e.deleteSet),!0),el=(t,e,r)=>{let n=e._item;(n===null||n.id.clock<(t.beforeState.get(n.id.client)||0)&&!n.deleted)&&ue(t.changed,e,lt).add(r)},ys=(t,e)=>{let r=t[e],n=t[e-1],s=e;for(;s>0;r=n,n=t[--s-1]){if(n.deleted===r.deleted&&n.constructor===r.constructor&&n.mergeWith(r)){r instanceof Y&&r.parentSub!==null&&r.parent._map.get(r.parentSub)===r&&r.parent._map.set(r.parentSub,n);continue}break}let i=e-s;return i&&t.splice(e+1-i,i),i},ml=(t,e,r)=>{for(let[n,s]of t.clients.entries()){let i=e.clients.get(n);for(let o=s.length-1;o>=0;o--){let a=s[o],c=a.clock+a.len;for(let l=Pe(i,a.clock),u=i[l];l<i.length&&u.id.clock<c;u=i[++l]){let f=i[l];if(a.clock+a.len<=f.id.clock)break;f instanceof Y&&f.deleted&&!f.keep&&r(f)&&f.gc(e,!1)}}}},yl=(t,e)=>{t.clients.forEach((r,n)=>{let s=e.clients.get(n);for(let i=r.length-1;i>=0;i--){let o=r[i],a=os(s.length-1,1+Pe(s,o.clock+o.len-1));for(let c=a,l=s[c];c>0&&l.id.clock>=o.clock;l=s[c])c-=1+ys(s,c)}})},Mp=(t,e,r)=>{ml(t,e,r),yl(t,e)},El=(t,e)=>{if(e<t.length){let r=t[e],n=r.doc,s=n.store,i=r.deleteSet,o=r._mergeStructs;try{lo(i),r.afterState=Mn(r.doc.store),n.emit("beforeObserverCalls",[r,n]);let a=[];r.changed.forEach((c,l)=>a.push(()=>{(l._item===null||!l._item.deleted)&&l._callObserver(r,c)})),a.push(()=>{r.changedParentTypes.forEach((c,l)=>{l._dEH.l.length>0&&(l._item===null||!l._item.deleted)&&(c=c.filter(u=>u.target._item===null||!u.target._item.deleted),c.forEach(u=>{u.currentTarget=l,u._path=null}),c.sort((u,f)=>u.path.length-f.path.length),fl(l._dEH,c,r))})}),a.push(()=>n.emit("afterTransaction",[r,n])),dn(a,[]),r._needFormattingCleanup&&ng(r)}finally{n.gc&&ml(i,s,n.gcFilter),yl(i,s),r.afterState.forEach((u,f)=>{let d=r.beforeState.get(f)||0;if(d!==u){let h=s.clients.get(f),m=ut(Pe(h,d),1);for(let E=h.length-1;E>=m;)E-=1+ys(h,E)}});for(let u=o.length-1;u>=0;u--){let{client:f,clock:d}=o[u].id,h=s.clients.get(f),m=Pe(h,d);m+1<h.length&&ys(h,m+1)>1||m>0&&ys(h,m)}if(!r.local&&r.afterState.get(n.clientID)!==r.beforeState.get(n.clientID)&&(ds(_n,En,"[yjs] ",wn,vn,"Changed the client-id because another client seems to be using it."),n.clientID=ll()),n.emit("afterTransactionCleanup",[r,n]),n._observers.has("update")){let u=new Xe;Zc(u,r)&&n.emit("update",[u.toUint8Array(),r.origin,n,r])}if(n._observers.has("updateV2")){let u=new Ne;Zc(u,r)&&n.emit("updateV2",[u.toUint8Array(),r.origin,n,r])}let{subdocsAdded:a,subdocsLoaded:c,subdocsRemoved:l}=r;(a.size>0||l.size>0||c.size>0)&&(a.forEach(u=>{u.clientID=n.clientID,u.collectionid==null&&(u.collectionid=n.collectionid),n.subdocs.add(u)}),l.forEach(u=>n.subdocs.delete(u)),n.emit("subdocs",[{loaded:c,added:a,removed:l},n,r]),l.forEach(u=>u.destroy())),t.length<=e+1?(n._transactionCleanups=[],n.emit("afterAllTransactions",[n,t])):El(t,e+1)}}},G=(t,e,r=null,n=!0)=>{let s=t._transactionCleanups,i=!1,o=null;t._transaction===null&&(i=!0,t._transaction=new bs(t,r,n),s.push(t._transaction),s.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{o=e(t._transaction)}finally{if(i){let a=t._transaction===s[0];t._transaction=null,a&&El(s,0)}}return o},io=class{constructor(e,r){this.insertions=r,this.deletions=e,this.meta=new Map}},tl=(t,e,r)=>{tr(t,r.deletions,n=>{n instanceof Y&&e.scope.some(s=>Tn(s,n))&&So(n,!1)})},rl=(t,e,r)=>{let n=null,s=null,i=t.doc,o=t.scope;if(G(i,a=>{for(;e.length>0&&n===null;){let c=i.store,l=e.pop(),u=new Set,f=[],d=!1;tr(a,l.insertions,h=>{if(h instanceof Y){if(h.redone!==null){let{item:m,diff:E}=ao(c,h.id);E>0&&(m=_e(a,L(m.id.client,m.id.clock+E))),h=m}!h.deleted&&o.some(m=>Tn(m,h))&&f.push(h)}}),tr(a,l.deletions,h=>{h instanceof Y&&o.some(m=>Tn(m,h))&&!lr(l.insertions,h.id)&&u.add(h)}),u.forEach(h=>{d=Hl(a,h,u,l.insertions,t.ignoreRemoteMapChanges,t)!==null||d});for(let h=f.length-1;h>=0;h--){let m=f[h];t.deleteFilter(m)&&(m.delete(a),d=!0)}n=d?l:null}a.changed.forEach((c,l)=>{c.has(null)&&l._searchMarker&&(l._searchMarker.length=0)}),s=a},t),n!=null){let a=s.changedParentTypes;t.emit("stack-item-popped",[{stackItem:n,type:r,changedParentTypes:a},t])}return n},nr=class extends Ke{constructor(e,{captureTimeout:r=500,captureTransaction:n=c=>!0,deleteFilter:s=()=>!0,trackedOrigins:i=new Set([null]),ignoreRemoteMapChanges:o=!1,doc:a=Kt(e)?e[0].doc:e.doc}={}){super(),this.scope=[],this.addToScope(e),this.deleteFilter=s,i.add(this),this.trackedOrigins=i,this.captureTransaction=n,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.doc=a,this.lastChange=0,this.ignoreRemoteMapChanges=o,this.captureTimeout=r,this.afterTransactionHandler=c=>{if(!this.captureTransaction(c)||!this.scope.some(_=>c.changedParentTypes.has(_))||!this.trackedOrigins.has(c.origin)&&(!c.origin||!this.trackedOrigins.has(c.origin.constructor)))return;let l=this.undoing,u=this.redoing,f=l?this.redoStack:this.undoStack;l?this.stopCapturing():u||this.clear(!1,!0);let d=new It;c.afterState.forEach((_,b)=>{let T=c.beforeState.get(b)||0,A=_-T;A>0&&xn(d,b,T,A)});let h=xt(),m=!1;if(this.lastChange>0&&h-this.lastChange<this.captureTimeout&&f.length>0&&!l&&!u){let _=f[f.length-1];_.deletions=Ur([_.deletions,c.deleteSet]),_.insertions=Ur([_.insertions,d])}else f.push(new io(c.deleteSet,d)),m=!0;!l&&!u&&(this.lastChange=h),tr(c,c.deleteSet,_=>{_ instanceof Y&&this.scope.some(b=>Tn(b,_))&&So(_,!0)});let E=[{stackItem:f[f.length-1],origin:c.origin,type:l?"redo":"undo",changedParentTypes:c.changedParentTypes},this];m?this.emit("stack-item-added",E):this.emit("stack-item-updated",E)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){e=Kt(e)?e:[e],e.forEach(r=>{this.scope.every(n=>n!==r)&&this.scope.push(r)})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,r=!0){(e&&this.canUndo()||r&&this.canRedo())&&this.doc.transact(n=>{e&&(this.undoStack.forEach(s=>tl(n,this,s)),this.undoStack=[]),r&&(this.redoStack.forEach(s=>tl(n,this,s)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:r}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let e;try{e=rl(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){this.redoing=!0;let e;try{e=rl(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}};function*Np(t){let e=M(t.restDecoder);for(let r=0;r<e;r++){let n=M(t.restDecoder),s=t.readClient(),i=M(t.restDecoder);for(let o=0;o<n;o++){let a=t.readInfo();if(a===10){let c=M(t.restDecoder);yield new ge(L(s,i),c),i+=c}else if((31&a)!==0){let c=(a&192)===0,l=new Y(L(s,i),null,(a&128)===128?t.readLeftID():null,null,(a&64)===64?t.readRightID():null,c?t.readParentInfo()?t.readString():t.readLeftID():null,c&&(a&32)===32?t.readString():null,$l(t,a));yield l,i+=l.length}else{let c=t.readLen();yield new pe(L(s,i),c),i+=c}}}}var Ze=class{constructor(e,r){this.gen=Np(e),this.curr=null,this.done=!1,this.filterSkips=r,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===ge);return this.curr}},Pp=t=>wl(t,Ue),wl=(t,e=Ie)=>{let r=[],n=new e(fe(t)),s=new Ze(n,!1);for(let o=s.curr;o!==null;o=s.next())r.push(o);ds("Structs: ",r);let i=dt(n);ds("DeleteSet: ",i)},Vp=t=>vl(t,Ue),vl=(t,e=Ie)=>{let r=[],n=new e(fe(t)),s=new Ze(n,!1);for(let i=s.curr;i!==null;i=s.next())r.push(i);return{structs:r,ds:dt(n)}},In=class{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}},_l=t=>An(t,Ue,Xe),bl=(t,e=kr,r=Ie)=>{let n=new e,s=new Ze(new r(fe(t)),!1),i=s.curr;if(i!==null){let o=0,a=i.id.client,c=i.id.clock!==0,l=c?0:i.id.clock+i.length;for(;i!==null;i=s.next())a!==i.id.client&&(l!==0&&(o++,O(n.restEncoder,a),O(n.restEncoder,l)),a=i.id.client,l=0,c=i.id.clock!==0),i.constructor===ge&&(c=!0),c||(l=i.id.clock+i.length);l!==0&&(o++,O(n.restEncoder,a),O(n.restEncoder,l));let u=Qt();return O(u,o),Pc(u,n.restEncoder),n.restEncoder=u,n.toUint8Array()}else return O(n.restEncoder,0),n.toUint8Array()},Bp=t=>bl(t,At,Ue),Sl=(t,e=Ie)=>{let r=new Map,n=new Map,s=new Ze(new e(fe(t)),!1),i=s.curr;if(i!==null){let o=i.id.client,a=i.id.clock;for(r.set(o,a);i!==null;i=s.next())o!==i.id.client&&(n.set(o,a),r.set(i.id.client,i.id.clock),o=i.id.client),a=i.id.clock+i.length;n.set(o,a)}return{from:r,to:n}},Fp=t=>Sl(t,Ue),jp=(t,e)=>{if(t.constructor===pe){let{client:r,clock:n}=t.id;return new pe(L(r,n+e),t.length-e)}else if(t.constructor===ge){let{client:r,clock:n}=t.id;return new ge(L(r,n+e),t.length-e)}else{let r=t,{client:n,clock:s}=r.id;return new Y(L(n,s+e),null,L(n,s+e-1),null,r.rightOrigin,r.parent,r.parentSub,r.content.splice(e))}},An=(t,e=Ie,r=Ne)=>{if(t.length===1)return t[0];let n=t.map(u=>new e(fe(u))),s=n.map(u=>new Ze(u,!0)),i=null,o=new r,a=new In(o);for(;s=s.filter(d=>d.curr!==null),s.sort((d,h)=>{if(d.curr.id.client===h.curr.id.client){let m=d.curr.id.clock-h.curr.id.clock;return m===0?d.curr.constructor===h.curr.constructor?0:d.curr.constructor===ge?1:-1:m}else return h.curr.id.client-d.curr.id.client}),s.length!==0;){let u=s[0],f=u.curr.id.client;if(i!==null){let d=u.curr,h=!1;for(;d!==null&&d.id.clock+d.length<=i.struct.id.clock+i.struct.length&&d.id.client>=i.struct.id.client;)d=u.next(),h=!0;if(d===null||d.id.client!==f||h&&d.id.clock>i.struct.id.clock+i.struct.length)continue;if(f!==i.struct.id.client)Tt(a,i.struct,i.offset),i={struct:d,offset:0},u.next();else if(i.struct.id.clock+i.struct.length<d.id.clock)if(i.struct.constructor===ge)i.struct.length=d.id.clock+d.length-i.struct.id.clock;else{Tt(a,i.struct,i.offset);let m=d.id.clock-i.struct.id.clock-i.struct.length;i={struct:new ge(L(f,i.struct.id.clock+i.struct.length),m),offset:0}}else{let m=i.struct.id.clock+i.struct.length-d.id.clock;m>0&&(i.struct.constructor===ge?i.struct.length-=m:d=jp(d,m)),i.struct.mergeWith(d)||(Tt(a,i.struct,i.offset),i={struct:d,offset:0},u.next())}}else i={struct:u.curr,offset:0},u.next();for(let d=u.curr;d!==null&&d.id.client===f&&d.id.clock===i.struct.id.clock+i.struct.length&&d.constructor!==ge;d=u.next())Tt(a,i.struct,i.offset),i={struct:d,offset:0}}i!==null&&(Tt(a,i.struct,i.offset),i=null),wo(a);let c=n.map(u=>dt(u)),l=Ur(c);return Qe(o,l),o.toUint8Array()},Eo=(t,e,r=Ie,n=Ne)=>{let s=po(e),i=new n,o=new In(i),a=new r(fe(t)),c=new Ze(a,!1);for(;c.curr;){let u=c.curr,f=u.id.client,d=s.get(f)||0;if(c.curr.constructor===ge){c.next();continue}if(u.id.clock+u.length>d)for(Tt(o,u,ut(d-u.id.clock,0)),c.next();c.curr&&c.curr.id.client===f;)Tt(o,c.curr,0),c.next();else for(;c.curr&&c.curr.id.client===f&&c.curr.id.clock+c.curr.length<=d;)c.next()}wo(o);let l=dt(a);return Qe(i,l),i.toUint8Array()},Gp=(t,e)=>Eo(t,e,Ue,Xe),Rl=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:De(t.encoder.restEncoder)}),t.encoder.restEncoder=Qt(),t.written=0)},Tt=(t,e,r)=>{t.written>0&&t.currClient!==e.id.client&&Rl(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),O(t.encoder.restEncoder,e.id.clock+r)),e.write(t.encoder,r),t.written++},wo=t=>{Rl(t);let e=t.encoder.restEncoder;O(e,t.clientStructs.length);for(let r=0;r<t.clientStructs.length;r++){let n=t.clientStructs[r];O(e,n.written),Dr(e,n.restEncoder)}},ks=(t,e,r,n)=>{let s=new r(fe(t)),i=new Ze(s,!1),o=new n,a=new In(o);for(let l=i.curr;l!==null;l=i.next())Tt(a,e(l),0);wo(a);let c=dt(s);return Qe(o,c),o.toUint8Array()},xl=({formatting:t=!0,subdocs:e=!0,yxml:r=!0}={})=>{let n=0,s=se(),i=se(),o=se(),a=se();return a.set(null,null),c=>{switch(c.constructor){case pe:case ge:return c;case Y:{let l=c,u=l.content;switch(u.constructor){case Pr:break;case Ve:{if(r){let f=u.type;f instanceof Mr&&(f.nodeName=ue(i,f.nodeName,()=>"node-"+n)),f instanceof On&&(f.hookName=ue(i,f.hookName,()=>"hook-"+n))}break}case Dt:{let f=u;f.arr=f.arr.map(()=>n);break}case cr:{let f=u;f.content=new Uint8Array([n]);break}case Vr:{let f=u;e&&(f.opts={},f.doc.guid=n+"");break}case pt:{let f=u;f.embed={};break}case J:{let f=u;t&&(f.key=ue(o,f.key,()=>n+""),f.value=ue(a,f.value,()=>({i:n})));break}case Ln:{let f=u;f.arr=f.arr.map(()=>n);break}case Ge:{let f=u;f.str=hc(n%10+"",f.str.length);break}default:ve()}return l.parentSub&&(l.parentSub=ue(s,l.parentSub,()=>n+"")),n++,c}default:ve()}}},Yp=(t,e)=>ks(t,xl(e),Ue,Xe),Hp=(t,e)=>ks(t,xl(e),Ie,Ne),$p=t=>ks(t,Mi,Ue,Ne),Tl=t=>ks(t,Mi,Ie,Xe),nl="You must not compute changes after the event-handler fired.",sr=class{constructor(e,r){this.target=e,this.currentTarget=e,this.transaction=r,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=Kp(this.currentTarget,this.target))}deletes(e){return lr(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw qe(nl);let e=new Map,r=this.target;this.transaction.changed.get(r).forEach(s=>{if(s!==null){let i=r._map.get(s),o,a;if(this.adds(i)){let c=i.left;for(;c!==null&&this.adds(c);)c=c.left;if(this.deletes(i))if(c!==null&&this.deletes(c))o="delete",a=is(c.content.getContent());else return;else c!==null&&this.deletes(c)?(o="update",a=is(c.content.getContent())):(o="add",a=void 0)}else if(this.deletes(i))o="delete",a=is(i.content.getContent());else return;e.set(s,{action:o,oldValue:a})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw qe(nl);let r=this.target,n=lt(),s=lt(),i=[];if(e={added:n,deleted:s,delta:i,keys:this.keys},this.transaction.changed.get(r).has(null)){let a=null,c=()=>{a&&i.push(a)};for(let l=r._start;l!==null;l=l.right)l.deleted?this.deletes(l)&&!this.adds(l)&&((a===null||a.delete===void 0)&&(c(),a={delete:0}),a.delete+=l.length,s.add(l)):this.adds(l)?((a===null||a.insert===void 0)&&(c(),a={insert:[]}),a.insert=a.insert.concat(l.content.getContent()),n.add(l)):((a===null||a.retain===void 0)&&(c(),a={retain:0}),a.retain+=l.length);a!==null&&a.retain===void 0&&c()}this._changes=e}return e}},Kp=(t,e)=>{let r=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)r.unshift(e._item.parentSub);else{let n=0,s=e._item.parent._start;for(;s!==e._item&&s!==null;)s.deleted||n++,s=s.right;r.unshift(n)}e=e._item.parent}return r},Cl=80,vo=0,oo=class{constructor(e,r){e.marker=!0,this.p=e,this.index=r,this.timestamp=vo++}},zp=t=>{t.timestamp=vo++},Il=(t,e,r)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=r,t.timestamp=vo++},qp=(t,e,r)=>{if(t.length>=Cl){let n=t.reduce((s,i)=>s.timestamp<i.timestamp?s:i);return Il(n,e,r),n}else{let n=new oo(e,r);return t.push(n),n}},Os=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;let r=t._searchMarker.length===0?null:t._searchMarker.reduce((i,o)=>wr(e-i.index)<wr(e-o.index)?i:o),n=t._start,s=0;for(r!==null&&(n=r.p,s=r.index,zp(r));n.right!==null&&s<e;){if(!n.deleted&&n.countable){if(e<s+n.length)break;s+=n.length}n=n.right}for(;n.left!==null&&s>e;)n=n.left,!n.deleted&&n.countable&&(s-=n.length);for(;n.left!==null&&n.left.id.client===n.id.client&&n.left.id.clock+n.left.length===n.id.clock;)n=n.left,!n.deleted&&n.countable&&(s-=n.length);return r!==null&&wr(r.index-s)<n.parent.length/Cl?(Il(r,n,s),r):qp(t._searchMarker,n,s)},Dn=(t,e,r)=>{for(let n=t.length-1;n>=0;n--){let s=t[n];if(r>0){let i=s.p;for(i.marker=!1;i&&(i.deleted||!i.countable);)i=i.left,i&&!i.deleted&&i.countable&&(s.index-=i.length);if(i===null||i.marker===!0){t.splice(n,1);continue}s.p=i,i.marker=!0}(e<s.index||r>0&&e===s.index)&&(s.index=ut(e,s.index+r))}},Wp=t=>{let e=t._start,r=[];for(;e;)r.push(e),e=e.right;return r},Ls=(t,e,r)=>{let n=t,s=e.changedParentTypes;for(;ue(s,t,()=>[]).push(r),t._item!==null;)t=t._item.parent;fl(n._eH,r,e)},ee=class{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=zc(),this._dEH=zc(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,r){this.doc=e,this._item=r}_copy(){throw je()}clone(){throw je()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,r){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){qc(this._eH,e)}observeDeep(e){qc(this._dEH,e)}unobserve(e){Wc(this._eH,e)}unobserveDeep(e){Wc(this._dEH,e)}toJSON(){}},Al=(t,e,r)=>{e<0&&(e=t._length+e),r<0&&(r=t._length+r);let n=r-e,s=[],i=t._start;for(;i!==null&&n>0;){if(i.countable&&!i.deleted){let o=i.content.getContent();if(o.length<=e)e-=o.length;else{for(let a=e;a<o.length&&n>0;a++)s.push(o[a]),n--;e=0}}i=i.right}return s},Dl=t=>{let e=[],r=t._start;for(;r!==null;){if(r.countable&&!r.deleted){let n=r.content.getContent();for(let s=0;s<n.length;s++)e.push(n[s])}r=r.right}return e},Jp=(t,e)=>{let r=[],n=t._start;for(;n!==null;){if(n.countable&&Zt(n,e)){let s=n.content.getContent();for(let i=0;i<s.length;i++)r.push(s[i])}n=n.right}return r},Un=(t,e)=>{let r=0,n=t._start;for(;n!==null;){if(n.countable&&!n.deleted){let s=n.content.getContent();for(let i=0;i<s.length;i++)e(s[i],r++,t)}n=n.right}},Ul=(t,e)=>{let r=[];return Un(t,(n,s)=>{r.push(e(n,s,t))}),r},Qp=t=>{let e=t._start,r=null,n=0;return{[Symbol.iterator](){return this},next:()=>{if(r===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};r=e.content.getContent(),n=0,e=e.right}let s=r[n++];return r.length<=n&&(r=null),{done:!1,value:s}}}},kl=(t,e)=>{let r=Os(t,e),n=t._start;for(r!==null&&(n=r.p,e-=r.index);n!==null;n=n.right)if(!n.deleted&&n.countable){if(e<n.length)return n.content.getContent()[e];e-=n.length}},Ss=(t,e,r,n)=>{let s=r,i=t.doc,o=i.clientID,a=i.store,c=r===null?e._start:r.right,l=[],u=()=>{l.length>0&&(s=new Y(L(o,q(a,o)),s,s&&s.lastId,c,c&&c.id,e,null,new Dt(l)),s.integrate(t,0),l=[])};n.forEach(f=>{if(f===null)l.push(f);else switch(f.constructor){case Number:case Object:case Boolean:case Array:case String:l.push(f);break;default:switch(u(),f.constructor){case Uint8Array:case ArrayBuffer:s=new Y(L(o,q(a,o)),s,s&&s.lastId,c,c&&c.id,e,null,new cr(new Uint8Array(f))),s.integrate(t,0);break;case ht:s=new Y(L(o,q(a,o)),s,s&&s.lastId,c,c&&c.id,e,null,new Vr(f)),s.integrate(t,0);break;default:if(f instanceof ee)s=new Y(L(o,q(a,o)),s,s&&s.lastId,c,c&&c.id,e,null,new Ve(f)),s.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),u()},Ol=qe("Length exceeded!"),Ll=(t,e,r,n)=>{if(r>e._length)throw Ol;if(r===0)return e._searchMarker&&Dn(e._searchMarker,r,n.length),Ss(t,e,null,n);let s=r,i=Os(e,r),o=e._start;for(i!==null&&(o=i.p,r-=i.index,r===0&&(o=o.prev,r+=o&&o.countable&&!o.deleted?o.length:0));o!==null;o=o.right)if(!o.deleted&&o.countable){if(r<=o.length){r<o.length&&_e(t,L(o.id.client,o.id.clock+r));break}r-=o.length}return e._searchMarker&&Dn(e._searchMarker,s,n.length),Ss(t,e,o,n)},Xp=(t,e,r)=>{let s=(e._searchMarker||[]).reduce((i,o)=>o.index>i.index?o:i,{index:0,p:e._start}).p;if(s)for(;s.right;)s=s.right;return Ss(t,e,s,r)},Ml=(t,e,r,n)=>{if(n===0)return;let s=r,i=n,o=Os(e,r),a=e._start;for(o!==null&&(a=o.p,r-=o.index);a!==null&&r>0;a=a.right)!a.deleted&&a.countable&&(r<a.length&&_e(t,L(a.id.client,a.id.clock+r)),r-=a.length);for(;n>0&&a!==null;)a.deleted||(n<a.length&&_e(t,L(a.id.client,a.id.clock+n)),a.delete(t),n-=a.length),a=a.right;if(n>0)throw Ol;e._searchMarker&&Dn(e._searchMarker,s,-i+n)},Rs=(t,e,r)=>{let n=e._map.get(r);n!==void 0&&n.delete(t)},_o=(t,e,r,n)=>{let s=e._map.get(r)||null,i=t.doc,o=i.clientID,a;if(n==null)a=new Dt([n]);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:a=new Dt([n]);break;case Uint8Array:a=new cr(n);break;case ht:a=new Vr(n);break;default:if(n instanceof ee)a=new Ve(n);else throw new Error("Unexpected content type")}new Y(L(o,q(i.store,o)),s,s&&s.lastId,null,null,e,r,a).integrate(t,0)},bo=(t,e)=>{let r=t._map.get(e);return r!==void 0&&!r.deleted?r.content.getContent()[r.length-1]:void 0},Nl=t=>{let e={};return t._map.forEach((r,n)=>{r.deleted||(e[n]=r.content.getContent()[r.length-1])}),e},Pl=(t,e)=>{let r=t._map.get(e);return r!==void 0&&!r.deleted},Zp=(t,e,r)=>{let n=t._map.get(e)||null;for(;n!==null&&(!r.sv.has(n.id.client)||n.id.clock>=(r.sv.get(n.id.client)||0));)n=n.left;return n!==null&&Zt(n,r)?n.content.getContent()[n.length-1]:void 0},gs=t=>Yc(t.entries(),e=>!e[1].deleted),xs=class extends sr{constructor(e,r){super(e,r),this._transaction=r}},ir=class t extends ee{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){let r=new t;return r.push(e),r}_integrate(e,r){super._integrate(e,r),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new t}clone(){let e=new t;return e.insert(0,this.toArray().map(r=>r instanceof ee?r.clone():r)),e}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}_callObserver(e,r){super._callObserver(e,r),Ls(this,e,new xs(this,e))}insert(e,r){this.doc!==null?G(this.doc,n=>{Ll(n,this,e,r)}):this._prelimContent.splice(e,0,...r)}push(e){this.doc!==null?G(this.doc,r=>{Xp(r,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,r=1){this.doc!==null?G(this.doc,n=>{Ml(n,this,e,r)}):this._prelimContent.splice(e,r)}get(e){return kl(this,e)}toArray(){return Dl(this)}slice(e=0,r=this.length){return Al(this,e,r)}toJSON(){return this.map(e=>e instanceof ee?e.toJSON():e)}map(e){return Ul(this,e)}forEach(e){Un(this,e)}[Symbol.iterator](){return Qp(this)}_write(e){e.writeTypeRef(wg)}},eg=t=>new ir,Ts=class extends sr{constructor(e,r,n){super(e,r),this.keysChanged=n}},or=class t extends ee{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,r){super._integrate(e,r),this._prelimContent.forEach((n,s)=>{this.set(s,n)}),this._prelimContent=null}_copy(){return new t}clone(){let e=new t;return this.forEach((r,n)=>{e.set(n,r instanceof ee?r.clone():r)}),e}_callObserver(e,r){Ls(this,e,new Ts(this,e,r))}toJSON(){let e={};return this._map.forEach((r,n)=>{if(!r.deleted){let s=r.content.getContent()[r.length-1];e[n]=s instanceof ee?s.toJSON():s}}),e}get size(){return[...gs(this._map)].length}keys(){return hs(gs(this._map),e=>e[0])}values(){return hs(gs(this._map),e=>e[1].content.getContent()[e[1].length-1])}entries(){return hs(gs(this._map),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this._map.forEach((r,n)=>{r.deleted||e(r.content.getContent()[r.length-1],n,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?G(this.doc,r=>{Rs(r,this,e)}):this._prelimContent.delete(e)}set(e,r){return this.doc!==null?G(this.doc,n=>{_o(n,this,e,r)}):this._prelimContent.set(e,r),r}get(e){return bo(this,e)}has(e){return Pl(this,e)}clear(){this.doc!==null?G(this.doc,e=>{this.forEach(function(r,n,s){Rs(e,s,n)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(vg)}},tg=t=>new or,Ct=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&Li(t,e),kn=class{constructor(e,r,n,s){this.left=e,this.right=r,this.index=n,this.currentAttributes=s}forward(){this.right===null&&ve(),this.right.content.constructor===J?this.right.deleted||Fr(this.currentAttributes,this.right.content):this.right.deleted||(this.index+=this.right.length),this.left=this.right,this.right=this.right.right}},sl=(t,e,r)=>{for(;e.right!==null&&r>0;)e.right.content.constructor===J?e.right.deleted||Fr(e.currentAttributes,e.right.content):e.right.deleted||(r<e.right.length&&_e(t,L(e.right.id.client,e.right.id.clock+r)),e.index+=e.right.length,r-=e.right.length),e.left=e.right,e.right=e.right.right;return e},ms=(t,e,r)=>{let n=new Map,s=Os(e,r);if(s){let i=new kn(s.p.left,s.p,s.index,n);return sl(t,i,r-s.index)}else{let i=new kn(null,e._start,0,n);return sl(t,i,r)}},Vl=(t,e,r,n)=>{for(;r.right!==null&&(r.right.deleted===!0||r.right.content.constructor===J&&Ct(n.get(r.right.content.key),r.right.content.value));)r.right.deleted||n.delete(r.right.content.key),r.forward();let s=t.doc,i=s.clientID;n.forEach((o,a)=>{let c=r.left,l=r.right,u=new Y(L(i,q(s.store,i)),c,c&&c.lastId,l,l&&l.id,e,null,new J(a,o));u.integrate(t,0),r.right=u,r.forward()})},Fr=(t,e)=>{let{key:r,value:n}=e;n===null?t.delete(r):t.set(r,n)},Bl=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===J&&Ct(e[t.right.content.key]||null,t.right.content.value)))break;t.forward()}},Fl=(t,e,r,n)=>{let s=t.doc,i=s.clientID,o=new Map;for(let a in n){let c=n[a],l=r.currentAttributes.get(a)||null;if(!Ct(l,c)){o.set(a,l);let{left:u,right:f}=r;r.right=new Y(L(i,q(s.store,i)),u,u&&u.lastId,f,f&&f.id,e,null,new J(a,c)),r.right.integrate(t,0),r.forward()}}return o},Zi=(t,e,r,n,s)=>{r.currentAttributes.forEach((d,h)=>{s[h]===void 0&&(s[h]=null)});let i=t.doc,o=i.clientID;Bl(r,s);let a=Fl(t,e,r,s),c=n.constructor===String?new Ge(n):n instanceof ee?new Ve(n):new pt(n),{left:l,right:u,index:f}=r;e._searchMarker&&Dn(e._searchMarker,r.index,c.getLength()),u=new Y(L(o,q(i.store,o)),l,l&&l.lastId,u,u&&u.id,e,null,c),u.integrate(t,0),r.right=u,r.index=f,r.forward(),Vl(t,e,r,a)},il=(t,e,r,n,s)=>{let i=t.doc,o=i.clientID;Bl(r,s);let a=Fl(t,e,r,s);e:for(;r.right!==null&&(n>0||a.size>0&&(r.right.deleted||r.right.content.constructor===J));){if(!r.right.deleted)switch(r.right.content.constructor){case J:{let{key:c,value:l}=r.right.content,u=s[c];if(u!==void 0){if(Ct(u,l))a.delete(c);else{if(n===0)break e;a.set(c,l)}r.right.delete(t)}else r.currentAttributes.set(c,l);break}default:n<r.right.length&&_e(t,L(r.right.id.client,r.right.id.clock+n)),n-=r.right.length;break}r.forward()}if(n>0){let c="";for(;n>0;n--)c+=`
`;r.right=new Y(L(o,q(i.store,o)),r.left,r.left&&r.left.lastId,r.right,r.right&&r.right.id,e,null,new Ge(c)),r.right.integrate(t,0),r.forward()}Vl(t,e,r,a)},jl=(t,e,r,n,s)=>{let i=e,o=se();for(;i&&(!i.countable||i.deleted);){if(!i.deleted&&i.content.constructor===J){let l=i.content;o.set(l.key,l)}i=i.right}let a=0,c=!1;for(;e!==i;){if(r===e&&(c=!0),!e.deleted){let l=e.content;if(l.constructor===J){let{key:u,value:f}=l,d=n.get(u)||null;(o.get(u)!==l||d===f)&&(e.delete(t),a++,!c&&(s.get(u)||null)===f&&d!==f&&(d===null?s.delete(u):s.set(u,d))),!c&&!e.deleted&&Fr(s,l)}}e=e.right}return a},rg=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;let r=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===J){let n=e.content.key;r.has(n)?e.delete(t):r.add(n)}e=e.left}},Gl=t=>{let e=0;return G(t.doc,r=>{let n=t._start,s=t._start,i=se(),o=ss(i);for(;s;)s.deleted===!1&&(s.content.constructor===J?Fr(o,s.content):(e+=jl(r,n,s,i,o),i=ss(o),n=s)),s=s.right}),e},ng=t=>{let e=new Set,r=t.doc;for(let[n,s]of t.afterState.entries()){let i=t.beforeState.get(n)||0;s!==i&&gl(t,r.store.clients.get(n),i,s,o=>{!o.deleted&&o.content.constructor===J&&o.constructor!==pe&&e.add(o.parent)})}G(r,n=>{tr(t,t.deleteSet,s=>{if(s instanceof pe||!s.parent._hasFormatting||e.has(s.parent))return;let i=s.parent;s.content.constructor===J?e.add(i):rg(n,s)});for(let s of e)Gl(s)})},ol=(t,e,r)=>{let n=r,s=ss(e.currentAttributes),i=e.right;for(;r>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case Ve:case pt:case Ge:r<e.right.length&&_e(t,L(e.right.id.client,e.right.id.clock+r)),r-=e.right.length,e.right.delete(t);break}e.forward()}i&&jl(t,i,e.right,s,e.currentAttributes);let o=(e.left||e.right).parent;return o._searchMarker&&Dn(o._searchMarker,e.index,-n+r),e},Cs=class extends sr{constructor(e,r,n){super(e,r),this.childListChanged=!1,this.keysChanged=new Set,n.forEach(s=>{s===null?this.childListChanged=!0:this.keysChanged.add(s)})}get changes(){if(this._changes===null){let e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){let e=this.target.doc,r=[];G(e,n=>{let s=new Map,i=new Map,o=this.target._start,a=null,c={},l="",u=0,f=0,d=()=>{if(a!==null){let h=null;switch(a){case"delete":f>0&&(h={delete:f}),f=0;break;case"insert":(typeof l=="object"||l.length>0)&&(h={insert:l},s.size>0&&(h.attributes={},s.forEach((m,E)=>{m!==null&&(h.attributes[E]=m)}))),l="";break;case"retain":u>0&&(h={retain:u},Ec(c)||(h.attributes=mc({},c))),u=0;break}h&&r.push(h),a=null}};for(;o!==null;){switch(o.content.constructor){case Ve:case pt:this.adds(o)?this.deletes(o)||(d(),a="insert",l=o.content.getContent()[0],d()):this.deletes(o)?(a!=="delete"&&(d(),a="delete"),f+=1):o.deleted||(a!=="retain"&&(d(),a="retain"),u+=1);break;case Ge:this.adds(o)?this.deletes(o)||(a!=="insert"&&(d(),a="insert"),l+=o.content.str):this.deletes(o)?(a!=="delete"&&(d(),a="delete"),f+=o.length):o.deleted||(a!=="retain"&&(d(),a="retain"),u+=o.length);break;case J:{let{key:h,value:m}=o.content;if(this.adds(o)){if(!this.deletes(o)){let E=s.get(h)||null;Ct(E,m)?m!==null&&o.delete(n):(a==="retain"&&d(),Ct(m,i.get(h)||null)?delete c[h]:c[h]=m)}}else if(this.deletes(o)){i.set(h,m);let E=s.get(h)||null;Ct(E,m)||(a==="retain"&&d(),c[h]=E)}else if(!o.deleted){i.set(h,m);let E=c[h];E!==void 0&&(Ct(E,m)?E!==null&&o.delete(n):(a==="retain"&&d(),m===null?delete c[h]:c[h]=m))}o.deleted||(a==="insert"&&d(),Fr(s,o.content));break}}o=o.right}for(d();r.length>0;){let h=r[r.length-1];if(h.retain!==void 0&&h.attributes===void 0)r.pop();else break}}),this._delta=r}return this._delta}},Lr=class t extends ee{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this._length}_integrate(e,r){super._integrate(e,r);try{this._pending.forEach(n=>n())}catch(n){console.error(n)}this._pending=null}_copy(){return new t}clone(){let e=new t;return e.applyDelta(this.toDelta()),e}_callObserver(e,r){super._callObserver(e,r);let n=new Cs(this,e,r);Ls(this,e,n),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){let e="",r=this._start;for(;r!==null;)!r.deleted&&r.countable&&r.content.constructor===Ge&&(e+=r.content.str),r=r.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:r=!0}={}){this.doc!==null?G(this.doc,n=>{let s=new kn(null,this._start,0,new Map);for(let i=0;i<e.length;i++){let o=e[i];if(o.insert!==void 0){let a=!r&&typeof o.insert=="string"&&i===e.length-1&&s.right===null&&o.insert.slice(-1)===`
`?o.insert.slice(0,-1):o.insert;(typeof a!="string"||a.length>0)&&Zi(n,this,s,a,o.attributes||{})}else o.retain!==void 0?il(n,this,s,o.retain,o.attributes||{}):o.delete!==void 0&&ol(n,s,o.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,r,n){let s=[],i=new Map,o=this.doc,a="",c=this._start;function l(){if(a.length>0){let f={},d=!1;i.forEach((m,E)=>{d=!0,f[E]=m});let h={insert:a};d&&(h.attributes=f),s.push(h),a=""}}let u=()=>{for(;c!==null;){if(Zt(c,e)||r!==void 0&&Zt(c,r))switch(c.content.constructor){case Ge:{let f=i.get("ychange");e!==void 0&&!Zt(c,e)?(f===void 0||f.user!==c.id.client||f.type!=="removed")&&(l(),i.set("ychange",n?n("removed",c.id):{type:"removed"})):r!==void 0&&!Zt(c,r)?(f===void 0||f.user!==c.id.client||f.type!=="added")&&(l(),i.set("ychange",n?n("added",c.id):{type:"added"})):f!==void 0&&(l(),i.delete("ychange")),a+=c.content.str;break}case Ve:case pt:{l();let f={insert:c.content.getContent()[0]};if(i.size>0){let d={};f.attributes=d,i.forEach((h,m)=>{d[m]=h})}s.push(f);break}case J:Zt(c,e)&&(l(),Fr(i,c.content));break}c=c.right}l()};return e||r?G(o,f=>{e&&no(f,e),r&&no(f,r),u()},"cleanup"):u(),s}insert(e,r,n){if(r.length<=0)return;let s=this.doc;s!==null?G(s,i=>{let o=ms(i,this,e);n||(n={},o.currentAttributes.forEach((a,c)=>{n[c]=a})),Zi(i,this,o,r,n)}):this._pending.push(()=>this.insert(e,r,n))}insertEmbed(e,r,n={}){let s=this.doc;s!==null?G(s,i=>{let o=ms(i,this,e);Zi(i,this,o,r,n)}):this._pending.push(()=>this.insertEmbed(e,r,n))}delete(e,r){if(r===0)return;let n=this.doc;n!==null?G(n,s=>{ol(s,ms(s,this,e),r)}):this._pending.push(()=>this.delete(e,r))}format(e,r,n){if(r===0)return;let s=this.doc;s!==null?G(s,i=>{let o=ms(i,this,e);o.right!==null&&il(i,this,o,r,n)}):this._pending.push(()=>this.format(e,r,n))}removeAttribute(e){this.doc!==null?G(this.doc,r=>{Rs(r,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,r){this.doc!==null?G(this.doc,n=>{_o(n,this,e,r)}):this._pending.push(()=>this.setAttribute(e,r))}getAttribute(e){return bo(this,e)}getAttributes(){return Nl(this)}_write(e){e.writeTypeRef(_g)}},sg=t=>new Lr,Sn=class{constructor(e,r=()=>!0){this._filter=r,this._root=e,this._currentNode=e._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let e=this._currentNode,r=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(r)))do if(r=e.content.type,!e.deleted&&(r.constructor===Mr||r.constructor===ar)&&r._start!==null)e=r._start;else for(;e!==null;)if(e.right!==null){e=e.right;break}else e.parent===this._root?e=null:e=e.parent._item;while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}},ar=class t extends ee{constructor(){super(),this._prelimContent=[]}get firstChild(){let e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,r){super._integrate(e,r),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new t}clone(){let e=new t;return e.insert(0,this.toArray().map(r=>r instanceof ee?r.clone():r)),e}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new Sn(this,e)}querySelector(e){e=e.toUpperCase();let n=new Sn(this,s=>s.nodeName&&s.nodeName.toUpperCase()===e).next();return n.done?null:n.value}querySelectorAll(e){return e=e.toUpperCase(),$e(new Sn(this,r=>r.nodeName&&r.nodeName.toUpperCase()===e))}_callObserver(e,r){Ls(this,e,new Is(this,r,e))}toString(){return Ul(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,r={},n){let s=e.createDocumentFragment();return n!==void 0&&n._createAssociation(s,this),Un(this,i=>{s.insertBefore(i.toDOM(e,r,n),null)}),s}insert(e,r){this.doc!==null?G(this.doc,n=>{Ll(n,this,e,r)}):this._prelimContent.splice(e,0,...r)}insertAfter(e,r){if(this.doc!==null)G(this.doc,n=>{let s=e&&e instanceof ee?e._item:e;Ss(n,this,s,r)});else{let n=this._prelimContent,s=e===null?0:n.findIndex(i=>i===e)+1;if(s===0&&e!==null)throw qe("Reference item not found");n.splice(s,0,...r)}}delete(e,r=1){this.doc!==null?G(this.doc,n=>{Ml(n,this,e,r)}):this._prelimContent.splice(e,r)}toArray(){return Dl(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return kl(this,e)}slice(e=0,r=this.length){return Al(this,e,r)}forEach(e){Un(this,e)}_write(e){e.writeTypeRef(Sg)}},ig=t=>new ar,Mr=class t extends ar{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){let e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){let e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,r){super._integrate(e,r),this._prelimAttrs.forEach((n,s)=>{this.setAttribute(s,n)}),this._prelimAttrs=null}_copy(){return new t(this.nodeName)}clone(){let e=new t(this.nodeName),r=this.getAttributes();return yc(r,(n,s)=>{typeof n=="string"&&e.setAttribute(s,n)}),e.insert(0,this.toArray().map(n=>n instanceof ee?n.clone():n)),e}toString(){let e=this.getAttributes(),r=[],n=[];for(let a in e)n.push(a);n.sort();let s=n.length;for(let a=0;a<s;a++){let c=n[a];r.push(c+'="'+e[c]+'"')}let i=this.nodeName.toLocaleLowerCase(),o=r.length>0?" "+r.join(" "):"";return`<${i}${o}>${super.toString()}</${i}>`}removeAttribute(e){this.doc!==null?G(this.doc,r=>{Rs(r,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,r){this.doc!==null?G(this.doc,n=>{_o(n,this,e,r)}):this._prelimAttrs.set(e,r)}getAttribute(e){return bo(this,e)}hasAttribute(e){return Pl(this,e)}getAttributes(){return Nl(this)}toDOM(e=document,r={},n){let s=e.createElement(this.nodeName),i=this.getAttributes();for(let o in i){let a=i[o];typeof a=="string"&&s.setAttribute(o,a)}return Un(this,o=>{s.appendChild(o.toDOM(e,r,n))}),n!==void 0&&n._createAssociation(s,this),s}_write(e){e.writeTypeRef(bg),e.writeKey(this.nodeName)}},og=t=>new Mr(t.readKey()),Is=class extends sr{constructor(e,r,n){super(e,n),this.childListChanged=!1,this.attributesChanged=new Set,r.forEach(s=>{s===null?this.childListChanged=!0:this.attributesChanged.add(s)})}},On=class t extends or{constructor(e){super(),this.hookName=e}_copy(){return new t(this.hookName)}clone(){let e=new t(this.hookName);return this.forEach((r,n)=>{e.set(n,r)}),e}toDOM(e=document,r={},n){let s=r[this.hookName],i;return s!==void 0?i=s.createDom(this):i=document.createElement(this.hookName),i.setAttribute("data-yjs-hook",this.hookName),n!==void 0&&n._createAssociation(i,this),i}_write(e){e.writeTypeRef(Rg),e.writeKey(this.hookName)}},ag=t=>new On(t.readKey()),As=class t extends Lr{get nextSibling(){let e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){let e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new t}clone(){let e=new t;return e.applyDelta(this.toDelta()),e}toDOM(e=document,r,n){let s=e.createTextNode(this.toString());return n!==void 0&&n._createAssociation(s,this),s}toString(){return this.toDelta().map(e=>{let r=[];for(let s in e.attributes){let i=[];for(let o in e.attributes[s])i.push({key:o,value:e.attributes[s][o]});i.sort((o,a)=>o.key<a.key?-1:1),r.push({nodeName:s,attrs:i})}r.sort((s,i)=>s.nodeName<i.nodeName?-1:1);let n="";for(let s=0;s<r.length;s++){let i=r[s];n+=`<${i.nodeName}`;for(let o=0;o<i.attrs.length;o++){let a=i.attrs[o];n+=` ${a.key}="${a.value}"`}n+=">"}n+=e.insert;for(let s=r.length-1;s>=0;s--)n+=`</${r[s].nodeName}>`;return n}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(xg)}},cg=t=>new As,Nr=class{constructor(e,r){this.id=e,this.length=r}get deleted(){throw je()}mergeWith(e){return!1}write(e,r,n){throw je()}integrate(e,r){throw je()}},lg=0,pe=class extends Nr{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,r){r>0&&(this.id.clock+=r,this.length-=r),pl(e.doc.store,this)}write(e,r){e.writeInfo(lg),e.writeLen(this.length-r)}getMissing(e,r){return null}},cr=class t{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new t(this.content)}splice(e){throw je()}mergeWith(e){return!1}integrate(e,r){}delete(e){}gc(e){}write(e,r){e.writeBuf(this.content)}getRef(){return 3}},ug=t=>new cr(t.readBuf()),Pr=class t{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new t(this.len)}splice(e){let r=new t(this.len-e);return this.len=e,r}mergeWith(e){return this.len+=e.len,!0}integrate(e,r){xn(e.deleteSet,r.id.client,r.id.clock,this.len),r.markDeleted()}delete(e){}gc(e){}write(e,r){e.writeLen(this.len-r)}getRef(){return 1}},fg=t=>new Pr(t.readLen()),Yl=(t,e)=>new ht({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1}),Vr=class t{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;let r={};this.opts=r,e.gc||(r.gc=!1),e.autoLoad&&(r.autoLoad=!0),e.meta!==null&&(r.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new t(Yl(this.doc.guid,this.opts))}splice(e){throw je()}mergeWith(e){return!1}integrate(e,r){this.doc._item=r,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,r){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}},dg=t=>new Vr(Yl(t.readString(),t.readAny())),pt=class t{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new t(this.embed)}splice(e){throw je()}mergeWith(e){return!1}integrate(e,r){}delete(e){}gc(e){}write(e,r){e.writeJSON(this.embed)}getRef(){return 5}},hg=t=>new pt(t.readJSON()),J=class t{constructor(e,r){this.key=e,this.value=r}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new t(this.key,this.value)}splice(e){throw je()}mergeWith(e){return!1}integrate(e,r){let n=r.parent;n._searchMarker=null,n._hasFormatting=!0}delete(e){}gc(e){}write(e,r){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}},pg=t=>new J(t.readKey(),t.readJSON()),Ln=class t{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new t(this.arr)}splice(e){let r=new t(this.arr.slice(e));return this.arr=this.arr.slice(0,e),r}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,r){}delete(e){}gc(e){}write(e,r){let n=this.arr.length;e.writeLen(n-r);for(let s=r;s<n;s++){let i=this.arr[s];e.writeString(i===void 0?"undefined":JSON.stringify(i))}}getRef(){return 2}},gg=t=>{let e=t.readLen(),r=[];for(let n=0;n<e;n++){let s=t.readString();s==="undefined"?r.push(void 0):r.push(JSON.parse(s))}return new Ln(r)},Dt=class t{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new t(this.arr)}splice(e){let r=new t(this.arr.slice(e));return this.arr=this.arr.slice(0,e),r}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,r){}delete(e){}gc(e){}write(e,r){let n=this.arr.length;e.writeLen(n-r);for(let s=r;s<n;s++){let i=this.arr[s];e.writeAny(i)}}getRef(){return 8}},mg=t=>{let e=t.readLen(),r=[];for(let n=0;n<e;n++)r.push(t.readAny());return new Dt(r)},Ge=class t{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new t(this.str)}splice(e){let r=new t(this.str.slice(e));this.str=this.str.slice(0,e);let n=this.str.charCodeAt(e-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,e-1)+"\uFFFD",r.str="\uFFFD"+r.str.slice(1)),r}mergeWith(e){return this.str+=e.str,!0}integrate(e,r){}delete(e){}gc(e){}write(e,r){e.writeString(r===0?this.str:this.str.slice(r))}getRef(){return 4}},yg=t=>new Ge(t.readString()),Eg=[eg,tg,sg,og,ig,ag,cg],wg=0,vg=1,_g=2,bg=3,Sg=4,Rg=5,xg=6,Ve=class t{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new t(this.type._copy())}splice(e){throw je()}mergeWith(e){return!1}integrate(e,r){this.type._integrate(e.doc,r)}delete(e){let r=this.type._start;for(;r!==null;)r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e),r=r.right;this.type._map.forEach(n=>{n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e)}),e.changed.delete(this.type)}gc(e){let r=this.type._start;for(;r!==null;)r.gc(e,!0),r=r.right;this.type._start=null,this.type._map.forEach(n=>{for(;n!==null;)n.gc(e,!0),n=n.left}),this.type._map=new Map}write(e,r){this.type._write(e)}getRef(){return 7}},Tg=t=>new Ve(Eg[t.readTypeRef()](t)),ao=(t,e)=>{let r=e,n=0,s;do n>0&&(r=L(r.client,r.clock+n)),s=bn(t,r),n=r.clock-s.id.clock,r=s.redone;while(r!==null&&s instanceof Y);return{item:s,diff:n}},So=(t,e)=>{for(;t!==null&&t.keep!==e;)t.keep=e,t=t.parent._item},Ds=(t,e,r)=>{let{client:n,clock:s}=e.id,i=new Y(L(n,s+r),e,L(n,s+r-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(r));return e.deleted&&i.markDeleted(),e.keep&&(i.keep=!0),e.redone!==null&&(i.redone=L(e.redone.client,e.redone.clock+r)),e.right=i,i.right!==null&&(i.right.left=i),t._mergeStructs.push(i),i.parentSub!==null&&i.right===null&&i.parent._map.set(i.parentSub,i),e.length=r,i},al=(t,e)=>uc(t,r=>lr(r.deletions,e)),Hl=(t,e,r,n,s,i)=>{let o=t.doc,a=o.store,c=o.clientID,l=e.redone;if(l!==null)return _e(t,l);let u=e.parent._item,f=null,d;if(u!==null&&u.deleted===!0){if(u.redone===null&&(!r.has(u)||Hl(t,u,r,n,s,i)===null))return null;for(;u.redone!==null;)u=_e(t,u.redone)}let h=u===null?e.parent:u.content.type;if(e.parentSub===null){for(f=e.left,d=e;f!==null;){let b=f;for(;b!==null&&b.parent._item!==u;)b=b.redone===null?null:_e(t,b.redone);if(b!==null&&b.parent._item===u){f=b;break}f=f.left}for(;d!==null;){let b=d;for(;b!==null&&b.parent._item!==u;)b=b.redone===null?null:_e(t,b.redone);if(b!==null&&b.parent._item===u){d=b;break}d=d.right}}else if(d=null,e.right&&!s){for(f=e;f!==null&&f.right!==null&&(f.right.redone||lr(n,f.right.id)||al(i.undoStack,f.right.id)||al(i.redoStack,f.right.id));)for(f=f.right;f.redone;)f=_e(t,f.redone);if(f&&f.right!==null)return null}else f=h._map.get(e.parentSub)||null;let m=q(a,c),E=L(c,m),_=new Y(E,f,f&&f.lastId,d,d&&d.id,h,e.parentSub,e.content.copy());return e.redone=E,So(_,!0),_.integrate(t,0),_},Y=class t extends Nr{constructor(e,r,n,s,i,o,a,c){super(e,c.getLength()),this.origin=n,this.left=r,this.right=s,this.rightOrigin=i,this.parent=o,this.parentSub=a,this.redone=null,this.content=c,this.info=this.content.isCountable()?2:0}set marker(e){(this.info&8)>0!==e&&(this.info^=8)}get marker(){return(this.info&8)>0}get keep(){return(this.info&1)>0}set keep(e){this.keep!==e&&(this.info^=1)}get countable(){return(this.info&2)>0}get deleted(){return(this.info&4)>0}set deleted(e){this.deleted!==e&&(this.info^=4)}markDeleted(){this.info|=4}getMissing(e,r){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=q(r,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=q(r,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===ft&&this.id.client!==this.parent.client&&this.parent.clock>=q(r,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Xc(e,r,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=_e(e,this.rightOrigin),this.rightOrigin=this.right.id),(this.left&&this.left.constructor===pe||this.right&&this.right.constructor===pe)&&(this.parent=null),!this.parent)this.left&&this.left.constructor===t&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===t&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===ft){let n=bn(r,this.parent);n.constructor===pe?this.parent=null:this.parent=n.content.type}return null}integrate(e,r){if(r>0&&(this.id.clock+=r,this.left=Xc(e,e.doc.store,L(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(r),this.length-=r),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let n=this.left,s;if(n!==null)s=n.right;else if(this.parentSub!==null)for(s=this.parent._map.get(this.parentSub)||null;s!==null&&s.left!==null;)s=s.left;else s=this.parent._start;let i=new Set,o=new Set;for(;s!==null&&s!==this.right;){if(o.add(s),i.add(s),er(this.origin,s.origin)){if(s.id.client<this.id.client)n=s,i.clear();else if(er(this.rightOrigin,s.rightOrigin))break}else if(s.origin!==null&&o.has(bn(e.doc.store,s.origin)))i.has(bn(e.doc.store,s.origin))||(n=s,i.clear());else break;s=s.right}this.left=n}if(this.left!==null){let n=this.left.right;this.right=n,this.left.right=this}else{let n;if(this.parentSub!==null)for(n=this.parent._map.get(this.parentSub)||null;n!==null&&n.left!==null;)n=n.left;else n=this.parent._start,this.parent._start=this;this.right=n}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),pl(e.doc.store,this),this.content.integrate(e,this),el(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new pe(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:L(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&er(e.origin,this.lastId)&&this.right===e&&er(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){let r=this.parent._searchMarker;return r&&r.forEach(n=>{n.p===e&&(n.p=this,!this.deleted&&this.countable&&(n.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){let r=this.parent;this.countable&&this.parentSub===null&&(r._length-=this.length),this.markDeleted(),xn(e.deleteSet,this.id.client,this.id.clock,this.length),el(e,r,this.parentSub),this.content.delete(e)}}gc(e,r){if(!this.deleted)throw ve();this.content.gc(e),r?Lp(e,this,new pe(this.id,this.length)):this.content=new Pr(this.length)}write(e,r){let n=r>0?L(this.id.client,this.id.clock+r-1):this.origin,s=this.rightOrigin,i=this.parentSub,o=this.content.getRef()&31|(n===null?0:128)|(s===null?0:64)|(i===null?0:32);if(e.writeInfo(o),n!==null&&e.writeLeftID(n),s!==null&&e.writeRightID(s),n===null&&s===null){let a=this.parent;if(a._item!==void 0){let c=a._item;if(c===null){let l=mo(a);e.writeParentInfo(!0),e.writeString(l)}else e.writeParentInfo(!1),e.writeLeftID(c.id)}else a.constructor===String?(e.writeParentInfo(!0),e.writeString(a)):a.constructor===ft?(e.writeParentInfo(!1),e.writeLeftID(a)):ve();i!==null&&e.writeString(i)}this.content.write(e,r)}},$l=(t,e)=>Cg[e&31](t),Cg=[()=>{ve()},fg,gg,ug,yg,hg,pg,Tg,mg,dg,()=>{ve()}],Ig=10,ge=class extends Nr{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,r){ve()}write(e,r){e.writeInfo(Ig),O(e.restEncoder,this.length-r)}getMissing(e,r){return null}},Kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},zl="__ $YJS$ __";Kl[zl]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");Kl[zl]=!0;var To=x(Wl(),1),Ns=x(yt(),1);var Jl=x(yt(),1);function Ag(t){return JSON.parse(JSON.stringify(t))}var Ro;(t=>{function e(i={},o={},a=!1){typeof i!="object"&&(i={}),typeof o!="object"&&(o={});let c=Ag(o);a||(c=Object.keys(c).reduce((l,u)=>((c[u]!==null||c[u]!==void 0)&&(l[u]=c[u]),l),{}));for(let l in i)i[l]!==void 0&&o[l]===void 0&&(c[l]=i[l]);return Object.keys(c).length>0?c:void 0}t.compose=e;function r(i={},o={}){typeof i!="object"&&(i={}),typeof o!="object"&&(o={});let a=Object.keys(i).concat(Object.keys(o)).reduce((c,l)=>((0,Jl.default)(i[l],o[l])||(c[l]=o[l]===void 0?null:o[l]),c),{});return Object.keys(a).length>0?a:void 0}t.diff=r;function n(i={},o={}){i=i||{};let a=Object.keys(o).reduce((c,l)=>(o[l]!==i[l]&&i[l]!==void 0&&(c[l]=o[l]),c),{});return Object.keys(i).reduce((c,l)=>(i[l]!==o[l]&&o[l]===void 0&&(c[l]=null),c),a)}t.invert=n;function s(i,o,a=!1){if(typeof i!="object")return o;if(typeof o!="object")return;if(!a)return o;let c=Object.keys(o).reduce((l,u)=>(i[u]===void 0&&(l[u]=o[u]),l),{});return Object.keys(c).length>0?c:void 0}t.transform=s})(Ro||(Ro={}));var ur=Ro;var xo;(t=>{function e(r){return typeof r.delete=="number"?r.delete:typeof r.retain=="number"?r.retain:typeof r.retain=="object"&&r.retain!==null?1:typeof r.insert=="string"?r.insert.length:1}t.length=e})(xo||(xo={}));var Be=xo;var Ae=class{ops;index;offset;constructor(t){this.ops=t,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(t){t||(t=1/0);let e=this.ops[this.index];if(e){let r=this.offset,n=Be.length(e);if(t>=n-r?(t=n-r,this.index+=1,this.offset=0):this.offset+=t,typeof e.delete=="number")return{delete:t};let s={};return e.attributes&&(s.attributes=e.attributes),typeof e.retain=="number"?s.retain=t:typeof e.retain=="object"&&e.retain!==null?s.retain=e.retain:typeof e.insert=="string"?s.insert=e.insert.substr(r,t):s.insert=e.insert,s}return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?Be.length(this.ops[this.index])-this.offset:1/0}peekType(){let t=this.ops[this.index];return t?typeof t.delete=="number"?"delete":typeof t.retain=="number"||typeof t.retain=="object"&&t.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index)}else return[];let t=this.offset,e=this.index,r=this.next(),n=this.ops.slice(this.index);return this.offset=t,this.index=e,[r].concat(n)}};function Dg(t){return JSON.parse(JSON.stringify(t))}var Ug="\0",Ql=(t,e)=>{if(typeof t!="object"||t===null)throw new Error(`cannot retain a ${typeof t}`);if(typeof e!="object"||e===null)throw new Error(`cannot retain a ${typeof e}`);let r=Object.keys(t)[0];if(!r||r!==Object.keys(e)[0])throw new Error(`embed types not matched: ${r} != ${Object.keys(e)[0]}`);return[r,t[r],e[r]]},kg=class be{static Op=Be;static OpIterator=Ae;static AttributeMap=ur;static handlers={};static registerEmbed(e,r){this.handlers[e]=r}static unregisterEmbed(e){delete this.handlers[e]}static getHandler(e){let r=this.handlers[e];if(!r)throw new Error(`no handlers for embed type "${e}"`);return r}ops;constructor(e){Array.isArray(e)?this.ops=e:e!=null&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]}insert(e,r){let n={};return typeof e=="string"&&e.length===0?this:(n.insert=e,r!=null&&typeof r=="object"&&Object.keys(r).length>0&&(n.attributes=r),this.push(n))}delete(e){return e<=0?this:this.push({delete:e})}retain(e,r){if(typeof e=="number"&&e<=0)return this;let n={retain:e};return r!=null&&typeof r=="object"&&Object.keys(r).length>0&&(n.attributes=r),this.push(n)}push(e){let r=this.ops.length,n=this.ops[r-1];if(e=Dg(e),typeof n=="object"){if(typeof e.delete=="number"&&typeof n.delete=="number")return this.ops[r-1]={delete:n.delete+e.delete},this;if(typeof n.delete=="number"&&e.insert!==null&&e.insert!==void 0&&(r-=1,n=this.ops[r-1],typeof n!="object"))return this.ops.unshift(e),this;if((0,Ns.default)(e.attributes,n.attributes)){if(typeof e.insert=="string"&&typeof n.insert=="string")return this.ops[r-1]={insert:n.insert+e.insert},typeof e.attributes=="object"&&(this.ops[r-1].attributes=e.attributes),this;if(typeof e.retain=="number"&&typeof n.retain=="number")return this.ops[r-1]={retain:n.retain+e.retain},typeof e.attributes=="object"&&(this.ops[r-1].attributes=e.attributes),this}}return r===this.ops.length?this.ops.push(e):this.ops.splice(r,0,e),this}chop(){let e=this.ops[this.ops.length-1];return e&&typeof e.retain=="number"&&!e.attributes&&this.ops.pop(),this}filter(e){return this.ops.filter(e)}forEach(e){this.ops.forEach(e)}map(e){return this.ops.map(e)}partition(e){let r=[],n=[];return this.forEach(s=>{(e(s)?r:n).push(s)}),[r,n]}reduce(e,r){return this.ops.reduce(e,r)}changeLength(){return this.reduce((e,r)=>r.insert?e+Be.length(r):r.delete?e-r.delete:e,0)}length(){return this.reduce((e,r)=>e+Be.length(r),0)}slice(e=0,r=1/0){let n=[],s=new Ae(this.ops),i=0;for(;i<r&&s.hasNext();){let o;i<e?o=s.next(e-i):(o=s.next(r-i),n.push(o)),i+=Be.length(o)}return new be(n)}compose(e){let r=new Ae(this.ops),n=new Ae(e.ops),s=[],i=n.peek();if(i!=null&&typeof i.retain=="number"&&(i.attributes===null||i.attributes===void 0)){let a=i.retain;for(;r.peekType()==="insert"&&r.peekLength()<=a;)a-=r.peekLength(),s.push(r.next());i.retain-a>0&&n.next(i.retain-a)}let o=new be(s);for(;r.hasNext()||n.hasNext();)if(n.peekType()==="insert")o.push(n.next());else if(r.peekType()==="delete")o.push(r.next());else{let a=Math.min(r.peekLength(),n.peekLength()),c=r.next(a),l=n.next(a);if(l.retain){let u={};if(typeof c.retain=="number")u.retain=typeof l.retain=="number"?a:l.retain;else if(typeof l.retain=="number")c.retain===null||c.retain===void 0?u.insert=c.insert:u.retain=c.retain;else{let d=c.retain===null||c.retain===void 0?"insert":"retain",[h,m,E]=Ql(c[d],l.retain),_=be.getHandler(h);u[d]={[h]:_.compose(m,E,d==="retain")}}let f=ur.compose(c.attributes,l.attributes,typeof c.retain=="number");if(f&&(u.attributes=f),o.push(u),!n.hasNext()&&(0,Ns.default)(o.ops[o.ops.length-1],u)){let d=new be(r.rest());return o.concat(d).chop()}}else typeof l.delete=="number"&&(typeof c.retain=="number"||typeof c.retain=="object"&&c.retain!==null)&&o.push(l)}return o.chop()}concat(e){let r=new be(this.ops.slice());return e.ops.length>0&&(r.push(e.ops[0]),r.ops=r.ops.concat(e.ops.slice(1))),r}diff(e){if(this.ops===e.ops)return new be;let r=this.deltasToStrings(e),n=(0,To.diffChars)(r[0],r[1]),s=new Ae(this.ops),i=new Ae(e.ops);return this.convertChangesToDelta(n,s,i).chop()}eachLine(e,r=`
`){let n=new Ae(this.ops),s=new be,i=0;for(;n.hasNext();){if(n.peekType()!=="insert")return;let o=n.peek(),a=Be.length(o)-n.peekLength(),c=typeof o.insert=="string"?o.insert.indexOf(r,a)-a:-1;if(c<0)s.push(n.next());else if(c>0)s.push(n.next(c));else{if(e(s,n.next(1).attributes||{},i)===!1)return;i+=1,s=new be}}s.length()>0&&e(s,{},i)}invert(e){let r=new be;return this.reduce((n,s)=>{if(s.insert)r.delete(Be.length(s));else{if(typeof s.retain=="number"&&(s.attributes===null||s.attributes===void 0))return r.retain(s.retain),n+s.retain;if(s.delete||typeof s.retain=="number"){let i=s.delete||s.retain;return e.slice(n,n+i).forEach(a=>{s.delete?r.push(a):s.retain&&s.attributes&&r.retain(Be.length(a),ur.invert(s.attributes,a.attributes))}),n+i}else if(typeof s.retain=="object"&&s.retain!==null){let i=e.slice(n,n+1),o=new Ae(i.ops).next(),[a,c,l]=Ql(s.retain,o.insert),u=be.getHandler(a);return r.retain({[a]:u.invert(c,l)},ur.invert(s.attributes,o.attributes)),n+1}}return n},0),r.chop()}transform(e,r=!1){if(r=!!r,typeof e=="number")return this.transformPosition(e,r);let n=e,s=new Ae(this.ops),i=new Ae(n.ops),o=new be;for(;s.hasNext()||i.hasNext();)if(s.peekType()==="insert"&&(r||i.peekType()!=="insert"))o.retain(Be.length(s.next()));else if(i.peekType()==="insert")o.push(i.next());else{let a=Math.min(s.peekLength(),i.peekLength()),c=s.next(a),l=i.next(a);if(c.delete)continue;if(l.delete)o.push(l);else{let u=c.retain,f=l.retain,d=typeof f=="object"&&f!==null?f:a;if(typeof u=="object"&&u!==null&&typeof f=="object"&&f!==null){let h=Object.keys(u)[0];if(h===Object.keys(f)[0]){let m=be.getHandler(h);m&&(d={[h]:m.transform(u[h],f[h],r)})}}o.retain(d,ur.transform(c.attributes,l.attributes,r))}}return o.chop()}transformPosition(e,r=!1){r=!!r;let n=new Ae(this.ops),s=0;for(;n.hasNext()&&s<=e;){let i=n.peekLength(),o=n.peekType();if(n.next(),o==="delete"){e-=Math.min(i,e-s);continue}else o==="insert"&&(s<e||!r)&&(e+=i);s+=i}return e}diffWithCursor(e,r){if(this.ops===e.ops)return new be;if(r===null)return this.diff(e);let n=this.deltasToStrings(e),s=(0,To.diffChars)(n[0],n[1]),i=0,o=[];for(let u=0;u<s.length;u++){let f=s[u],d=i,h=i+(f.count??0),m=r>d&&r<=h,E=!f.added&&!f.removed,_=f.removed&&!f.added,b=s[u+1],T=b&&b.added&&!b.removed;if(E&&m&&T){let A=this.tryMoveInsertionToCursor(f,b,r,d);if(A){o.push(...A),u++,i=h;continue}}if(_){let A=this.tryMoveDeletionToCursor(f,o,r,i);if(A){o.pop(),o.push(...A),i+=f.count??0;continue}}o.push(f),f.added||(i+=f.count??0)}s=o;let a=new Ae(this.ops),c=new Ae(e.ops);return this.convertChangesToDelta(s,a,c).chop()}tryMoveInsertionToCursor(e,r,n,s){let i=r.value,o=i.length,a=n-s-o;if(!(e.value.substring(a,a+i.length)===i))return null;let u=e.value.substring(0,a),f=e.value.substring(a),d=[];return u.length>0&&d.push({value:u,count:u.length,added:!1,removed:!1}),d.push(r),f.length>0&&d.push({value:f,count:f.length,added:!1,removed:!1}),d}tryMoveDeletionToCursor(e,r,n,s){let i=r[r.length-1];if(!i||i.added||i.removed)return null;let o=s-(i.count??0),a=s;if(n<o||n>=a)return null;let c=e.value,l=n-o;if(!(i.value.substring(l,l+c.length)===c))return null;let d=i.value.substring(0,l),h=i.value.substring(l),m=e.count??0,E=h.substring(m),_=[];return d.length>0&&_.push({value:d,count:d.length,added:!1,removed:!1}),_.push(e),E.length>0&&_.push({value:E,count:E.length,added:!1,removed:!1}),_}deltasToStrings(e){return[this,e].map(r=>r.map(n=>{if(n.insert!==null||n.insert!==void 0)return typeof n.insert=="string"?n.insert:Ug;let s=r===e?"on":"with";throw new Error("diff() called "+s+" non-document")}).join(""))}convertChangesToDelta(e,r,n){let s=new be;return e.forEach(i=>{let o=i.count??0;for(;o>0;){let a=0;if(i.added)a=Math.min(n.peekLength(),o),s.push(n.next(a));else if(i.removed)a=Math.min(o,r.peekLength()),r.next(a),s.delete(a);else{a=Math.min(r.peekLength(),n.peekLength(),o);let c=r.next(a),l=n.next(a);(0,Ns.default)(c.insert,l.insert)?s.retain(a,ur.diff(c.attributes,l.attributes)):s.push(l).delete(a)}o-=a}}),s}},Ps=kg;var Co=3e4,Vs=class extends Ke{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{let r=xt();this.getLocalState()!==null&&Co/2<=r-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());let n=[];this.meta.forEach((s,i)=>{i!==this.clientID&&Co<=r-s.lastUpdated&&this.states.has(i)&&n.push(i)}),n.length>0&&Og(this,n,"timeout")},xe(Co/10)),e.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){let r=this.clientID,n=this.meta.get(r),s=n===void 0?0:n.clock+1,i=this.states.get(r);e===null?this.states.delete(r):this.states.set(r,e),this.meta.set(r,{clock:s,lastUpdated:xt()});let o=[],a=[],c=[],l=[];e===null?l.push(r):i==null?e!=null&&o.push(r):(a.push(r),fn(i,e)||c.push(r)),(o.length>0||c.length>0||l.length>0)&&this.emit("change",[{added:o,updated:c,removed:l},"local"]),this.emit("update",[{added:o,updated:a,removed:l},"local"])}setLocalStateField(e,r){let n=this.getLocalState();n!==null&&this.setLocalState({...n,[e]:r})}getStates(){return this.states}},Og=(t,e,r)=>{let n=[];for(let s=0;s<e.length;s++){let i=e[s];if(t.states.has(i)){if(t.states.delete(i),i===t.clientID){let o=t.meta.get(i);t.meta.set(i,{clock:o.clock+1,lastUpdated:xt()})}n.push(i)}}n.length>0&&(t.emit("change",[{added:[],updated:[],removed:n},r]),t.emit("update",[{added:[],updated:[],removed:n},r]))};var Xl=1,jr="fromPersistence",ke="document",Gr="documentMeta",kt="savedAt",Io="savedBy",Zl="state",eu="version",fr="gutenberg",Yr="syncManager",dr="_crdt_document",tu=5e3;function Bs(t={}){let e=new Map(Object.entries(t)),r=new ht({meta:e});return r.getMap(Zl).set(eu,Xl),r}function Ao(t){let e=t.getMap(Gr);e.set(kt,Date.now()),e.set(Io,t.clientID)}function ru(t){return JSON.stringify({document:Uc(Br(t))})}function nu(t){try{let{document:e}=JSON.parse(t),r={[jr]:!0},n=Bs(r),s=kc(e);return Ut(n,s),n.clientID=Math.floor(Math.random()*1e9),n}catch{return null}}function su(t,e){return typeof t=="object"&&t!==null&&e in t?t[e]:null}function Do(t){return Object.keys(t)}function iu(t,e,r){if(t.size!==e.size)return!1;for(let[n,s]of t.entries())if(!e.has(n)||!r(s,e.get(n)))return!1;return!0}var ou=class extends Vs{getStates(){return super.getStates()}getLocalStateField(t){let e=this.getLocalState();return su(e,t)}setLocalStateField(t,e){super.setLocalStateField(t,e)}};var Lg=class extends ou{setLocalStateField(t,e){this.isFieldEqual(t,e,this.getLocalStateField(t)??void 0)||super.setLocalStateField(t,e)}isFieldEqual(t,e,r){if(["clientId","isConnected","isMe"].includes(t))return e===r;if(t in this.equalityFieldChecks){let n=this.equalityFieldChecks[t];return n(e,r)}throw new Error(`No equality check implemented for awareness state field "${t.toString()}".`)}isStateEqual(t,e){return[...new Set([...Do(t),...Do(e)])].every(r=>{let n=t[r],s=e[r];return this.isFieldEqual(r,n,s)})}},Uo=class extends Lg{disconnectedUsers=new Set;seenStates=new Map;previousSnapshot=new Map;stateSubscriptions=[];myThrottledState={};throttleTimeouts=new Map;setUp(){this.on("change",({added:t,removed:e,updated:r})=>{[...t,...r].forEach(n=>{this.disconnectedUsers.delete(n)}),e.forEach(n=>{this.disconnectedUsers.add(n),setTimeout(()=>{this.disconnectedUsers.delete(n),this.updateSubscribers(!0)},tu)}),this.updateSubscribers()})}getSeenStates(){return this.seenStates}onStateChange(t){return this.stateSubscriptions.push(t),()=>{this.stateSubscriptions=this.stateSubscriptions.filter(e=>e!==t)}}setThrottledLocalStateField(t,e,r){this.setLocalStateField(t,e),this.throttleTimeouts.set(t,setTimeout(()=>{this.throttleTimeouts.delete(t),this.myThrottledState[t]&&(this.setLocalStateField(t,this.myThrottledState[t]),delete this.myThrottledState[t])},r))}setConnectionStatus(t){t?this.disconnectedUsers.delete(this.clientID):this.disconnectedUsers.add(this.clientID),this.updateSubscribers(!0)}updateSubscribers(t=!1){if(!this.stateSubscriptions.length)return;let e=this.getStates();this.seenStates=new Map([...this.seenStates.entries(),...e.entries()]);let r=new Map([...this.disconnectedUsers,...e.keys()].filter(n=>Object.keys(this.seenStates.get(n)??{}).length>0).map(n=>{let s=this.seenStates.get(n),i=!this.disconnectedUsers.has(n),o=n===this.clientID,a=o?this.myThrottledState:{},c={...s,...a,clientId:n,isConnected:i,isMe:o};return[n,c]}));!t&&iu(this.previousSnapshot,r,this.isStateEqual.bind(this))||(this.previousSnapshot=r,this.stateSubscriptions.forEach(n=>{n(Array.from(r.values()))}))}};function au(t){let e=t.meta?.[dr];return e?nu(e):null}function cu(t){return{[dr]:ru(t)}}var fu=x(uu(),1);var Hr=null;function Mg(t){return typeof t=="function"}function ko(){if(Hr)return Hr;let t=(0,fu.applyFilters)("sync.providers",[]);return Array.isArray(t)?(Hr=t.filter(Mg),Hr):(Hr=[],Hr)}var du=(t,e)=>{let r=e==="undo"?t.undoStack:t.redoStack;for(;r.length>0;){let n=r.pop(),s=e==="undo"?n.undoStack:n.redoStack,i=s.pop(),o=!1;if(e==="undo"?(n.undoStack=[i],o=n.undo()!==null,n.undoStack=s):(n.redoStack=[i],o=n.redo()!==null,n.redoStack=s),o)return i}return null},hu=class extends Ke{constructor(t=[],e={}){super(),this.docs=new Map,this.trackedOrigins=e.trackedOrigins||new Set([null]),e.trackedOrigins=this.trackedOrigins,this._defaultOpts=e,this.undoStack=[],this.redoStack=[],this.addToScope(t)}addToScope(t){t=Kt(t)?t:[t],t.forEach(e=>{let r=e.doc,n=ue(this.docs,r,()=>{let s=new nr([e],this._defaultOpts);return s.on("stack-cleared",({undoStackCleared:i,redoStackCleared:o})=>{this.clear(i,o)}),r.on("destroy",()=>{this.docs.delete(r),this.undoStack=this.undoStack.filter(i=>i.doc!==r),this.redoStack=this.redoStack.filter(i=>i.doc!==r)}),s.on("stack-item-added",i=>{(i.type==="undo"?this.undoStack:this.redoStack).push(s),this.emit("stack-item-added",[{...i,ydoc:r},this])}),s.on("stack-item-updated",i=>{this.emit("stack-item-updated",[{...i,ydoc:r},this])}),s.on("stack-item-popped",i=>{this.emit("stack-item-popped",[{...i,ydoc:r},this])}),s});n.scope.every(s=>s!==e)&&n.scope.push(e)})}addTrackedOrigin(t){this.trackedOrigins.add(t)}removeTrackedOrigin(t){this.trackedOrigins.delete(t)}undo(){return du(this,"undo")}redo(){return du(this,"redo")}clear(t=!0,e=!0){(t&&this.canUndo()||e&&this.canRedo())&&(this.docs.forEach(r=>{t&&(this.undoStack=[]),e&&(this.redoStack=[]),r.clear(t,e)}),this.emit("stack-cleared",[{undoStackCleared:t,redoStackCleared:e}]))}stopCapturing(){this.docs.forEach(t=>{t.stopCapturing()})}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.docs.forEach(t=>t.destroy()),super.destroy()}};function pu(){let t=new hu([],{captureTimeout:500,trackedOrigins:new Set([fr])});return{addRecord(e,r=!1){},addToScope(e,r){if(e.doc===null)return;let n=e.doc;t.addToScope(e);let{addUndoMeta:s,restoreUndoMeta:i}=r;t.on("stack-item-added",o=>{s(n,o.stackItem.meta)}),t.on("stack-item-popped",o=>{i(n,o.stackItem.meta)})},undo(){if(t.canUndo())return t.undo(),[]},redo(){if(t.canRedo())return t.redo(),[]},hasUndo(){return t.canUndo()},hasRedo(){return t.canRedo()},stopCapturing(){t.stopCapturing()}}}function Oo(){let t=new Map,e=new Map,r;async function n(d,h,m,E,_){let b=ko();if(b.length===0)return;let T=o(h,m);if(e.has(T))return;let A=Bs({objectType:h}),D=A.getMap(ke),k=A.getMap(Gr),$=Date.now(),te=()=>{gr.forEach(gt=>gt.destroy()),D.unobserveDeep(K),k.unobserve(le),A.destroy(),e.delete(T)},Z=d.createAwareness?.(A,m);Z?.setUp();let K=(gt,Pt)=>{Pt.local&&!(Pt.origin instanceof nr)||u(h,m)},le=(gt,Pt)=>{Pt.local||gt.keysChanged.forEach(fi=>{if(fi===kt){let mr=k.get(kt);typeof mr=="number"&&mr>$&&_.refetchRecord().catch(()=>{})}})};r||(r=pu());let{addUndoMeta:re,restoreUndoMeta:st}=_;r.addToScope(D,{addUndoMeta:re,restoreUndoMeta:st});let ui={awareness:Z,handlers:_,objectId:m,objectType:h,syncConfig:d,unload:te,ydoc:A};e.set(T,ui);let gr=await Promise.all(b.map(gt=>gt({objectType:h,objectId:m,ydoc:A,awareness:Z})));D.observeDeep(K),k.observe(le),c(h,m,E)}async function s(d,h,m){let E=ko();if(E.length===0||t.has(h))return;let _=Bs({collection:!0,objectType:h}),b=_.getMap(Gr),T=Date.now(),A=()=>{te.forEach(Z=>Z.destroy()),b.unobserve(D),_.destroy(),t.delete(h)},D=(Z,K)=>{K.local||Z.keysChanged.forEach(le=>{if(le===kt){let re=b.get(kt);typeof re=="number"&&re>T&&m.refetchRecords().catch(()=>{})}})},k=d.createAwareness?.(_);k?.setUp();let $={awareness:k,handlers:m,syncConfig:d,unload:A,ydoc:_};t.set(h,$);let te=await Promise.all(E.map(Z=>Z({awareness:k,objectType:h,objectId:null,ydoc:_})));b.observe(D)}function i(d,h){e.get(o(d,h))?.unload(),l(d,null,{},origin,{isSave:!0})}function o(d,h){return`${d}_${h}`}function a(d,h){let m=o(d,h),E=e.get(m);if(!(!E||!E.awareness))return E.awareness}function c(d,h,m){let E=o(d,h),_=e.get(E);if(!_)return;let{handlers:b,syncConfig:{applyChangesToCRDTDoc:T,getChangesFromCRDTDoc:A,supports:D},ydoc:k}=_;if(!D?.crdtPersistence){k.transact(()=>{T(k,m)},Yr);return}let $=au(m);if(!$){k.transact(()=>{T(k,m),b.saveRecord()},Yr);return}let te=Br($);Ut(k,te);let Z=A($,m),K=Object.keys(Z);if($.destroy(),K.length===0)return;let le=K.reduce((re,st)=>Object.assign(re,{[st]:m[st]}),{});k.transact(()=>{T(k,le),b.saveRecord()},Yr)}function l(d,h,m,E,_={}){let{isSave:b=!1,isNewUndoLevel:T=!1}=_,A=o(d,h),D=e.get(A),k=t.get(d);if(D){let{syncConfig:$,ydoc:te}=D;T&&r&&r.stopCapturing?.(),te.transact(()=>{$.applyChangesToCRDTDoc(te,m),b&&Ao(te)},E)}k&&b&&k.ydoc.transact(()=>{Ao(k.ydoc)},E)}async function u(d,h){let m=o(d,h),E=e.get(m);if(!E)return;let{handlers:_,syncConfig:b,ydoc:T}=E,A=b.getChangesFromCRDTDoc(T,await _.getEditedRecord());Object.keys(A).length!==0&&_.editRecord(A)}function f(d,h){let m=o(d,h),E=e.get(m);return E?.syncConfig.supports?.crdtPersistence?cu(E.ydoc):{}}return{createMeta:f,getAwareness:a,load:n,loadCollection:s,get undoManager(){return r},unload:i,update:l}}var P="core";var Lo=["#3858E9","#B42AED","#E33184","#F3661D","#ECBD3A","#97FE17","#00FDD9","#37C5F0"];function Mo(t,e){return Math.floor(Math.random()*(e-t+1))+t}function Ng(t){let e=Lo.filter(n=>!t.includes(n)),r;if(e.length>0){let n=Mo(0,e.length-1);r=e[n]}else{let n=Mo(0,Lo.length-1),s=Lo[n];r=Pg(s)}return r}function Pg(t){let e=parseInt(t.slice(1,3),16),r=parseInt(t.slice(3,5),16),n=parseInt(t.slice(5,7),16),s=Mo(-30,30),i=Math.min(255,Math.max(0,e+s)),o=Math.min(255,Math.max(0,r+s)),a=Math.min(255,Math.max(0,n+s)),c=l=>l.toString(16).padStart(2,"0").toUpperCase();return`#${c(i)}${c(o)}${c(a)}`}function Vg(){let t=window.navigator.userAgent,e="Unknown";return t.includes("Firefox")?e="Firefox":t.includes("Edg")?e="Microsoft Edge":t.includes("Chrome")&&!t.includes("Edg")?e="Chrome":t.includes("Safari")&&!t.includes("Chrome")?e="Safari":t.includes("MSIE")||t.includes("Trident")?e="Internet Explorer":(t.includes("Opera")||t.includes("OPR"))&&(e="Opera"),e}function gu(t,e){return!t||!e?t===e:Object.keys(t).length!==Object.keys(e).length?!1:Object.entries(t).every(([r,n])=>n===e[r])}function mu(t,e){return{...t,browserType:Vg(),color:Ng(e),enteredAt:Date.now()}}var No=class extends Uo{setUp(){super.setUp(),this.setCurrentUserInfo()}setCurrentUserInfo(){let t=this.getStates(),e=Array.from(t.entries()).filter(([s,i])=>i.userInfo&&s!==this.clientID).map(([,s])=>s.userInfo.color).filter(Boolean),r=(0,yu.select)(P).getCurrentUser(),n=mu(r,e);this.setLocalStateField("userInfo",n)}},Po={userInfo:gu},Eu=class extends No{equalityFieldChecks=Po};var wu=100,vu=5;var Fs;function Ye(){return Fs||(Fs=Oo(),Fs)}function Ot(t,e){return t.getMap(e)}function js(t={}){return new H.Map(Object.entries(t))}function _u(t){return t instanceof H.Map}function Nn(t,e){let n=Ot(e,ke).get("blocks");return n instanceof H.Array?bu(t,n):null}function bu(t,e){for(let r of e){if(r.get("clientId")===t)return r;let n=r.get("innerBlocks");if(n&&n.length>0){let s=bu(t,n);if(s)return s}}return null}function Su(t,e,r){let s=Ot(r,ke).get("blocks")??new H.Array,i=Object.keys(t).length===0,o={type:"none"};if(i)return o;let a=t.clientId===e.clientId,c=a&&t.offset===e.offset;if(a&&t.offset===void 0&&e.offset===void 0)return{type:"whole-block",blockId:t.clientId};if(c){let d=Pn(t,s);return d?{type:"cursor",blockId:t.clientId,cursorPosition:d}:o}else if(a){let d=Pn(t,s),h=Pn(e,s);return!d||!h?o:{type:"selection-in-one-block",blockId:t.clientId,cursorStartPosition:d,cursorEndPosition:h}}let u=Pn(t,s),f=Pn(e,s);return!u||!f?o:{type:"selection-in-multiple-blocks",blockStartId:t.clientId,blockEndId:e.clientId,cursorStartPosition:u,cursorEndPosition:f}}function Pn(t,e){let r=Ru(t.clientId,e);if(!r||!t.attributeKey||t.offset===void 0)return null;let s=r.get("attributes")?.get(t.attributeKey);return{relativePosition:H.createRelativePositionFromTypeIndex(s,t.offset),absoluteOffset:t.offset}}function Ru(t,e){for(let r of e){if(r.get("clientId")===t)return r;let n=r.get("innerBlocks");if(n&&n.length>0){let s=Ru(t,n);if(s)return s}}return null}function xu(t,e){if(t.type!==e.type)return!1;switch(t.type){case"none":return!0;case"cursor":return t.blockId===e.blockId&&Vn(t.cursorPosition,e.cursorPosition);case"selection-in-one-block":return t.blockId===e.blockId&&Vn(t.cursorStartPosition,e.cursorStartPosition)&&Vn(t.cursorEndPosition,e.cursorEndPosition);case"selection-in-multiple-blocks":return t.blockStartId===e.blockStartId&&t.blockEndId===e.blockEndId&&Vn(t.cursorStartPosition,e.cursorStartPosition)&&Vn(t.cursorEndPosition,e.cursorEndPosition);case"whole-block":return t.blockId===e.blockId;default:return!1}}function Vn(t,e){let r=JSON.stringify(t.relativePosition)===JSON.stringify(e.relativePosition),n=t.absoluteOffset===e.absoluteOffset;return r&&n}var Cu=class extends No{constructor(t,e,r,n){super(t),this.kind=e,this.name=r,this.postId=n}equalityFieldChecks={...Po,editorState:this.areEditorStatesEqual};setUp(){super.setUp(),this.subscribeToUserSelectionChanges()}subscribeToUserSelectionChanges(){let{getSelectionStart:t,getSelectionEnd:e,getSelectedBlocksInitialCaretPosition:r}=(0,$r.select)(Tu.store),n=t(),s=e(),i=null;(0,$r.subscribe)(()=>{let o=t(),a=e();if(o===n&&a===s)return;n=o,s=a;let c=r();this.updateSelectionInEntityRecord(n,s,c),i&&clearTimeout(i),i=setTimeout(()=>{let l=Su(n,s,this.doc);this.setThrottledLocalStateField("editorState",{selection:l},wu)},vu)})}async updateSelectionInEntityRecord(t,e,r){let n={selection:{selectionStart:t,selectionEnd:e,initialPosition:r}},s={undoIgnore:!0};(0,$r.dispatch)(P).editEntityRecord(this.kind,this.name,this.postId,n,s)}areEditorStatesEqual(t,e){return!t||!e?t===e:xu(t.selection,e.selection)}};var Ku=x(yt(),1),zu=x(yr(),1);var Gs,Bg=new Uint8Array(16);function Vo(){if(!Gs&&(Gs=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Gs))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Gs(Bg)}var de=[];for(let t=0;t<256;++t)de.push((t+256).toString(16).slice(1));function Iu(t,e=0){return de[t[e+0]]+de[t[e+1]]+de[t[e+2]]+de[t[e+3]]+"-"+de[t[e+4]]+de[t[e+5]]+"-"+de[t[e+6]]+de[t[e+7]]+"-"+de[t[e+8]]+de[t[e+9]]+"-"+de[t[e+10]]+de[t[e+11]]+de[t[e+12]]+de[t[e+13]]+de[t[e+14]]+de[t[e+15]]}var Fg=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Bo={randomUUID:Fg};function jg(t,e,r){if(Bo.randomUUID&&!e&&!t)return Bo.randomUUID();t=t||{};let n=t.random||(t.rng||Vo)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let s=0;s<16;++s)e[r+s]=n[s];return e}return Iu(n)}var Bn=jg;var Hs=x(yt(),1),Du=x(yr(),1),Uu=x(Fo(),1);var jo=new WeakMap;function Gg(t){let e={...t};for(let[r,n]of Object.entries(t))n instanceof Uu.RichTextData&&(e[r]=n.valueOf());return e}function ku(t){return t.map(e=>{let{name:r,innerBlocks:n,attributes:s,...i}=e;return delete i.validationIssues,{...i,name:r,attributes:Gg(s),innerBlocks:ku(n)}})}function Yo(t,e){let r=e.toJSON(),n={innerBlocks:null,clientId:null},s=(0,Hs.default)(Object.assign({},t,n),Object.assign({},r,n)),i=t.innerBlocks||[],o=e.get("innerBlocks");return s&&i.length===o?.length&&i.every((a,c)=>Yo(a,o.get(c)))}function Ou(t,e){return new H.Map(Object.entries(e).map(([r,n])=>[r,Lu(t,r,n)]))}function Lu(t,e,r){return Nu(t,e)?new H.Text(r?.toString()??""):r}function Mu(t){return js(Object.fromEntries(Object.entries(t).map(([e,r])=>{switch(e){case"attributes":return[e,Ou(t.name,r)];case"innerBlocks":{let n=new H.Array;return Array.isArray(r)?(n.insert(0,r.map(s=>Mu(s))),[e,n]):[e,n]}default:return[e,r]}})))}function Ho(t,e,r){jo.has(e)||jo.set(e,ku(e));let s=(jo.get(e)??[]).filter(d=>Yg(d)),i=Math.min(s.length??0,t.length),o=0,a=0;for(;o<i&&Yo(s[o],t.get(o));o++);for(;a<i-o&&Yo(s[s.length-a-1],t.get(t.length-a-1));a++);let c=i-o-a,l=Math.max(0,s.length-t.length),u=Math.max(0,t.length-s.length);for(let d=0;d<c;d++,o++){let h=s[o],m=t.get(o);Object.entries(h).forEach(([E,_])=>{switch(E){case"attributes":{let b=m.get(E);if(!b){m.set(E,Ou(h.name,_));break}Object.entries(_).forEach(([T,A])=>{if((0,Hs.default)(b?.get(T),A))return;let D=b.get(T);Nu(h.name,T)&&typeof A=="string"&&b.has(T)&&D instanceof H.Text?Hg(D,A,r):b.set(T,Lu(h.name,T,A))}),b.forEach((T,A)=>{_.hasOwnProperty(A)||b.delete(A)});break}case"innerBlocks":{let b=m.get(E);b instanceof H.Array||(b=new H.Array,m.set(E,b)),Ho(b,_??[],r);break}default:(0,Hs.default)(h[E],m.get(E))||m.set(E,_)}}),m.forEach((E,_)=>{h.hasOwnProperty(_)||m.delete(_)})}t.delete(o,u);for(let d=0;d<l;d++,o++){let h=[Mu(s[o])];t.insert(o,h)}let f=new Set;for(let d=0;d<t.length;d++){let h=t.get(d),m=h.get("clientId");m&&(f.has(m)&&(m=Bn(),h.set("clientId",m)),f.add(m))}}function Yg(t){return t.name==="core/gallery"?!t.innerBlocks.some(e=>e.attributes&&e.attributes.blob):!0}var Ys;function Nu(t,e){if(!Ys){Ys=new Map;for(let r of(0,Du.getBlockTypes)()){let n=new Map;for(let[s,i]of Object.entries(r.attributes??{}))i.type==="rich-text"&&n.set(s,!0);Ys.set(r.name,n)}}return Ys.get(t)?.has(e)??!1}var Go;function Hg(t,e,r){Go||(Go=new H.Doc);let n=Go.getText("temporary-text");n.delete(0,n.length),n.insert(0,e);let s=new Ps(t.toDelta()),i=new Ps(n.toDelta()),o=s.diffWithCursor(i,r);t.applyDelta(o.ops)}var Ks=x(Ee(),1),$o=x(ns(),1),ju=x(yr(),1);var $g=5,$s=(t=>(t.RelativeSelection="RelativeSelection",t.BlockSelection="BlockSelection",t))($s||{});function Vu(t,e=$g){let r=[],n=()=>r.slice(0),s=o=>{if(!o?.selectionStart?.clientId||!o?.selectionEnd?.clientId)return;let{selectionStart:a,selectionEnd:c}=o,l=Pu(a,t),u=Pu(c,t);i({start:l,end:u})},i=o=>{let a=o.start.clientId,c=o.end.clientId;r=r.filter(l=>!(l.start.clientId===a&&l.end.clientId===c)),r.unshift(o),r.length>e+1&&(r=r.slice(0,e+1))};return{getSelectionHistory:n,updateSelection:s}}function Pu(t,e){let r=t.clientId,s=Nn(r,e)?.get("attributes"),i=t.attributeKey,o=i?s?.get(i):void 0;if(!(o instanceof H.Text)||!(i&&r))return{type:"BlockSelection",clientId:r};let l=t.offset??0,u=H.createRelativePositionFromTypeIndex(o,l);return{type:"RelativeSelection",attributeKey:i,relativePosition:u,clientId:r,offset:l}}var Bu=new WeakMap;function Gu(t){let e=Bu.get(t);return e||(e=Vu(t),Bu.set(t,e)),e}function Yu(t){return Gu(t).getSelectionHistory()}function Hu(t,e){return Gu(t).updateSelection(e)}function Fu(t,e){if(t.type===$s.RelativeSelection){let{relativePosition:r,attributeKey:n,clientId:s}=t,i=H.createAbsolutePositionFromRelativePosition(r,e);if(i)return{clientId:s,attributeKey:n,offset:i.index}}else if(t.type===$s.BlockSelection)return{clientId:t.clientId,attributeKey:void 0,offset:void 0};return null}function Kg(t,e){for(let r of e){let{start:n,end:s}=r,i=Nn(n.clientId,t),o=Nn(s.clientId,t);if(!i||!o)continue;let a=Fu(n,t),c=Fu(s,t);if(!(a===null||c===null))return{selectionStart:a,selectionEnd:c}}return null}function $u(t,e){let r=Kg(e,t);if(r===null)return;let{getBlock:n}=(0,Ks.select)($o.store),{resetSelection:s}=(0,Ks.dispatch)($o.store),{selectionStart:i,selectionEnd:o}=r;if(i.clientId===o.clientId){let c=n(i.clientId),l=c&&(0,ju.isUnmodifiedBlock)(c);if(i.offset===0&&o.offset===0&&l){let f={clientId:i.clientId},d={clientId:o.clientId};s(f,d,0)}else s(i,o,0)}else s(o,o,0)}var qu=new Set(["author","blocks","categories","comment_status","date","excerpt","featured_media","format","meta","ping_status","slug","status","sticky","tags","template","title"]),Wu=new Set([dr]);function zg(t,e){let r=Ot(t,ke);Object.entries(e).forEach(([n,s])=>{if(typeof s!="function"){let i=r.get(n);zr(r,n,i,s)}})}function Ju(t,e,r){let n=Ot(t,ke);if(Object.keys(e).forEach(s=>{if(!qu.has(s))return;let i=e[s];if(typeof i!="function")switch(s){case"blocks":{let o=n.get(s);o instanceof H.Array||(o=new H.Array,n.set(s,o));let a=i??[],c=e.selection?.selectionStart?.offset??null;Ho(o,a,c);break}case"excerpt":{let o=n.get("excerpt"),a=Ko(i);zr(n,s,o,a);break}case"meta":{let o=n.get("meta");_u(o)||(o=js(),n.set("meta",o)),Object.entries(i??{}).forEach(([a,c])=>{Wu.has(a)||zr(o,a,o.get(a),c)});break}case"slug":{if(!i)break;let o=n.get(s);zr(n,s,o,i);break}case"title":{let o=n.get(s),a=Ko(i);!o&&a==="Auto Draft"&&(a=""),zr(n,s,o,a);break}default:{let o=n.get(s);zr(n,s,o,i)}}}),e.selection){let s=e.selection;setTimeout(()=>{Hu(t,s)},0)}}function qg(t){return Ot(t,ke).toJSON()}function Qu(t,e,r){let n=Ot(t,ke),s={},i=Object.fromEntries(Object.entries(n.toJSON()).filter(([o,a])=>{if(!qu.has(o))return!1;let c=e[o];switch(o){case"blocks":{if(t.meta?.get(jr)&&e.content){let l=n.get("blocks");return(0,zu.__unstableSerializeAndClean)(l.toJSON()).trim()!==e.content.raw.trim()}return!0}case"date":return["draft","auto-draft","pending"].includes(n.get("status"))&&(c===null||e.modified===c)?!1:Kr(c,a);case"meta":{s=Object.fromEntries(Object.entries(a??{}).filter(([u])=>!Wu.has(u)));let l={...c,...s};return Kr(c,l)}case"status":return a==="auto-draft"?!1:Kr(c,a);case"excerpt":case"title":return Kr(Ko(c),a);default:return Kr(c,a)}}));return typeof i.meta=="object"&&(i.meta={...e.meta,...s}),i}var zo={applyChangesToCRDTDoc:zg,createAwareness:t=>new Eu(t),getChangesFromCRDTDoc:qg};function Ko(t){if(typeof t=="string")return t;if(t&&typeof t=="object"&&"raw"in t&&typeof t.raw=="string")return t.raw}function Kr(t,e){return!(0,Ku.default)(t,e)}function zr(t,e,r,n){if(n===void 0){t.delete(e);return}Kr(r,n)&&t.set(e,n)}var X="id",Wg=["title","excerpt","content"],Jg={blocks:{read:t=>(0,qs.parse)(t.content?.raw??""),write:t=>({content:(0,qs.__unstableSerializeAndClean)(t.blocks)})}},Ws=[{label:(0,Q.__)("Base"),kind:"root",key:!1,name:"__unstableBase",baseURL:"/",baseURLParams:{_fields:["description","gmt_offset","home","name","site_icon","site_icon_url","site_logo","timezone_string","url","page_for_posts","page_on_front","show_on_front"].join(",")},plural:"__unstableBases"},{label:(0,Q.__)("Post Type"),name:"postType",kind:"root",key:"slug",baseURL:"/wp/v2/types",baseURLParams:{context:"edit"},plural:"postTypes"},{name:"media",kind:"root",baseURL:"/wp/v2/media",baseURLParams:{context:"edit"},plural:"mediaItems",label:(0,Q.__)("Media"),rawAttributes:["caption","title","description"],supportsPagination:!0},{name:"taxonomy",kind:"root",key:"slug",baseURL:"/wp/v2/taxonomies",baseURLParams:{context:"edit"},plural:"taxonomies",label:(0,Q.__)("Taxonomy")},{name:"sidebar",kind:"root",baseURL:"/wp/v2/sidebars",baseURLParams:{context:"edit"},plural:"sidebars",transientEdits:{blocks:!0},label:(0,Q.__)("Widget areas")},{name:"widget",kind:"root",baseURL:"/wp/v2/widgets",baseURLParams:{context:"edit"},plural:"widgets",transientEdits:{blocks:!0},label:(0,Q.__)("Widgets")},{name:"widgetType",kind:"root",baseURL:"/wp/v2/widget-types",baseURLParams:{context:"edit"},plural:"widgetTypes",label:(0,Q.__)("Widget types")},{label:(0,Q.__)("User"),name:"user",kind:"root",baseURL:"/wp/v2/users",getTitle:t=>t?.name||t?.slug,baseURLParams:{context:"edit"},plural:"users",supportsPagination:!0},{name:"comment",kind:"root",baseURL:"/wp/v2/comments",baseURLParams:{context:"edit"},plural:"comments",label:(0,Q.__)("Comment"),supportsPagination:!0},{name:"menu",kind:"root",baseURL:"/wp/v2/menus",baseURLParams:{context:"edit"},plural:"menus",label:(0,Q.__)("Menu"),supportsPagination:!0},{name:"menuItem",kind:"root",baseURL:"/wp/v2/menu-items",baseURLParams:{context:"edit"},plural:"menuItems",label:(0,Q.__)("Menu Item"),rawAttributes:["title"],supportsPagination:!0},{name:"menuLocation",kind:"root",baseURL:"/wp/v2/menu-locations",baseURLParams:{context:"edit"},plural:"menuLocations",label:(0,Q.__)("Menu Location"),key:"name"},{label:(0,Q.__)("Global Styles"),name:"globalStyles",kind:"root",baseURL:"/wp/v2/global-styles",baseURLParams:{context:"edit"},plural:"globalStylesVariations",getTitle:()=>(0,Q.__)("Custom Styles"),getRevisionsUrl:(t,e)=>`/wp/v2/global-styles/${t}/revisions${e?"/"+e:""}`,supportsPagination:!0},{label:(0,Q.__)("Themes"),name:"theme",kind:"root",baseURL:"/wp/v2/themes",baseURLParams:{context:"edit"},plural:"themes",key:"stylesheet"},{label:(0,Q.__)("Plugins"),name:"plugin",kind:"root",baseURL:"/wp/v2/plugins",baseURLParams:{context:"edit"},plural:"plugins",key:"plugin"},{label:(0,Q.__)("Status"),name:"status",kind:"root",baseURL:"/wp/v2/statuses",baseURLParams:{context:"edit"},plural:"statuses",key:"slug"},{label:(0,Q.__)("Registered Templates"),name:"registeredTemplate",kind:"root",baseURL:"/wp/v2/registered-templates",key:"id"},{label:(0,Q.__)("Font Collections"),name:"fontCollection",kind:"root",baseURL:"/wp/v2/font-collections",baseURLParams:{context:"view"},plural:"fontCollections",key:"slug"}].map(t=>(new Set(["comment"]).has(t.name)&&(t.syncConfig=zo),t)),Xu={root:{media:{since:"6.9",alternative:{kind:"postType",name:"attachment"}}}},Js=[{kind:"postType",loadEntities:Xg},{kind:"taxonomy",loadEntities:Zg},{kind:"root",name:"site",plural:"sites",loadEntities:em}],Qg=(t,e,r,n)=>{let s={};if(!n&&t?.status==="auto-draft"&&(!e.status&&!s.status&&(s.status="draft"),(!e.title||e.title==="Auto Draft")&&!s.title&&(!t?.title||t?.title==="Auto Draft")&&(s.title="")),t){let i=`postType/${r}`,o=t.id,a=Ye()?.createMeta(i,o);s.meta={...e.meta,...a}}return s};async function Xg(){let t=await(0,zs.default)({path:"/wp/v2/types?context=view"});return Object.entries(t??{}).map(([e,r])=>{let n=["wp_template","wp_template_part"].includes(e),s=r?.rest_namespace??"wp/v2",i={kind:"postType",baseURL:`/${s}/${r.rest_base}`,baseURLParams:{context:"edit"},name:e,label:r.name,transientEdits:{...Jg,selection:!0},mergedEdits:{meta:!0},rawAttributes:Wg,getTitle:o=>o?.title?.rendered||o?.title||(n?rc(o.slug??""):String(o.id)),__unstablePrePersist:(o,a)=>Qg(o,a,e,n),__unstable_rest_base:r.rest_base,supportsPagination:!0,getRevisionsUrl:(o,a)=>`/${s}/${r.rest_base}/${o}/revisions${a?"/"+a:""}`,revisionKey:n&&!window?.__experimentalTemplateActivate?"wp_id":X};return i.syncConfig={applyChangesToCRDTDoc:(o,a)=>Ju(o,a,r),createAwareness:(o,a)=>{let c="postType",l=parseInt(a,10);return new Cu(o,c,e,l)},getChangesFromCRDTDoc:(o,a)=>Qu(o,a,r),supports:{crdtPersistence:!0}},i})}async function Zg(){let t=await(0,zs.default)({path:"/wp/v2/taxonomies?context=view"});return Object.entries(t??{}).map(([e,r])=>{let s={kind:"taxonomy",baseURL:`/${r?.rest_namespace??"wp/v2"}/${r.rest_base}`,baseURLParams:{context:"edit"},name:e,label:r.name,getTitle:i=>i?.name,supportsPagination:!0};return s.syncConfig=zo,s})}async function em(){let t={label:(0,Q.__)("Site"),name:"site",kind:"root",key:!1,baseURL:"/wp/v2/settings",meta:{}},e=await(0,zs.default)({path:t.baseURL,method:"OPTIONS"}),r={};return Object.entries(e?.schema?.properties??{}).forEach(([n,s])=>{typeof s=="object"&&s.title&&(r[n]=s.title)}),[{...t,meta:{labels:r}}]}var hr=(t,e,r="get")=>{let n=t==="root"?"":on(t),s=on(e);return`${r}${n}${s}`};function tf(t){let{query:e}=t;return e?vt(e).context:"default"}function tm(t,e,r,n){if(r===1&&n===-1)return e;let i=(r-1)*n,o=Math.max(t?.length??0,i+e.length),a=new Array(o);for(let c=0;c<o;c++){let l=c>=i&&c<i+n;a[c]=l?e[c-i]:t?.[c]}return a}function rf(t,e){return Object.fromEntries(Object.entries(t).filter(([r])=>!e.some(n=>Number.isInteger(n)?n===+r:n===r)))}function rm(t={},e){switch(e.type){case"RECEIVE_ITEMS":{let r=tf(e),n=e.key||X;return{...t,[r]:{...t[r],...e.items.reduce((s,i)=>{let o=i?.[n];return s[o]=wi(t?.[r]?.[o],i),s},{})}}}case"REMOVE_ITEMS":return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,rf(n,e.itemIds)]))}return t}function nm(t={},e){switch(e.type){case"RECEIVE_ITEMS":{let r=tf(e),{query:n,key:s=X}=e,i=n?vt(n):{},o=!n||!Array.isArray(i.fields);return{...t,[r]:{...t[r],...e.items.reduce((a,c)=>{let l=c?.[s];return a[l]=t?.[r]?.[l]||o,a},{})}}}case"REMOVE_ITEMS":return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,rf(n,e.itemIds)]))}return t}var sm=(0,ef.compose)([en(t=>"query"in t),tn(t=>t.query?{...t,...vt(t.query)}:t),es("context"),es("stableKey")])((t={},e)=>{let{type:r,page:n,perPage:s,key:i=X}=e;return r!=="RECEIVE_ITEMS"?t:{itemIds:tm(t?.itemIds||[],e.items.map(o=>o?.[i]).filter(Boolean),n,s),meta:e.meta}}),im=(t={},e)=>{switch(e.type){case"RECEIVE_ITEMS":return sm(t,e);case"REMOVE_ITEMS":let r=e.itemIds.reduce((n,s)=>(n[s]=!0,n),{});return Object.fromEntries(Object.entries(t).map(([n,s])=>[n,Object.fromEntries(Object.entries(s).map(([i,o])=>[i,{...o,itemIds:o.itemIds.filter(a=>!r[a])}]))]));default:return t}},Qs=(0,Zu.combineReducers)({items:rm,itemIsComplete:nm,queries:im});function om(t={byId:{},queries:{}},e){return e.type==="RECEIVE_USER_QUERY"?{byId:{...t.byId,...e.users.reduce((r,n)=>({...r,[n.id]:n}),{})},queries:{...t.queries,[e.queryID]:e.users.map(r=>r.id)}}:t}function am(t={},e){return e.type==="RECEIVE_CURRENT_USER"?e.currentUser:t}function cm(t=void 0,e){return e.type==="RECEIVE_CURRENT_THEME"?e.currentTheme.stylesheet:t}function lm(t=void 0,e){return e.type==="RECEIVE_CURRENT_GLOBAL_STYLES_ID"?e.id:t}function um(t={},e){return e.type==="RECEIVE_THEME_GLOBAL_STYLES"?{...t,[e.stylesheet]:e.globalStyles}:t}function fm(t={},e){return e.type==="RECEIVE_THEME_GLOBAL_STYLE_VARIATIONS"?{...t,[e.stylesheet]:e.variations}:t}var dm=t=>(e,r)=>{if(r.type==="UNDO"||r.type==="REDO"){let{record:n}=r,s=e;return n.forEach(({id:{kind:i,name:o,recordId:a},changes:c})=>{s=t(s,{type:"EDIT_ENTITY_RECORD",kind:i,name:o,recordId:a,edits:Object.entries(c).reduce((l,[u,f])=>(l[u]=r.type==="UNDO"?f.from:f.to,l),{})})}),s}return t(e,r)};function hm(t){return(0,nf.compose)([dm,en(e=>e.name&&e.kind&&e.name===t.name&&e.kind===t.kind),tn(e=>({key:t.key||X,...e}))])((0,Fn.combineReducers)({queriedData:Qs,edits:(e={},r)=>{switch(r.type){case"RECEIVE_ITEMS":if((r?.query?.context??"default")!=="default")return e;let s={...e};for(let o of r.items){let a=o?.[r.key],c=s[a];if(!c)continue;let l=Object.keys(c).reduce((u,f)=>(!(0,qo.default)(c[f],o[f]?.raw??o[f])&&(!r.persistedEdits||!(0,qo.default)(c[f],r.persistedEdits[f]))&&(u[f]=c[f]),u),{});Object.keys(l).length?s[a]=l:delete s[a]}return s;case"EDIT_ENTITY_RECORD":let i={...e[r.recordId],...r.edits};return Object.keys(i).forEach(o=>{i[o]===void 0&&delete i[o]}),{...e,[r.recordId]:i}}return e},saving:(e={},r)=>{switch(r.type){case"SAVE_ENTITY_RECORD_START":case"SAVE_ENTITY_RECORD_FINISH":return{...e,[r.recordId]:{pending:r.type==="SAVE_ENTITY_RECORD_START",error:r.error,isAutosave:r.isAutosave}}}return e},deleting:(e={},r)=>{switch(r.type){case"DELETE_ENTITY_RECORD_START":case"DELETE_ENTITY_RECORD_FINISH":return{...e,[r.recordId]:{pending:r.type==="DELETE_ENTITY_RECORD_START",error:r.error}}}return e},revisions:(e={},r)=>{if(r.type==="RECEIVE_ITEM_REVISIONS"){let n=r.recordKey;delete r.recordKey;let s=Qs(e[n],{...r,type:"RECEIVE_ITEMS"});return{...e,[n]:s}}return r.type==="REMOVE_ITEMS"?Object.fromEntries(Object.entries(e).filter(([n])=>!r.itemIds.some(s=>Number.isInteger(s)?s===+n:s===n))):e}}))}function pm(t=Ws,e){return e.type==="ADD_ENTITIES"?[...t,...e.entities]:t}var gm=(t={},e)=>{let r=pm(t.config,e),n=t.reducer;if(!n||r!==t.config){let i=r.reduce((o,a)=>{let{kind:c}=a;return o[c]||(o[c]=[]),o[c].push(a),o},{});n=(0,Fn.combineReducers)(Object.fromEntries(Object.entries(i).map(([o,a])=>{let c=(0,Fn.combineReducers)(Object.fromEntries(a.map(l=>[l.name,hm(l)])));return[o,c]})))}let s=n(t.records,e);return s===t.records&&r===t.config&&n===t.reducer?t:{reducer:n,records:s,config:r}};function mm(t=(0,sf.createUndoManager)()){return t}function ym(t={},e){switch(e.type){case"EDIT_ENTITY_RECORD":case"UNDO":case"REDO":return{}}return t}function Em(t={},e){if(e.type==="RECEIVE_EMBED_PREVIEW"){let{url:r,preview:n}=e;return{...t,[r]:n}}return t}function wm(t={},e){switch(e.type){case"RECEIVE_USER_PERMISSION":return{...t,[e.key]:e.isAllowed};case"RECEIVE_USER_PERMISSIONS":return{...t,...e.permissions}}return t}function vm(t={},e){if(e.type==="RECEIVE_AUTOSAVES"){let{postId:r,autosaves:n}=e;return{...t,[r]:n}}return t}function _m(t=[],e){return e.type==="RECEIVE_BLOCK_PATTERNS"?e.patterns:t}function bm(t=[],e){return e.type==="RECEIVE_BLOCK_PATTERN_CATEGORIES"?e.categories:t}function Sm(t=[],e){return e.type==="RECEIVE_USER_PATTERN_CATEGORIES"?e.patternCategories:t}function Rm(t=null,e){return e.type==="RECEIVE_NAVIGATION_FALLBACK_ID"?e.fallbackId:t}function xm(t={},e){return e.type==="RECEIVE_THEME_GLOBAL_STYLE_REVISIONS"?{...t,[e.currentId]:e.revisions}:t}function Tm(t={},e){return e.type==="RECEIVE_DEFAULT_TEMPLATE"?{...t,[JSON.stringify(e.query)]:e.templateId}:t}function Cm(t={},e){return e.type==="RECEIVE_REGISTERED_POST_META"?{...t,[e.postType]:e.registeredPostMeta}:t}function Im(t=null,e){return e.type==="RECEIVE_EDITOR_SETTINGS"?e.settings:t}function Am(t=null,e){return e.type==="RECEIVE_EDITOR_ASSETS"?e.assets:t}var of=(0,Fn.combineReducers)({users:om,currentTheme:cm,currentGlobalStylesId:lm,currentUser:am,themeGlobalStyleVariations:fm,themeBaseGlobalStyles:um,themeGlobalStyleRevisions:xm,entities:gm,editsReference:ym,undoManager:mm,embedPreviews:Em,userPermissions:wm,autosaves:vm,blockPatterns:_m,blockPatternCategories:bm,userPatternCategories:Sm,navigationFallbackId:Rm,defaultTemplates:Tm,registeredPostMeta:Cm,editorSettings:Im,editorAssets:Am});var ta={};jt(ta,{__experimentalGetCurrentGlobalStylesId:()=>_f,__experimentalGetCurrentThemeBaseGlobalStyles:()=>py,__experimentalGetCurrentThemeGlobalStylesVariations:()=>gy,__experimentalGetDirtyEntityRecords:()=>Jm,__experimentalGetEntitiesBeingSaved:()=>Qm,__experimentalGetEntityRecordNoResolver:()=>Km,canUser:()=>bf,canUserEditEntityRecord:()=>ly,getAuthors:()=>jm,getAutosave:()=>fy,getAutosaves:()=>uy,getBlockPatternCategories:()=>yy,getBlockPatterns:()=>my,getCurrentTheme:()=>ei,getCurrentThemeGlobalStylesRevisions:()=>wy,getCurrentUser:()=>Gm,getDefaultTemplateId:()=>Qo,getEditedEntityRecord:()=>Zo,getEmbedPreview:()=>ay,getEntitiesByKind:()=>Ym,getEntitiesConfig:()=>yf,getEntity:()=>Hm,getEntityConfig:()=>qr,getEntityRecord:()=>He,getEntityRecordEdits:()=>Xo,getEntityRecordNonTransientEdits:()=>wf,getEntityRecords:()=>Zs,getEntityRecordsTotalItems:()=>qm,getEntityRecordsTotalPages:()=>Wm,getLastEntityDeleteError:()=>ty,getLastEntitySaveError:()=>ey,getRawEntityRecord:()=>Ef,getRedoEdit:()=>ny,getReferenceByDistinctEdits:()=>hy,getRevision:()=>_y,getRevisions:()=>vy,getThemeSupports:()=>oy,getUndoEdit:()=>ry,getUserPatternCategories:()=>Ey,getUserQueryResults:()=>mf,hasEditsForEntityRecord:()=>vf,hasEntityRecord:()=>$m,hasEntityRecords:()=>zm,hasFetchedAutosaves:()=>dy,hasRedo:()=>iy,hasUndo:()=>sy,isAutosavingEntityRecord:()=>Xm,isDeletingEntityRecord:()=>Zm,isPreviewEmbedFallback:()=>cy,isRequestingEmbedPreview:()=>Fm,isSavingEntityRecord:()=>ea});var Oe=x(Ee(),1),gf=x(wt(),1),Lt=x(pr(),1);var Jo={};jt(Jo,{getBlockPatternsForPostType:()=>Um,getEditorAssets:()=>Vm,getEditorSettings:()=>Pm,getEntityRecordPermissions:()=>km,getEntityRecordsPermissions:()=>hf,getHomePage:()=>Lm,getNavigationFallbackId:()=>Dm,getPostsPageId:()=>Mm,getRegisteredPostMeta:()=>Om,getTemplateId:()=>Nm,getUndoManager:()=>Xs});var tt=x(Ee(),1);var uf=x(lf(),1),{lock:ff,unlock:et}=(0,uf.__dangerousOptInToUnstableAPIsOnlyForCoreModules)("I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.","@wordpress/core-data");var df=x(pr(),1);var Wo=!1;function B(t,e,r,{alternativeFunctionName:n,isShorthandSelector:s=!1}={}){let i=Xu[t]?.[e];if(i){if(!Wo){let{alternative:o}=i,a=s?`'${r}'`:`The '${t}', '${e}' entity (used via '${r}')`,c=`the '${o.kind}', '${o.name}' entity`;n&&(c+=` via the '${n}' function`),(0,df.default)(a,{...i,alternative:c})}Wo=!0,setTimeout(()=>{Wo=!1},0)}}function Xs(t){return Ye()?.undoManager??t.undoManager}function Dm(t){return t.navigationFallbackId}var Um=(0,tt.createRegistrySelector)(t=>(0,tt.createSelector)((e,r)=>t(P).getBlockPatterns().filter(({postTypes:n})=>!n||Array.isArray(n)&&n.includes(r)),()=>[t(P).getBlockPatterns()])),hf=(0,tt.createRegistrySelector)(t=>(0,tt.createSelector)((e,r,n,s)=>(Array.isArray(s)?s:[s]).map(o=>({delete:t(P).canUser("delete",{kind:r,name:n,id:o}),update:t(P).canUser("update",{kind:r,name:n,id:o})})),e=>[e.userPermissions]));function km(t,e,r,n){return B(e,r,"getEntityRecordPermissions"),hf(t,e,r,n)[0]}function Om(t,e){return t.registeredPostMeta?.[e]??{}}function pf(t){return!t||!["number","string"].includes(typeof t)||Number(t)===0?null:t.toString()}var Lm=(0,tt.createRegistrySelector)(t=>(0,tt.createSelector)(()=>{let e=t(P).getEntityRecord("root","__unstableBase");if(!e)return null;let r=e?.show_on_front==="page"?pf(e.page_on_front):null;if(r)return{postType:"page",postId:r};let n=t(P).getDefaultTemplateId({slug:"front-page"});return n?{postType:"wp_template",postId:n}:null},e=>[He(e,"root","site"),He(e,"root","__unstableBase"),Qo(e,{slug:"front-page"})])),Mm=(0,tt.createRegistrySelector)(t=>()=>{let e=t(P).getEntityRecord("root","__unstableBase");return e?.show_on_front==="page"?pf(e.page_for_posts):null}),Nm=(0,tt.createRegistrySelector)(t=>(e,r,n)=>{let s=et(t(P)).getHomePage();if(!s)return;if(r==="page"&&r===s?.postType&&n.toString()===s?.postId){let l=t(P).getEntityRecords("postType","wp_template",{per_page:-1});if(!l)return;let u=l.find(({slug:f})=>f==="front-page")?.id;if(u)return u}let i=t(P).getEditedEntityRecord("postType",r,n);if(!i)return;let o=et(t(P)).getPostsPageId();if(r==="page"&&o===n.toString())return t(P).getDefaultTemplateId({slug:"home"});let a=i.template;if(a){let l=t(P).getEntityRecords("postType","wp_template",{per_page:-1})?.find(({slug:u})=>u===a);if(l)return l.id}let c;return i.slug?c=r==="page"?`${r}-${i.slug}`:`single-${r}-${i.slug}`:c=r==="page"?"page":`single-${r}`,t(P).getDefaultTemplateId({slug:c})});function Pm(t){return t.editorSettings}function Vm(t){return t.editorAssets}var Bm={},Fm=(0,Oe.createRegistrySelector)(t=>(e,r)=>t(P).isResolving("getEmbedPreview",[r]));function jm(t,e){(0,Lt.default)("select( 'core' ).getAuthors()",{since:"5.9",alternative:"select( 'core' ).getUsers({ who: 'authors' })"});let r=(0,gf.addQueryArgs)("/wp/v2/users/?who=authors&per_page=100",e);return mf(t,r)}function Gm(t){return t.currentUser}var mf=(0,Oe.createSelector)((t,e)=>(t.users.queries[e]??[]).map(n=>t.users.byId[n]),(t,e)=>[t.users.queries[e],t.users.byId]);function Ym(t,e){return(0,Lt.default)("wp.data.select( 'core' ).getEntitiesByKind()",{since:"6.0",alternative:"wp.data.select( 'core' ).getEntitiesConfig()"}),yf(t,e)}var yf=(0,Oe.createSelector)((t,e)=>t.entities.config.filter(r=>r.kind===e),(t,e)=>t.entities.config);function Hm(t,e,r){return(0,Lt.default)("wp.data.select( 'core' ).getEntity()",{since:"6.0",alternative:"wp.data.select( 'core' ).getEntityConfig()"}),qr(t,e,r)}function qr(t,e,r){return B(e,r,"getEntityConfig"),t.entities.config?.find(n=>n.kind===e&&n.name===r)}var He=(0,Oe.createSelector)(((t,e,r,n,s)=>{B(e,r,"getEntityRecord");let i=t.entities.records?.[e]?.[r]?.queriedData;if(!i)return;let o=s?.context??"default";if(!s||!s._fields)return i.itemIsComplete[o]?.[n]?i.items[o][n]:void 0;let a=i.items[o]?.[n];if(!a)return a;let c={},l=we(s._fields)??[];for(let u=0;u<l.length;u++){let f=l[u].split("."),d=a;f.forEach(h=>{d=d?.[h]}),Et(c,f,d)}return c}),(t,e,r,n,s)=>{let i=s?.context??"default",o=t.entities.records?.[e]?.[r]?.queriedData;return[o?.items[i]?.[n],o?.itemIsComplete[i]?.[n]]});He.__unstableNormalizeArgs=t=>{let e=[...t],r=e?.[2];return e[2]=rn(r)?Number(r):r,e};function $m(t,e,r,n,s){let i=t.entities.records?.[e]?.[r]?.queriedData;if(!i)return!1;let o=s?.context??"default";if(!s||!s._fields)return!!i.itemIsComplete[o]?.[n];let a=i.items[o]?.[n];if(!a)return!1;let c=we(s._fields)??[];for(let l=0;l<c.length;l++){let u=c[l].split("."),f=a;for(let d=0;d<u.length;d++){let h=u[d];if(!f||!Object.hasOwn(f,h))return!1;f=f[h]}}return!0}function Km(t,e,r,n){return He(t,e,r,n)}var Ef=(0,Oe.createSelector)((t,e,r,n)=>{B(e,r,"getRawEntityRecord");let s=He(t,e,r,n);return s&&Object.keys(s).reduce((i,o)=>(_i(qr(t,e,r),o)?i[o]=s[o]?.raw!==void 0?s[o]?.raw:s[o]:i[o]=s[o],i),{})},(t,e,r,n,s)=>{let i=s?.context??"default";return[t.entities.config,t.entities.records?.[e]?.[r]?.queriedData?.items[i]?.[n],t.entities.records?.[e]?.[r]?.queriedData?.itemIsComplete[i]?.[n]]});function zm(t,e,r,n){return B(e,r,"hasEntityRecords"),Array.isArray(Zs(t,e,r,n))}var Zs=((t,e,r,n)=>{B(e,r,"getEntityRecords");let s=t.entities.records?.[e]?.[r]?.queriedData;return s?Ri(s,n):null}),qm=(t,e,r,n)=>{B(e,r,"getEntityRecordsTotalItems");let s=t.entities.records?.[e]?.[r]?.queriedData;return s?xi(s,n):null},Wm=(t,e,r,n)=>{B(e,r,"getEntityRecordsTotalPages");let s=t.entities.records?.[e]?.[r]?.queriedData;if(!s)return null;if(n?.per_page===-1)return 1;let i=xi(s,n);return i&&(n?.per_page?Math.ceil(i/n.per_page):Xa(s,n))},Jm=(0,Oe.createSelector)(t=>{let{entities:{records:e}}=t,r=[];return Object.keys(e).forEach(n=>{Object.keys(e[n]).forEach(s=>{let i=Object.keys(e[n][s].edits).filter(o=>He(t,n,s,o)&&vf(t,n,s,o));if(i.length){let o=qr(t,n,s);i.forEach(a=>{let c=Zo(t,n,s,a);r.push({key:c?c[o.key||X]:void 0,title:o?.getTitle?.(c)||"",name:s,kind:n})})}})}),r},t=>[t.entities.records]),Qm=(0,Oe.createSelector)(t=>{let{entities:{records:e}}=t,r=[];return Object.keys(e).forEach(n=>{Object.keys(e[n]).forEach(s=>{let i=Object.keys(e[n][s].saving).filter(o=>ea(t,n,s,o));if(i.length){let o=qr(t,n,s);i.forEach(a=>{let c=Zo(t,n,s,a);r.push({key:c?c[o.key||X]:void 0,title:o?.getTitle?.(c)||"",name:s,kind:n})})}})}),r},t=>[t.entities.records]);function Xo(t,e,r,n){return B(e,r,"getEntityRecordEdits"),t.entities.records?.[e]?.[r]?.edits?.[n]}var wf=(0,Oe.createSelector)((t,e,r,n)=>{B(e,r,"getEntityRecordNonTransientEdits");let{transientEdits:s}=qr(t,e,r)||{},i=Xo(t,e,r,n)||{};return s?Object.keys(i).reduce((o,a)=>(s[a]||(o[a]=i[a]),o),{}):i},(t,e,r,n)=>[t.entities.config,t.entities.records?.[e]?.[r]?.edits?.[n]]);function vf(t,e,r,n){return B(e,r,"hasEditsForEntityRecord"),ea(t,e,r,n)||Object.keys(wf(t,e,r,n)).length>0}var Zo=(0,Oe.createSelector)((t,e,r,n)=>{B(e,r,"getEditedEntityRecord");let s=Ef(t,e,r,n),i=Xo(t,e,r,n);return!s&&!i?!1:{...s,...i}},(t,e,r,n,s)=>{let i=s?.context??"default";return[t.entities.config,t.entities.records?.[e]?.[r]?.queriedData.items[i]?.[n],t.entities.records?.[e]?.[r]?.queriedData.itemIsComplete[i]?.[n],t.entities.records?.[e]?.[r]?.edits?.[n]]});function Xm(t,e,r,n){B(e,r,"isAutosavingEntityRecord");let{pending:s,isAutosave:i}=t.entities.records?.[e]?.[r]?.saving?.[n]??{};return!!(s&&i)}function ea(t,e,r,n){return B(e,r,"isSavingEntityRecord"),t.entities.records?.[e]?.[r]?.saving?.[n]?.pending??!1}function Zm(t,e,r,n){return B(e,r,"isDeletingEntityRecord"),t.entities.records?.[e]?.[r]?.deleting?.[n]?.pending??!1}function ey(t,e,r,n){return B(e,r,"getLastEntitySaveError"),t.entities.records?.[e]?.[r]?.saving?.[n]?.error}function ty(t,e,r,n){return B(e,r,"getLastEntityDeleteError"),t.entities.records?.[e]?.[r]?.deleting?.[n]?.error}function ry(t){(0,Lt.default)("select( 'core' ).getUndoEdit()",{since:"6.3"})}function ny(t){(0,Lt.default)("select( 'core' ).getRedoEdit()",{since:"6.3"})}function sy(t){return Xs(t).hasUndo()}function iy(t){return Xs(t).hasRedo()}function ei(t){return t.currentTheme?He(t,"root","theme",t.currentTheme):null}function _f(t){return t.currentGlobalStylesId}function oy(t){return ei(t)?.theme_supports??Bm}function ay(t,e){return t.embedPreviews[e]}function cy(t,e){let r=t.embedPreviews[e],n='<a href="'+e+'">'+e+"</a>";return r?r.html===n:!1}function bf(t,e,r,n){let s=typeof r=="object";if(s&&(!r.kind||!r.name))return!1;s&&B(r.kind,r.name,"canUser");let i=Ht(e,r,n);return t.userPermissions[i]}function ly(t,e,r,n){return(0,Lt.default)("wp.data.select( 'core' ).canUserEditEntityRecord()",{since:"6.7",alternative:"wp.data.select( 'core' ).canUser( 'update', { kind, name, id } )"}),bf(t,"update",{kind:e,name:r,id:n})}function uy(t,e,r){return t.autosaves[r]}function fy(t,e,r,n){return n===void 0?void 0:t.autosaves[r]?.find(i=>i.author===n)}var dy=(0,Oe.createRegistrySelector)(t=>(e,r,n)=>t(P).hasFinishedResolution("getAutosaves",[r,n]));function hy(t){return t.editsReference}function py(t){let e=ei(t);return e?t.themeBaseGlobalStyles[e.stylesheet]:null}function gy(t){let e=ei(t);return e?t.themeGlobalStyleVariations[e.stylesheet]:null}function my(t){return t.blockPatterns}function yy(t){return t.blockPatternCategories}function Ey(t){return t.userPatternCategories}function wy(t){(0,Lt.default)("select( 'core' ).getCurrentThemeGlobalStylesRevisions()",{since:"6.5.0",alternative:"select( 'core' ).getRevisions( 'root', 'globalStyles', ${ recordKey } )"});let e=_f(t);return e?t.themeGlobalStyleRevisions[e]:null}function Qo(t,e){return t.defaultTemplates[JSON.stringify(e)]}var vy=(t,e,r,n,s)=>{B(e,r,"getRevisions");let i=t.entities.records?.[e]?.[r]?.revisions?.[n];return i?Ri(i,s):null},_y=(0,Oe.createSelector)((t,e,r,n,s,i)=>{B(e,r,"getRevision");let o=t.entities.records?.[e]?.[r]?.revisions?.[n];if(!o)return;let a=i?.context??"default";if(!i||!i._fields)return o.itemIsComplete[a]?.[s]?o.items[a][s]:void 0;let c=o.items[a]?.[s];if(!c)return c;let l={},u=we(i._fields)??[];for(let f=0;f<u.length;f++){let d=u[f].split("."),h=c;d.forEach(m=>{h=h?.[m]}),Et(l,d,h)}return l},(t,e,r,n,s,i)=>{let o=i?.context??"default",a=t.entities.records?.[e]?.[r]?.revisions?.[n];return[a?.items?.[o]?.[s],a?.itemIsComplete?.[o]?.[s]]});var ca={};jt(ca,{__experimentalBatch:()=>By,__experimentalReceiveCurrentGlobalStylesId:()=>Ay,__experimentalReceiveThemeBaseGlobalStyles:()=>Dy,__experimentalReceiveThemeGlobalStyleVariations:()=>Uy,__experimentalSaveSpecifiedEntityEdits:()=>jy,__unstableCreateUndoLevel:()=>Vy,addEntities:()=>Ty,deleteEntityRecord:()=>oa,editEntityRecord:()=>My,receiveAutosaves:()=>Hy,receiveCurrentTheme:()=>Iy,receiveCurrentUser:()=>xy,receiveDefaultTemplateId:()=>Ky,receiveEmbedPreview:()=>Ly,receiveEntityRecords:()=>Cy,receiveNavigationFallbackId:()=>$y,receiveRevisions:()=>zy,receiveThemeGlobalStyleRevisions:()=>Oy,receiveThemeSupports:()=>ky,receiveUploadPermissions:()=>Gy,receiveUserPermission:()=>Tf,receiveUserPermissions:()=>Yy,receiveUserQuery:()=>Ry,redo:()=>Py,saveEditedEntityRecord:()=>Fy,saveEntityRecord:()=>aa,undo:()=>Ny});var Rf=x(yt(),1);var ia=x(ct(),1),xf=x(wt(),1),ti=x(pr(),1);var na=x(ct(),1),ra=null;function by(t,e){let r=[...t],n=[];for(;r.length;)n.push(r.splice(0,e));return n}async function Sf(t){ra===null&&(ra=(await(0,na.default)({path:"/batch/v1",method:"OPTIONS"})).endpoints[0].args.requests.maxItems);let e=[];for(let r of by(t,ra)){let n=await(0,na.default)({path:"/batch/v1",method:"POST",data:{validation:"require-all-validate",requests:r.map(i=>({path:i.path,body:i.data,method:i.method,headers:i.headers}))}}),s;n.failed?s=n.responses.map(i=>({error:i?.body})):s=n.responses.map(i=>{let o={};return i.status>=200&&i.status<300?o.output=i.body:o.error=i.body,o}),e.push(...s)}return e}function sa(t=Sf){let e=0,r=[],n=new Sy;return{add(s){let i=++e;n.add(i);let o=a=>new Promise((c,l)=>{r.push({input:a,resolve:c,reject:l}),n.delete(i)});return typeof s=="function"?Promise.resolve(s(o)).finally(()=>{n.delete(i)}):o(s)},async run(){n.size&&await new Promise(o=>{let a=n.subscribe(()=>{n.size||(a(),o(void 0))})});let s;try{if(s=await t(r.map(({input:o})=>o)),s.length!==r.length)throw new Error("run: Array returned by processor must be same size as input array.")}catch(o){for(let{reject:a}of r)a(o);throw o}let i=!0;return s.forEach((o,a)=>{let c=r[a];o?.error?(c?.reject(o.error),i=!1):c?.resolve(o?.output??o)}),r=[],i}}}var Sy=class{constructor(...t){this.set=new Set(...t),this.subscribers=new Set}get size(){return this.set.size}add(t){return this.set.add(t),this.subscribers.forEach(e=>e()),this}delete(t){let e=this.set.delete(t);return this.subscribers.forEach(r=>r()),e}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}};function Ry(t,e){return{type:"RECEIVE_USER_QUERY",users:Array.isArray(e)?e:[e],queryID:t}}function xy(t){return{type:"RECEIVE_CURRENT_USER",currentUser:t}}function Ty(t){return{type:"ADD_ENTITIES",entities:t}}function Cy(t,e,r,n=void 0,s=!1,i=void 0,o=void 0){t==="postType"&&(r=(Array.isArray(r)?r:[r]).map(c=>c.status==="auto-draft"?{...c,title:""}:c));let a;return n?a=Ga(r,n,i,o):a=Si(r,i,o),{...a,kind:t,name:e,invalidateCache:s}}function Iy(t){return{type:"RECEIVE_CURRENT_THEME",currentTheme:t}}function Ay(t){return{type:"RECEIVE_CURRENT_GLOBAL_STYLES_ID",id:t}}function Dy(t,e){return{type:"RECEIVE_THEME_GLOBAL_STYLES",stylesheet:t,globalStyles:e}}function Uy(t,e){return{type:"RECEIVE_THEME_GLOBAL_STYLE_VARIATIONS",stylesheet:t,variations:e}}function ky(){return(0,ti.default)("wp.data.dispatch( 'core' ).receiveThemeSupports",{since:"5.9"}),{type:"DO_NOTHING"}}function Oy(t,e){return(0,ti.default)("wp.data.dispatch( 'core' ).receiveThemeGlobalStyleRevisions()",{since:"6.5.0",alternative:"wp.data.dispatch( 'core' ).receiveRevisions"}),{type:"RECEIVE_THEME_GLOBAL_STYLE_REVISIONS",currentId:t,revisions:e}}function Ly(t,e){return{type:"RECEIVE_EMBED_PREVIEW",url:t,preview:e}}var oa=(t,e,r,n,{__unstableFetch:s=ia.default,throwOnError:i=!1}={})=>async({dispatch:o,resolveSelect:a})=>{B(t,e,"deleteEntityRecord");let l=(await a.getEntitiesConfig(t)).find(h=>h.kind===t&&h.name===e),u,f=!1;if(!l)return;let d=await o.__unstableAcquireStoreLock(P,["entities","records",t,e,r],{exclusive:!0});try{o({type:"DELETE_ENTITY_RECORD_START",kind:t,name:e,recordId:r});let h=!1,{baseURL:m}=l;t==="postType"&&e==="wp_template"&&(r&&typeof r=="string"&&!/^\d+$/.test(r)||!window?.__experimentalTemplateActivate)&&(m=m.slice(0,m.lastIndexOf("/"))+"/templates");try{let E=`${m}/${r}`;if(n&&(E=(0,xf.addQueryArgs)(E,n)),f=await s({path:E,method:"DELETE"}),await o(ja(t,e,r,!0)),l.syncConfig){let _=`${t}/${e}`,b=r;Ye()?.unload(_,b)}}catch(E){h=!0,u=E}if(o({type:"DELETE_ENTITY_RECORD_FINISH",kind:t,name:e,recordId:r,error:u}),h&&i)throw u;return f}finally{o.__unstableReleaseStoreLock(d)}},My=(t,e,r,n,s={})=>({select:i,dispatch:o})=>{B(t,e,"editEntityRecord");let a=i.getEntityConfig(t,e);if(!a)throw new Error(`The entity being edited (${t}, ${e}) does not have a loaded config.`);let{mergedEdits:c={}}=a,l=i.getRawEntityRecord(t,e,r),u=i.getEditedEntityRecord(t,e,r),f=Object.keys(n).reduce((h,m)=>(h[m]=c[m]?{...u[m],...n[m]}:n[m],h),{}),d={kind:t,name:e,recordId:r,edits:Object.keys(n).reduce((h,m)=>{let E=l[m],_=f[m];return h[m]=(0,Rf.default)(E,_)?void 0:_,h},{})};if(a.syncConfig){let h=`${t}/${e}`,m=r,E=s.undoIgnore?!1:!s.isCached;Ye()?.update(h,m,f,fr,{isNewUndoLevel:E})}s.undoIgnore||i.getUndoManager().addRecord([{id:{kind:t,name:e,recordId:r},changes:Object.keys(n).reduce((h,m)=>(h[m]={from:u[m],to:n[m]},h),{})}],s.isCached),o({type:"EDIT_ENTITY_RECORD",...d})},Ny=()=>({select:t,dispatch:e})=>{let r=t.getUndoManager().undo();r&&e({type:"UNDO",record:r})},Py=()=>({select:t,dispatch:e})=>{let r=t.getUndoManager().redo();r&&e({type:"REDO",record:r})},Vy=()=>({select:t})=>{t.getUndoManager().addRecord()},aa=(t,e,r,{isAutosave:n=!1,__unstableFetch:s=ia.default,throwOnError:i=!1}={})=>async({select:o,resolveSelect:a,dispatch:c})=>{B(t,e,"saveEntityRecord");let u=(await a.getEntitiesConfig(t)).find(E=>E.kind===t&&E.name===e);if(!u)return;let f=u.key??X,d=r[f],h=!!f&&!d,m=await c.__unstableAcquireStoreLock(P,["entities","records",t,e,d||Bn()],{exclusive:!0});try{for(let[A,D]of Object.entries(r))if(typeof D=="function"){let k=D(o.getEditedEntityRecord(t,e,d));c.editEntityRecord(t,e,d,{[A]:k},{undoIgnore:!0}),r[A]=k}c({type:"SAVE_ENTITY_RECORD_START",kind:t,name:e,recordId:d,isAutosave:n});let E,_,b=!1,{baseURL:T}=u;t==="postType"&&e==="wp_template"&&(d&&typeof d=="string"&&!/^\d+$/.test(d)||!window?.__experimentalTemplateActivate)&&(T=T.slice(0,T.lastIndexOf("/"))+"/templates");try{let A=`${T}${d?"/"+d:""}`,D=h?{}:o.getRawEntityRecord(t,e,d);if(n){let k=o.getCurrentUser(),$=k?k.id:void 0,te=await a.getAutosave(D.type,D.id,$),Z={...D,...te,...r};if(Z=Object.keys(Z).reduce((K,le)=>(["title","excerpt","content","meta"].includes(le)&&(K[le]=Z[le]),K),{status:Z.status==="auto-draft"?"draft":void 0}),E=await s({path:`${A}/autosaves`,method:"POST",data:Z}),D.id===E.id){let K={...D,...Z,...E};K=Object.keys(K).reduce((le,re)=>(["title","excerpt","content"].includes(re)?le[re]=K[re]:re==="status"?le[re]=D.status==="auto-draft"&&K.status==="draft"?K.status:D.status:le[re]=D[re],le),{}),c.receiveEntityRecords(t,e,K,void 0,!0)}else c.receiveAutosaves(D.id,E)}else{let k=r;u.__unstablePrePersist&&(k={...k,...u.__unstablePrePersist(D,k)}),E=await s({path:A,method:d?"PUT":"POST",data:k}),c.receiveEntityRecords(t,e,E,void 0,!0,k),u.syncConfig&&Ye()?.update(`${t}/${e}`,d,E,fr,{isSave:!0})}}catch(A){b=!0,_=A}if(c({type:"SAVE_ENTITY_RECORD_FINISH",kind:t,name:e,recordId:d,error:_,isAutosave:n}),b&&i)throw _;return E}finally{c.__unstableReleaseStoreLock(m)}},By=t=>async({dispatch:e})=>{let r=sa(),n={saveEntityRecord(o,a,c,l){return r.add(u=>e.saveEntityRecord(o,a,c,{...l,__unstableFetch:u}))},saveEditedEntityRecord(o,a,c,l){return r.add(u=>e.saveEditedEntityRecord(o,a,c,{...l,__unstableFetch:u}))},deleteEntityRecord(o,a,c,l,u){return r.add(f=>e.deleteEntityRecord(o,a,c,l,{...u,__unstableFetch:f}))}},s=t.map(o=>o(n)),[,...i]=await Promise.all([r.run(),...s]);return i},Fy=(t,e,r,n)=>async({select:s,dispatch:i,resolveSelect:o})=>{if(B(t,e,"saveEditedEntityRecord"),!s.hasEditsForEntityRecord(t,e,r))return;let c=(await o.getEntitiesConfig(t)).find(d=>d.kind===t&&d.name===e);if(!c)return;let l=c.key||X,u=s.getEntityRecordNonTransientEdits(t,e,r),f={[l]:r,...u};return await i.saveEntityRecord(t,e,f,n)},jy=(t,e,r,n,s)=>async({select:i,dispatch:o,resolveSelect:a})=>{if(B(t,e,"__experimentalSaveSpecifiedEntityEdits"),!i.hasEditsForEntityRecord(t,e,r))return;let c=i.getEntityRecordNonTransientEdits(t,e,r),l={};for(let h of n)Et(l,h,bi(c,h));let d=(await a.getEntitiesConfig(t)).find(h=>h.kind===t&&h.name===e)?.key||X;return r&&(l[d]=r),await o.saveEntityRecord(t,e,l,s)};function Gy(t){return(0,ti.default)("wp.data.dispatch( 'core' ).receiveUploadPermissions",{since:"5.9",alternative:"receiveUserPermission"}),Tf("create/media",t)}function Tf(t,e){return{type:"RECEIVE_USER_PERMISSION",key:t,isAllowed:e}}function Yy(t){return{type:"RECEIVE_USER_PERMISSIONS",permissions:t}}function Hy(t,e){return{type:"RECEIVE_AUTOSAVES",postId:t,autosaves:Array.isArray(e)?e:[e]}}function $y(t){return{type:"RECEIVE_NAVIGATION_FALLBACK_ID",fallbackId:t}}function Ky(t,e){return{type:"RECEIVE_DEFAULT_TEMPLATE",query:t,templateId:e}}var zy=(t,e,r,n,s,i=!1,o)=>async({dispatch:a,resolveSelect:c})=>{B(t,e,"receiveRevisions");let u=(await c.getEntitiesConfig(t)).find(d=>d.kind===t&&d.name===e),f=u&&u?.revisionKey?u.revisionKey:X;a({type:"RECEIVE_ITEM_REVISIONS",key:f,items:Array.isArray(n)?n:[n],recordKey:r,meta:o,query:s,kind:t,name:e,invalidateCache:i})};var la={};jt(la,{editMediaEntity:()=>Wy,receiveEditorAssets:()=>Qy,receiveEditorSettings:()=>Jy,receiveRegisteredPostMeta:()=>qy});var Cf=x(ct(),1);function qy(t,e){return{type:"RECEIVE_REGISTERED_POST_META",postType:t,registeredPostMeta:e}}var Wy=(t,e={},{__unstableFetch:r=Cf.default,throwOnError:n=!1}={})=>async({dispatch:s,resolveSelect:i})=>{if(!t)return;let o="postType",a="attachment",l=(await i.getEntitiesConfig(o)).find(m=>m.kind===o&&m.name===a);if(!l)return;let u=await s.__unstableAcquireStoreLock(P,["entities","records",o,a,t],{exclusive:!0}),f,d,h=!1;try{s({type:"SAVE_ENTITY_RECORD_START",kind:o,name:a,recordId:t});try{let m=`${l.baseURL}/${t}/edit`,E=await r({path:m,method:"POST",data:{...e}});E&&(s.receiveEntityRecords(o,a,[E],void 0,!0,void 0,void 0),f=E)}catch(m){d=m,h=!0}if(s({type:"SAVE_ENTITY_RECORD_FINISH",kind:o,name:a,recordId:t,error:d}),h&&n)throw d;return f}finally{s.__unstableReleaseStoreLock(u)}};function Jy(t){return{type:"RECEIVE_EDITOR_SETTINGS",settings:t}}function Qy(t){return{type:"RECEIVE_EDITOR_ASSETS",assets:t}}var ha={};jt(ha,{__experimentalGetCurrentGlobalStylesId:()=>dE,__experimentalGetCurrentThemeBaseGlobalStyles:()=>hE,__experimentalGetCurrentThemeGlobalStylesVariations:()=>pE,canUser:()=>Mf,canUserEditEntityRecord:()=>lE,getAuthors:()=>eE,getAutosave:()=>fE,getAutosaves:()=>uE,getBlockPatternCategories:()=>mE,getBlockPatterns:()=>gE,getCurrentTheme:()=>oE,getCurrentThemeGlobalStylesRevisions:()=>Nf,getCurrentUser:()=>tE,getDefaultTemplateId:()=>Pf,getEditedEntityRecord:()=>nE,getEditorAssets:()=>SE,getEditorSettings:()=>bE,getEmbedPreview:()=>cE,getEntitiesConfig:()=>_E,getEntityRecord:()=>ri,getEntityRecords:()=>$n,getEntityRecordsTotalItems:()=>sE,getEntityRecordsTotalPages:()=>iE,getNavigationFallbackId:()=>EE,getRawEntityRecord:()=>rE,getRegisteredPostMeta:()=>vE,getRevision:()=>wE,getRevisions:()=>Vf,getThemeSupports:()=>aE,getUserPatternCategories:()=>yE});var nt=x(wt(),1),Lf=x(ua(),1),W=x(ct(),1);var Of=x(ct(),1);var jn=x(ct(),1),Gn=x(wt(),1),Yn=x(ua(),1),Hn=x(Ci(),1);async function Df(t,e={},r={}){let n=e.isInitialSuggestions&&e.initialSuggestionsSearchOptions?{...e,...e.initialSuggestionsSearchOptions}:e,{type:s,subtype:i,page:o,perPage:a=e.isInitialSuggestions?3:20}=n,{disablePostFormats:c=!1}=r,l=[];(!s||s==="post")&&l.push((0,jn.default)({path:(0,Gn.addQueryArgs)("/wp/v2/search",{search:t,page:o,per_page:a,type:"post",subtype:i})}).then(d=>d.map(h=>({id:h.id,url:h.url,title:(0,Yn.decodeEntities)(h.title||"")||(0,Hn.__)("(no title)"),type:h.subtype||h.type,kind:"post-type"}))).catch(()=>[])),(!s||s==="term")&&l.push((0,jn.default)({path:(0,Gn.addQueryArgs)("/wp/v2/search",{search:t,page:o,per_page:a,type:"term",subtype:i})}).then(d=>d.map(h=>({id:h.id,url:h.url,title:(0,Yn.decodeEntities)(h.title||"")||(0,Hn.__)("(no title)"),type:h.subtype||h.type,kind:"taxonomy"}))).catch(()=>[])),!c&&(!s||s==="post-format")&&l.push((0,jn.default)({path:(0,Gn.addQueryArgs)("/wp/v2/search",{search:t,page:o,per_page:a,type:"post-format",subtype:i})}).then(d=>d.map(h=>({id:h.id,url:h.url,title:(0,Yn.decodeEntities)(h.title||"")||(0,Hn.__)("(no title)"),type:h.subtype||h.type,kind:"taxonomy"}))).catch(()=>[])),(!s||s==="attachment")&&l.push((0,jn.default)({path:(0,Gn.addQueryArgs)("/wp/v2/media",{search:t,page:o,per_page:a})}).then(d=>d.map(h=>({id:h.id,url:h.source_url,title:(0,Yn.decodeEntities)(h.title.rendered||"")||(0,Hn.__)("(no title)"),type:h.type,kind:"media"}))).catch(()=>[]));let f=(await Promise.all(l)).flat();return f=f.filter(d=>!!d.id),f=Xy(f,t),f=f.slice(0,a),f}function Xy(t,e){let r=Af(e),n={};for(let s of t)if(s.title){let i=Af(s.title),o=i.filter(u=>r.some(f=>u===f)),a=i.filter(u=>r.some(f=>u!==f&&u.includes(f))),c=o.length/i.length*10,l=a.length/i.length;n[s.id]=c+l}else n[s.id]=0;return t.sort((s,i)=>n[i.id]-n[s.id])}function Af(t){return t.toLowerCase().match(/[\p{L}\p{N}]+/gu)||[]}var Uf=x(ct(),1),rt=x(wt(),1),fa=new Map,Zy=async(t,e={})=>{let r="/wp-block-editor/v1/url-details",n={url:(0,rt.prependHTTP)(t)};if(!(0,rt.isURL)(t))return Promise.reject(`${t} is not a valid URL.`);let s=(0,rt.getProtocol)(t);return!s||!(0,rt.isValidProtocol)(s)||!s.startsWith("http")||!/^https?:\/\/[^\/\s]/i.test(t)?Promise.reject(`${t} does not have a valid protocol. URLs must be "http" based`):fa.has(t)?fa.get(t):(0,Uf.default)({path:(0,rt.addQueryArgs)(r,n),...e}).then(i=>(fa.set(t,i),i))},kf=Zy;async function da(){let t=await(0,Of.default)({path:"/wp/v2/block-patterns/patterns"});return t?t.map(e=>Object.fromEntries(Object.entries(e).map(([r,n])=>[rs(r),n]))):[]}var eE=t=>async({dispatch:e})=>{let r=(0,nt.addQueryArgs)("/wp/v2/users/?who=authors&per_page=100",t),n=await(0,W.default)({path:r});e.receiveUserQuery(r,n)},tE=()=>async({dispatch:t})=>{let e=await(0,W.default)({path:"/wp/v2/users/me"});t.receiveCurrentUser(e)},ri=(t,e,r="",n)=>async({select:s,dispatch:i,registry:o,resolveSelect:a})=>{let l=(await a.getEntitiesConfig(t)).find(f=>f.name===e&&f.kind===t);if(!l)return;let u=await i.__unstableAcquireStoreLock(P,["entities","records",t,e,r],{exclusive:!1});try{if(n!==void 0&&n._fields&&(n={...n,_fields:[...new Set([...we(n._fields)||[],l.key||X])].join()}),n!==void 0&&n._fields&&s.hasEntityRecord(t,e,r,n))return;let{baseURL:f}=l;t==="postType"&&e==="wp_template"&&(r&&typeof r=="string"&&!/^\d+$/.test(r)||!window?.__experimentalTemplateActivate)&&(f=f.slice(0,f.lastIndexOf("/"))+"/templates");let d=(0,nt.addQueryArgs)(f+(r?"/"+r:""),{...l.baseURLParams,...n}),h=await(0,W.default)({path:d,parse:!1}),m=await h.json(),E=nn(h.headers?.get("allow")),_=[],b={};for(let T of Yt)b[Ht(T,{kind:t,name:e,id:r})]=E[T],_.push([T,{kind:t,name:e,id:r}]);if(l.syncConfig&&rn(r)&&!n){let T=`${t}/${e}`,A=r,D={...m};Object.entries(l.transientEdits??{}).filter(([k,$])=>D[k]===void 0&&$&&typeof $=="object"&&"read"in $&&typeof $.read=="function").forEach(([k,$])=>{D[k]=$.read(D)}),await Ye()?.load(l.syncConfig,T,A,D,{editRecord:(k,$={})=>{Object.keys(k).length&&i({type:"EDIT_ENTITY_RECORD",kind:t,name:e,recordId:r,edits:k,meta:{undo:void 0},options:$})},getEditedRecord:async()=>await a.getEditedEntityRecord(t,e,r),refetchRecord:async()=>{i.receiveEntityRecords(t,e,await(0,W.default)({path:d,parse:!0}),n)},saveRecord:()=>{i.saveEditedEntityRecord(t,e,r)},addUndoMeta:(k,$)=>{let te=Yu(k);te&&$.set("selectionHistory",te)},restoreUndoMeta:(k,$)=>{let te=$.get("selectionHistory");te&&setTimeout(()=>{$u(te,k)},0)}})}o.batch(()=>{i.receiveEntityRecords(t,e,m,n),i.receiveUserPermissions(b),i.finishResolutions("canUser",_)})}finally{i.__unstableReleaseStoreLock(u)}};ri.shouldInvalidate=(t,e,r)=>e==="root"&&r==="site"&&(t.type==="RECEIVE_ITEMS"&&t.persistedEdits&&t.persistedEdits.status!=="auto-draft"||t.type==="REMOVE_ITEMS")&&t.kind==="postType"&&t.name==="wp_template";var rE=Gt("getEntityRecord"),nE=Gt("getEntityRecord"),$n=(t,e,r={})=>async({dispatch:n,registry:s,resolveSelect:i})=>{let a=(await i.getEntitiesConfig(t)).find(d=>d.name===e&&d.kind===t);if(!a)return;let c=await n.__unstableAcquireStoreLock(P,["entities","records",t,e],{exclusive:!1}),l={...r},u=a.key||X;function f(d,h){let m=Object.fromEntries(Object.entries(h).filter(([E,_])=>["context","_fields"].includes(E)&&!!_));return d.filter(E=>E?.[u]).map(E=>[t,e,E[u],Object.keys(m).length>0?m:void 0])}try{r._fields&&(r={...r,_fields:[...new Set([...we(r._fields)||[],u])].join()});let{baseURL:d}=a,{combinedTemplates:h=!0}=r;t==="postType"&&e==="wp_template"&&h&&(d=d.slice(0,d.lastIndexOf("/"))+"/templates");let m=(0,nt.addQueryArgs)(d,{...a.baseURLParams,...r}),E=[],_;if(a.supportsPagination&&r.per_page!==-1){let b=await(0,W.default)({path:m,parse:!1});E=Object.values(await b.json()),_={totalItems:parseInt(b.headers.get("X-WP-Total")),totalPages:parseInt(b.headers.get("X-WP-TotalPages"))}}else if(r.per_page===-1&&r[sn]===!0){let b=1,T;do{let A=await(0,W.default)({path:(0,nt.addQueryArgs)(m,{page:b,per_page:100}),parse:!1}),D=Object.values(await A.json());T=parseInt(A.headers.get("X-WP-TotalPages")),_||(_={totalItems:parseInt(A.headers.get("X-WP-Total")),totalPages:1}),E.push(...D),s.batch(()=>{n.receiveEntityRecords(t,e,E,r,!1,void 0,_),n.finishResolutions("getEntityRecord",f(D,l))}),b++}while(b<=T)}else E=Object.values(await(0,W.default)({path:m})),_={totalItems:E.length,totalPages:1};if(a.syncConfig&&r.per_page===-1){let b=`${t}/${e}`;Ye()?.loadCollection(a.syncConfig,b,{refetchRecords:async()=>{n.receiveEntityRecords(t,e,await(0,W.default)({path:m,parse:!0}),r)}})}r._fields&&(E=E.map(b=>(r._fields.split(",").forEach(T=>{b.hasOwnProperty(T)||(b[T]=void 0)}),b))),s.batch(()=>{n.receiveEntityRecords(t,e,E,r,!1,void 0,_);let b=E.filter(D=>!!D?.[u]&&!!D?._links?.self?.[0]?.targetHints?.allow).map(D=>({id:D[u],permissions:nn(D._links.self[0].targetHints.allow)})),T=[],A={};for(let D of b)for(let k of Yt)T.push([k,{kind:t,name:e,id:D.id}]),A[Ht(k,{kind:t,name:e,id:D.id})]=D.permissions[k];b.length>0&&(n.receiveUserPermissions(A),n.finishResolutions("canUser",T)),n.finishResolutions("getEntityRecord",f(E,l)),n.__unstableReleaseStoreLock(c)})}catch{n.__unstableReleaseStoreLock(c)}};$n.shouldInvalidate=(t,e,r)=>(t.type==="RECEIVE_ITEMS"||t.type==="REMOVE_ITEMS")&&t.invalidateCache&&e===t.kind&&r===t.name;var sE=Gt("getEntityRecords"),iE=Gt("getEntityRecords"),oE=()=>async({dispatch:t,resolveSelect:e})=>{let r=await e.getEntityRecords("root","theme",{status:"active"});t.receiveCurrentTheme(r[0])},aE=Gt("getCurrentTheme"),cE=t=>async({dispatch:e})=>{try{let r=await(0,W.default)({path:(0,nt.addQueryArgs)("/oembed/1.0/proxy",{url:t})});e.receiveEmbedPreview(t,r)}catch{e.receiveEmbedPreview(t,!1)}},Mf=(t,e,r)=>async({dispatch:n,registry:s,resolveSelect:i})=>{if(!Yt.includes(t))throw new Error(`'${t}' is not a valid action.`);let{hasStartedResolution:o}=s.select(P);for(let u of Yt){if(u===t)continue;if(o("canUser",[u,e,r]))return}let a=null;if(typeof e=="object"){if(!e.kind||!e.name)throw new Error("The entity resource object is not valid.");let f=(await i.getEntitiesConfig(e.kind)).find(d=>d.name===e.name&&d.kind===e.kind);if(!f)return;a=f.baseURL+(e.id?"/"+e.id:"")}else a=`/wp/v2/${e}`+(r?"/"+r:"");let c;try{c=await(0,W.default)({path:a,method:"OPTIONS",parse:!1})}catch{return}let l=nn(c.headers?.get("allow"));s.batch(()=>{for(let u of Yt){let f=Ht(u,e,r);n.receiveUserPermission(f,l[u]),u!==t&&n.finishResolution("canUser",[u,e,r])}})},lE=(t,e,r)=>async({dispatch:n})=>{await n(Mf("update",{kind:t,name:e,id:r}))},uE=(t,e)=>async({dispatch:r,resolveSelect:n})=>{let{rest_base:s,rest_namespace:i="wp/v2",supports:o}=await n.getPostType(t);if(!o?.autosave)return;let a=await(0,W.default)({path:`/${i}/${s}/${e}/autosaves?context=edit`});a&&a.length&&r.receiveAutosaves(e,a)},fE=(t,e)=>async({resolveSelect:r})=>{await r.getAutosaves(t,e)},dE=()=>async({dispatch:t,resolveSelect:e})=>{let n=(await e.getEntityRecords("root","theme",{status:"active"}))?.[0]?._links?.["wp:user-global-styles"]?.[0]?.href;if(!n)return;let s=n.match(/\/(\d+)(?:\?|$)/),i=s?Number(s[1]):null;i&&t.__experimentalReceiveCurrentGlobalStylesId(i)},hE=()=>async({resolveSelect:t,dispatch:e})=>{let r=await t.getCurrentTheme(),n=await(0,W.default)({path:`/wp/v2/global-styles/themes/${r.stylesheet}?context=view`});e.__experimentalReceiveThemeBaseGlobalStyles(r.stylesheet,n)},pE=()=>async({resolveSelect:t,dispatch:e})=>{let r=await t.getCurrentTheme(),n=await(0,W.default)({path:`/wp/v2/global-styles/themes/${r.stylesheet}/variations?context=view`});e.__experimentalReceiveThemeGlobalStyleVariations(r.stylesheet,n)},Nf=()=>async({resolveSelect:t,dispatch:e})=>{let r=await t.__experimentalGetCurrentGlobalStylesId(),s=(r?await t.getEntityRecord("root","globalStyles",r):void 0)?._links?.["version-history"]?.[0]?.href;if(s){let o=(await(0,W.default)({url:s}))?.map(a=>Object.fromEntries(Object.entries(a).map(([c,l])=>[rs(c),l])));e.receiveThemeGlobalStyleRevisions(r,o)}};Nf.shouldInvalidate=t=>t.type==="SAVE_ENTITY_RECORD_FINISH"&&t.kind==="root"&&!t.error&&t.name==="globalStyles";var gE=()=>async({dispatch:t})=>{let e=await da();t({type:"RECEIVE_BLOCK_PATTERNS",patterns:e})},mE=()=>async({dispatch:t})=>{let e=await(0,W.default)({path:"/wp/v2/block-patterns/categories"});t({type:"RECEIVE_BLOCK_PATTERN_CATEGORIES",categories:e})},yE=()=>async({dispatch:t,resolveSelect:e})=>{let n=(await e.getEntityRecords("taxonomy","wp_pattern_category",{per_page:-1,_fields:"id,name,description,slug",context:"view"}))?.map(s=>({...s,label:(0,Lf.decodeEntities)(s.name),name:s.slug}))||[];t({type:"RECEIVE_USER_PATTERN_CATEGORIES",patternCategories:n})},EE=()=>async({dispatch:t,select:e,registry:r})=>{let n=await(0,W.default)({path:(0,nt.addQueryArgs)("/wp-block-editor/v1/navigation-fallback",{_embed:!0})}),s=n?._embedded?.self;r.batch(()=>{if(t.receiveNavigationFallbackId(n?.id),!s)return;let o=!e.getEntityRecord("postType","wp_navigation",n.id);t.receiveEntityRecords("postType","wp_navigation",s,void 0,o),t.finishResolution("getEntityRecord",["postType","wp_navigation",n.id])})},Pf=t=>async({dispatch:e,registry:r,resolveSelect:n})=>{let s=await(0,W.default)({path:(0,nt.addQueryArgs)("/wp/v2/templates/lookup",t)});await n.getEntitiesConfig("postType");let i=window?.__experimentalTemplateActivate&&s?.wp_id||s?.id;i&&(s.id=i,r.batch(()=>{e.receiveDefaultTemplateId(t,i),e.receiveEntityRecords("postType",s.type,[s]),e.finishResolution("getEntityRecord",["postType",s.type,i])}))};Pf.shouldInvalidate=t=>t.type==="RECEIVE_ITEMS"&&t.kind==="root"&&t.name==="site";var Vf=(t,e,r,n={})=>async({dispatch:s,registry:i,resolveSelect:o})=>{let c=(await o.getEntitiesConfig(t)).find(m=>m.name===e&&m.kind===t);if(!c)return;n._fields&&(n={...n,_fields:[...new Set([...we(n._fields)||[],c.revisionKey||X])].join()});let l=(0,nt.addQueryArgs)(c.getRevisionsUrl(r),n),u,f,d={},h=c.supportsPagination&&n.per_page!==-1;try{f=await(0,W.default)({path:l,parse:!h})}catch{return}f&&(h?(u=Object.values(await f.json()),d.totalItems=parseInt(f.headers.get("X-WP-Total"))):u=Object.values(f),n._fields&&(u=u.map(m=>(n._fields.split(",").forEach(E=>{m.hasOwnProperty(E)||(m[E]=void 0)}),m))),i.batch(()=>{if(s.receiveRevisions(t,e,r,u,n,!1,d),!n?._fields&&!n.context){let m=c.key||X,E=u.filter(_=>_[m]).map(_=>[t,e,r,_[m]]);s.finishResolutions("getRevision",E)}}))};Vf.shouldInvalidate=(t,e,r,n)=>t.type==="SAVE_ENTITY_RECORD_FINISH"&&r===t.name&&e===t.kind&&!t.error&&n===t.recordId;var wE=(t,e,r,n,s)=>async({dispatch:i,resolveSelect:o})=>{let c=(await o.getEntitiesConfig(t)).find(f=>f.name===e&&f.kind===t);if(!c)return;s!==void 0&&s._fields&&(s={...s,_fields:[...new Set([...we(s._fields)||[],c.revisionKey||X])].join()});let l=(0,nt.addQueryArgs)(c.getRevisionsUrl(r,n),s),u;try{u=await(0,W.default)({path:l})}catch{return}u&&i.receiveRevisions(t,e,r,u,s)},vE=t=>async({dispatch:e,resolveSelect:r})=>{let n;try{let{rest_namespace:s="wp/v2",rest_base:i}=await r.getPostType(t)||{};n=await(0,W.default)({path:`${s}/${i}/?context=edit`,method:"OPTIONS"})}catch{return}n&&e.receiveRegisteredPostMeta(t,n?.schema?.properties?.meta?.properties)},_E=t=>async({dispatch:e})=>{let r=Js.find(n=>n.kind===t);if(r)try{let n=await r.loadEntities();if(!n.length)return;e.addEntities(n)}catch{}},bE=()=>async({dispatch:t})=>{let e=await(0,W.default)({path:"/wp-block-editor/v1/settings"});t.receiveEditorSettings(e)},SE=()=>async({dispatch:t})=>{let e=await(0,W.default)({path:"/wp-block-editor/v1/assets"});t.receiveEditorAssets(e)};function pa(t,e){let r={...t},n=r;for(let s of e)n.children={...n.children,[s]:{locks:[],children:{},...n.children[s]}},n=n.children[s];return r}function Kn(t,e){let r=t;for(let n of e){let s=r.children[n];if(!s)return null;r=s}return r}function*Bf(t,e){let r=t;yield r;for(let n of e){let s=r.children[n];if(!s)break;yield s,r=s}}function*Ff(t){let e=Object.values(t.children);for(;e.length;){let r=e.pop();yield r,e.push(...Object.values(r.children))}}function ga({exclusive:t},e){return!!(t&&e.length||!t&&e.filter(r=>r.exclusive).length)}var RE={requests:[],tree:{locks:[],children:{}}};function zn(t=RE,e){switch(e.type){case"ENQUEUE_LOCK_REQUEST":{let{request:r}=e;return{...t,requests:[r,...t.requests]}}case"GRANT_LOCK_REQUEST":{let{lock:r,request:n}=e,{store:s,path:i}=n,o=[s,...i],a=pa(t.tree,o),c=Kn(a,o);return c.locks=[...c.locks,r],{...t,requests:t.requests.filter(l=>l!==n),tree:a}}case"RELEASE_LOCK":{let{lock:r}=e,n=[r.store,...r.path],s=pa(t.tree,n),i=Kn(s,n);return i.locks=i.locks.filter(o=>o!==r),{...t,tree:s}}}return t}function jf(t){return t.requests}function Gf(t,e,r,{exclusive:n}){let s=[e,...r],i=t.tree;for(let a of Bf(i,s))if(ga({exclusive:n},a.locks))return!1;let o=Kn(i,s);if(!o)return!0;for(let a of Ff(o))if(ga({exclusive:n},a.locks))return!1;return!0}function Yf(){let t=zn(void 0,{type:"@@INIT"});function e(){for(let s of jf(t)){let{store:i,path:o,exclusive:a,notifyAcquired:c}=s;if(Gf(t,i,o,{exclusive:a})){let l={store:i,path:o,exclusive:a};t=zn(t,{type:"GRANT_LOCK_REQUEST",lock:l,request:s}),c(l)}}}function r(s,i,o){return new Promise(a=>{t=zn(t,{type:"ENQUEUE_LOCK_REQUEST",request:{store:s,path:i,exclusive:o,notifyAcquired:a}}),e()})}function n(s){t=zn(t,{type:"RELEASE_LOCK",lock:s}),e()}return{acquire:r,release:n}}function Hf(){let t=Yf();function e(n,s,{exclusive:i}){return()=>t.acquire(n,s,i)}function r(n){return()=>t.release(n)}return{__unstableAcquireStoreLock:e,__unstableReleaseStoreLock:r}}var $f,Kf;var ni=x(Mt(),1);var qf=x(Mt(),1),Wr=(0,qf.createContext)({});Wr.displayName="EntityContext";var Qf=x(Jf(),1);function Xf({kind:t,type:e,id:r,children:n}){let s=(0,ni.useContext)(Wr),i=(0,ni.useMemo)(()=>({...s,[t]:{...s?.[t],[e]:r}}),[s,t,e,r]);return(0,Qf.jsx)(Wr.Provider,{value:i,children:n})}var si=x(Ee(),1),nd=x(pr(),1),sd=x(Mt(),1);var td=x(Ee(),1);function Zf(t,e){var r=0,n,s;e=e||{};function i(){var o=n,a=arguments.length,c,l;e:for(;o;){if(o.args.length!==arguments.length){o=o.next;continue}for(l=0;l<a;l++)if(o.args[l]!==arguments[l]){o=o.next;continue e}return o!==n&&(o===s&&(s=o.prev),o.prev.next=o.next,o.next&&(o.next.prev=o.prev),o.next=n,o.prev=null,n.prev=o,n=o),o.val}for(c=new Array(a),l=0;l<a;l++)c[l]=arguments[l];return o={args:c,val:t.apply(null,c)},n?(n.prev=o,o.next=n):s=o,r===e.maxSize?(s=s.prev,s.next=null):r++,n=o,o.val}return i.clear=function(){n=null,s=null,r=0},i}var ed=Zf;var he=(t=>(t.Idle="IDLE",t.Resolving="RESOLVING",t.Error="ERROR",t.Success="SUCCESS",t))(he||{});var xE=["getIsResolving","hasStartedResolution","hasFinishedResolution","isResolving","getCachedResolvers"];function Jr(t,e){return(0,td.useSelect)((r,n)=>t(i=>TE(r(i)),n),e)}var TE=ed((t=>{let e={};for(let r in t)xE.includes(r)||Object.defineProperty(e,r,{get:()=>(...n)=>{let s=t[r](...n),i=t.getResolutionState(r,n)?.status,o;switch(i){case"resolving":o=he.Resolving;break;case"finished":o=he.Success;break;case"error":o=he.Error;break;case void 0:o=he.Idle;break}return{data:s,status:o,isResolving:o===he.Resolving,hasStarted:o!==he.Idle,hasResolved:o===he.Success||o===he.Error}}});return e}));var rd={};function ma(t,e,r,n={enabled:!0}){let{editEntityRecord:s,saveEditedEntityRecord:i}=(0,si.useDispatch)(ce),o=(0,sd.useMemo)(()=>({edit:(d,h={})=>s(t,e,r,d,h),save:(d={})=>i(t,e,r,{throwOnError:!0,...d})}),[s,t,e,r,i]),{editedRecord:a,hasEdits:c,edits:l}=(0,si.useSelect)(d=>n.enabled?{editedRecord:d(ce).getEditedEntityRecord(t,e,r),hasEdits:d(ce).hasEditsForEntityRecord(t,e,r),edits:d(ce).getEntityRecordNonTransientEdits(t,e,r)}:{editedRecord:rd,hasEdits:!1,edits:rd},[t,e,r,n.enabled]),{data:u,...f}=Jr(d=>n.enabled?d(ce).getEntityRecord(t,e,r):{data:null},[t,e,r,n.enabled]);return{record:u,editedRecord:a,hasEdits:c,edits:l,...f,...o}}function id(t,e,r,n){return(0,nd.default)("wp.data.__experimentalUseEntityRecord",{alternative:"wp.data.useEntityRecord",since:"6.1"}),ma(t,e,r,n)}var od=x(wt(),1),ad=x(pr(),1),ii=x(Ee(),1),ya=x(Mt(),1);var CE=[];function oi(t,e,r={},n={enabled:!0}){let s=(0,od.addQueryArgs)("",r),{data:i,...o}=Jr(l=>n.enabled?l(ce).getEntityRecords(t,e,r):{data:CE},[t,e,s,n.enabled]),{totalItems:a,totalPages:c}=(0,ii.useSelect)(l=>n.enabled?{totalItems:l(ce).getEntityRecordsTotalItems(t,e,r),totalPages:l(ce).getEntityRecordsTotalPages(t,e,r)}:{totalItems:null,totalPages:null},[t,e,s,n.enabled]);return{records:i,totalItems:a,totalPages:c,...o}}function cd(t,e,r,n){return(0,ad.default)("wp.data.__experimentalUseEntityRecords",{alternative:"wp.data.useEntityRecords",since:"6.1"}),oi(t,e,r,n)}function ld(t,e,r={},n={enabled:!0}){let s=(0,ii.useSelect)(u=>u(ce).getEntityConfig(t,e),[t,e]),{records:i,...o}=oi(t,e,{...r,...r._fields?{_fields:[...new Set([...we(r._fields)||[],"_links"])].join()}:{}},n),a=(0,ya.useMemo)(()=>i?.map(u=>u[s?.key??"id"])??[],[i,s?.key]),c=(0,ii.useSelect)(u=>{let{getEntityRecordsPermissions:f}=et(u(ce));return f(t,e,a)},[a,t,e]);return{records:(0,ya.useMemo)(()=>i?.map((u,f)=>({...u,permissions:c[f]}))??[],[i,c]),...o}}var dd=x(pr(),1),hd=x(fd(),1);function pd(t,e){let r=typeof t=="object",n=r?JSON.stringify(t):t;return r&&typeof e<"u"&&(0,hd.default)("When 'resource' is an entity object, passing 'id' as a separate argument isn't supported."),Jr(s=>{let i=r?!!t.id:!!e,{canUser:o}=s(ce),a=o("create",r?{kind:t.kind,name:t.name}:t);if(!i){let m=o("read",t),E=a.isResolving||m.isResolving,_=a.hasResolved&&m.hasResolved,b=he.Idle;return E?b=he.Resolving:_&&(b=he.Success),{status:b,isResolving:E,hasResolved:_,canCreate:a.hasResolved&&a.data,canRead:m.hasResolved&&m.data}}let c=o("read",t,e),l=o("update",t,e),u=o("delete",t,e),f=c.isResolving||a.isResolving||l.isResolving||u.isResolving,d=c.hasResolved&&a.hasResolved&&l.hasResolved&&u.hasResolved,h=he.Idle;return f?h=he.Resolving:d&&(h=he.Success),{status:h,isResolving:f,hasResolved:d,canRead:d&&c.data,canCreate:d&&a.data,canUpdate:d&&l.data,canDelete:d&&u.data}},[n,e])}var gd=pd;function md(t,e){return(0,dd.default)("wp.data.__experimentalUseResourcePermissions",{alternative:"wp.data.useResourcePermissions",since:"6.1"}),pd(t,e)}var qn=x(Mt(),1),Wn=x(Ee(),1),ai=x(yr(),1);var yd=x(Mt(),1);function Qr(t,e){return(0,yd.useContext)(Wr)?.[t]?.[e]}var Nt=x(Fo(),1);var Ed=x(ns(),1);var Ea,wa=new WeakMap;function wd(t){if(Ea||(Ea=et(Ed.privateApis)),!wa.has(t)){let e=Ea.getRichTextValues([t]);wa.set(t,e)}return wa.get(t)}var va=new WeakMap;function IE(t){if(!va.has(t)){let e=[];for(let r of wd(t))r&&r.replacements.forEach(({type:n,attributes:s})=>{n==="core/footnote"&&e.push(s["data-fn"])});va.set(t,e)}return va.get(t)}function vd(t){return t.flatMap(IE)}var _a={};function ba(t,e){let r={blocks:t};if(!e||e.footnotes===void 0)return r;let n=vd(t),s=e.footnotes?JSON.parse(e.footnotes):[];if(s.map(u=>u.id).join("")===n.join(""))return r;let o=n.map(u=>s.find(f=>f.id===u)||_a[u]||{id:u,content:""});function a(u){if(!u||Array.isArray(u)||typeof u!="object")return u;u={...u};for(let f in u){let d=u[f];if(Array.isArray(d)){u[f]=d.map(a);continue}if(typeof d!="string"&&!(d instanceof Nt.RichTextData))continue;let h=typeof d=="string"?Nt.RichTextData.fromHTMLString(d):new Nt.RichTextData(d),m=!1;h.replacements.forEach(E=>{if(E.type==="core/footnote"){let _=E.attributes["data-fn"],b=n.indexOf(_),T=(0,Nt.create)({html:E.innerHTML});T.text=String(b+1),T.formats=Array.from({length:T.text.length},()=>T.formats[0]),T.replacements=Array.from({length:T.text.length},()=>T.replacements[0]),E.innerHTML=(0,Nt.toHTMLString)({value:T}),m=!0}}),m&&(u[f]=typeof d=="string"?h.toHTMLString():h)}return u}function c(u){return u.map(f=>({...f,attributes:a(f.attributes),innerBlocks:c(f.innerBlocks)}))}let l=c(t);return _a={..._a,...s.reduce((u,f)=>(n.includes(f.id)||(u[f.id]=f),u),{})},{meta:{...e,footnotes:JSON.stringify(o)},blocks:l}}var AE=[],_d=new WeakMap;function bd(t,e,{id:r}={}){let n=Qr(t,e),s=r??n,{getEntityRecord:i,getEntityRecordEdits:o}=(0,Wn.useSelect)(P),{content:a,editedBlocks:c,meta:l}=(0,Wn.useSelect)(E=>{if(!s)return{};let{getEditedEntityRecord:_}=E(P),b=_(t,e,s);return{editedBlocks:b.blocks,content:b.content,meta:b.meta}},[t,e,s]),{__unstableCreateUndoLevel:u,editEntityRecord:f}=(0,Wn.useDispatch)(P),d=(0,qn.useMemo)(()=>{if(!s)return;if(c)return c;if(!a||typeof a!="string")return AE;let E=o(t,e,s),b=!E||!Object.keys(E).length?i(t,e,s):E,T=_d.get(b);return T||(T=(0,ai.parse)(a),_d.set(b,T)),T},[t,e,s,c,a,i,o]),h=(0,qn.useCallback)((E,_)=>{if(d===E)return u(t,e,s);let{selection:T,...A}=_,D={selection:T,content:({blocks:k=[]})=>(0,ai.__unstableSerializeAndClean)(k),...ba(E,l)};f(t,e,s,D,{isCached:!1,...A})},[t,e,s,d,l,u,f]),m=(0,qn.useCallback)((E,_)=>{let{selection:b,...T}=_,A=ba(E,l),D={selection:b,...A};f(t,e,s,D,{isCached:!0,...T})},[t,e,s,l,f]);return[d,m,h]}var Sd=x(Mt(),1),ci=x(Ee(),1);function Rd(t,e,r,n){let s=Qr(t,e),i=n??s,{value:o,fullValue:a}=(0,ci.useSelect)(u=>{let{getEntityRecord:f,getEditedEntityRecord:d}=u(P),h=f(t,e,i),m=d(t,e,i);return h&&m?{value:m[r],fullValue:h[r]}:{}},[t,e,i,r]),{editEntityRecord:c}=(0,ci.useDispatch)(P),l=(0,Sd.useCallback)(u=>{c(t,e,i,{[r]:u})},[c,t,e,i,r]);return[o,l,a]}var xd={};ff(xd,{useEntityRecordsWithPermissions:ld,RECEIVE_INTERMEDIATE_RESULTS:sn});var Sa=[...Ws,...Js.filter(t=>!!t.name)],DE=Sa.reduce((t,e)=>{let{kind:r,name:n,plural:s}=e,i=hr(r,n);if(t[i]=(o,a,c)=>(B(r,n,i,{isShorthandSelector:!0,alternativeFunctionName:"getEntityRecord"}),He(o,r,n,a,c)),s){let o=hr(r,s,"get");t[o]=(a,c)=>(B(r,n,o,{isShorthandSelector:!0,alternativeFunctionName:"getEntityRecords"}),Zs(a,r,n,c))}return t},{}),UE=Sa.reduce((t,e)=>{let{kind:r,name:n,plural:s}=e,i=hr(r,n);if(t[i]=(o,a)=>(B(r,n,i,{isShorthandSelector:!0,alternativeFunctionName:"getEntityRecord"}),ri(r,n,o,a)),s){let o=hr(r,s,"get");t[o]=(...a)=>(B(r,s,o,{isShorthandSelector:!0,alternativeFunctionName:"getEntityRecords"}),$n(r,n,...a)),t[o].shouldInvalidate=a=>$n.shouldInvalidate(a,r,n)}return t},{}),kE=Sa.reduce((t,e)=>{let{kind:r,name:n}=e,s=hr(r,n,"save");t[s]=(o,a)=>(B(r,n,s,{isShorthandSelector:!0,alternativeFunctionName:"saveEntityRecord"}),aa(r,n,o,a));let i=hr(r,n,"delete");return t[i]=(o,a,c)=>(B(r,n,i,{isShorthandSelector:!0,alternativeFunctionName:"deleteEntityRecord"}),oa(r,n,o,a,c)),t},{}),OE=()=>({reducer:of,actions:{...$f,...ca,...kE,...Hf()},selectors:{...Kf,...ta,...DE},resolvers:{...ha,...UE}}),ce=(0,li.createReduxStore)(P,OE());et(ce).registerPrivateSelectors(Jo);et(ce).registerPrivateActions(la);(0,li.register)(ce);return Gd(LE);})();
/*! Bundled license information:

diff/dist/diff.js:
  (*!
  
   diff v4.0.1
  
  Software License Agreement (BSD License)
  
  Copyright (c) 2009-2015, Kevin Decker <kpdecker@gmail.com>
  
  All rights reserved.
  
  Redistribution and use of this software in source and binary forms, with or without modification,
  are permitted provided that the following conditions are met:
  
  * Redistributions of source code must retain the above
    copyright notice, this list of conditions and the
    following disclaimer.
  
  * Redistributions in binary form must reproduce the above
    copyright notice, this list of conditions and the
    following disclaimer in the documentation and/or other
    materials provided with the distribution.
  
  * Neither the name of Kevin Decker nor the names of its
    contributors may be used to endorse or promote products
    derived from this software without specific prior
    written permission.
  
  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR
  IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
  FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
  DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER
  IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
  OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  @license
  *)
*/
//# sourceMappingURL=index.min.js.map
