import*as e from"@wordpress/interactivity";var t={d:(e,o)=>{for(var r in o)t.o(o,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},o={};t.d(o,{N:()=>u,S:()=>w});const r=(c={directivePrefix:()=>e.directivePrefix,getRegionRootFragment:()=>e.getRegionRootFragment,render:()=>e.render,store:()=>e.store,toVdom:()=>e.toVdom},d={},t.d(d,c),d),n=new Map,i=e=>{const t=new URL(e,window.location);return t.pathname+t.search},a=e=>{const t={},o=`data-${r.directivePrefix}-router-region`;e.querySelectorAll(`[${o}]`).forEach((e=>{const n=e.getAttribute(o);t[n]=(0,r.toVdom)(e)}));const n=e.querySelector("title")?.innerText;return{regions:t,title:n}},s=e=>{const t=`data-${r.directivePrefix}-router-region`;document.querySelectorAll(`[${t}]`).forEach((o=>{const n=o.getAttribute(t),i=(0,r.getRegionRootFragment)(o);(0,r.render)(e.regions[n],i)})),e.title&&(document.title=e.title)};var c,d;let l="";window.addEventListener("popstate",(async()=>{const e=i(window.location),t=n.has(e)&&await n.get(e);t?s(t):window.location.reload()})),n.set(i(window.location),Promise.resolve(a(document)));const{state:w,actions:u}=(0,r.store)("core/router",{actions:{*navigate(e,t={}){const o=i(e);l=e,u.prefetch(o,t);const r=new Promise((e=>{var o;return setTimeout(e,null!==(o=t.timeout)&&void 0!==o?o:1e4)})),a=yield Promise.race([n.get(o),r]);l===e&&(a?(s(a),window.history[t.replace?"replaceState":"pushState"]({},"",e)):(window.location.assign(e),yield new Promise((()=>{}))))},prefetch(e,t={}){e=i(e),!t.force&&n.has(e)||n.set(e,(async(e,{html:t})=>{try{if(!t){const o=await window.fetch(e);if(200!==o.status)return!1;t=await o.text()}const o=(new window.DOMParser).parseFromString(t,"text/html");return a(o)}catch(e){return!1}})(e,t))}}});var m=o.N,g=o.S;export{m as actions,g as state};
//# sourceMappingURL=router.min.js.map