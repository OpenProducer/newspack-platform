{"version":3,"file":"./build/interactivity/router.min.js","mappings":"+CAAIA,EACAC,EACAC,EACAC,E,0CCGG,MAAMC,EAAaC,UAEzB,MAAMC,EAAaC,GAASA,EAAIC,IAAMD,EAAIE,UAGpCC,EAAa,IAAIC,IACvB,IAAM,MAAMC,KAASC,EACpBH,EAAWI,IAAKR,EAAUM,GAASA,GAGpC,MAAMG,EAAW,GAGjB,IAAM,MAAMH,KAASI,SAASC,KAAKC,SAAW,CAC7C,MAAMV,EAAKF,EAAUM,GAEG,SAAnBA,EAAMO,UAA0C,UAAnBP,EAAMO,SACvCJ,EAASK,KAAMR,GACJF,EAAWW,IAAKb,GAC3BE,EAAWY,OAAQd,GACW,WAAnBI,EAAMO,UAA4C,SAAnBP,EAAMO,UAChDJ,EAASK,KAAMR,EAEjB,CAGA,MAAMW,EAAW,IAAKb,EAAWc,UAGjCT,EAASU,SAAWC,GAAOA,EAAEC,WAC7BX,SAASC,KAAKW,UAAWL,EAAU,EAYvBM,EAAkBxB,MAAQyB,EAAKC,KAC3C,MAAMC,EAAW,GACXC,EAAS,CACd,CACCC,QAAS,QACTC,SAAU,uBACVC,UAAW,QAEZ,CAAEF,QAAS,SAAUC,SAAU,cAAeC,UAAW,QAE1D,IAAM,MAAMC,KAASJ,EAAS,CAC7B,MAAM,QAAEC,EAAO,SAAEC,EAAQ,UAAEC,GAAcC,EACnCC,EAAOR,EAAIS,iBAAkBJ,SAG7BK,QAAQC,IACbC,MAAMC,KAAML,GAAOM,KAAKvC,UACvB,MAAMwC,EAAiBtC,EAAIuC,aAAcV,GACzC,IAAOL,EAAaV,IAAKwB,GACxB,IACC,MAAME,QAAiBC,MAAOH,GACxBI,QAAaF,EAASE,OAC5BlB,EAAajB,IAAK+B,EAAgB,CACjCtC,MACA0C,QAEF,CAAE,MAAQC,GAETC,QAAQC,MAAOF,EAChB,CAGD,MAAMG,EAActB,EAAauB,IAAKT,GAChCU,EAAUzB,EAAI0B,cAAetB,GACnCqB,EAAQE,UAAYJ,EAAYJ,KAChC,IAAM,MAAMS,KAAQL,EAAY9C,IAAIoD,WACnCJ,EAAQK,aAAcF,EAAKG,KAAMH,EAAKI,OAEvC9B,EAASZ,KAAMmC,EAAS,IAG3B,CAEA,MAAO,CACNzB,EAAIiC,cAAe,YAChBjC,EAAIS,iBAAkB,YACtBP,EACH,C,yFCrFF,MAAM,gBACLgC,EAAe,sBACfC,EAAqB,YACrBC,EAAW,OACXC,EAAM,OACNC,EAAM,iBACNC,EAAgB,oBAChBC,EAAmB,MACnBC,IACGC,EAAAA,EAAAA,aACH,0HAIKC,EACoC,QADtBC,GACnBC,EAAAA,EAAAA,WAAW,eAAgBF,sBAAc,IAAAC,EAAAA,EAAI,cAGxCE,EAAQ,IAAIjE,IACZoB,EAAe,IAAIpB,IAInBkE,EAAgBC,IACrB,MAAMC,EAAI,IAAIC,IAAKF,EAAKG,OAAOC,UAC/B,OAAOH,EAAEI,SAAWJ,EAAEK,MAAM,EAIvBC,EAAYhF,MAAQyE,GAAOQ,WAChC,IACC,IAAOA,EAAO,CACb,MAAMC,QAAYN,OAAOjC,MAAO8B,GAChC,GAAoB,MAAfS,EAAIC,OACR,OAAO,EAERF,QAAaC,EAAItC,MAClB,CACA,MAAMwC,GAAM,IAAIR,OAAOS,WAAYC,gBAAiBL,EAAM,aAC1D,OAAOM,EAAeH,EACvB,CAAE,MAAQvC,GACT,OAAO,CACR,GAKK0C,EAAgBvF,MAAQoF,GAAOI,QAAS,CAAC,KAC9C,MAAMC,EAAU,CAAC,EACjB,IAAI7E,EASJ,GAPyB,aAAnBwD,IACJxD,QAAaY,EAAAA,EAAAA,GAAiB4D,EAAK1D,GACnC+D,EAAQC,KAAOF,EACZA,EAAKvC,IAAKtC,SAAS+E,MACnB5B,EAAQsB,EAAIM,OAGO,gBAAnBtB,EAAmC,CACvC,MAAMuB,EAAY,QAAQhC,kBAC1ByB,EAAIlD,iBAAmB,IAAIyD,MAAevE,SAAWwE,IACpD,MAAMzF,EAAKyF,EAAOnD,aAAckD,GAChCF,EAAStF,GAAOqF,GAAMxE,IAAK4E,GACxBJ,EAAKvC,IAAK2C,GACV9B,EAAQ8B,EAAQ,GAErB,CACA,MAAMC,EAAQT,EAAI1B,cAAe,UAAWN,UACtC0C,EAAc9B,EAAkBoB,GACtC,MAAO,CAAEK,UAAS7E,OAAMiF,QAAOC,cAAa,EAIvCC,EAAkBC,IACvB9B,GAAO,KAEL,GAAwB,aAAnBE,EAAgC,EAEpCrE,EAAAA,EAAAA,GAAYiG,EAAKpF,MACjB,MAAMqF,EAAWrC,EAAuBjD,SAAS+E,MACjD3B,EAAQiC,EAAKP,QAAQC,KAAMO,EAC5B,CAED,GAAwB,gBAAnB7B,EAAmC,CACvCH,EAAqB+B,EAAKF,aAC1B,MAAMH,EAAY,QAAQhC,kBAC1BhD,SACEuB,iBAAmB,IAAIyD,MACvBvE,SAAWwE,IACX,MAAMzF,EAAKyF,EAAOnD,aAAckD,GAC1BM,EAAWrC,EAAuBgC,GACxC7B,EAAQiC,EAAKP,QAAStF,GAAM8F,EAAU,GAEzC,CACKD,EAAKH,QACTlF,SAASkF,MAAQG,EAAKH,MACvB,GACE,EAaEK,EAAoBC,IACzBvB,OAAOC,SAASuB,OAAQD,GACjB,IAAIhE,SAAS,UAKrByC,OAAOyB,iBAAkB,YAAYrG,UACpC,MAAMsG,EAAW9B,EAAaI,OAAOC,UAC/BmB,EAAOzB,EAAMvD,IAAKsF,UAAsB/B,EAAMtB,IAAKqD,GACpDN,GACJD,EAAeC,GAEfO,EAAM9B,IAAMG,OAAOC,SAASsB,MAE5BvB,OAAOC,SAAS2B,QACjB,IAMwB,aAAnBpC,IAEJ,GAAG7B,IAAIkE,KAAM9F,SAASuB,iBAAkB,gBAAmBwE,IAC1DhF,EAAajB,IAAKiG,EAAOjE,aAAc,OAAS,CAC/CvC,IAAKwG,EACL9D,KAAM8D,EAAOC,aACX,UAEEnF,EAAAA,EAAAA,GAAiBb,SAAUe,IAGnC6C,EAAM9D,IACL+D,EAAaI,OAAOC,UACpB1C,QAAQyE,QAASrB,EAAe5E,SAAU,CAAE6E,KAAM3B,MAInD,MAAMgD,EAAgBC,GACrBA,GACAA,aAAelC,OAAOmC,mBACtBD,EAAIX,QACAW,EAAIE,QAAyB,UAAfF,EAAIE,SACtBF,EAAIG,SAAWrC,OAAOC,SAASoC,SAC7BH,EAAIhC,SAASoC,WAAY,eACzBJ,EAAIhC,SAASoC,WAAY,mBACzBJ,EAAIrE,aAAc,QAASyE,WAAY,OACvC,IAAIvC,IAAKmC,EAAIX,MAAOgB,aAAanG,IAAK,YAGnCoG,EAAiBC,GACtBA,GACiB,IAAjBA,EAAMC,SACJD,EAAME,UACNF,EAAMG,UACNH,EAAMI,SACNJ,EAAMK,WACNL,EAAMM,iBAGT,IAAIC,EAAe,GAEZ,MAAM,MAAErB,EAAK,QAAEsB,IAAYC,EAAAA,EAAAA,OAAO,cAAe,CACvDvB,MAAO,CACN9B,IAAKG,OAAOC,SAASsB,KACrB4B,WAAY,CACXC,YAAY,EACZC,aAAa,EACbC,MAAO,CAAC,IAGVL,QAAS,CAmBR,SAACM,CAAUhC,EAAMiC,EAAU,CAAC,GAC3B,MAAM,yBAAEC,IAA6B/D,EAAAA,EAAAA,aAChC+D,UACEnC,EAAiBC,IAGxB,MAAMG,EAAW9B,EAAa2B,IACxB,WAAE4B,GAAexB,GACjB,iBACL+B,GAAmB,EAAI,yBACvBC,GAA2B,EAAI,QAC/BC,EAAU,KACPJ,EAEJR,EAAezB,EACf0B,EAAQY,SAAUnC,EAAU8B,GAI5B,MAAMM,EAAiB,IAAIvG,SAAWyE,GACrC+B,WAAY/B,EAAS4B,KAIhBI,EAAiBD,YAAY,KAC7Bf,IAAiBzB,IAIjBmC,IACJP,EAAWC,YAAa,EACxBD,EAAWE,aAAc,GAErBM,IACJR,EAAWc,QAAUd,EAAWG,MAAMY,SACvC,GACE,KAEG9C,QAAa7D,QAAQ4G,KAAM,CAChCxE,EAAMtB,IAAKqD,GACXoC,IASD,GALAM,aAAcJ,GAKThB,IAAiBzB,EAItB,GACCH,IACEA,EAAKF,aAAamD,SAAU,gBAC3BZ,yBACF,OACKtC,EAAeC,GACrBpB,OAAOsE,QACNd,EAAQe,QAAU,eAAiB,aACjC,CAAC,EAAG,GAAIhD,GAGXI,EAAM9B,IAAM0B,EAIPmC,IACJP,EAAWC,YAAa,EACxBD,EAAWE,aAAc,GAGrBM,IAIJR,EAAWc,QACVd,EAAWG,MAAMkB,QACfrB,EAAWc,UAAYd,EAAWG,MAAMkB,OACvC,IACA,KAIL,MAAM,KAAEC,GAAS,IAAI1E,IAAKwB,EAAMvB,OAAOC,UAClCwE,GACJ1I,SAAS+C,cAAe2F,IAAQC,gBAElC,YACOpD,EAAiBC,EAEzB,EAaAsC,QAAAA,CAAUhE,EAAK2D,EAAU,CAAC,GACzB,MAAM,yBAAEC,IAA6B/D,EAAAA,EAAAA,aACrC,GAAK+D,EACJ,OAGD,MAAM/B,EAAW9B,EAAaC,IACzB2D,EAAQmB,OAAWhF,EAAMvD,IAAKsF,IAClC/B,EAAM9D,IAAK6F,EAAUtB,EAAWsB,EAAU8B,GAE5C,KAMuB,aAAnBhE,IAEJzD,SAAS0F,iBACR,SACA,SAAWgB,GACV,MAAMP,EAAMO,EAAML,OAAOwC,QAAS,KAC7B3C,EAAaC,IAASM,EAAcC,KACxCA,EAAMoC,iBACN5B,EAAQM,SAAUrB,EAAIX,MAExB,IACA,GAGDxF,SAAS0F,iBACR,cACA,SAAWgB,GACV,GAAgC,MAA3BA,EAAML,QAAQlG,SAAmB,CACrC,MAAMgG,EAAMO,EAAML,OAAOwC,QAAS,KAC7B3C,EAAaC,IAASM,EAAcC,IACxCQ,EAAQY,SAAU3B,EAAIX,KAExB,CACD,IACA,I,uCCpWKuD,MAAWC,EAEnBC,EAAOC,SAFCH,EAEW,CAAE,UAAe,IAAMI,EAA8DxF,UAAW,YAAiB,IAAMwF,EAA8D3F,YAAa,MAAW,IAAM2F,EAA8DhC,OAFjR6B,EAAI,CAAC,EAAGI,EAAoBC,EAAEL,EAAGD,GAAWC,E,GCC3DM,EAA2B,CAAC,EAGhC,SAASF,EAAoBG,GAE5B,IAAIC,EAAeF,EAAyBC,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaN,QAGrB,IAAID,EAASK,EAAyBC,GAAY,CAGjDL,QAAS,CAAC,GAOX,OAHAQ,EAAoBH,GAAUN,EAAQA,EAAOC,QAASE,GAG/CH,EAAOC,OACf,CJtBIlK,EAAkC,mBAAX2K,OAAwBA,OAAO,kBAAoB,qBAC1E1K,EAAmC,mBAAX0K,OAAwBA,OAAO,mBAAqB,sBAC5EzK,EAAiC,mBAAXyK,OAAwBA,OAAO,iBAAmB,oBACxExK,EAAgByK,IAChBA,GAASA,EAAMP,EAAI,IACrBO,EAAMP,EAAI,EACVO,EAAMnJ,SAASoJ,GAAQA,EAAGC,MAC1BF,EAAMnJ,SAASoJ,GAAQA,EAAGC,IAAMD,EAAGC,IAAMD,MAC1C,EAyBDT,EAAoBW,EAAI,CAACd,EAAQlE,EAAMiF,KACtC,IAAIJ,EACJI,KAAcJ,EAAQ,IAAIP,GAAK,GAC/B,IAEIY,EACAC,EACAC,EAJAC,EAAY,IAAIC,IAChBnB,EAAUD,EAAOC,QAIjBoB,EAAU,IAAI9I,SAAQ,CAACyE,EAASsE,KACnCJ,EAASI,EACTL,EAAejE,CAAO,IAEvBqE,EAAQrL,GAAkBiK,EAC1BoB,EAAQtL,GAAkB6K,IAAQD,GAASC,EAAGD,GAAQQ,EAAU3J,QAAQoJ,GAAKS,EAAe,OAAEtB,SAC9FC,EAAOC,QAAUoB,EACjBvF,GAAMyF,IAEL,IAAIX,EADJI,EAvCa,CAACO,GAAUA,EAAK5I,KAAK6I,IACnC,GAAW,OAARA,GAA+B,iBAARA,EAAkB,CAC3C,GAAGA,EAAIzL,GAAgB,OAAOyL,EAC9B,GAAGA,EAAIC,KAAM,CACZ,IAAId,EAAQ,GACZA,EAAMP,EAAI,EACVoB,EAAIC,MAAMZ,IACTa,EAAI1L,GAAkB6K,EACtB3K,EAAayK,EAAM,IAChB1H,IACHyI,EAAIzL,GAAgBgD,EACpB/C,EAAayK,EAAM,IAEpB,IAAIe,EAAM,CAAC,EAEX,OADAA,EAAI3L,GAAkB6K,GAAQA,EAAGD,GAC1Be,CACR,CACD,CACA,IAAIC,EAAM,CAAC,EAGX,OAFAA,EAAI5L,GAAiBgK,MACrB4B,EAAI3L,GAAkBwL,EACfG,CAAG,IAkBKC,CAASL,GAEvB,IAAIM,EAAY,IAAOb,EAAYrI,KAAKyH,IACvC,GAAGA,EAAEnK,GAAe,MAAMmK,EAAEnK,GAC5B,OAAOmK,EAAEpK,EAAe,IAErBqL,EAAU,IAAI9I,SAASyE,KAC1B4D,EAAK,IAAO5D,EAAQ6E,IACjBhB,EAAI,EACP,IAAIiB,EAAWC,GAAOA,IAAMpB,IAAUQ,EAAU/J,IAAI2K,KAAOZ,EAAUa,IAAID,GAAIA,IAAMA,EAAE3B,IAAMQ,EAAGC,IAAKkB,EAAE5K,KAAKyJ,KAC1GI,EAAYrI,KAAK6I,GAASA,EAAIzL,GAAe+L,IAAU,IAExD,OAAOlB,EAAGC,EAAIQ,EAAUQ,GAAW,IAChCI,IAAUA,EAAMf,EAAOG,EAAQpL,GAAgBgM,GAAOhB,EAAahB,GAAW/J,EAAayK,MAC/FA,GAASA,EAAMP,EAAI,IAAMO,EAAMP,EAAI,EAAE,EK9DtCD,EAAoBC,EAAI,CAACH,EAASiC,KACjC,IAAI,IAAIC,KAAOD,EACX/B,EAAoBiC,EAAEF,EAAYC,KAAShC,EAAoBiC,EAAEnC,EAASkC,IAC5EE,OAAOC,eAAerC,EAASkC,EAAK,CAAEI,YAAY,EAAMlJ,IAAK6I,EAAWC,IAE1E,ECNDhC,EAAoBiC,EAAI,CAACV,EAAKc,IAAUH,OAAOI,UAAUC,eAAe7F,KAAK6E,EAAKc,GCGlF,IAAIG,EAAsBxC,EAAoB,K","sources":["webpack://wp/webpack/runtime/async module","webpack://wp/@wordpress/interactivity-router/src/head.js","webpack://wp/@wordpress/interactivity-router/src/index.js","webpack://wp/external module \"@wordpress/interactivity\"","webpack://wp/webpack/bootstrap","webpack://wp/webpack/runtime/define property getters","webpack://wp/webpack/runtime/hasOwnProperty shorthand","webpack://wp/webpack/startup"],"sourcesContent":["var webpackQueues = typeof Symbol === \"function\" ? Symbol(\"webpack queues\") : \"__webpack_queues__\";\nvar webpackExports = typeof Symbol === \"function\" ? Symbol(\"webpack exports\") : \"__webpack_exports__\";\nvar webpackError = typeof Symbol === \"function\" ? Symbol(\"webpack error\") : \"__webpack_error__\";\nvar resolveQueue = (queue) => {\n\tif(queue && queue.d < 1) {\n\t\tqueue.d = 1;\n\t\tqueue.forEach((fn) => (fn.r--));\n\t\tqueue.forEach((fn) => (fn.r-- ? fn.r++ : fn()));\n\t}\n}\nvar wrapDeps = (deps) => (deps.map((dep) => {\n\tif(dep !== null && typeof dep === \"object\") {\n\t\tif(dep[webpackQueues]) return dep;\n\t\tif(dep.then) {\n\t\t\tvar queue = [];\n\t\t\tqueue.d = 0;\n\t\t\tdep.then((r) => {\n\t\t\t\tobj[webpackExports] = r;\n\t\t\t\tresolveQueue(queue);\n\t\t\t}, (e) => {\n\t\t\t\tobj[webpackError] = e;\n\t\t\t\tresolveQueue(queue);\n\t\t\t});\n\t\t\tvar obj = {};\n\t\t\tobj[webpackQueues] = (fn) => (fn(queue));\n\t\t\treturn obj;\n\t\t}\n\t}\n\tvar ret = {};\n\tret[webpackQueues] = x => {};\n\tret[webpackExports] = dep;\n\treturn ret;\n}));\n__webpack_require__.a = (module, body, hasAwait) => {\n\tvar queue;\n\thasAwait && ((queue = []).d = -1);\n\tvar depQueues = new Set();\n\tvar exports = module.exports;\n\tvar currentDeps;\n\tvar outerResolve;\n\tvar reject;\n\tvar promise = new Promise((resolve, rej) => {\n\t\treject = rej;\n\t\touterResolve = resolve;\n\t});\n\tpromise[webpackExports] = exports;\n\tpromise[webpackQueues] = (fn) => (queue && fn(queue), depQueues.forEach(fn), promise[\"catch\"](x => {}));\n\tmodule.exports = promise;\n\tbody((deps) => {\n\t\tcurrentDeps = wrapDeps(deps);\n\t\tvar fn;\n\t\tvar getResult = () => (currentDeps.map((d) => {\n\t\t\tif(d[webpackError]) throw d[webpackError];\n\t\t\treturn d[webpackExports];\n\t\t}))\n\t\tvar promise = new Promise((resolve) => {\n\t\t\tfn = () => (resolve(getResult));\n\t\t\tfn.r = 0;\n\t\t\tvar fnQueue = (q) => (q !== queue && !depQueues.has(q) && (depQueues.add(q), q && !q.d && (fn.r++, q.push(fn))));\n\t\t\tcurrentDeps.map((dep) => (dep[webpackQueues](fnQueue)));\n\t\t});\n\t\treturn fn.r ? promise : getResult();\n\t}, (err) => ((err ? reject(promise[webpackError] = err) : outerResolve(exports)), resolveQueue(queue)));\n\tqueue && queue.d < 0 && (queue.d = 0);\n};","/**\n * Helper to update only the necessary tags in the head.\n *\n * @async\n * @param {Array} newHead The head elements of the new page.\n */\nexport const updateHead = async ( newHead ) => {\n\t// Helper to get the tag id store in the cache.\n\tconst getTagId = ( tag ) => tag.id || tag.outerHTML;\n\n\t// Map incoming head tags by their content.\n\tconst newHeadMap = new Map();\n\tfor ( const child of newHead ) {\n\t\tnewHeadMap.set( getTagId( child ), child );\n\t}\n\n\tconst toRemove = [];\n\n\t// Detect nodes that should be added or removed.\n\tfor ( const child of document.head.children ) {\n\t\tconst id = getTagId( child );\n\t\t// Always remove styles and links as they might change.\n\t\tif ( child.nodeName === 'LINK' || child.nodeName === 'STYLE' ) {\n\t\t\ttoRemove.push( child );\n\t\t} else if ( newHeadMap.has( id ) ) {\n\t\t\tnewHeadMap.delete( id );\n\t\t} else if ( child.nodeName !== 'SCRIPT' && child.nodeName !== 'META' ) {\n\t\t\ttoRemove.push( child );\n\t\t}\n\t}\n\n\t// Prepare new assets.\n\tconst toAppend = [ ...newHeadMap.values() ];\n\n\t// Apply the changes.\n\ttoRemove.forEach( ( n ) => n.remove() );\n\tdocument.head.append( ...toAppend );\n};\n\n/**\n * Fetches and processes head assets (stylesheets and scripts) from a specified document.\n *\n * @async\n * @param {Document} doc          The document from which to fetch head assets. It should support standard DOM querying methods.\n * @param {Map}      headElements A map of head elements to modify tracking the URLs of already processed assets to avoid duplicates.\n *\n * @return {Promise<HTMLElement[]>} Returns an array of HTML elements representing the head assets.\n */\nexport const fetchHeadAssets = async ( doc, headElements ) => {\n\tconst headTags = [];\n\tconst assets = [\n\t\t{\n\t\t\ttagName: 'style',\n\t\t\tselector: 'link[rel=stylesheet]',\n\t\t\tattribute: 'href',\n\t\t},\n\t\t{ tagName: 'script', selector: 'script[src]', attribute: 'src' },\n\t];\n\tfor ( const asset of assets ) {\n\t\tconst { tagName, selector, attribute } = asset;\n\t\tconst tags = doc.querySelectorAll( selector );\n\n\t\t// Use Promise.all to wait for fetch to complete\n\t\tawait Promise.all(\n\t\t\tArray.from( tags ).map( async ( tag ) => {\n\t\t\t\tconst attributeValue = tag.getAttribute( attribute );\n\t\t\t\tif ( ! headElements.has( attributeValue ) ) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst response = await fetch( attributeValue );\n\t\t\t\t\t\tconst text = await response.text();\n\t\t\t\t\t\theadElements.set( attributeValue, {\n\t\t\t\t\t\t\ttag,\n\t\t\t\t\t\t\ttext,\n\t\t\t\t\t\t} );\n\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.error( e );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst headElement = headElements.get( attributeValue );\n\t\t\t\tconst element = doc.createElement( tagName );\n\t\t\t\telement.innerText = headElement.text;\n\t\t\t\tfor ( const attr of headElement.tag.attributes ) {\n\t\t\t\t\telement.setAttribute( attr.name, attr.value );\n\t\t\t\t}\n\t\t\t\theadTags.push( element );\n\t\t\t} )\n\t\t);\n\t}\n\n\treturn [\n\t\tdoc.querySelector( 'title' ),\n\t\t...doc.querySelectorAll( 'style' ),\n\t\t...headTags,\n\t];\n};\n","/**\n * WordPress dependencies\n */\nimport { store, privateApis, getConfig } from '@wordpress/interactivity';\n\n/**\n * Internal dependencies\n */\nimport { fetchHeadAssets, updateHead } from './head';\n\nconst {\n\tdirectivePrefix,\n\tgetRegionRootFragment,\n\tinitialVdom,\n\ttoVdom,\n\trender,\n\tparseInitialData,\n\tpopulateInitialData,\n\tbatch,\n} = privateApis(\n\t'I acknowledge that using private APIs means my theme or plugin will inevitably break in the next version of WordPress.'\n);\n\n// Check if the navigation mode is full page or region based.\nconst navigationMode =\n\tgetConfig( 'core/router' ).navigationMode ?? 'regionBased';\n\n// The cache of visited and prefetched pages, stylesheets and scripts.\nconst pages = new Map();\nconst headElements = new Map();\n\n// Helper to remove domain and hash from the URL. We are only interesting in\n// caching the path and the query.\nconst getPagePath = ( url ) => {\n\tconst u = new URL( url, window.location );\n\treturn u.pathname + u.search;\n};\n\n// Fetch a new page and convert it to a static virtual DOM.\nconst fetchPage = async ( url, { html } ) => {\n\ttry {\n\t\tif ( ! html ) {\n\t\t\tconst res = await window.fetch( url );\n\t\t\tif ( res.status !== 200 ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\thtml = await res.text();\n\t\t}\n\t\tconst dom = new window.DOMParser().parseFromString( html, 'text/html' );\n\t\treturn regionsToVdom( dom );\n\t} catch ( e ) {\n\t\treturn false;\n\t}\n};\n\n// Return an object with VDOM trees of those HTML regions marked with a\n// `router-region` directive.\nconst regionsToVdom = async ( dom, { vdom } = {} ) => {\n\tconst regions = {};\n\tlet head;\n\tif ( process.env.IS_GUTENBERG_PLUGIN ) {\n\t\tif ( navigationMode === 'fullPage' ) {\n\t\t\thead = await fetchHeadAssets( dom, headElements );\n\t\t\tregions.body = vdom\n\t\t\t\t? vdom.get( document.body )\n\t\t\t\t: toVdom( dom.body );\n\t\t}\n\t}\n\tif ( navigationMode === 'regionBased' ) {\n\t\tconst attrName = `data-${ directivePrefix }-router-region`;\n\t\tdom.querySelectorAll( `[${ attrName }]` ).forEach( ( region ) => {\n\t\t\tconst id = region.getAttribute( attrName );\n\t\t\tregions[ id ] = vdom?.has( region )\n\t\t\t\t? vdom.get( region )\n\t\t\t\t: toVdom( region );\n\t\t} );\n\t}\n\tconst title = dom.querySelector( 'title' )?.innerText;\n\tconst initialData = parseInitialData( dom );\n\treturn { regions, head, title, initialData };\n};\n\n// Render all interactive regions contained in the given page.\nconst renderRegions = ( page ) => {\n\tbatch( () => {\n\t\tif ( process.env.IS_GUTENBERG_PLUGIN ) {\n\t\t\tif ( navigationMode === 'fullPage' ) {\n\t\t\t\t// Once this code is tested and more mature, the head should be updated for region based navigation as well.\n\t\t\t\tupdateHead( page.head );\n\t\t\t\tconst fragment = getRegionRootFragment( document.body );\n\t\t\t\trender( page.regions.body, fragment );\n\t\t\t}\n\t\t}\n\t\tif ( navigationMode === 'regionBased' ) {\n\t\t\tpopulateInitialData( page.initialData );\n\t\t\tconst attrName = `data-${ directivePrefix }-router-region`;\n\t\t\tdocument\n\t\t\t\t.querySelectorAll( `[${ attrName }]` )\n\t\t\t\t.forEach( ( region ) => {\n\t\t\t\t\tconst id = region.getAttribute( attrName );\n\t\t\t\t\tconst fragment = getRegionRootFragment( region );\n\t\t\t\t\trender( page.regions[ id ], fragment );\n\t\t\t\t} );\n\t\t}\n\t\tif ( page.title ) {\n\t\t\tdocument.title = page.title;\n\t\t}\n\t} );\n};\n\n/**\n * Load the given page forcing a full page reload.\n *\n * The function returns a promise that won't resolve, useful to prevent any\n * potential feedback indicating that the navigation has finished while the new\n * page is being loaded.\n *\n * @param {string} href The page href.\n * @return {Promise} Promise that never resolves.\n */\nconst forcePageReload = ( href ) => {\n\twindow.location.assign( href );\n\treturn new Promise( () => {} );\n};\n\n// Listen to the back and forward buttons and restore the page if it's in the\n// cache.\nwindow.addEventListener( 'popstate', async () => {\n\tconst pagePath = getPagePath( window.location ); // Remove hash.\n\tconst page = pages.has( pagePath ) && ( await pages.get( pagePath ) );\n\tif ( page ) {\n\t\trenderRegions( page );\n\t\t// Update the URL in the state.\n\t\tstate.url = window.location.href;\n\t} else {\n\t\twindow.location.reload();\n\t}\n} );\n\n// Initialize the router and cache the initial page using the initial vDOM.\n// Once this code is tested and more mature, the head should be updated for region based navigation as well.\nif ( process.env.IS_GUTENBERG_PLUGIN ) {\n\tif ( navigationMode === 'fullPage' ) {\n\t\t// Cache the scripts. Has to be called before fetching the assets.\n\t\t[].map.call( document.querySelectorAll( 'script[src]' ), ( script ) => {\n\t\t\theadElements.set( script.getAttribute( 'src' ), {\n\t\t\t\ttag: script,\n\t\t\t\ttext: script.textContent,\n\t\t\t} );\n\t\t} );\n\t\tawait fetchHeadAssets( document, headElements );\n\t}\n}\npages.set(\n\tgetPagePath( window.location ),\n\tPromise.resolve( regionsToVdom( document, { vdom: initialVdom } ) )\n);\n\n// Check if the link is valid for client-side navigation.\nconst isValidLink = ( ref ) =>\n\tref &&\n\tref instanceof window.HTMLAnchorElement &&\n\tref.href &&\n\t( ! ref.target || ref.target === '_self' ) &&\n\tref.origin === window.location.origin &&\n\t! ref.pathname.startsWith( '/wp-admin' ) &&\n\t! ref.pathname.startsWith( '/wp-login.php' ) &&\n\t! ref.getAttribute( 'href' ).startsWith( '#' ) &&\n\t! new URL( ref.href ).searchParams.has( '_wpnonce' );\n\n// Check if the event is valid for client-side navigation.\nconst isValidEvent = ( event ) =>\n\tevent &&\n\tevent.button === 0 && // Left clicks only.\n\t! event.metaKey && // Open in new tab (Mac).\n\t! event.ctrlKey && // Open in new tab (Windows).\n\t! event.altKey && // Download.\n\t! event.shiftKey &&\n\t! event.defaultPrevented;\n\n// Variable to store the current navigation.\nlet navigatingTo = '';\n\nexport const { state, actions } = store( 'core/router', {\n\tstate: {\n\t\turl: window.location.href,\n\t\tnavigation: {\n\t\t\thasStarted: false,\n\t\t\thasFinished: false,\n\t\t\ttexts: {},\n\t\t},\n\t},\n\tactions: {\n\t\t/**\n\t\t * Navigates to the specified page.\n\t\t *\n\t\t * This function normalizes the passed href, fetchs the page HTML if\n\t\t * needed, and updates any interactive regions whose contents have\n\t\t * changed. It also creates a new entry in the browser session history.\n\t\t *\n\t\t * @param {string}  href                               The page href.\n\t\t * @param {Object}  [options]                          Options object.\n\t\t * @param {boolean} [options.force]                    If true, it forces re-fetching the URL.\n\t\t * @param {string}  [options.html]                     HTML string to be used instead of fetching the requested URL.\n\t\t * @param {boolean} [options.replace]                  If true, it replaces the current entry in the browser session history.\n\t\t * @param {number}  [options.timeout]                  Time until the navigation is aborted, in milliseconds. Default is 10000.\n\t\t * @param {boolean} [options.loadingAnimation]         Whether an animation should be shown while navigating. Default to `true`.\n\t\t * @param {boolean} [options.screenReaderAnnouncement] Whether a message for screen readers should be announced while navigating. Default to `true`.\n\t\t *\n\t\t * @return {Promise} Promise that resolves once the navigation is completed or aborted.\n\t\t */\n\t\t*navigate( href, options = {} ) {\n\t\t\tconst { clientNavigationDisabled } = getConfig();\n\t\t\tif ( clientNavigationDisabled ) {\n\t\t\t\tyield forcePageReload( href );\n\t\t\t}\n\n\t\t\tconst pagePath = getPagePath( href );\n\t\t\tconst { navigation } = state;\n\t\t\tconst {\n\t\t\t\tloadingAnimation = true,\n\t\t\t\tscreenReaderAnnouncement = true,\n\t\t\t\ttimeout = 10000,\n\t\t\t} = options;\n\n\t\t\tnavigatingTo = href;\n\t\t\tactions.prefetch( pagePath, options );\n\n\t\t\t// Create a promise that resolves when the specified timeout ends.\n\t\t\t// The timeout value is 10 seconds by default.\n\t\t\tconst timeoutPromise = new Promise( ( resolve ) =>\n\t\t\t\tsetTimeout( resolve, timeout )\n\t\t\t);\n\n\t\t\t// Don't update the navigation status immediately, wait 400 ms.\n\t\t\tconst loadingTimeout = setTimeout( () => {\n\t\t\t\tif ( navigatingTo !== href ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( loadingAnimation ) {\n\t\t\t\t\tnavigation.hasStarted = true;\n\t\t\t\t\tnavigation.hasFinished = false;\n\t\t\t\t}\n\t\t\t\tif ( screenReaderAnnouncement ) {\n\t\t\t\t\tnavigation.message = navigation.texts.loading;\n\t\t\t\t}\n\t\t\t}, 400 );\n\n\t\t\tconst page = yield Promise.race( [\n\t\t\t\tpages.get( pagePath ),\n\t\t\t\ttimeoutPromise,\n\t\t\t] );\n\n\t\t\t// Dismiss loading message if it hasn't been added yet.\n\t\t\tclearTimeout( loadingTimeout );\n\n\t\t\t// Once the page is fetched, the destination URL could have changed\n\t\t\t// (e.g., by clicking another link in the meantime). If so, bail\n\t\t\t// out, and let the newer execution to update the HTML.\n\t\t\tif ( navigatingTo !== href ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tpage &&\n\t\t\t\t! page.initialData?.config?.[ 'core/router' ]\n\t\t\t\t\t?.clientNavigationDisabled\n\t\t\t) {\n\t\t\t\tyield renderRegions( page );\n\t\t\t\twindow.history[\n\t\t\t\t\toptions.replace ? 'replaceState' : 'pushState'\n\t\t\t\t]( {}, '', href );\n\n\t\t\t\t// Update the URL in the state.\n\t\t\t\tstate.url = href;\n\n\t\t\t\t// Update the navigation status once the the new page rendering\n\t\t\t\t// has been completed.\n\t\t\t\tif ( loadingAnimation ) {\n\t\t\t\t\tnavigation.hasStarted = false;\n\t\t\t\t\tnavigation.hasFinished = true;\n\t\t\t\t}\n\n\t\t\t\tif ( screenReaderAnnouncement ) {\n\t\t\t\t\t// Announce that the page has been loaded. If the message is the\n\t\t\t\t\t// same, we use a no-break space similar to the @wordpress/a11y\n\t\t\t\t\t// package: https://github.com/WordPress/gutenberg/blob/c395242b8e6ee20f8b06c199e4fc2920d7018af1/packages/a11y/src/filter-message.js#L20-L26\n\t\t\t\t\tnavigation.message =\n\t\t\t\t\t\tnavigation.texts.loaded +\n\t\t\t\t\t\t( navigation.message === navigation.texts.loaded\n\t\t\t\t\t\t\t? '\\u00A0'\n\t\t\t\t\t\t\t: '' );\n\t\t\t\t}\n\n\t\t\t\t// Scroll to the anchor if exits in the link.\n\t\t\t\tconst { hash } = new URL( href, window.location );\n\t\t\t\tif ( hash ) {\n\t\t\t\t\tdocument.querySelector( hash )?.scrollIntoView();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tyield forcePageReload( href );\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Prefetchs the page with the passed URL.\n\t\t *\n\t\t * The function normalizes the URL and stores internally the fetch\n\t\t * promise, to avoid triggering a second fetch for an ongoing request.\n\t\t *\n\t\t * @param {string}  url             The page URL.\n\t\t * @param {Object}  [options]       Options object.\n\t\t * @param {boolean} [options.force] Force fetching the URL again.\n\t\t * @param {string}  [options.html]  HTML string to be used instead of fetching the requested URL.\n\t\t */\n\t\tprefetch( url, options = {} ) {\n\t\t\tconst { clientNavigationDisabled } = getConfig();\n\t\t\tif ( clientNavigationDisabled ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst pagePath = getPagePath( url );\n\t\t\tif ( options.force || ! pages.has( pagePath ) ) {\n\t\t\t\tpages.set( pagePath, fetchPage( pagePath, options ) );\n\t\t\t}\n\t\t},\n\t},\n} );\n\n// Add click and prefetch to all links.\nif ( process.env.IS_GUTENBERG_PLUGIN ) {\n\tif ( navigationMode === 'fullPage' ) {\n\t\t// Navigate on click.\n\t\tdocument.addEventListener(\n\t\t\t'click',\n\t\t\tfunction ( event ) {\n\t\t\t\tconst ref = event.target.closest( 'a' );\n\t\t\t\tif ( isValidLink( ref ) && isValidEvent( event ) ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tactions.navigate( ref.href );\n\t\t\t\t}\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\t\t// Prefetch on hover.\n\t\tdocument.addEventListener(\n\t\t\t'mouseenter',\n\t\t\tfunction ( event ) {\n\t\t\t\tif ( event.target?.nodeName === 'A' ) {\n\t\t\t\t\tconst ref = event.target.closest( 'a' );\n\t\t\t\t\tif ( isValidLink( ref ) && isValidEvent( event ) ) {\n\t\t\t\t\t\tactions.prefetch( ref.href );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\t}\n}\n","var x = y => { var x = {}; __webpack_require__.d(x, y); return x; }\nvar y = x => () => x\nmodule.exports = x({ [\"getConfig\"]: () => __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__.getConfig, [\"privateApis\"]: () => __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__.privateApis, [\"store\"]: () => __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__.store });","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// startup\n// Load entry module and return exports\n// This entry module used 'module' so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(638);\n"],"names":["webpackQueues","webpackExports","webpackError","resolveQueue","updateHead","async","getTagId","tag","id","outerHTML","newHeadMap","Map","child","newHead","set","toRemove","document","head","children","nodeName","push","has","delete","toAppend","values","forEach","n","remove","append","fetchHeadAssets","doc","headElements","headTags","assets","tagName","selector","attribute","asset","tags","querySelectorAll","Promise","all","Array","from","map","attributeValue","getAttribute","response","fetch","text","e","console","error","headElement","get","element","createElement","innerText","attr","attributes","setAttribute","name","value","querySelector","directivePrefix","getRegionRootFragment","initialVdom","toVdom","render","parseInitialData","populateInitialData","batch","privateApis","navigationMode","_getConfig$navigation","getConfig","pages","getPagePath","url","u","URL","window","location","pathname","search","fetchPage","html","res","status","dom","DOMParser","parseFromString","regionsToVdom","vdom","regions","body","attrName","region","title","initialData","renderRegions","page","fragment","forcePageReload","href","assign","addEventListener","pagePath","state","reload","call","script","textContent","resolve","isValidLink","ref","HTMLAnchorElement","target","origin","startsWith","searchParams","isValidEvent","event","button","metaKey","ctrlKey","altKey","shiftKey","defaultPrevented","navigatingTo","actions","store","navigation","hasStarted","hasFinished","texts","navigate","options","clientNavigationDisabled","loadingAnimation","screenReaderAnnouncement","timeout","prefetch","timeoutPromise","setTimeout","loadingTimeout","message","loading","race","clearTimeout","config","history","replace","loaded","hash","scrollIntoView","force","closest","preventDefault","y","x","module","exports","__WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__","__webpack_require__","d","__webpack_module_cache__","moduleId","cachedModule","undefined","__webpack_modules__","Symbol","queue","fn","r","a","hasAwait","currentDeps","outerResolve","reject","depQueues","Set","promise","rej","deps","dep","then","obj","ret","wrapDeps","getResult","fnQueue","q","add","err","definition","key","o","Object","defineProperty","enumerable","prop","prototype","hasOwnProperty","__webpack_exports__"],"sourceRoot":""}