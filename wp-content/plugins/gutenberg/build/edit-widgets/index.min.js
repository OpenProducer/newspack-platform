(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var i in r)e.o(r,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:r[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{initialize:()=>Cr,initializeEditor:()=>Ir,reinitializeEditor:()=>Br,store:()=>ct});var r={};e.r(r),e.d(r,{closeModal:()=>$,disableComplementaryArea:()=>V,enableComplementaryArea:()=>O,openModal:()=>U,pinItem:()=>D,setDefaultComplementaryArea:()=>M,setFeatureDefaults:()=>H,setFeatureValue:()=>z,toggleFeature:()=>G,unpinItem:()=>F});var i={};e.r(i),e.d(i,{getActiveComplementaryArea:()=>Y,isComplementaryAreaLoading:()=>Z,isFeatureActive:()=>q,isItemPinned:()=>K,isModalActive:()=>J});var s={};e.r(s),e.d(s,{closeGeneralSidebar:()=>Oe,moveBlockToWidgetArea:()=>Ve,persistStubPost:()=>Ie,saveEditedWidgetAreas:()=>Ce,saveWidgetArea:()=>Ne,saveWidgetAreas:()=>Be,setIsInserterOpened:()=>Pe,setIsListViewOpened:()=>Me,setIsWidgetAreaOpen:()=>We,setWidgetAreasOpenState:()=>Re,setWidgetIdForClientId:()=>Le});var o={};e.r(o),e.d(o,{getWidgetAreas:()=>De,getWidgets:()=>Fe});var n={};e.r(n),e.d(n,{__experimentalGetInsertionPoint:()=>Xe,canInsertBlockInWidgetArea:()=>et,getEditedWidgetAreas:()=>Ze,getIsWidgetAreaOpen:()=>Je,getParentWidgetAreaBlock:()=>Ye,getReferenceWidgetBlocks:()=>Ke,getWidget:()=>He,getWidgetAreaForWidgetId:()=>$e,getWidgetAreas:()=>Ue,getWidgets:()=>ze,isInserterOpened:()=>Qe,isListViewOpened:()=>tt,isSavingWidgetAreas:()=>qe});var a={};e.r(a),e.d(a,{getInserterSidebarToggleRef:()=>it,getListViewToggleRef:()=>rt});var c={};e.r(c),e.d(c,{metadata:()=>ht,name:()=>mt,settings:()=>_t});const d=window.wp.blocks,l=window.wp.data,u=window.wp.deprecated;var g=e.n(u);const p=window.wp.editor,h=window.wp.element,m=window.wp.blockLibrary,_=window.wp.coreData,w=window.wp.widgets,b=window.wp.preferences,f=window.wp.apiFetch;var x=e.n(f);const y=(0,l.combineReducers)({blockInserterPanel:function(e=!1,t){switch(t.type){case"SET_IS_LIST_VIEW_OPENED":return!t.isOpen&&e;case"SET_IS_INSERTER_OPENED":return t.value}return e},inserterSidebarToggleRef:function(e={current:null}){return e},listViewPanel:function(e=!1,t){switch(t.type){case"SET_IS_INSERTER_OPENED":return!t.value&&e;case"SET_IS_LIST_VIEW_OPENED":return t.isOpen}return e},listViewToggleRef:function(e={current:null}){return e},widgetAreasOpenState:function(e={},t){const{type:r}=t;switch(r){case"SET_WIDGET_AREAS_OPEN_STATE":return t.widgetAreasOpenState;case"SET_IS_WIDGET_AREA_OPEN":{const{clientId:r,isOpen:i}=t;return{...e,[r]:i}}default:return e}}}),v=window.wp.i18n,k=window.wp.notices;function j(e){var t,r,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=j(e[t]))&&(i&&(i+=" "),i+=r)}else for(r in e)e[r]&&(i&&(i+=" "),i+=r);return i}const S=function(){for(var e,t,r=0,i="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=j(e))&&(i&&(i+=" "),i+=t);return i},E=window.wp.components,A=window.wp.primitives,I=window.ReactJSXRuntime,C=(0,I.jsx)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,I.jsx)(A.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})}),B=(0,I.jsx)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,I.jsx)(A.Path,{d:"M11.776 4.454a.25.25 0 01.448 0l2.069 4.192a.25.25 0 00.188.137l4.626.672a.25.25 0 01.139.426l-3.348 3.263a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.362.263l-4.138-2.175a.25.25 0 00-.232 0l-4.138 2.175a.25.25 0 01-.363-.263l.79-4.607a.25.25 0 00-.071-.222L4.754 9.881a.25.25 0 01.139-.426l4.626-.672a.25.25 0 00.188-.137l2.069-4.192z"})}),N=(0,I.jsx)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,I.jsx)(A.Path,{fillRule:"evenodd",d:"M9.706 8.646a.25.25 0 01-.188.137l-4.626.672a.25.25 0 00-.139.427l3.348 3.262a.25.25 0 01.072.222l-.79 4.607a.25.25 0 00.362.264l4.138-2.176a.25.25 0 01.233 0l4.137 2.175a.25.25 0 00.363-.263l-.79-4.607a.25.25 0 01.072-.222l3.347-3.262a.25.25 0 00-.139-.427l-4.626-.672a.25.25 0 01-.188-.137l-2.069-4.192a.25.25 0 00-.448 0L9.706 8.646zM12 7.39l-.948 1.921a1.75 1.75 0 01-1.317.957l-2.12.308 1.534 1.495c.412.402.6.982.503 1.55l-.362 2.11 1.896-.997a1.75 1.75 0 011.629 0l1.895.997-.362-2.11a1.75 1.75 0 01.504-1.55l1.533-1.495-2.12-.308a1.75 1.75 0 01-1.317-.957L12 7.39z",clipRule:"evenodd"})}),T=window.wp.viewport,L=window.wp.compose,R=(0,I.jsx)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,I.jsx)(A.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})});function W(e){return["core/edit-post","core/edit-site"].includes(e)?(g()(`${e} interface scope`,{alternative:"core interface scope",hint:"core/edit-post and core/edit-site are merging.",version:"6.6"}),"core"):e}function P(e,t){return"core"===e&&"edit-site/template"===t?(g()("edit-site/template sidebar",{alternative:"edit-post/document",version:"6.6"}),"edit-post/document"):"core"===e&&"edit-site/block-inspector"===t?(g()("edit-site/block-inspector sidebar",{alternative:"edit-post/block",version:"6.6"}),"edit-post/block"):t}const M=(e,t)=>({type:"SET_DEFAULT_COMPLEMENTARY_AREA",scope:e=W(e),area:t=P(e,t)}),O=(e,t)=>({registry:r,dispatch:i})=>{t&&(e=W(e),t=P(e,t),r.select(b.store).get(e,"isComplementaryAreaVisible")||r.dispatch(b.store).set(e,"isComplementaryAreaVisible",!0),i({type:"ENABLE_COMPLEMENTARY_AREA",scope:e,area:t}))},V=e=>({registry:t})=>{e=W(e),t.select(b.store).get(e,"isComplementaryAreaVisible")&&t.dispatch(b.store).set(e,"isComplementaryAreaVisible",!1)},D=(e,t)=>({registry:r})=>{if(!t)return;e=W(e),t=P(e,t);const i=r.select(b.store).get(e,"pinnedItems");!0!==i?.[t]&&r.dispatch(b.store).set(e,"pinnedItems",{...i,[t]:!0})},F=(e,t)=>({registry:r})=>{if(!t)return;e=W(e),t=P(e,t);const i=r.select(b.store).get(e,"pinnedItems");r.dispatch(b.store).set(e,"pinnedItems",{...i,[t]:!1})};function G(e,t){return function({registry:r}){g()("dispatch( 'core/interface' ).toggleFeature",{since:"6.0",alternative:"dispatch( 'core/preferences' ).toggle"}),r.dispatch(b.store).toggle(e,t)}}function z(e,t,r){return function({registry:i}){g()("dispatch( 'core/interface' ).setFeatureValue",{since:"6.0",alternative:"dispatch( 'core/preferences' ).set"}),i.dispatch(b.store).set(e,t,!!r)}}function H(e,t){return function({registry:r}){g()("dispatch( 'core/interface' ).setFeatureDefaults",{since:"6.0",alternative:"dispatch( 'core/preferences' ).setDefaults"}),r.dispatch(b.store).setDefaults(e,t)}}function U(e){return{type:"OPEN_MODAL",name:e}}function $(){return{type:"CLOSE_MODAL"}}const Y=(0,l.createRegistrySelector)((e=>(t,r)=>{r=W(r);const i=e(b.store).get(r,"isComplementaryAreaVisible");if(void 0!==i)return!1===i?null:t?.complementaryAreas?.[r]})),Z=(0,l.createRegistrySelector)((e=>(t,r)=>{r=W(r);const i=e(b.store).get(r,"isComplementaryAreaVisible"),s=t?.complementaryAreas?.[r];return i&&void 0===s})),K=(0,l.createRegistrySelector)((e=>(t,r,i)=>{var s;i=P(r=W(r),i);const o=e(b.store).get(r,"pinnedItems");return null===(s=o?.[i])||void 0===s||s})),q=(0,l.createRegistrySelector)((e=>(t,r,i)=>(g()("select( 'core/interface' ).isFeatureActive( scope, featureName )",{since:"6.0",alternative:"select( 'core/preferences' ).get( scope, featureName )"}),!!e(b.store).get(r,i))));function J(e,t){return e.activeModal===t}const Q=(0,l.combineReducers)({complementaryAreas:function(e={},t){switch(t.type){case"SET_DEFAULT_COMPLEMENTARY_AREA":{const{scope:r,area:i}=t;return e[r]?e:{...e,[r]:i}}case"ENABLE_COMPLEMENTARY_AREA":{const{scope:r,area:i}=t;return{...e,[r]:i}}}return e},activeModal:function(e=null,t){switch(t.type){case"OPEN_MODAL":return t.name;case"CLOSE_MODAL":return null}return e}}),X=(0,l.createReduxStore)("core/interface",{reducer:Q,actions:r,selectors:i});(0,l.register)(X);const ee=window.wp.plugins,te=(0,ee.withPluginContext)(((e,t)=>({icon:t.icon||e.icon,identifier:t.identifier||`${e.name}/${t.name}`}))),re=te((function({as:e=E.Button,scope:t,identifier:r,icon:i,selectedIcon:s,name:o,shortcut:n,...a}){const c=e,d=(0,l.useSelect)((e=>e(X).getActiveComplementaryArea(t)===r),[r,t]),{enableComplementaryArea:u,disableComplementaryArea:g}=(0,l.useDispatch)(X);return(0,I.jsx)(c,{icon:s&&d?s:i,"aria-controls":r.replace("/",":"),"aria-checked":(p=a.role,["checkbox","option","radio","switch","menuitemcheckbox","menuitemradio","treeitem"].includes(p)?d:void 0),onClick:()=>{d?g(t):u(t,r)},shortcut:n,...a});var p})),ie=({smallScreenTitle:e,children:t,className:r,toggleButtonProps:i})=>{const s=(0,I.jsx)(re,{icon:R,...i});return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)("div",{className:"components-panel__header interface-complementary-area-header__small",children:[e&&(0,I.jsx)("h2",{className:"interface-complementary-area-header__small-title",children:e}),s]}),(0,I.jsxs)("div",{className:S("components-panel__header","interface-complementary-area-header",r),tabIndex:-1,children:[t,s]})]})},se=()=>{};function oe({name:e,as:t=E.Button,onClick:r,...i}){return(0,I.jsx)(E.Fill,{name:e,children:({onClick:e})=>(0,I.jsx)(t,{onClick:r||e?(...t)=>{(r||se)(...t),(e||se)(...t)}:void 0,...i})})}oe.Slot=function({name:e,as:t=E.ButtonGroup,fillProps:r={},bubblesVirtually:i,...s}){return(0,I.jsx)(E.Slot,{name:e,bubblesVirtually:i,fillProps:r,children:e=>{if(!h.Children.toArray(e).length)return null;const r=[];h.Children.forEach(e,(({props:{__unstableExplicitMenuItem:e,__unstableTarget:t}})=>{t&&e&&r.push(t)}));const i=h.Children.map(e,(e=>!e.props.__unstableExplicitMenuItem&&r.includes(e.props.__unstableTarget)?null:e));return(0,I.jsx)(t,{...s,children:i})}})};const ne=oe,ae=({__unstableExplicitMenuItem:e,__unstableTarget:t,...r})=>(0,I.jsx)(E.MenuItem,{...r});function ce({scope:e,target:t,__unstableExplicitMenuItem:r,...i}){return(0,I.jsx)(re,{as:i=>(0,I.jsx)(ne,{__unstableExplicitMenuItem:r,__unstableTarget:`${e}/${t}`,as:ae,name:`${e}/plugin-more-menu`,...i}),role:"menuitemcheckbox",selectedIcon:C,name:t,scope:e,...i})}function de({scope:e,...t}){return(0,I.jsx)(E.Fill,{name:`PinnedItems/${e}`,...t})}de.Slot=function({scope:e,className:t,...r}){return(0,I.jsx)(E.Slot,{name:`PinnedItems/${e}`,...r,children:e=>e?.length>0&&(0,I.jsx)("div",{className:S(t,"interface-pinned-items"),children:e})})};const le=de,ue={open:{width:280},closed:{width:0},mobileOpen:{width:"100vw"}};function ge({activeArea:e,isActive:t,scope:r,children:i,className:s,id:o}){const n=(0,L.useReducedMotion)(),a=(0,L.useViewportMatch)("medium","<"),c=(0,L.usePrevious)(e),d=(0,L.usePrevious)(t),[,l]=(0,h.useState)({});(0,h.useEffect)((()=>{l({})}),[t]);const u={type:"tween",duration:n||a||c&&e&&e!==c?0:.3,ease:[.6,0,.4,1]};return(0,I.jsx)(E.Fill,{name:`ComplementaryArea/${r}`,children:(0,I.jsx)(E.__unstableAnimatePresence,{initial:!1,children:(d||t)&&(0,I.jsx)(E.__unstableMotion.div,{variants:ue,initial:"closed",animate:a?"mobileOpen":"open",exit:"closed",transition:u,className:"interface-complementary-area__fill",children:(0,I.jsx)("div",{id:o,className:s,style:{width:a?"100vw":280},children:i})})})})}const pe=te((function({children:e,className:t,closeLabel:r=(0,v.__)("Close plugin"),identifier:i,header:s,headerClassName:o,icon:n,isPinnable:a=!0,panelClassName:c,scope:d,name:u,smallScreenTitle:g,title:p,toggleShortcut:m,isActiveByDefault:_}){const[w,f]=(0,h.useState)(!1),{isLoading:x,isActive:y,isPinned:k,activeArea:j,isSmall:A,isLarge:L,showIconLabels:R}=(0,l.useSelect)((e=>{const{getActiveComplementaryArea:t,isComplementaryAreaLoading:r,isItemPinned:s}=e(X),{get:o}=e(b.store),n=t(d);return{isLoading:r(d),isActive:n===i,isPinned:s(d,i),activeArea:n,isSmall:e(T.store).isViewportMatch("< medium"),isLarge:e(T.store).isViewportMatch("large"),showIconLabels:o("core","showIconLabels")}}),[i,d]);!function(e,t,r,i,s){const o=(0,h.useRef)(!1),n=(0,h.useRef)(!1),{enableComplementaryArea:a,disableComplementaryArea:c}=(0,l.useDispatch)(X);(0,h.useEffect)((()=>{i&&s&&!o.current?(c(e),n.current=!0):n.current&&!s&&o.current?(n.current=!1,a(e,t)):n.current&&r&&r!==t&&(n.current=!1),s!==o.current&&(o.current=s)}),[i,s,e,t,r,c,a])}(d,i,j,y,A);const{enableComplementaryArea:W,disableComplementaryArea:P,pinItem:M,unpinItem:O}=(0,l.useDispatch)(X);if((0,h.useEffect)((()=>{_&&void 0===j&&!A?W(d,i):void 0===j&&A&&P(d,i),f(!0)}),[j,_,d,i,A,W,P]),w)return(0,I.jsxs)(I.Fragment,{children:[a&&(0,I.jsx)(le,{scope:d,children:k&&(0,I.jsx)(re,{scope:d,identifier:i,isPressed:y&&(!R||L),"aria-expanded":y,"aria-disabled":x,label:p,icon:R?C:n,showTooltip:!R,variant:R?"tertiary":void 0,size:"compact",shortcut:m})}),u&&a&&(0,I.jsx)(ce,{target:u,scope:d,icon:n,children:p}),(0,I.jsxs)(ge,{activeArea:j,isActive:y,className:S("interface-complementary-area",t),scope:d,id:i.replace("/",":"),children:[(0,I.jsx)(ie,{className:o,closeLabel:r,onClose:()=>P(d),smallScreenTitle:g,toggleButtonProps:{label:r,size:"small",shortcut:m,scope:d,identifier:i},children:s||(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("h2",{className:"interface-complementary-area-header__title",children:p}),a&&(0,I.jsx)(E.Button,{className:"interface-complementary-area__pin-unpin-item",icon:k?B:N,label:k?(0,v.__)("Unpin from toolbar"):(0,v.__)("Pin to toolbar"),onClick:()=>(k?O:M)(d,i),isPressed:k,"aria-expanded":k,size:"compact"})]})}),(0,I.jsx)(E.Panel,{className:c,children:e})]})]})}));pe.Slot=function({scope:e,...t}){return(0,I.jsx)(E.Slot,{name:`ComplementaryArea/${e}`,...t})};const he=pe,me=(0,h.forwardRef)((({children:e,className:t,ariaLabel:r,as:i="div",...s},o)=>(0,I.jsx)(i,{ref:o,className:S("interface-navigable-region",t),"aria-label":r,role:"region",tabIndex:"-1",...s,children:e})));me.displayName="NavigableRegion";const _e=me,we={type:"tween",duration:.25,ease:[.6,0,.4,1]},be={hidden:{opacity:1,marginTop:-60},visible:{opacity:1,marginTop:0},distractionFreeHover:{opacity:1,marginTop:0,transition:{...we,delay:.2,delayChildren:.2}},distractionFreeHidden:{opacity:0,marginTop:-60},distractionFreeDisabled:{opacity:0,marginTop:0,transition:{...we,delay:.8,delayChildren:.8}}},fe=(0,h.forwardRef)((function({isDistractionFree:e,footer:t,header:r,editorNotices:i,sidebar:s,secondarySidebar:o,content:n,actions:a,labels:c,className:d},l){const[u,g]=(0,L.useResizeObserver)(),p=(0,L.useViewportMatch)("medium","<"),m={type:"tween",duration:(0,L.useReducedMotion)()?0:.25,ease:[.6,0,.4,1]};!function(e){(0,h.useEffect)((()=>{const t=document&&document.querySelector(`html:not(.${e})`);if(t)return t.classList.toggle(e),()=>{t.classList.toggle(e)}}),[e])}("interface-interface-skeleton__html-container");const _={
/* translators: accessibility text for the top bar landmark region. */
header:(0,v._x)("Header","header landmark area"),
/* translators: accessibility text for the content landmark region. */
body:(0,v.__)("Content"),
/* translators: accessibility text for the secondary sidebar landmark region. */
secondarySidebar:(0,v.__)("Block Library"),
/* translators: accessibility text for the settings landmark region. */
sidebar:(0,v.__)("Settings"),
/* translators: accessibility text for the publish landmark region. */
actions:(0,v.__)("Publish"),
/* translators: accessibility text for the footer landmark region. */
footer:(0,v.__)("Footer"),...c};return(0,I.jsxs)("div",{ref:l,className:S(d,"interface-interface-skeleton",!!t&&"has-footer"),children:[(0,I.jsxs)("div",{className:"interface-interface-skeleton__editor",children:[(0,I.jsx)(E.__unstableAnimatePresence,{initial:!1,children:!!r&&(0,I.jsx)(_e,{as:E.__unstableMotion.div,className:"interface-interface-skeleton__header","aria-label":_.header,initial:e&&!p?"distractionFreeHidden":"hidden",whileHover:e&&!p?"distractionFreeHover":"visible",animate:e&&!p?"distractionFreeDisabled":"visible",exit:e&&!p?"distractionFreeHidden":"hidden",variants:be,transition:m,children:r})}),e&&(0,I.jsx)("div",{className:"interface-interface-skeleton__header",children:i}),(0,I.jsxs)("div",{className:"interface-interface-skeleton__body",children:[(0,I.jsx)(E.__unstableAnimatePresence,{initial:!1,children:!!o&&(0,I.jsx)(_e,{className:"interface-interface-skeleton__secondary-sidebar",ariaLabel:_.secondarySidebar,as:E.__unstableMotion.div,initial:"closed",animate:"open",exit:"closed",variants:{open:{width:g.width},closed:{width:0}},transition:m,children:(0,I.jsxs)(E.__unstableMotion.div,{style:{position:"absolute",width:p?"100vw":"fit-content",height:"100%",left:0},variants:{open:{x:0},closed:{x:"-100%"}},transition:m,children:[u,o]})})}),(0,I.jsx)(_e,{className:"interface-interface-skeleton__content",ariaLabel:_.body,children:n}),!!s&&(0,I.jsx)(_e,{className:"interface-interface-skeleton__sidebar",ariaLabel:_.sidebar,children:s}),!!a&&(0,I.jsx)(_e,{className:"interface-interface-skeleton__actions",ariaLabel:_.actions,children:a})]})]}),!!t&&(0,I.jsx)(_e,{className:"interface-interface-skeleton__footer",ariaLabel:_.footer,children:t})]})})),xe=window.wp.blockEditor;function ye(e){if("block"===e.id_base){const t=(0,d.parse)(e.instance.raw.content,{__unstableSkipAutop:!0});return t.length?(0,w.addWidgetIdToBlock)(t[0],e.id):(0,w.addWidgetIdToBlock)((0,d.createBlock)("core/paragraph",{},[]),e.id)}let t;return t=e._embedded.about[0].is_multi?{idBase:e.id_base,instance:e.instance}:{id:e.id},(0,w.addWidgetIdToBlock)((0,d.createBlock)("core/legacy-widget",t,[]),e.id)}function ve(e,t={}){let r;var i,s,o;return r="core/legacy-widget"===e.name&&(e.attributes.id||e.attributes.instance)?{...t,id:null!==(i=e.attributes.id)&&void 0!==i?i:t.id,id_base:null!==(s=e.attributes.idBase)&&void 0!==s?s:t.id_base,instance:null!==(o=e.attributes.instance)&&void 0!==o?o:t.instance}:{...t,id_base:"block",instance:{raw:{content:(0,d.serialize)(e)}}},delete r.rendered,delete r.rendered_form,r}const ke="root",je="sidebar",Se="postType",Ee=e=>`widget-area-${e}`,Ae="core/edit-widgets",Ie=(e,t)=>({registry:r})=>{const i=((e,t)=>({id:e,slug:e,status:"draft",type:"page",blocks:t,meta:{widgetAreaId:e}}))(e,t);return r.dispatch(_.store).receiveEntityRecords(ke,Se,i,{id:i.id},!1),i},Ce=()=>async({select:e,dispatch:t,registry:r})=>{const i=e.getEditedWidgetAreas();if(i?.length)try{await t.saveWidgetAreas(i),r.dispatch(k.store).createSuccessNotice((0,v.__)("Widgets saved."),{type:"snackbar"})}catch(e){r.dispatch(k.store).createErrorNotice(/* translators: %s: The error message. */ /* translators: %s: The error message. */
(0,v.sprintf)((0,v.__)("There was an error. %s"),e.message),{type:"snackbar"})}},Be=e=>async({dispatch:t,registry:r})=>{try{for(const r of e)await t.saveWidgetArea(r.id)}finally{await r.dispatch(_.store).finishResolution("getEntityRecord",ke,je,{per_page:-1})}},Ne=e=>async({dispatch:t,select:r,registry:i})=>{const s=r.getWidgets(),o=i.select(_.store).getEditedEntityRecord(ke,Se,Ee(e)),n=Object.values(s).filter((({sidebar:t})=>t===e)),a=[],c=o.blocks.filter((e=>{const{id:t}=e.attributes;if("core/legacy-widget"===e.name&&t){if(a.includes(t))return!1;a.push(t)}return!0})),d=[];for(const e of n)r.getWidgetAreaForWidgetId(e.id)||d.push(e);const l=[],u=[],g=[];for(let t=0;t<c.length;t++){const r=c[t],o=(0,w.getWidgetIdFromBlock)(r),n=s[o],a=ve(r,n);if(g.push(o),n){if(i.dispatch(_.store).editEntityRecord("root","widget",o,{...a,sidebar:e},{undoIgnore:!0}),!i.select(_.store).hasEditsForEntityRecord("root","widget",o))continue;u.push((({saveEditedEntityRecord:e})=>e("root","widget",o)))}else u.push((({saveEntityRecord:t})=>t("root","widget",{...a,sidebar:e})));l.push({block:r,position:t,clientId:r.clientId})}for(const e of d)u.push((({deleteEntityRecord:t})=>t("root","widget",e.id,{force:!0})));const p=(await i.dispatch(_.store).__experimentalBatch(u)).filter((e=>!e.hasOwnProperty("deleted"))),h=[];for(let e=0;e<p.length;e++){const t=p[e],{block:r,position:s}=l[e];o.blocks[s].attributes.__internalWidgetId=t.id,i.select(_.store).getLastEntitySaveError("root","widget",t.id)&&h.push(r.attributes?.name||r?.name),g[s]||(g[s]=t.id)}if(h.length)throw new Error((0,v.sprintf)(/* translators: %s: List of widget names */ /* translators: %s: List of widget names */
(0,v.__)("Could not save the following widgets: %s."),h.join(", ")));i.dispatch(_.store).editEntityRecord(ke,je,e,{widgets:g},{undoIgnore:!0}),t(Te(e)),i.dispatch(_.store).receiveEntityRecords(ke,Se,o,void 0)},Te=e=>({registry:t})=>{t.dispatch(_.store).saveEditedEntityRecord(ke,je,e,{throwOnError:!0})};function Le(e,t){return{type:"SET_WIDGET_ID_FOR_CLIENT_ID",clientId:e,widgetId:t}}function Re(e){return{type:"SET_WIDGET_AREAS_OPEN_STATE",widgetAreasOpenState:e}}function We(e,t){return{type:"SET_IS_WIDGET_AREA_OPEN",clientId:e,isOpen:t}}function Pe(e){return{type:"SET_IS_INSERTER_OPENED",value:e}}function Me(e){return{type:"SET_IS_LIST_VIEW_OPENED",isOpen:e}}const Oe=()=>({registry:e})=>{e.dispatch(X).disableComplementaryArea(Ae)},Ve=(e,t)=>async({dispatch:r,select:i,registry:s})=>{const o=s.select(xe.store).getBlockRootClientId(e),n=s.select(xe.store).getBlocks().find((({attributes:e})=>e.id===t)).clientId,a=s.select(xe.store).getBlockOrder(n).length;i.getIsWidgetAreaOpen(n)||r.setIsWidgetAreaOpen(n,!0),s.dispatch(xe.store).moveBlocksToPosition([e],o,n,a)},De=()=>async({dispatch:e,registry:t})=>{const r=[],i=(await t.resolveSelect(_.store).getEntityRecords(ke,je,{per_page:-1})).sort(((e,t)=>"wp_inactive_widgets"===e.id?1:"wp_inactive_widgets"===t.id?-1:0));for(const t of i)r.push((0,d.createBlock)("core/widget-area",{id:t.id,name:t.name})),t.widgets.length||e(Ie(Ee(t.id),[]));const s={};r.forEach(((e,t)=>{s[e.clientId]=0===t})),e(Re(s)),e(Ie("widget-areas",r))},Fe=()=>async({dispatch:e,registry:t})=>{const r=await t.resolveSelect(_.store).getEntityRecords("root","widget",{per_page:-1,_embed:"about"}),i={};for(const e of r){const t=ye(e);i[e.sidebar]=i[e.sidebar]||[],i[e.sidebar].push(t)}for(const t in i)i.hasOwnProperty(t)&&e(Ie(Ee(t),i[t]))},Ge={rootClientId:void 0,insertionIndex:void 0},ze=(0,l.createRegistrySelector)((e=>(0,l.createSelector)((()=>{var t;const r=e(_.store).getEntityRecords("root","widget",{per_page:-1,_embed:"about"});return null!==(t=r?.reduce(((e,t)=>({...e,[t.id]:t})),{}))&&void 0!==t?t:{}}),(()=>[e(_.store).getEntityRecords("root","widget",{per_page:-1,_embed:"about"})])))),He=(0,l.createRegistrySelector)((e=>(t,r)=>e(Ae).getWidgets()[r])),Ue=(0,l.createRegistrySelector)((e=>()=>e(_.store).getEntityRecords(ke,je,{per_page:-1}))),$e=(0,l.createRegistrySelector)((e=>(t,r)=>e(Ae).getWidgetAreas().find((t=>e(_.store).getEditedEntityRecord(ke,Se,Ee(t.id)).blocks.map((e=>(0,w.getWidgetIdFromBlock)(e))).includes(r))))),Ye=(0,l.createRegistrySelector)((e=>(t,r)=>{const{getBlock:i,getBlockName:s,getBlockParents:o}=e(xe.store);return i(o(r).find((e=>"core/widget-area"===s(e))))})),Ze=(0,l.createRegistrySelector)((e=>(t,r)=>{let i=e(Ae).getWidgetAreas();return i?(r&&(i=i.filter((({id:e})=>r.includes(e)))),i.filter((({id:t})=>e(_.store).hasEditsForEntityRecord(ke,Se,Ee(t)))).map((({id:t})=>e(_.store).getEditedEntityRecord(ke,je,t)))):[]})),Ke=(0,l.createRegistrySelector)((e=>(t,r=null)=>{const i=[],s=e(Ae).getWidgetAreas();for(const t of s){const s=e(_.store).getEditedEntityRecord(ke,Se,Ee(t.id));for(const e of s.blocks)"core/legacy-widget"!==e.name||r&&e.attributes?.referenceWidgetName!==r||i.push(e)}return i})),qe=(0,l.createRegistrySelector)((e=>()=>{const t=e(Ae).getWidgetAreas()?.map((({id:e})=>e));if(!t)return!1;for(const r of t)if(e(_.store).isSavingEntityRecord(ke,je,r))return!0;const r=[...Object.keys(e(Ae).getWidgets()),void 0];for(const t of r)if(e(_.store).isSavingEntityRecord("root","widget",t))return!0;return!1})),Je=(e,t)=>{const{widgetAreasOpenState:r}=e;return!!r[t]};function Qe(e){return!!e.blockInserterPanel}function Xe(e){return"boolean"==typeof e.blockInserterPanel?Ge:e.blockInserterPanel}const et=(0,l.createRegistrySelector)((e=>(t,r)=>{const i=e(xe.store).getBlocks(),[s]=i;return e(xe.store).canInsertBlockType(r,s.clientId)}));function tt(e){return e.listViewPanel}function rt(e){return e.listViewToggleRef}function it(e){return e.inserterSidebarToggleRef}const st=window.wp.privateApis,{lock:ot,unlock:nt}=(0,st.__dangerousOptInToUnstableAPIsOnlyForCoreModules)("I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.","@wordpress/edit-widgets"),at={reducer:y,selectors:n,resolvers:o,actions:s},ct=(0,l.createReduxStore)(Ae,at);(0,l.register)(ct),x().use((function(e,t){return 0===e.path?.indexOf("/wp/v2/types/widget-area")?Promise.resolve({}):t(e)})),nt(ct).registerPrivateSelectors(a);const dt=window.wp.hooks,lt=(0,L.createHigherOrderComponent)((e=>t=>{const{clientId:r,name:i}=t,{widgetAreas:s,currentWidgetAreaId:o,canInsertBlockInWidgetArea:n}=(0,l.useSelect)((e=>{if("core/widget-area"===i)return{};const t=e(ct),s=t.getParentWidgetAreaBlock(r);return{widgetAreas:t.getWidgetAreas(),currentWidgetAreaId:s?.attributes?.id,canInsertBlockInWidgetArea:t.canInsertBlockInWidgetArea(i)}}),[r,i]),{moveBlockToWidgetArea:a}=(0,l.useDispatch)(ct),c="core/widget-area"!==i&&s?.length>1&&n;return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(e,{...t},"edit"),c&&(0,I.jsx)(xe.BlockControls,{children:(0,I.jsx)(w.MoveToWidgetArea,{widgetAreas:s,currentWidgetAreaId:o,onSelect:e=>{a(t.clientId,e)}})})]})}),"withMoveToWidgetAreaToolbarItem");(0,dt.addFilter)("editor.BlockEdit","core/edit-widgets/block-edit",lt);const ut=window.wp.mediaUtils;(0,dt.addFilter)("editor.MediaUpload","core/edit-widgets/replace-media-upload",(()=>ut.MediaUpload));const gt=e=>{const[t,r]=(0,h.useState)(!1);return(0,h.useEffect)((()=>{const{ownerDocument:t}=e.current;function i(e){o(e)}function s(){r(!1)}function o(t){e.current.contains(t.target)?r(!0):r(!1)}return t.addEventListener("dragstart",i),t.addEventListener("dragend",s),t.addEventListener("dragenter",o),()=>{t.removeEventListener("dragstart",i),t.removeEventListener("dragend",s),t.removeEventListener("dragenter",o)}}),[]),t};function pt({id:e}){const[t,r,i]=(0,_.useEntityBlockEditor)("root","postType"),s=(0,h.useRef)(),o=gt(s),n=(0,xe.useInnerBlocksProps)({ref:s},{value:t,onInput:r,onChange:i,templateLock:!1,renderAppender:xe.InnerBlocks.ButtonBlockAppender});return(0,I.jsx)("div",{"data-widget-area-id":e,className:S("wp-block-widget-area__inner-blocks block-editor-inner-blocks editor-styles-wrapper",{"wp-block-widget-area__highlight-drop-zone":o}),children:(0,I.jsx)("div",{...n})})}const ht={$schema:"https://schemas.wp.org/trunk/block.json",name:"core/widget-area",title:"Widget Area",category:"widgets",attributes:{id:{type:"string"},name:{type:"string"}},supports:{html:!1,inserter:!1,customClassName:!1,reusable:!1,__experimentalToolbar:!1,__experimentalParentSelector:!1,__experimentalDisableBlockOverlay:!0},editorStyle:"wp-block-widget-area-editor",style:"wp-block-widget-area"},{name:mt}=ht,_t={title:(0,v.__)("Widget Area"),description:(0,v.__)("A widget area container."),__experimentalLabel:({name:e})=>e,edit:function({clientId:e,className:t,attributes:{id:r,name:i}}){const s=(0,l.useSelect)((t=>t(ct).getIsWidgetAreaOpen(e)),[e]),{setIsWidgetAreaOpen:o}=(0,l.useDispatch)(ct),n=(0,h.useRef)(),a=(0,h.useCallback)((t=>o(e,t)),[e]),c=(e=>{const[t,r]=(0,h.useState)(!1);return(0,h.useEffect)((()=>{const{ownerDocument:t}=e.current;function i(){r(!0)}function s(){r(!1)}return t.addEventListener("dragstart",i),t.addEventListener("dragend",s),()=>{t.removeEventListener("dragstart",i),t.removeEventListener("dragend",s)}}),[]),t})(n),d=gt(n),[u,g]=(0,h.useState)(!1);return(0,h.useEffect)((()=>{c?d&&!s?(a(!0),g(!0)):!d&&s&&u&&a(!1):g(!1)}),[s,c,d,u]),(0,I.jsx)(E.Panel,{className:t,ref:n,children:(0,I.jsx)(E.PanelBody,{title:i,opened:s,onToggle:()=>{o(e,!s)},scrollAfterOpen:!c,children:({opened:e})=>(0,I.jsx)(E.__unstableDisclosureContent,{className:"wp-block-widget-area__panel-body-content",visible:e,children:(0,I.jsx)(_.EntityProvider,{kind:"root",type:"postType",id:`widget-area-${r}`,children:(0,I.jsx)(pt,{id:r})})})})})}};function wt({text:e,children:t}){const r=(0,L.useCopyToClipboard)(e);return(0,I.jsx)(E.Button,{__next40pxDefaultSize:!0,variant:"secondary",ref:r,children:t})}function bt({message:e,error:t}){const r=[(0,I.jsx)(wt,{text:t.stack,children:(0,v.__)("Copy Error")},"copy-error")];return(0,I.jsx)(xe.Warning,{className:"edit-widgets-error-boundary",actions:r,children:e})}class ft extends h.Component{constructor(){super(...arguments),this.state={error:null}}componentDidCatch(e){(0,dt.doAction)("editor.ErrorBoundary.errorLogged",e)}static getDerivedStateFromError(e){return{error:e}}render(){return this.state.error?(0,I.jsx)(bt,{message:(0,v.__)("The editor has encountered an unexpected error."),error:this.state.error}):this.props.children}}const xt=window.wp.patterns,yt=window.wp.keyboardShortcuts,vt=window.wp.keycodes;function kt(){const{redo:e,undo:t}=(0,l.useDispatch)(_.store),{saveEditedWidgetAreas:r}=(0,l.useDispatch)(ct);return(0,yt.useShortcut)("core/edit-widgets/undo",(e=>{t(),e.preventDefault()})),(0,yt.useShortcut)("core/edit-widgets/redo",(t=>{e(),t.preventDefault()})),(0,yt.useShortcut)("core/edit-widgets/save",(e=>{e.preventDefault(),r()})),null}kt.Register=function(){const{registerShortcut:e}=(0,l.useDispatch)(yt.store);return(0,h.useEffect)((()=>{e({name:"core/edit-widgets/undo",category:"global",description:(0,v.__)("Undo your last changes."),keyCombination:{modifier:"primary",character:"z"}}),e({name:"core/edit-widgets/redo",category:"global",description:(0,v.__)("Redo your last undo."),keyCombination:{modifier:"primaryShift",character:"z"},aliases:(0,vt.isAppleOS)()?[]:[{modifier:"primary",character:"y"}]}),e({name:"core/edit-widgets/save",category:"global",description:(0,v.__)("Save your changes."),keyCombination:{modifier:"primary",character:"s"}}),e({name:"core/edit-widgets/keyboard-shortcuts",category:"main",description:(0,v.__)("Display these keyboard shortcuts."),keyCombination:{modifier:"access",character:"h"}}),e({name:"core/edit-widgets/next-region",category:"global",description:(0,v.__)("Navigate to the next part of the editor."),keyCombination:{modifier:"ctrl",character:"`"},aliases:[{modifier:"access",character:"n"}]}),e({name:"core/edit-widgets/previous-region",category:"global",description:(0,v.__)("Navigate to the previous part of the editor."),keyCombination:{modifier:"ctrlShift",character:"`"},aliases:[{modifier:"access",character:"p"},{modifier:"ctrlShift",character:"~"}]})}),[e]),null};const jt=kt,St=!1,{ExperimentalBlockEditorProvider:Et}=nt(xe.privateApis),{PatternsMenuItems:At}=nt(xt.privateApis),{BlockKeyboardShortcuts:It}=nt(m.privateApis),Ct=[];function Bt({blockEditorSettings:e,children:t,...r}){const i=(0,L.useViewportMatch)("medium"),{hasUploadPermissions:s,reusableBlocks:o,isFixedToolbarActive:n,keepCaretInsideBlock:a,pageOnFront:c,pageForPosts:d}=(0,l.useSelect)((e=>{var t;const{canUser:r,getEntityRecord:i,getEntityRecords:s}=e(_.store),o=r("read",{kind:"root",name:"site"})?i("root","site"):void 0;return{hasUploadPermissions:null===(t=r("create",{kind:"root",name:"media"}))||void 0===t||t,reusableBlocks:Ct,isFixedToolbarActive:!!e(b.store).get("core/edit-widgets","fixedToolbar"),keepCaretInsideBlock:!!e(b.store).get("core/edit-widgets","keepCaretInsideBlock"),pageOnFront:o?.page_on_front,pageForPosts:o?.page_for_posts}}),[]),{setIsInserterOpened:u}=(0,l.useDispatch)(ct),g=(0,h.useMemo)((()=>{let t;return s&&(t=({onError:t,...r})=>{(0,ut.uploadMedia)({wpAllowedMimeTypes:e.allowedMimeTypes,onError:({message:e})=>t(e),...r})}),{...e,__experimentalReusableBlocks:o,hasFixedToolbar:n||!i,keepCaretInsideBlock:a,mediaUpload:t,templateLock:"all",__experimentalSetIsInserterOpened:u,pageOnFront:c,pageForPosts:d}}),[s,e,n,i,a,o,u,c,d]),p=(0,l.useSelect)((e=>{const{getBlockSelectionEnd:t,getBlockName:r}=e(xe.store),i=t();if("core/widget-area"===r(i))return i;const{getParentWidgetAreaBlock:s}=e(ct),o=s(i),n=o?.clientId;if(n)return n;const{getEntityRecord:a}=e(_.store),c=a(ke,Se,"widget-areas");return c?.blocks[0]?.clientId}),[]),[m,w,f]=(0,_.useEntityBlockEditor)(ke,Se,{id:"widget-areas"});return(0,I.jsxs)(E.SlotFillProvider,{children:[(0,I.jsx)(jt.Register,{}),(0,I.jsx)(It,{}),(0,I.jsxs)(Et,{value:m,onInput:w,onChange:f,settings:g,useSubRegistry:!1,...r,children:[t,(0,I.jsx)(At,{rootClientId:p})]})]})}const Nt=(0,I.jsx)(A.SVG,{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,I.jsx)(A.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18 4H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM8.5 18.5H6c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h2.5v13zm10-.5c0 .3-.2.5-.5.5h-8v-13h8c.3 0 .5.2.5.5v12z"})}),Tt=(0,I.jsx)(A.SVG,{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,I.jsx)(A.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18 4H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-4 14.5H6c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h8v13zm4.5-.5c0 .3-.2.5-.5.5h-2.5v-13H18c.3 0 .5.2.5.5v12z"})}),Lt=(0,I.jsx)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,I.jsx)(A.Path,{d:"M19 8h-1V6h-5v2h-2V6H6v2H5c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8c0-1.1-.9-2-2-2zm.5 10c0 .3-.2.5-.5.5H5c-.3 0-.5-.2-.5-.5v-8c0-.3.2-.5.5-.5h14c.3 0 .5.2.5.5v8z"})}),Rt=window.wp.url,Wt=window.wp.dom;function Pt({selectedWidgetAreaId:e}){const t=(0,l.useSelect)((e=>e(ct).getWidgetAreas()),[]),r=(0,h.useMemo)((()=>e&&t?.find((t=>t.id===e))),[e,t]);let i;return i=r?"wp_inactive_widgets"===e?(0,v.__)("Blocks in this Widget Area will not be displayed in your site."):r.description:(0,v.__)("Widget Areas are global parts in your site’s layout that can accept blocks. These vary by theme, but are typically parts like your Sidebar or Footer."),(0,I.jsx)("div",{className:"edit-widgets-widget-areas",children:(0,I.jsxs)("div",{className:"edit-widgets-widget-areas__top-container",children:[(0,I.jsx)(xe.BlockIcon,{icon:Lt}),(0,I.jsxs)("div",{children:[(0,I.jsx)("p",{dangerouslySetInnerHTML:{__html:(0,Wt.safeHTML)(i)}}),0===t?.length&&(0,I.jsx)("p",{children:(0,v.__)("Your theme does not contain any Widget Areas.")}),!r&&(0,I.jsx)(E.Button,{__next40pxDefaultSize:!0,href:(0,Rt.addQueryArgs)("customize.php",{"autofocus[panel]":"widgets",return:window.location.pathname}),variant:"tertiary",children:(0,v.__)("Manage with live preview")})]})]})})}const Mt=h.Platform.select({web:!0,native:!1}),Ot="edit-widgets/block-inspector",Vt="edit-widgets/block-areas",{Tabs:Dt}=nt(E.privateApis);function Ft({selectedWidgetAreaBlock:e}){return(0,I.jsxs)(Dt.TabList,{children:[(0,I.jsx)(Dt.Tab,{tabId:Vt,children:e?e.attributes.name:(0,v.__)("Widget Areas")}),(0,I.jsx)(Dt.Tab,{tabId:Ot,children:(0,v.__)("Block")})]})}function Gt({hasSelectedNonAreaBlock:e,currentArea:t,isGeneralSidebarOpen:r,selectedWidgetAreaBlock:i}){const{enableComplementaryArea:s}=(0,l.useDispatch)(X);(0,h.useEffect)((()=>{e&&t===Vt&&r&&s("core/edit-widgets",Ot),!e&&t===Ot&&r&&s("core/edit-widgets",Vt)}),[e,s]);const o=(0,h.useContext)(Dt.Context);return(0,I.jsx)(he,{className:"edit-widgets-sidebar",header:(0,I.jsx)(Dt.Context.Provider,{value:o,children:(0,I.jsx)(Ft,{selectedWidgetAreaBlock:i})}),headerClassName:"edit-widgets-sidebar__panel-tabs"
/* translators: button label text should, if possible, be under 16 characters. */,title:(0,v.__)("Settings"),closeLabel:(0,v.__)("Close Settings"),scope:"core/edit-widgets",identifier:t,icon:(0,v.isRTL)()?Nt:Tt,isActiveByDefault:Mt,children:(0,I.jsxs)(Dt.Context.Provider,{value:o,children:[(0,I.jsx)(Dt.TabPanel,{tabId:Vt,focusable:!1,children:(0,I.jsx)(Pt,{selectedWidgetAreaId:i?.attributes.id})}),(0,I.jsx)(Dt.TabPanel,{tabId:Ot,focusable:!1,children:e?(0,I.jsx)(xe.BlockInspector,{}):(0,I.jsx)("span",{className:"block-editor-block-inspector__no-blocks",children:(0,v.__)("No block selected.")})})]})})}function zt(){const{currentArea:e,hasSelectedNonAreaBlock:t,isGeneralSidebarOpen:r,selectedWidgetAreaBlock:i}=(0,l.useSelect)((e=>{const{getSelectedBlock:t,getBlock:r,getBlockParentsByBlockName:i}=e(xe.store),{getActiveComplementaryArea:s}=e(X),o=t(),n=s(ct.name);let a,c=n;return c||(c=o?Ot:Vt),o&&(a="core/widget-area"===o.name?o:r(i(o.clientId,"core/widget-area")[0])),{currentArea:c,hasSelectedNonAreaBlock:!(!o||"core/widget-area"===o.name),isGeneralSidebarOpen:!!n,selectedWidgetAreaBlock:a}}),[]),{enableComplementaryArea:s}=(0,l.useDispatch)(X),o=(0,h.useCallback)((e=>{e&&s(ct.name,e)}),[s]);return(0,I.jsx)(Dt,{selectedTabId:r?e:null,onSelect:o,selectOnMove:!1,children:(0,I.jsx)(Gt,{hasSelectedNonAreaBlock:t,currentArea:e,isGeneralSidebarOpen:r,selectedWidgetAreaBlock:i})})}const Ht=(0,I.jsx)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,I.jsx)(A.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})}),Ut=(0,I.jsx)(A.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,I.jsx)(A.Path,{d:"M3 6h11v1.5H3V6Zm3.5 5.5h11V13h-11v-1.5ZM21 17H10v1.5h11V17Z"})}),$t=(0,I.jsx)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,I.jsx)(A.Path,{d:"M18.3 11.7c-.6-.6-1.4-.9-2.3-.9H6.7l2.9-3.3-1.1-1-4.5 5L8.5 16l1-1-2.7-2.7H16c.5 0 .9.2 1.3.5 1 1 1 3.4 1 4.5v.3h1.5v-.2c0-1.5 0-4.3-1.5-5.7z"})}),Yt=(0,I.jsx)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,I.jsx)(A.Path,{d:"M15.6 6.5l-1.1 1 2.9 3.3H8c-.9 0-1.7.3-2.3.9-1.4 1.5-1.4 4.2-1.4 5.6v.2h1.5v-.3c0-1.1 0-3.5 1-4.5.3-.3.7-.5 1.3-.5h9.2L14.5 15l1.1 1.1 4.6-4.6-4.6-5z"})}),Zt=(0,h.forwardRef)((function(e,t){const r=(0,l.useSelect)((e=>e(_.store).hasUndo()),[]),{undo:i}=(0,l.useDispatch)(_.store);return(0,I.jsx)(E.Button,{...e,ref:t,icon:(0,v.isRTL)()?Yt:$t,label:(0,v.__)("Undo"),shortcut:vt.displayShortcut.primary("z"),"aria-disabled":!r,onClick:r?i:void 0,size:"compact"})})),Kt=(0,h.forwardRef)((function(e,t){const r=(0,vt.isAppleOS)()?vt.displayShortcut.primaryShift("z"):vt.displayShortcut.primary("y"),i=(0,l.useSelect)((e=>e(_.store).hasRedo()),[]),{redo:s}=(0,l.useDispatch)(_.store);return(0,I.jsx)(E.Button,{...e,ref:t,icon:(0,v.isRTL)()?$t:Yt,label:(0,v.__)("Redo"),shortcut:r,"aria-disabled":!i,onClick:i?s:void 0,size:"compact"})})),qt=function(){const e=(0,L.useViewportMatch)("medium"),{isInserterOpen:t,isListViewOpen:r,inserterSidebarToggleRef:i,listViewToggleRef:s}=(0,l.useSelect)((e=>{const{isInserterOpened:t,getInserterSidebarToggleRef:r,isListViewOpened:i,getListViewToggleRef:s}=nt(e(ct));return{isInserterOpen:t(),isListViewOpen:i(),inserterSidebarToggleRef:r(),listViewToggleRef:s()}}),[]),{setIsInserterOpened:o,setIsListViewOpened:n}=(0,l.useDispatch)(ct),a=(0,h.useCallback)((()=>n(!r)),[n,r]),c=(0,h.useCallback)((()=>o(!t)),[o,t]);return(0,I.jsxs)(xe.NavigableToolbar,{className:"edit-widgets-header-toolbar","aria-label":(0,v.__)("Document tools"),variant:"unstyled",children:[(0,I.jsx)(E.ToolbarItem,{ref:i,as:E.Button,className:"edit-widgets-header-toolbar__inserter-toggle",variant:"primary",isPressed:t,onMouseDown:e=>{e.preventDefault()},onClick:c,icon:Ht
/* translators: button label text should, if possible, be under 16
      	characters. */,label:(0,v._x)("Block Inserter","Generic label for block inserter button"),size:"compact"}),e&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(E.ToolbarItem,{as:Zt}),(0,I.jsx)(E.ToolbarItem,{as:Kt}),(0,I.jsx)(E.ToolbarItem,{as:E.Button,className:"edit-widgets-header-toolbar__list-view-toggle",icon:Ut,isPressed:r
/* translators: button label text should, if possible, be under 16 characters. */,label:(0,v.__)("List View"),onClick:a,ref:s,size:"compact"})]})]})},Jt=function(){const{hasEditedWidgetAreaIds:e,isSaving:t}=(0,l.useSelect)((e=>{const{getEditedWidgetAreas:t,isSavingWidgetAreas:r}=e(ct);return{hasEditedWidgetAreaIds:t()?.length>0,isSaving:r()}}),[]),{saveEditedWidgetAreas:r}=(0,l.useDispatch)(ct),i=t||!e;return(0,I.jsx)(E.Button,{variant:"primary",isBusy:t,"aria-disabled":i,onClick:i?void 0:r,size:"compact",children:t?(0,v.__)("Saving…"):(0,v.__)("Update")})},Qt=(0,I.jsx)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,I.jsx)(A.Path,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"})}),Xt=(0,I.jsx)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,I.jsx)(A.Path,{d:"M19.5 4.5h-7V6h4.44l-5.97 5.97 1.06 1.06L18 7.06v4.44h1.5v-7Zm-13 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-3H17v3a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h3V5.5h-3Z"})}),er=[{keyCombination:{modifier:"primary",character:"b"},description:(0,v.__)("Make the selected text bold.")},{keyCombination:{modifier:"primary",character:"i"},description:(0,v.__)("Make the selected text italic.")},{keyCombination:{modifier:"primary",character:"k"},description:(0,v.__)("Convert the selected text into a link.")},{keyCombination:{modifier:"primaryShift",character:"k"},description:(0,v.__)("Remove a link.")},{keyCombination:{character:"[["},description:(0,v.__)("Insert a link to a post or page.")},{keyCombination:{modifier:"primary",character:"u"},description:(0,v.__)("Underline the selected text.")},{keyCombination:{modifier:"access",character:"d"},description:(0,v.__)("Strikethrough the selected text.")},{keyCombination:{modifier:"access",character:"x"},description:(0,v.__)("Make the selected text inline code.")},{keyCombination:{modifier:"access",character:"0"},aliases:[{modifier:"access",character:"7"}],description:(0,v.__)("Convert the current heading to a paragraph.")},{keyCombination:{modifier:"access",character:"1-6"},description:(0,v.__)("Convert the current paragraph or heading to a heading of level 1 to 6.")},{keyCombination:{modifier:"primaryShift",character:"SPACE"},description:(0,v.__)("Add non breaking space.")}];function tr({keyCombination:e,forceAriaLabel:t}){const r=e.modifier?vt.displayShortcutList[e.modifier](e.character):e.character,i=e.modifier?vt.shortcutAriaLabel[e.modifier](e.character):e.character,s=Array.isArray(r)?r:[r];return(0,I.jsx)("kbd",{className:"edit-widgets-keyboard-shortcut-help-modal__shortcut-key-combination","aria-label":t||i,children:s.map(((e,t)=>"+"===e?(0,I.jsx)(h.Fragment,{children:e},t):(0,I.jsx)("kbd",{className:"edit-widgets-keyboard-shortcut-help-modal__shortcut-key",children:e},t)))})}const rr=function({description:e,keyCombination:t,aliases:r=[],ariaLabel:i}){return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{className:"edit-widgets-keyboard-shortcut-help-modal__shortcut-description",children:e}),(0,I.jsxs)("div",{className:"edit-widgets-keyboard-shortcut-help-modal__shortcut-term",children:[(0,I.jsx)(tr,{keyCombination:t,forceAriaLabel:i}),r.map(((e,t)=>(0,I.jsx)(tr,{keyCombination:e,forceAriaLabel:i},t)))]})]})},ir=function({name:e}){const{keyCombination:t,description:r,aliases:i}=(0,l.useSelect)((t=>{const{getShortcutKeyCombination:r,getShortcutDescription:i,getShortcutAliases:s}=t(yt.store);return{keyCombination:r(e),aliases:s(e),description:i(e)}}),[e]);return t?(0,I.jsx)(rr,{keyCombination:t,description:r,aliases:i}):null},sr=({shortcuts:e})=>(0,I.jsx)("ul",{className:"edit-widgets-keyboard-shortcut-help-modal__shortcut-list",role:"list",children:e.map(((e,t)=>(0,I.jsx)("li",{className:"edit-widgets-keyboard-shortcut-help-modal__shortcut",children:"string"==typeof e?(0,I.jsx)(ir,{name:e}):(0,I.jsx)(rr,{...e})},t)))}),or=({title:e,shortcuts:t,className:r})=>(0,I.jsxs)("section",{className:S("edit-widgets-keyboard-shortcut-help-modal__section",r),children:[!!e&&(0,I.jsx)("h2",{className:"edit-widgets-keyboard-shortcut-help-modal__section-title",children:e}),(0,I.jsx)(sr,{shortcuts:t})]}),nr=({title:e,categoryName:t,additionalShortcuts:r=[]})=>{const i=(0,l.useSelect)((e=>e(yt.store).getCategoryShortcuts(t)),[t]);return(0,I.jsx)(or,{title:e,shortcuts:i.concat(r)})};function ar({isModalActive:e,toggleModal:t}){return(0,yt.useShortcut)("core/edit-widgets/keyboard-shortcuts",t,{bindGlobal:!0}),e?(0,I.jsxs)(E.Modal,{className:"edit-widgets-keyboard-shortcut-help-modal",title:(0,v.__)("Keyboard shortcuts"),onRequestClose:t,children:[(0,I.jsx)(or,{className:"edit-widgets-keyboard-shortcut-help-modal__main-shortcuts",shortcuts:["core/edit-widgets/keyboard-shortcuts"]}),(0,I.jsx)(nr,{title:(0,v.__)("Global shortcuts"),categoryName:"global"}),(0,I.jsx)(nr,{title:(0,v.__)("Selection shortcuts"),categoryName:"selection"}),(0,I.jsx)(nr,{title:(0,v.__)("Block shortcuts"),categoryName:"block",additionalShortcuts:[{keyCombination:{character:"/"},description:(0,v.__)("Change the block type after adding a new paragraph."),
/* translators: The forward-slash character. e.g. '/'. */
ariaLabel:(0,v.__)("Forward-slash")}]}),(0,I.jsx)(or,{title:(0,v.__)("Text formatting"),shortcuts:er}),(0,I.jsx)(nr,{title:(0,v.__)("List View shortcuts"),categoryName:"list-view"})]}):null}const{Fill:cr,Slot:dr}=(0,E.createSlotFill)("EditWidgetsToolsMoreMenuGroup");cr.Slot=({fillProps:e})=>(0,I.jsx)(dr,{fillProps:e,children:e=>e.length>0&&e});const lr=cr;function ur(){const[e,t]=(0,h.useState)(!1),r=()=>t(!e);(0,yt.useShortcut)("core/edit-widgets/keyboard-shortcuts",r);const i=(0,L.useViewportMatch)("medium");return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(E.DropdownMenu,{icon:Qt,label:(0,v.__)("Options"),popoverProps:{placement:"bottom-end",className:"more-menu-dropdown__content"},toggleProps:{tooltipPosition:"bottom",size:"compact"},children:e=>(0,I.jsxs)(I.Fragment,{children:[i&&(0,I.jsx)(E.MenuGroup,{label:(0,v._x)("View","noun"),children:(0,I.jsx)(b.PreferenceToggleMenuItem,{scope:"core/edit-widgets",name:"fixedToolbar",label:(0,v.__)("Top toolbar"),info:(0,v.__)("Access all block and document tools in a single place"),messageActivated:(0,v.__)("Top toolbar activated"),messageDeactivated:(0,v.__)("Top toolbar deactivated")})}),(0,I.jsxs)(E.MenuGroup,{label:(0,v.__)("Tools"),children:[(0,I.jsx)(E.MenuItem,{onClick:()=>{t(!0)},shortcut:vt.displayShortcut.access("h"),children:(0,v.__)("Keyboard shortcuts")}),(0,I.jsx)(b.PreferenceToggleMenuItem,{scope:"core/edit-widgets",name:"welcomeGuide",label:(0,v.__)("Welcome Guide")}),(0,I.jsxs)(E.MenuItem,{role:"menuitem",icon:Xt,href:(0,v.__)("https://wordpress.org/documentation/article/block-based-widgets-editor/"),target:"_blank",rel:"noopener noreferrer",children:[(0,v.__)("Help"),(0,I.jsx)(E.VisuallyHidden,{as:"span",children:/* translators: accessibility text */ /* translators: accessibility text */
(0,v.__)("(opens in a new tab)")})]}),(0,I.jsx)(lr.Slot,{fillProps:{onClose:e}})]}),(0,I.jsxs)(E.MenuGroup,{label:(0,v.__)("Preferences"),children:[(0,I.jsx)(b.PreferenceToggleMenuItem,{scope:"core/edit-widgets",name:"keepCaretInsideBlock",label:(0,v.__)("Contain text cursor inside block"),info:(0,v.__)("Aids screen readers by stopping text caret from leaving blocks."),messageActivated:(0,v.__)("Contain text cursor inside block activated"),messageDeactivated:(0,v.__)("Contain text cursor inside block deactivated")}),(0,I.jsx)(b.PreferenceToggleMenuItem,{scope:"core/edit-widgets",name:"themeStyles",info:(0,v.__)("Make the editor look like your theme."),label:(0,v.__)("Use theme styles")}),i&&(0,I.jsx)(b.PreferenceToggleMenuItem,{scope:"core/edit-widgets",name:"showBlockBreadcrumbs",label:(0,v.__)("Display block breadcrumbs"),info:(0,v.__)("Shows block breadcrumbs at the bottom of the editor."),messageActivated:(0,v.__)("Display block breadcrumbs activated"),messageDeactivated:(0,v.__)("Display block breadcrumbs deactivated")})]})]})}),(0,I.jsx)(ar,{isModalActive:e,toggleModal:r})]})}const gr=function(){const e=(0,L.useViewportMatch)("medium"),t=(0,h.useRef)(),{hasFixedToolbar:r}=(0,l.useSelect)((e=>({hasFixedToolbar:!!e(b.store).get("core/edit-widgets","fixedToolbar")})),[]);return(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)("div",{className:"edit-widgets-header",children:[(0,I.jsxs)("div",{className:"edit-widgets-header__navigable-toolbar-wrapper",children:[e&&(0,I.jsx)("h1",{className:"edit-widgets-header__title",children:(0,v.__)("Widgets")}),!e&&(0,I.jsx)(E.VisuallyHidden,{as:"h1",className:"edit-widgets-header__title",children:(0,v.__)("Widgets")}),(0,I.jsx)(qt,{}),r&&e&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{className:"selected-block-tools-wrapper",children:(0,I.jsx)(xe.BlockToolbar,{hideDragHandle:!0})}),(0,I.jsx)(E.Popover.Slot,{ref:t,name:"block-toolbar"})]})]}),(0,I.jsxs)("div",{className:"edit-widgets-header__actions",children:[(0,I.jsx)(le.Slot,{scope:"core/edit-widgets"}),(0,I.jsx)(Jt,{}),(0,I.jsx)(ur,{})]})]})})},pr=function(){const{removeNotice:e}=(0,l.useDispatch)(k.store),{notices:t}=(0,l.useSelect)((e=>({notices:e(k.store).getNotices()})),[]),r=t.filter((({isDismissible:e,type:t})=>e&&"default"===t)),i=t.filter((({isDismissible:e,type:t})=>!e&&"default"===t)),s=t.filter((({type:e})=>"snackbar"===e)).slice(-3);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(E.NoticeList,{notices:i,className:"edit-widgets-notices__pinned"}),(0,I.jsx)(E.NoticeList,{notices:r,className:"edit-widgets-notices__dismissible",onRemove:e}),(0,I.jsx)(E.SnackbarList,{notices:s,className:"edit-widgets-notices__snackbar",onRemove:e})]})};function hr({blockEditorSettings:e}){const t=(0,l.useSelect)((e=>!!e(b.store).get("core/edit-widgets","themeStyles")),[]),r=(0,L.useViewportMatch)("medium"),i=(0,h.useMemo)((()=>t?e.styles:[]),[e,t]);return(0,I.jsxs)("div",{className:"edit-widgets-block-editor",children:[(0,I.jsx)(pr,{}),!r&&(0,I.jsx)(xe.BlockToolbar,{hideDragHandle:!0}),(0,I.jsxs)(xe.BlockTools,{children:[(0,I.jsx)(jt,{}),(0,I.jsx)(xe.__unstableEditorStyles,{styles:i,scope:":where(.editor-styles-wrapper)"}),(0,I.jsx)(xe.BlockSelectionClearer,{children:(0,I.jsx)(xe.WritingFlow,{children:(0,I.jsx)(xe.BlockList,{className:"edit-widgets-main-block-list"})})})]})]})}const mr=(0,I.jsx)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,I.jsx)(A.Path,{d:"m13.06 12 6.47-6.47-1.06-1.06L12 10.94 5.53 4.47 4.47 5.53 10.94 12l-6.47 6.47 1.06 1.06L12 13.06l6.47 6.47 1.06-1.06L13.06 12Z"})}),_r=()=>{const e=(0,l.useSelect)((e=>{const{getEntityRecord:t}=e(_.store),r=t(ke,Se,"widget-areas");return r?.blocks[0]?.clientId}),[]);return(0,l.useSelect)((t=>{const{getBlockRootClientId:r,getBlockSelectionEnd:i,getBlockOrder:s,getBlockIndex:o}=t(xe.store),n=t(ct).__experimentalGetInsertionPoint();if(n.rootClientId)return n;const a=i()||e,c=r(a);return a&&""===c?{rootClientId:a,insertionIndex:s(a).length}:{rootClientId:c,insertionIndex:o(a)+1}}),[e])};function wr(){const e=(0,L.useViewportMatch)("medium","<"),{rootClientId:t,insertionIndex:r}=_r(),{setIsInserterOpened:i}=(0,l.useDispatch)(ct),s=(0,h.useCallback)((()=>i(!1)),[i]),o=e?"div":E.VisuallyHidden,[n,a]=(0,L.__experimentalUseDialog)({onClose:s,focusOnMount:!0}),c=(0,h.useRef)();return(0,I.jsxs)("div",{ref:n,...a,className:"edit-widgets-layout__inserter-panel",children:[(0,I.jsx)(o,{className:"edit-widgets-layout__inserter-panel-header",children:(0,I.jsx)(E.Button,{__next40pxDefaultSize:!0,icon:mr,onClick:s,label:(0,v.__)("Close Block Inserter")})}),(0,I.jsx)("div",{className:"edit-widgets-layout__inserter-panel-content",children:(0,I.jsx)(xe.__experimentalLibrary,{showInserterHelpPanel:!0,shouldFocusBlock:e,rootClientId:t,__experimentalInsertionIndex:r,ref:c})})]})}function br(){const{setIsListViewOpened:e}=(0,l.useDispatch)(ct),{getListViewToggleRef:t}=nt((0,l.useSelect)(ct)),[r,i]=(0,h.useState)(null),s=(0,L.useFocusOnMount)("firstElement"),o=(0,h.useCallback)((()=>{e(!1),t().current?.focus()}),[t,e]),n=(0,h.useCallback)((e=>{e.keyCode!==vt.ESCAPE||e.defaultPrevented||(e.preventDefault(),o())}),[o]);return(0,I.jsxs)("div",{className:"edit-widgets-editor__list-view-panel",onKeyDown:n,children:[(0,I.jsxs)("div",{className:"edit-widgets-editor__list-view-panel-header",children:[(0,I.jsx)("strong",{children:(0,v.__)("List View")}),(0,I.jsx)(E.Button,{__next40pxDefaultSize:!0,icon:R,label:(0,v.__)("Close"),onClick:o})]}),(0,I.jsx)("div",{className:"edit-widgets-editor__list-view-panel-content",ref:(0,L.useMergeRefs)([s,i]),children:(0,I.jsx)(xe.__experimentalListView,{dropZoneElement:r})})]})}function fr(){const{isInserterOpen:e,isListViewOpen:t}=(0,l.useSelect)((e=>{const{isInserterOpened:t,isListViewOpened:r}=e(ct);return{isInserterOpen:t(),isListViewOpen:r()}}),[]);return e?(0,I.jsx)(wr,{}):t?(0,I.jsx)(br,{}):null}const xr={
/* translators: accessibility text for the widgets screen top bar landmark region. */
header:(0,v.__)("Widgets top bar"),
/* translators: accessibility text for the widgets screen content landmark region. */
body:(0,v.__)("Widgets and blocks"),
/* translators: accessibility text for the widgets screen settings landmark region. */
sidebar:(0,v.__)("Widgets settings"),
/* translators: accessibility text for the widgets screen footer landmark region. */
footer:(0,v.__)("Widgets footer")},yr=function({blockEditorSettings:e}){const t=(0,L.useViewportMatch)("medium","<"),r=(0,L.useViewportMatch)("huge",">="),{setIsInserterOpened:i,setIsListViewOpened:s,closeGeneralSidebar:o}=(0,l.useDispatch)(ct),{hasBlockBreadCrumbsEnabled:n,hasSidebarEnabled:a,isInserterOpened:c,isListViewOpened:d}=(0,l.useSelect)((e=>({hasSidebarEnabled:!!e(X).getActiveComplementaryArea(ct.name),isInserterOpened:!!e(ct).isInserterOpened(),isListViewOpened:!!e(ct).isListViewOpened(),hasBlockBreadCrumbsEnabled:!!e(b.store).get("core/edit-widgets","showBlockBreadcrumbs")})),[]);(0,h.useEffect)((()=>{a&&!r&&(i(!1),s(!1))}),[a,r]),(0,h.useEffect)((()=>{!c&&!d||r||o()}),[c,d,r]);const u=d?(0,v.__)("List View"):(0,v.__)("Block Library"),g=d||c;return(0,I.jsx)(fe,{labels:{...xr,secondarySidebar:u},header:(0,I.jsx)(gr,{}),secondarySidebar:g&&(0,I.jsx)(fr,{}),sidebar:(0,I.jsx)(he.Slot,{scope:"core/edit-widgets"}),content:(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(hr,{blockEditorSettings:e})}),footer:n&&!t&&(0,I.jsx)("div",{className:"edit-widgets-layout__footer",children:(0,I.jsx)(xe.BlockBreadcrumb,{rootLabelText:(0,v.__)("Widgets")})})})};function vr(){const e=(0,l.useSelect)((e=>{const{getEditedWidgetAreas:t}=e(ct),r=t();return r?.length>0}),[]);return(0,h.useEffect)((()=>{const t=t=>{if(e)return t.returnValue=(0,v.__)("You have unsaved changes. If you proceed, they will be lost."),t.returnValue};return window.addEventListener("beforeunload",t),()=>{window.removeEventListener("beforeunload",t)}}),[e]),null}function kr(){var e;const t=(0,l.useSelect)((e=>!!e(b.store).get("core/edit-widgets","welcomeGuide")),[]),{toggle:r}=(0,l.useDispatch)(b.store),i=(0,l.useSelect)((e=>e(ct).getWidgetAreas({per_page:-1})),[]);if(!t)return null;const s=i?.every((e=>"wp_inactive_widgets"===e.id||e.widgets.every((e=>e.startsWith("block-"))))),o=null!==(e=i?.filter((e=>"wp_inactive_widgets"!==e.id)).length)&&void 0!==e?e:0;return(0,I.jsx)(E.Guide,{className:"edit-widgets-welcome-guide",contentLabel:(0,v.__)("Welcome to block Widgets"),finishButtonText:(0,v.__)("Get started"),onFinish:()=>r("core/edit-widgets","welcomeGuide"),pages:[{image:(0,I.jsx)(jr,{nonAnimatedSrc:"https://s.w.org/images/block-editor/welcome-canvas.svg",animatedSrc:"https://s.w.org/images/block-editor/welcome-canvas.gif"}),content:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("h1",{className:"edit-widgets-welcome-guide__heading",children:(0,v.__)("Welcome to block Widgets")}),s?(0,I.jsx)(I.Fragment,{children:(0,I.jsx)("p",{className:"edit-widgets-welcome-guide__text",children:(0,v.sprintf)(
// Translators: %s: Number of block areas in the current theme.
// Translators: %s: Number of block areas in the current theme.
(0,v._n)("Your theme provides %s “block” area for you to add and edit content. Try adding a search bar, social icons, or other types of blocks here and see how they’ll look on your site.","Your theme provides %s different “block” areas for you to add and edit content. Try adding a search bar, social icons, or other types of blocks here and see how they’ll look on your site.",o),o)})}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("p",{className:"edit-widgets-welcome-guide__text",children:(0,v.__)("You can now add any block to your site’s widget areas. Don’t worry, all of your favorite widgets still work flawlessly.")}),(0,I.jsxs)("p",{className:"edit-widgets-welcome-guide__text",children:[(0,I.jsx)("strong",{children:(0,v.__)("Want to stick with the old widgets?")})," ",(0,I.jsx)(E.ExternalLink,{href:(0,v.__)("https://wordpress.org/plugins/classic-widgets/"),children:(0,v.__)("Get the Classic Widgets plugin.")})]})]})]})},{image:(0,I.jsx)(jr,{nonAnimatedSrc:"https://s.w.org/images/block-editor/welcome-editor.svg",animatedSrc:"https://s.w.org/images/block-editor/welcome-editor.gif"}),content:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("h1",{className:"edit-widgets-welcome-guide__heading",children:(0,v.__)("Make each block your own")}),(0,I.jsx)("p",{className:"edit-widgets-welcome-guide__text",children:(0,v.__)("Each block comes with its own set of controls for changing things like color, width, and alignment. These will show and hide automatically when you have a block selected.")})]})},{image:(0,I.jsx)(jr,{nonAnimatedSrc:"https://s.w.org/images/block-editor/welcome-library.svg",animatedSrc:"https://s.w.org/images/block-editor/welcome-library.gif"}),content:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("h1",{className:"edit-widgets-welcome-guide__heading",children:(0,v.__)("Get to know the block library")}),(0,I.jsx)("p",{className:"edit-widgets-welcome-guide__text",children:(0,h.createInterpolateElement)((0,v.__)("All of the blocks available to you live in the block library. You’ll find it wherever you see the <InserterIconImage /> icon."),{InserterIconImage:(0,I.jsx)("img",{className:"edit-widgets-welcome-guide__inserter-icon",alt:(0,v.__)("inserter"),src:"data:image/svg+xml,%3Csvg width='18' height='18' viewBox='0 0 18 18' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='18' height='18' rx='2' fill='%231E1E1E'/%3E%3Cpath d='M9.22727 4V14M4 8.77273H14' stroke='white' stroke-width='1.5'/%3E%3C/svg%3E%0A"})})})]})},{image:(0,I.jsx)(jr,{nonAnimatedSrc:"https://s.w.org/images/block-editor/welcome-documentation.svg",animatedSrc:"https://s.w.org/images/block-editor/welcome-documentation.gif"}),content:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("h1",{className:"edit-widgets-welcome-guide__heading",children:(0,v.__)("Learn how to use the block editor")}),(0,I.jsx)("p",{className:"edit-widgets-welcome-guide__text",children:(0,h.createInterpolateElement)((0,v.__)("New to the block editor? Want to learn more about using it? <a>Here's a detailed guide.</a>"),{a:(0,I.jsx)(E.ExternalLink,{href:(0,v.__)("https://wordpress.org/documentation/article/wordpress-block-editor/")})})})]})}]})}function jr({nonAnimatedSrc:e,animatedSrc:t}){return(0,I.jsxs)("picture",{className:"edit-widgets-welcome-guide__image",children:[(0,I.jsx)("source",{srcSet:e,media:"(prefers-reduced-motion: reduce)"}),(0,I.jsx)("img",{src:t,width:"312",height:"240",alt:""})]})}const Sr=function({blockEditorSettings:e}){const{createErrorNotice:t}=(0,l.useDispatch)(k.store),r=(0,E.__unstableUseNavigateRegions)();return(0,I.jsx)(ft,{children:(0,I.jsx)("div",{className:r.className,...r,ref:r.ref,children:(0,I.jsxs)(Bt,{blockEditorSettings:e,children:[(0,I.jsx)(yr,{blockEditorSettings:e}),(0,I.jsx)(zt,{}),(0,I.jsx)(ee.PluginArea,{onError:function(e){t((0,v.sprintf)(/* translators: %s: plugin name */ /* translators: %s: plugin name */
(0,v.__)('The "%s" plugin has encountered an error and cannot be rendered.'),e))}}),(0,I.jsx)(vr,{}),(0,I.jsx)(kr,{})]})})})},Er=["core/more","core/freeform","core/template-part","core/block"],{registerCoreBlockBindingsSources:Ar}=nt(p.privateApis);function Ir(e,t){const r=document.getElementById(e),i=(0,h.createRoot)(r),s=(0,m.__experimentalGetCoreBlocks)().filter((e=>!(Er.includes(e.name)||e.name.startsWith("core/post")||e.name.startsWith("core/query")||e.name.startsWith("core/site")||e.name.startsWith("core/navigation"))));return(0,l.dispatch)(b.store).setDefaults("core/edit-widgets",{fixedToolbar:!1,welcomeGuide:!0,showBlockBreadcrumbs:!0,themeStyles:!0}),(0,l.dispatch)(d.store).reapplyBlockTypeFilters(),(0,m.registerCoreBlocks)(s),Ar(),(0,w.registerLegacyWidgetBlock)(),(0,m.__experimentalRegisterExperimentalCoreBlocks)({enableFSEBlocks:St}),(0,w.registerLegacyWidgetVariations)(t),Nr(c),(0,w.registerWidgetGroupBlock)(),t.__experimentalFetchLinkSuggestions=(e,r)=>(0,_.__experimentalFetchLinkSuggestions)(e,r,t),(0,d.setFreeformContentHandlerName)("core/html"),i.render((0,I.jsx)(h.StrictMode,{children:(0,I.jsx)(Sr,{blockEditorSettings:t})})),i}const Cr=Ir;function Br(){g()("wp.editWidgets.reinitializeEditor",{since:"6.2",version:"6.3"})}const Nr=e=>{if(!e)return;const{metadata:t,settings:r,name:i}=e;t&&(0,d.unstable__bootstrapServerSideBlockDefinitions)({[i]:t}),(0,d.registerBlockType)(i,r)};(window.wp=window.wp||{}).editWidgets=t})();
//# sourceMappingURL=index.min.js.map