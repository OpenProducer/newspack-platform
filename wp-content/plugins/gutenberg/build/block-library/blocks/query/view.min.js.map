{"version":3,"file":"./build/block-library/blocks/query/view.min.js","mappings":"yBAAA,IAAI,EAA+BA,OAAW,GAAiB,cCK/D,MAAMC,EAAgBC,GACrBA,GACAA,aAAeF,OAAOG,mBACtBD,EAAIE,QACAF,EAAIG,QAAyB,UAAfH,EAAIG,SACtBH,EAAII,SAAWN,OAAOO,SAASD,QAUhCE,EAAAA,EAAAA,OAAO,CACNC,UAAW,CACVC,KAAM,CACLC,MAAO,CACNC,eAAgBA,EAAIC,aACc,UAAjCA,EAAQH,KAAKC,MAAMG,UACpBC,gBAAiBA,EAAIF,aACa,WAAjCA,EAAQH,KAAKC,MAAMG,aAIvBE,QAAS,CACRN,KAAM,CACLC,MAAO,CACNM,SAAUC,OAAUC,QAAOjB,MAAKW,cAC/B,GAAKZ,EAAaC,IAvBAiB,MACL,IAAjBA,EAAMC,QACJD,EAAME,SACNF,EAAMG,SACNH,EAAMI,QACNJ,EAAMK,UACNL,EAAMM,kBAiBuBC,CAAcP,GAAU,CAClDA,EAAMQ,iBAEN,MAAMC,EAAK1B,EAAI2B,QAAS,2BACtBC,QAAQC,eAGJC,EAAUC,YAAY,KAC3BpB,EAAQH,KAAKC,MAAMuB,QAClBrB,EAAQH,KAAKC,MAAMwB,YACpBtB,EAAQH,KAAKC,MAAMG,UAAY,OAAO,GACpC,WAEGG,EAAAA,EAAAA,UAAUf,EAAIE,MAGpBgC,aAAcJ,GAKdnB,EAAQH,KAAKC,MAAMuB,QAClBrB,EAAQH,KAAKC,MAAM0B,YACjBxB,EAAQH,KAAKC,MAAMuB,UACrBrB,EAAQH,KAAKC,MAAM0B,WAChB,IACA,IAEJxB,EAAQH,KAAKC,MAAMG,UAAY,SAC/BD,EAAQH,KAAKC,MAAM2B,IAAMpC,EAAIE,KAG7B,MAAMmC,EAAe,0BAA0BX,qCAC/CY,SAASC,cAAeF,IAAeG,OACxC,GAEDC,SAAUzB,OAAUhB,UACdD,EAAaC,UACXyC,EAAAA,EAAAA,UAAUzC,EAAIE,KACrB,KAKJwC,QAAS,CACRlC,KAAM,CACLC,MAAO,CACNgC,SAAUzB,OAAUhB,MAAKW,cACnBA,EAAQH,KAAKC,MAAM2B,KAAOrC,EAAaC,UACrCyC,EAAAA,EAAAA,UAAUzC,EAAIE,KACrB,M","sources":["webpack://wp/external window [\"wp\",\"interactivity\"]","webpack://wp/./packages/block-library/build-module/query/@wordpress/block-library/src/query/view.js"],"sourcesContent":["var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"interactivity\"];","/**\n * WordPress dependencies\n */\nimport { store, navigate, prefetch } from '@wordpress/interactivity';\n\nconst isValidLink = ( ref ) =>\n\tref &&\n\tref instanceof window.HTMLAnchorElement &&\n\tref.href &&\n\t( ! ref.target || ref.target === '_self' ) &&\n\tref.origin === window.location.origin;\n\nconst isValidEvent = ( event ) =>\n\tevent.button === 0 && // Left clicks only.\n\t! event.metaKey && // Open in new tab (Mac).\n\t! event.ctrlKey && // Open in new tab (Windows).\n\t! event.altKey && // Download.\n\t! event.shiftKey &&\n\t! event.defaultPrevented;\n\nstore( {\n\tselectors: {\n\t\tcore: {\n\t\t\tquery: {\n\t\t\t\tstartAnimation: ( { context } ) =>\n\t\t\t\t\tcontext.core.query.animation === 'start',\n\t\t\t\tfinishAnimation: ( { context } ) =>\n\t\t\t\t\tcontext.core.query.animation === 'finish',\n\t\t\t},\n\t\t},\n\t},\n\tactions: {\n\t\tcore: {\n\t\t\tquery: {\n\t\t\t\tnavigate: async ( { event, ref, context } ) => {\n\t\t\t\t\tif ( isValidLink( ref ) && isValidEvent( event ) ) {\n\t\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\t\tconst id = ref.closest( '[data-wp-navigation-id]' )\n\t\t\t\t\t\t\t.dataset.wpNavigationId;\n\n\t\t\t\t\t\t// Don't announce the navigation immediately, wait 400 ms.\n\t\t\t\t\t\tconst timeout = setTimeout( () => {\n\t\t\t\t\t\t\tcontext.core.query.message =\n\t\t\t\t\t\t\t\tcontext.core.query.loadingText;\n\t\t\t\t\t\t\tcontext.core.query.animation = 'start';\n\t\t\t\t\t\t}, 400 );\n\n\t\t\t\t\t\tawait navigate( ref.href );\n\n\t\t\t\t\t\t// Dismiss loading message if it hasn't been added yet.\n\t\t\t\t\t\tclearTimeout( timeout );\n\n\t\t\t\t\t\t// Announce that the page has been loaded. If the message is the\n\t\t\t\t\t\t// same, we use a no-break space similar to the @wordpress/a11y\n\t\t\t\t\t\t// package: https://github.com/WordPress/gutenberg/blob/c395242b8e6ee20f8b06c199e4fc2920d7018af1/packages/a11y/src/filter-message.js#L20-L26\n\t\t\t\t\t\tcontext.core.query.message =\n\t\t\t\t\t\t\tcontext.core.query.loadedText +\n\t\t\t\t\t\t\t( context.core.query.message ===\n\t\t\t\t\t\t\tcontext.core.query.loadedText\n\t\t\t\t\t\t\t\t? '\\u00A0'\n\t\t\t\t\t\t\t\t: '' );\n\n\t\t\t\t\t\tcontext.core.query.animation = 'finish';\n\t\t\t\t\t\tcontext.core.query.url = ref.href;\n\n\t\t\t\t\t\t// Focus the first anchor of the Query block.\n\t\t\t\t\t\tconst firstAnchor = `[data-wp-navigation-id=${ id }] .wp-block-post-template a[href]`;\n\t\t\t\t\t\tdocument.querySelector( firstAnchor )?.focus();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tprefetch: async ( { ref } ) => {\n\t\t\t\t\tif ( isValidLink( ref ) ) {\n\t\t\t\t\t\tawait prefetch( ref.href );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t},\n\teffects: {\n\t\tcore: {\n\t\t\tquery: {\n\t\t\t\tprefetch: async ( { ref, context } ) => {\n\t\t\t\t\tif ( context.core.query.url && isValidLink( ref ) ) {\n\t\t\t\t\t\tawait prefetch( ref.href );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t},\n} );\n"],"names":["window","isValidLink","ref","HTMLAnchorElement","href","target","origin","location","store","selectors","core","query","startAnimation","context","animation","finishAnimation","actions","navigate","async","event","button","metaKey","ctrlKey","altKey","shiftKey","defaultPrevented","isValidEvent","preventDefault","id","closest","dataset","wpNavigationId","timeout","setTimeout","message","loadingText","clearTimeout","loadedText","url","firstAnchor","document","querySelector","focus","prefetch","effects"],"sourceRoot":""}