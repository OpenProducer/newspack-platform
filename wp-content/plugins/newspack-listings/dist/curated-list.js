(()=>{"use strict";var e={r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t);function r(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){if(n.status>=200&&n.status<300){var o=JSON.parse(n.responseText),s=n.getResponseHeader("next-url");return e.onSuccess(o,s)}return t?r(e,t-1):e.onError()}},n.open("GET",e.url),n.send()}function n(e){var t,r,n=!1;return e&&Array.isArray(e)&&(n=!0,e.length&&(t=e[0],r="html",!Object.prototype.hasOwnProperty.call(t,r)||"string"!=typeof e[0].html)&&(n=!1)),n}Array.prototype.forEach.call(document.querySelectorAll(".newspack-listings__curated-list.has-more-button"),(function(e){var t=e.querySelector("[data-next]");if(!t)return;var o=e.querySelector(".newspack-listings__list-container"),s=t.textContent.trim(),a=e.querySelector(".loading").textContent,i=!1;t.addEventListener("click",(function(){if(i)return!1;function c(){i=!1,e.classList.remove("is-loading"),e.classList.add("is-error"),t.textContent=s}i=!0,e.classList.remove("is-error"),e.classList.add("is-loading"),a&&(t.textContent=a),r({url:t.getAttribute("data-next"),onSuccess:function(r,a){if(!n(r))return c();if(r.length){var l=r.map((function(e){return e.html})).join("");o.insertAdjacentHTML("beforeend",l)}a&&t.setAttribute("data-next",a);r.length&&a||e.classList.remove("has-more-button");i=!1,e.classList.remove("is-loading"),t.textContent=s},onError:c},3)}))})),Array.prototype.forEach.call(document.querySelectorAll(".newspack-listings__curated-list.show-sort-ui"),(function(e){var t=e.querySelector(".newspack-listings__sort-ui"),o=e.querySelector(".newspack-listings__sort-select-control"),s=e.querySelectorAll('[name="newspack-listings__sort-order"]'),a=e.querySelector(".newspack-listings__sort-order-container");if(!(t&&o&&s.length&&a))return;var i=e.querySelector("[data-next]"),c=Array.prototype.concat.call(Array.prototype.slice.call(s),[o]),l=e.querySelector(".newspack-listings__list-container"),u=t.getAttribute("data-url"),d=e.classList.contains("has-more-button"),y=!1,f=t.querySelector("[selected]").value,g=t.querySelector("[checked]").value,p=function(t){if(y)return!1;y=!0,e.classList.remove("is-error"),e.classList.add("is-loading"),"select"===t.target.tagName.toLowerCase()?f=t.target.value:g=t.target.value,"post__in"===t.target.value?a.classList.add("is-hidden"):a.classList.remove("is-hidden");var o="".concat(u,"&").concat(encodeURIComponent("query[sortBy]"),"=").concat(f,"&").concat(encodeURIComponent("query[order]"),"=").concat(g);function s(){y=!1,e.classList.remove("is-loading"),e.classList.add("is-error")}d&&i&&(e.classList.add("has-more-button"),i.setAttribute("data-next",o)),r({url:o,onSuccess:function(t,r){if(!n(t))return s();if(t.length){l.textContent="";var o=t.map((function(e){return e.html})).join("");l.insertAdjacentHTML("beforeend",o)}r&&i&&i.setAttribute("data-next",r);y=!1,e.classList.remove("is-loading")},onError:s},3)};c.forEach((function(e){return e.addEventListener("change",p)}))}));var o=window;for(var s in t)o[s]=t[s];t.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})();