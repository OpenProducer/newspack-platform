(()=>{var e={2:(e,t,n)=>{var r=n(2199),o=n(4664),a=n(5950);e.exports=function(e){return r(e,a,o)}},79:(e,t,n)=>{var r=n(3702),o=n(80),a=n(4739),s=n(8655),i=n(1175);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=i,e.exports=c},80:(e,t,n)=>{var r=n(6025),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():o.call(t,n,1),--this.size,0))}},104:(e,t,n)=>{var r=n(3661);function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var s=e.apply(this,r);return n.cache=a.set(o,s)||a,s};return n.cache=new(o.Cache||r),n}o.Cache=r,e.exports=o},124:(e,t,n)=>{var r=n(9325);e.exports=function(){return r.Date.now()}},181:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},270:(e,t,n)=>{var r=n(7068),o=n(346);e.exports=function e(t,n,a,s,i){return t===n||(null==t||null==n||!o(t)&&!o(n)?t!=t&&n!=n:r(t,n,a,s,e,i))}},289:(e,t,n)=>{var r=n(2651);e.exports=function(e){return r(this,e).get(e)}},294:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},317:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}},346:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},361:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},392:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},583:(e,t,n)=>{var r=n(7237),o=n(7255),a=n(8586),s=n(7797);e.exports=function(e){return a(e)?r(s(e)):o(e)}},631:(e,t,n)=>{var r=n(8077),o=n(9326);e.exports=function(e,t){return null!=e&&o(e,t,r)}},641:(e,t,n)=>{var r=n(6649),o=n(5950);e.exports=function(e,t){return e&&r(e,t,o)}},659:(e,t,n)=>{var r=n(1873),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,i=r?r.toStringTag:void 0;e.exports=function(e){var t=a.call(e,i),n=e[i];try{e[i]=void 0;var r=!0}catch(e){}var o=s.call(e);return r&&(t?e[i]=n:delete e[i]),o}},689:(e,t,n)=>{var r=n(2),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,a,s,i){var c=1&n,l=r(e),p=l.length;if(p!=r(t).length&&!c)return!1;for(var u=p;u--;){var d=l[u];if(!(c?d in t:o.call(t,d)))return!1}var h=i.get(e),f=i.get(t);if(h&&f)return h==t&&f==e;var v=!0;i.set(e,t),i.set(t,e);for(var g=c;++u<p;){var _=e[d=l[u]],m=t[d];if(a)var w=c?a(m,_,d,t,e,i):a(_,m,d,e,t,i);if(!(void 0===w?_===m||s(_,m,n,a,i):w)){v=!1;break}g||(g="constructor"==d)}if(v&&!g){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(v=!1)}return i.delete(e),i.delete(t),v}},695:(e,t,n)=>{var r=n(8096),o=n(2428),a=n(6449),s=n(3656),i=n(361),c=n(7167),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=a(e),p=!n&&o(e),u=!n&&!p&&s(e),d=!n&&!p&&!u&&c(e),h=n||p||u||d,f=h?r(e.length,String):[],v=f.length;for(var g in e)!t&&!l.call(e,g)||h&&("length"==g||u&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||i(g,v))||f.push(g);return f}},756:(e,t,n)=>{var r=n(3805);e.exports=function(e){return e==e&&!r(e)}},776:(e,t,n)=>{var r=n(756),o=n(5950);e.exports=function(e){for(var t=o(e),n=t.length;n--;){var a=t[n],s=e[a];t[n]=[a,s,r(s)]}return t}},909:(e,t,n)=>{var r=n(641),o=n(8329)(r);e.exports=o},916:(e,t,n)=>{var r=n(909);e.exports=function(e,t){var n;return r(e,function(e,r,o){return!(n=t(e,r,o))}),!!n}},938:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},945:(e,t,n)=>{var r=n(79),o=n(8223),a=n(3661);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!o||s.length<199)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(s)}return n.set(e,t),this.size=n.size,this}},999:(e,t,n)=>{var r=n(9302),o=n(6800);e.exports=function(e){return r(function(t,n){var r=-1,a=n.length,s=a>1?n[a-1]:void 0,i=a>2?n[2]:void 0;for(s=e.length>3&&"function"==typeof s?(a--,s):void 0,i&&o(n[0],n[1],i)&&(s=a<3?void 0:s,a=1),t=Object(t);++r<a;){var c=n[r];c&&e(t,c,r,s)}return t})}},1033:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},1042:(e,t,n)=>{var r=n(6110)(Object,"create");e.exports=r},1175:(e,t,n)=>{var r=n(6025);e.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},1331:(e,t,n)=>{var r=n(2552),o=n(8879),a=n(346),s=Function.prototype,i=Object.prototype,c=s.toString,l=i.hasOwnProperty,p=c.call(Object);e.exports=function(e){if(!a(e)||"[object Object]"!=r(e))return!1;var t=o(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==p}},1380:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},1420:(e,t,n)=>{var r=n(79);e.exports=function(){this.__data__=new r,this.size=0}},1459:e=>{e.exports=function(e){return this.__data__.has(e)}},1489:(e,t,n)=>{var r=n(7400);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},1549:(e,t,n)=>{var r=n(2032),o=n(3862),a=n(6721),s=n(2749),i=n(5749);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=i,e.exports=c},1769:(e,t,n)=>{var r=n(6449),o=n(8586),a=n(1802),s=n(3222);e.exports=function(e,t){return r(e)?e:o(e,t)?[e]:a(s(e))}},1791:(e,t,n)=>{var r=n(6547),o=n(3360);e.exports=function(e,t,n,a){var s=!n;n||(n={});for(var i=-1,c=t.length;++i<c;){var l=t[i],p=a?a(n[l],e[l],l,n,e):void 0;void 0===p&&(p=e[l]),s?o(n,l,p):r(n,l,p)}return n}},1799:(e,t,n)=>{var r=n(7217),o=n(270);e.exports=function(e,t,n,a){var s=n.length,i=s,c=!a;if(null==e)return!i;for(e=Object(e);s--;){var l=n[s];if(c&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<i;){var p=(l=n[s])[0],u=e[p],d=l[1];if(c&&l[2]){if(void 0===u&&!(p in e))return!1}else{var h=new r;if(a)var f=a(u,d,p,e,t,h);if(!(void 0===f?o(d,u,3,a,h):f))return!1}}return!0}},1800:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},1802:(e,t,n)=>{var r=n(2224),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,s=r(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,function(e,n,r,o){t.push(r?o.replace(a,"$1"):n||e)}),t});e.exports=s},1811:e=>{var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var o=t(),a=16-(o-r);if(r=o,a>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},1873:(e,t,n)=>{var r=n(9325).Symbol;e.exports=r},1882:(e,t,n)=>{var r=n(2552),o=n(3805);e.exports=function(e){if(!o(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1961:(e,t,n)=>{var r=n(9653);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},1986:(e,t,n)=>{var r=n(1873),o=n(7828),a=n(5288),s=n(5911),i=n(317),c=n(4247),l=r?r.prototype:void 0,p=l?l.valueOf:void 0;e.exports=function(e,t,n,r,l,u,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var h=i;case"[object Set]":var f=1&r;if(h||(h=c),e.size!=t.size&&!f)return!1;var v=d.get(e);if(v)return v==t;r|=2,d.set(e,t);var g=s(h(e),h(t),r,l,u,d);return d.delete(e),g;case"[object Symbol]":if(p)return p.call(e)==p.call(t)}return!1}},2006:(e,t,n)=>{var r=n(5389),o=n(4894),a=n(5950);e.exports=function(e){return function(t,n,s){var i=Object(t);if(!o(t)){var c=r(n,3);t=a(t),n=function(e){return c(i[e],e,i)}}var l=e(t,n,s);return l>-1?i[c?t[l]:l]:void 0}}},2032:(e,t,n)=>{var r=n(1042);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},2193:(e,t,n)=>{var r=n(8984),o=n(5861),a=n(2428),s=n(6449),i=n(4894),c=n(3656),l=n(5527),p=n(7167),u=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(i(e)&&(s(e)||"string"==typeof e||"function"==typeof e.splice||c(e)||p(e)||a(e)))return!e.length;var t=o(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(l(e))return!r(e).length;for(var n in e)if(u.call(e,n))return!1;return!0}},2199:(e,t,n)=>{var r=n(4528),o=n(6449);e.exports=function(e,t,n){var a=t(e);return o(e)?a:r(a,n(e))}},2224:(e,t,n)=>{var r=n(104);e.exports=function(e){var t=r(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}},2426:(e,t,n)=>{var r=n(4248),o=n(5389),a=n(916),s=n(6449),i=n(6800);e.exports=function(e,t,n){var c=s(e)?r:a;return n&&i(e,t,n)&&(t=void 0),c(e,o(t,3))}},2428:(e,t,n)=>{var r=n(7534),o=n(346),a=Object.prototype,s=a.hasOwnProperty,i=a.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return o(e)&&s.call(e,"callee")&&!i.call(e,"callee")};e.exports=c},2523:e=>{e.exports=function(e,t,n,r){for(var o=e.length,a=n+(r?1:-1);r?a--:++a<o;)if(t(e[a],a,e))return a;return-1}},2552:(e,t,n)=>{var r=n(1873),o=n(659),a=n(9350),s=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?o(e):a(e)}},2651:(e,t,n)=>{var r=n(4218);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},2694:(e,t,n)=>{"use strict";var r=n(6925);function o(){}function a(){}a.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,a,s){if(s!==r){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return n.PropTypes=n,n}},2749:(e,t,n)=>{var r=n(1042),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}},2799:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,i=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,p=n?Symbol.for("react.async_mode"):60111,u=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,_=n?Symbol.for("react.block"):60121,m=n?Symbol.for("react.fundamental"):60117,w=n?Symbol.for("react.responder"):60118,y=n?Symbol.for("react.scope"):60119;function b(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case p:case u:case a:case i:case s:case h:return e;default:switch(e=e&&e.$$typeof){case l:case d:case g:case v:case c:return e;default:return t}}case o:return t}}}function x(e){return b(e)===u}t.AsyncMode=p,t.ConcurrentMode=u,t.ContextConsumer=l,t.ContextProvider=c,t.Element=r,t.ForwardRef=d,t.Fragment=a,t.Lazy=g,t.Memo=v,t.Portal=o,t.Profiler=i,t.StrictMode=s,t.Suspense=h,t.isAsyncMode=function(e){return x(e)||b(e)===p},t.isConcurrentMode=x,t.isContextConsumer=function(e){return b(e)===l},t.isContextProvider=function(e){return b(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===d},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===g},t.isMemo=function(e){return b(e)===v},t.isPortal=function(e){return b(e)===o},t.isProfiler=function(e){return b(e)===i},t.isStrictMode=function(e){return b(e)===s},t.isSuspense=function(e){return b(e)===h},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===u||e===i||e===s||e===h||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===v||e.$$typeof===c||e.$$typeof===l||e.$$typeof===d||e.$$typeof===m||e.$$typeof===w||e.$$typeof===y||e.$$typeof===_)},t.typeOf=b},2804:(e,t,n)=>{var r=n(6110)(n(9325),"Promise");e.exports=r},2824:(e,t,n)=>{var r=n(7805),o=n(3290),a=n(1961),s=n(3007),i=n(5529),c=n(2428),l=n(6449),p=n(3693),u=n(3656),d=n(1882),h=n(3805),f=n(1331),v=n(7167),g=n(4974),_=n(9884);e.exports=function(e,t,n,m,w,y,b){var x=g(e,n),k=g(t,n),j=b.get(k);if(j)r(e,n,j);else{var S=y?y(x,k,n+"",e,t,b):void 0,C=void 0===S;if(C){var P=l(k),O=!P&&u(k),T=!P&&!O&&v(k);S=k,P||O||T?l(x)?S=x:p(x)?S=s(x):O?(C=!1,S=o(k,!0)):T?(C=!1,S=a(k,!0)):S=[]:f(k)||c(k)?(S=x,c(x)?S=_(x):h(x)&&!d(x)||(S=i(k))):C=!1}C&&(b.set(k,S),w(S,k,m,y,b),b.delete(k)),r(e,n,S)}}},2865:(e,t,n)=>{var r=n(9570),o=n(1811)(r);e.exports=o},2903:(e,t,n)=>{var r=n(3805),o=n(5527),a=n(181),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=o(e),n=[];for(var i in e)("constructor"!=i||!t&&s.call(e,i))&&n.push(i);return n}},2949:(e,t,n)=>{var r=n(2651);e.exports=function(e,t){var n=r(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},3007:e=>{e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},3040:(e,t,n)=>{var r=n(1549),o=n(79),a=n(8223);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||o),string:new r}}},3170:(e,t,n)=>{var r=n(6547),o=n(1769),a=n(361),s=n(3805),i=n(7797);e.exports=function(e,t,n,c){if(!s(e))return e;for(var l=-1,p=(t=o(t,e)).length,u=p-1,d=e;null!=d&&++l<p;){var h=i(t[l]),f=n;if("__proto__"===h||"constructor"===h||"prototype"===h)return e;if(l!=u){var v=d[h];void 0===(f=c?c(v,h,d):void 0)&&(f=s(v)?v:a(t[l+1])?[]:{})}r(d,h,f),d=d[h]}return e}},3221:e=>{e.exports=function(e){return function(t,n,r){for(var o=-1,a=Object(t),s=r(t),i=s.length;i--;){var c=s[e?i:++o];if(!1===n(a[c],c,a))break}return t}}},3222:(e,t,n)=>{var r=n(7556);e.exports=function(e){return null==e?"":r(e)}},3243:(e,t,n)=>{var r=n(6110),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},3290:(e,t,n)=>{e=n.nmd(e);var r=n(9325),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Buffer:void 0,i=s?s.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=i?i(n):new e.constructor(n);return e.copy(r),r}},3345:e=>{e.exports=function(){return[]}},3360:(e,t,n)=>{var r=n(3243);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},3488:e=>{e.exports=function(e){return e}},3560:(e,t,n)=>{var r=n(3170);e.exports=function(e,t,n){return null==e?e:r(e,t,n)}},3605:e=>{e.exports=function(e){return this.__data__.get(e)}},3650:(e,t,n)=>{var r=n(4335)(Object.keys,Object);e.exports=r},3656:(e,t,n)=>{e=n.nmd(e);var r=n(9325),o=n(9935),a=t&&!t.nodeType&&t,s=a&&e&&!e.nodeType&&e,i=s&&s.exports===a?r.Buffer:void 0,c=(i?i.isBuffer:void 0)||o;e.exports=c},3661:(e,t,n)=>{var r=n(3040),o=n(7670),a=n(289),s=n(4509),i=n(2949);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=i,e.exports=c},3663:(e,t,n)=>{var r=n(1799),o=n(776),a=n(7197);e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},3693:(e,t,n)=>{var r=n(4894),o=n(346);e.exports=function(e){return o(e)&&r(e)}},3702:e=>{e.exports=function(){this.__data__=[],this.size=0}},3805:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},3862:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},4128:(e,t,n)=>{var r=n(1800),o=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},4146:(e,t,n)=>{"use strict";var r=n(4363),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};function c(e){return r.isMemo(e)?s:i[e.$$typeof]||o}i[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i[r.Memo]=s;var l=Object.defineProperty,p=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(f){var o=h(n);o&&o!==f&&e(t,o,r)}var s=p(n);u&&(s=s.concat(u(n)));for(var i=c(t),v=c(n),g=0;g<s.length;++g){var _=s[g];if(!(a[_]||r&&r[_]||v&&v[_]||i&&i[_])){var m=d(n,_);try{l(t,_,m)}catch(e){}}}}return t}},4218:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},4247:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},4248:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},4335:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},4363:(e,t,n)=>{"use strict";e.exports=n(2799)},4394:(e,t,n)=>{var r=n(2552),o=n(346);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==r(e)}},4509:(e,t,n)=>{var r=n(2651);e.exports=function(e){return r(this,e).has(e)}},4528:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},4664:(e,t,n)=>{var r=n(9770),o=n(3345),a=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(e){return null==e?[]:(e=Object(e),r(s(e),function(t){return a.call(e,t)}))}:o;e.exports=i},4713:(e,t,n)=>{var r=n(2523),o=n(5389),a=n(1489),s=Math.max;e.exports=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var c=null==n?0:a(n);return c<0&&(c=s(i+c,0)),r(e,o(t,3),c)}},4739:(e,t,n)=>{var r=n(6025);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},4840:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},4894:(e,t,n)=>{var r=n(1882),o=n(294);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},4901:(e,t,n)=>{var r=n(2552),o=n(294),a=n(346),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&o(e.length)&&!!s[r(e)]}},4932:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}},4974:e=>{e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},5015:(e,t,n)=>{var r=n(2552),o=n(6449),a=n(346);e.exports=function(e){return"string"==typeof e||!o(e)&&a(e)&&"[object String]"==r(e)}},5083:(e,t,n)=>{var r=n(1882),o=n(7296),a=n(3805),s=n(7473),i=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,p=c.toString,u=l.hasOwnProperty,d=RegExp("^"+p.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||o(e))&&(r(e)?d:i).test(s(e))}},5250:(e,t,n)=>{var r=n(7217),o=n(7805),a=n(6649),s=n(2824),i=n(3805),c=n(7241),l=n(4974);e.exports=function e(t,n,p,u,d){t!==n&&a(n,function(a,c){if(d||(d=new r),i(a))s(t,n,c,p,e,u,d);else{var h=u?u(l(t,c),a,c+"",t,n,d):void 0;void 0===h&&(h=a),o(t,c,h)}},c)}},5288:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},5389:(e,t,n)=>{var r=n(3663),o=n(7978),a=n(3488),s=n(6449),i=n(583);e.exports=function(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?s(e)?o(e[0],e[1]):r(e):i(e)}},5481:(e,t,n)=>{var r=n(9325)["__core-js_shared__"];e.exports=r},5527:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},5529:(e,t,n)=>{var r=n(9344),o=n(8879),a=n(5527);e.exports=function(e){return"function"!=typeof e.constructor||a(e)?{}:r(o(e))}},5556:(e,t,n)=>{e.exports=n(2694)()},5580:(e,t,n)=>{var r=n(6110)(n(9325),"DataView");e.exports=r},5749:(e,t,n)=>{var r=n(1042);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},5861:(e,t,n)=>{var r=n(5580),o=n(8223),a=n(2804),s=n(6545),i=n(8303),c=n(2552),l=n(7473),p="[object Map]",u="[object Promise]",d="[object Set]",h="[object WeakMap]",f="[object DataView]",v=l(r),g=l(o),_=l(a),m=l(s),w=l(i),y=c;(r&&y(new r(new ArrayBuffer(1)))!=f||o&&y(new o)!=p||a&&y(a.resolve())!=u||s&&y(new s)!=d||i&&y(new i)!=h)&&(y=function(e){var t=c(e),n="[object Object]"==t?e.constructor:void 0,r=n?l(n):"";if(r)switch(r){case v:return f;case g:return p;case _:return u;case m:return d;case w:return h}return t}),e.exports=y},5911:(e,t,n)=>{var r=n(8859),o=n(4248),a=n(9219);e.exports=function(e,t,n,s,i,c){var l=1&n,p=e.length,u=t.length;if(p!=u&&!(l&&u>p))return!1;var d=c.get(e),h=c.get(t);if(d&&h)return d==t&&h==e;var f=-1,v=!0,g=2&n?new r:void 0;for(c.set(e,t),c.set(t,e);++f<p;){var _=e[f],m=t[f];if(s)var w=l?s(m,_,f,t,e,c):s(_,m,f,e,t,c);if(void 0!==w){if(w)continue;v=!1;break}if(g){if(!o(t,function(e,t){if(!a(g,t)&&(_===e||i(_,e,n,s,c)))return g.push(t)})){v=!1;break}}else if(_!==m&&!i(_,m,n,s,c)){v=!1;break}}return c.delete(e),c.delete(t),v}},5950:(e,t,n)=>{var r=n(695),o=n(8984),a=n(4894);e.exports=function(e){return a(e)?r(e):o(e)}},6009:(e,t,n)=>{e=n.nmd(e);var r=n(4840),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,s=a&&a.exports===o&&r.process,i=function(){try{return a&&a.require&&a.require("util").types||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=i},6025:(e,t,n)=>{var r=n(5288);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},6110:(e,t,n)=>{var r=n(5083),o=n(392);e.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},6139:(e,t,n)=>{var r=n(6547),o=n(1791),a=n(999),s=n(4894),i=n(5527),c=n(5950),l=Object.prototype.hasOwnProperty,p=a(function(e,t){if(i(t)||s(t))o(t,c(t),e);else for(var n in t)l.call(t,n)&&r(e,n,t[n])});e.exports=p},6449:e=>{var t=Array.isArray;e.exports=t},6545:(e,t,n)=>{var r=n(6110)(n(9325),"Set");e.exports=r},6547:(e,t,n)=>{var r=n(3360),o=n(5288),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var s=e[t];a.call(e,t)&&o(s,n)&&(void 0!==n||t in e)||r(e,t,n)}},6574:(e,t,n)=>{var r=n(909);e.exports=function(e,t){var n=[];return r(e,function(e,r,o){t(e,r,o)&&n.push(e)}),n}},6649:(e,t,n)=>{var r=n(3221)();e.exports=r},6721:(e,t,n)=>{var r=n(1042),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(t,e)?t[e]:void 0}},6757:(e,t,n)=>{var r=n(1033),o=Math.max;e.exports=function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var a=arguments,s=-1,i=o(a.length-t,0),c=Array(i);++s<i;)c[s]=a[t+s];s=-1;for(var l=Array(t+1);++s<t;)l[s]=a[s];return l[t]=n(c),r(e,this,l)}}},6800:(e,t,n)=>{var r=n(5288),o=n(4894),a=n(361),s=n(3805);e.exports=function(e,t,n){if(!s(n))return!1;var i=typeof t;return!!("number"==i?o(n)&&a(t,n.length):"string"==i&&t in n)&&r(n[t],e)}},6924:(e,t,n)=>{var r=n(5250),o=n(999)(function(e,t,n,o){r(e,t,n,o)});e.exports=o},6925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},6942:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=s(e,a(n)))}return e}function a(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=s(t,n));return t}function s(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},7068:(e,t,n)=>{var r=n(7217),o=n(5911),a=n(1986),s=n(689),i=n(5861),c=n(6449),l=n(3656),p=n(7167),u="[object Arguments]",d="[object Array]",h="[object Object]",f=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,v,g,_){var m=c(e),w=c(t),y=m?d:i(e),b=w?d:i(t),x=(y=y==u?h:y)==h,k=(b=b==u?h:b)==h,j=y==b;if(j&&l(e)){if(!l(t))return!1;m=!0,x=!1}if(j&&!x)return _||(_=new r),m||p(e)?o(e,t,n,v,g,_):a(e,t,y,n,v,g,_);if(!(1&n)){var S=x&&f.call(e,"__wrapped__"),C=k&&f.call(t,"__wrapped__");if(S||C){var P=S?e.value():e,O=C?t.value():t;return _||(_=new r),g(P,O,n,v,_)}}return!!j&&(_||(_=new r),s(e,t,n,v,g,_))}},7167:(e,t,n)=>{var r=n(4901),o=n(7301),a=n(6009),s=a&&a.isTypedArray,i=s?o(s):r;e.exports=i},7197:e=>{e.exports=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},7217:(e,t,n)=>{var r=n(79),o=n(1420),a=n(938),s=n(3605),i=n(9817),c=n(945);function l(e){var t=this.__data__=new r(e);this.size=t.size}l.prototype.clear=o,l.prototype.delete=a,l.prototype.get=s,l.prototype.has=i,l.prototype.set=c,e.exports=l},7237:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},7241:(e,t,n)=>{var r=n(695),o=n(2903),a=n(4894);e.exports=function(e){return a(e)?r(e,!0):o(e)}},7255:(e,t,n)=>{var r=n(7422);e.exports=function(e){return function(t){return r(t,e)}}},7296:(e,t,n)=>{var r,o=n(5481),a=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!a&&a in e}},7301:e=>{e.exports=function(e){return function(t){return e(t)}}},7309:(e,t,n)=>{var r=n(2006)(n(4713));e.exports=r},7334:e=>{e.exports=function(e){return function(){return e}}},7400:(e,t,n)=>{var r=n(9374),o=1/0;e.exports=function(e){return e?(e=r(e))===o||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},7422:(e,t,n)=>{var r=n(1769),o=n(7797);e.exports=function(e,t){for(var n=0,a=(t=r(t,e)).length;null!=e&&n<a;)e=e[o(t[n++])];return n&&n==a?e:void 0}},7473:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},7534:(e,t,n)=>{var r=n(2552),o=n(346);e.exports=function(e){return o(e)&&"[object Arguments]"==r(e)}},7556:(e,t,n)=>{var r=n(1873),o=n(4932),a=n(6449),s=n(4394),i=r?r.prototype:void 0,c=i?i.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(a(t))return o(t,e)+"";if(s(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},7612:(e,t,n)=>{var r=n(9770),o=n(6574),a=n(5389),s=n(6449);e.exports=function(e,t){return(s(e)?r:o)(e,a(t,3))}},7670:(e,t,n)=>{var r=n(2651);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},7797:(e,t,n)=>{var r=n(4394);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},7805:(e,t,n)=>{var r=n(3360),o=n(5288);e.exports=function(e,t,n){(void 0!==n&&!o(e[t],n)||void 0===n&&!(t in e))&&r(e,t,n)}},7828:(e,t,n)=>{var r=n(9325).Uint8Array;e.exports=r},7978:(e,t,n)=>{var r=n(270),o=n(8156),a=n(631),s=n(8586),i=n(756),c=n(7197),l=n(7797);e.exports=function(e,t){return s(e)&&i(t)?c(l(e),t):function(n){var s=o(n,e);return void 0===s&&s===t?a(n,e):r(t,s,3)}}},8077:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},8096:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},8156:(e,t,n)=>{var r=n(7422);e.exports=function(e,t,n){var o=null==e?void 0:r(e,t);return void 0===o?n:o}},8221:(e,t,n)=>{var r=n(3805),o=n(124),a=n(9374),s=Math.max,i=Math.min;e.exports=function(e,t,n){var c,l,p,u,d,h,f=0,v=!1,g=!1,_=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var n=c,r=l;return c=l=void 0,f=t,u=e.apply(r,n)}function w(e){var n=e-h;return void 0===h||n>=t||n<0||g&&e-f>=p}function y(){var e=o();if(w(e))return b(e);d=setTimeout(y,function(e){var n=t-(e-h);return g?i(n,p-(e-f)):n}(e))}function b(e){return d=void 0,_&&c?m(e):(c=l=void 0,u)}function x(){var e=o(),n=w(e);if(c=arguments,l=this,h=e,n){if(void 0===d)return function(e){return f=e,d=setTimeout(y,t),v?m(e):u}(h);if(g)return clearTimeout(d),d=setTimeout(y,t),m(h)}return void 0===d&&(d=setTimeout(y,t)),u}return t=a(t)||0,r(n)&&(v=!!n.leading,p=(g="maxWait"in n)?s(a(n.maxWait)||0,t):p,_="trailing"in n?!!n.trailing:_),x.cancel=function(){void 0!==d&&clearTimeout(d),f=0,c=h=l=d=void 0},x.flush=function(){return void 0===d?u:b(o())},x}},8223:(e,t,n)=>{var r=n(6110)(n(9325),"Map");e.exports=r},8303:(e,t,n)=>{var r=n(6110)(n(9325),"WeakMap");e.exports=r},8329:(e,t,n)=>{var r=n(4894);e.exports=function(e,t){return function(n,o){if(null==n)return n;if(!r(n))return e(n,o);for(var a=n.length,s=t?a:-1,i=Object(n);(t?s--:++s<a)&&!1!==o(i[s],s,i););return n}}},8505:(e,t,n)=>{var r=n(9375);e.exports=function e(t,n,o){return r(n)||(o=n||o,n=[]),o=o||{},t instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return d(e,t)}(t,n):r(t)?function(t,n,r){for(var o=[],a=0;a<t.length;a++)o.push(e(t[a],n,r).source);return d(new RegExp("(?:"+o.join("|")+")",h(r)),n)}(t,n,o):function(e,t,n){return f(a(e,n),t,n)}(t,n,o)},e.exports.parse=a,e.exports.compile=function(e,t){return l(a(e,t),t)},e.exports.tokensToFunction=l,e.exports.tokensToRegExp=f;var o=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,i=0,c="",l=t&&t.delimiter||"/";null!=(n=o.exec(e));){var p=n[0],d=n[1],h=n.index;if(c+=e.slice(i,h),i=h+p.length,d)c+=d[1];else{var f=e[i],v=n[2],g=n[3],_=n[4],m=n[5],w=n[6],y=n[7];c&&(r.push(c),c="");var b=null!=v&&null!=f&&f!==v,x="+"===w||"*"===w,k="?"===w||"*"===w,j=v||l,S=_||m,C=v||("string"==typeof r[r.length-1]?r[r.length-1]:"");r.push({name:g||a++,prefix:v||"",delimiter:j,optional:k,repeat:x,partial:b,asterisk:!!y,pattern:S?u(S):y?".*":s(j,C)})}}return i<e.length&&(c+=e.substr(i)),c&&r.push(c),r}function s(e,t){return!t||t.indexOf(e)>-1?"[^"+p(e)+"]+?":p(t)+"|(?:(?!"+p(t)+")[^"+p(e)+"])+?"}function i(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function c(e){return encodeURI(e).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function l(e,t){for(var n=new Array(e.length),o=0;o<e.length;o++)"object"==typeof e[o]&&(n[o]=new RegExp("^(?:"+e[o].pattern+")$",h(t)));return function(t,o){for(var a="",s=t||{},l=(o||{}).pretty?i:encodeURIComponent,p=0;p<e.length;p++){var u=e[p];if("string"!=typeof u){var d,h=s[u.name];if(null==h){if(u.optional){u.partial&&(a+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(r(h)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var f=0;f<h.length;f++){if(d=l(h[f]),!n[p].test(d))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(d)+"`");a+=(0===f?u.prefix:u.delimiter)+d}}else{if(d=u.asterisk?c(h):l(h),!n[p].test(d))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+d+'"');a+=u.prefix+d}}else a+=u}return a}}function p(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function u(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function d(e,t){return e.keys=t,e}function h(e){return e&&e.sensitive?"":"i"}function f(e,t,n){r(t)||(n=t||n,t=[]);for(var o=(n=n||{}).strict,a=!1!==n.end,s="",i=0;i<e.length;i++){var c=e[i];if("string"==typeof c)s+=p(c);else{var l=p(c.prefix),u="(?:"+c.pattern+")";t.push(c),c.repeat&&(u+="(?:"+l+u+")*"),s+=u=c.optional?c.partial?l+"("+u+")?":"(?:"+l+"("+u+"))?":l+"("+u+")"}}var f=p(n.delimiter||"/"),v=s.slice(-f.length)===f;return o||(s=(v?s.slice(0,-f.length):s)+"(?:"+f+"(?=$))?"),s+=a?"$":o&&v?"":"(?="+f+"|$)",d(new RegExp("^"+s,h(n)),t)}},8586:(e,t,n)=>{var r=n(6449),o=n(4394),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!o(e))||s.test(e)||!a.test(e)||null!=t&&e in Object(t)}},8655:(e,t,n)=>{var r=n(6025);e.exports=function(e){return r(this.__data__,e)>-1}},8859:(e,t,n)=>{var r=n(3661),o=n(1380),a=n(1459);function s(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}s.prototype.add=s.prototype.push=o,s.prototype.has=a,e.exports=s},8879:(e,t,n)=>{var r=n(4335)(Object.getPrototypeOf,Object);e.exports=r},8984:(e,t,n)=>{var r=n(5527),o=n(3650),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))a.call(e,n)&&"constructor"!=n&&t.push(n);return t}},9219:e=>{e.exports=function(e,t){return e.has(t)}},9302:(e,t,n)=>{var r=n(3488),o=n(6757),a=n(2865);e.exports=function(e,t){return a(o(e,t,r),e+"")}},9325:(e,t,n)=>{var r=n(4840),o="object"==typeof self&&self&&self.Object===Object&&self,a=r||o||Function("return this")();e.exports=a},9326:(e,t,n)=>{var r=n(1769),o=n(2428),a=n(6449),s=n(361),i=n(294),c=n(7797);e.exports=function(e,t,n){for(var l=-1,p=(t=r(t,e)).length,u=!1;++l<p;){var d=c(t[l]);if(!(u=null!=e&&n(e,d)))break;e=e[d]}return u||++l!=p?u:!!(p=null==e?0:e.length)&&i(p)&&s(d,p)&&(a(e)||o(e))}},9344:(e,t,n)=>{var r=n(3805),o=Object.create,a=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=a},9350:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},9374:(e,t,n)=>{var r=n(4128),o=n(3805),a=n(4394),s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=i.test(e);return n||c.test(e)?l(e.slice(2),n?2:8):s.test(e)?NaN:+e}},9375:e=>{e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},9570:(e,t,n)=>{var r=n(7334),o=n(3243),a=n(3488),s=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:a;e.exports=s},9653:(e,t,n)=>{var r=n(7828);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},9770:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,a=[];++n<r;){var s=e[n];t(s,n,e)&&(a[o++]=s)}return a}},9817:e=>{e.exports=function(e){return this.__data__.has(e)}},9884:(e,t,n)=>{var r=n(1791),o=n(7241);e.exports=function(e){return r(e,o(e))}},9935:e=>{e.exports=function(){return!1}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r](a,a.exports,n),a.loaded=!0,a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e={};n.r(e),n.d(e,{BrowserRouter:()=>Ye,HashRouter:()=>Xe,Link:()=>at,MemoryRouter:()=>le,NavLink:()=>ct,Prompt:()=>ue,Redirect:()=>ge,Route:()=>be,Router:()=>ce,StaticRouter:()=>Pe,Switch:()=>Oe,generatePath:()=>ve,matchPath:()=>ye,useHistory:()=>Ae,useLocation:()=>Ee,useParams:()=>Le,useRouteMatch:()=>Me,withRouter:()=>Te});const t=window.wp.i18n,r=window.wp.compose,o=window.wp.data,a=window.wp.plugins,s=window.wp.editPost,i=window.wp.components,c=window.wp.coreData,l=window.wp.editor,p=window.wp.element,u=e=>e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(e,t,n,r)=>"#"+t+t+n+n+r+r).substring(1).match(/.{2}/g).map(e=>parseInt(e,16)),d=e=>-1<(window.newspack_popups_data?.overlay_placements||[]).indexOf(e),h=e=>e instanceof Date?`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}T23:59:59`:"",f=window.lodash;var v=n(6942),g=n.n(v);const _=window.ReactJSXRuntime,m=({layout:e,label:n,help:r,onChange:o,size:a,...s})=>{const c="full-width"===a?[{value:"top",
/* translators: Overlay Prompt Position */
label:(0,t.__)("Top","newspack-popups")},{value:"center",
/* translators: Overlay Prompt Position */
label:(0,t.__)("Center","newspack-popups")},{value:"bottom",
/* translators: Overlay Prompt Position */
label:(0,t.__)("Bottom","newspack-popups")}]:[{value:"top_left",
/* translators: Overlay Prompt Position */
label:(0,t.__)("Top Left","newspack-popups")},{value:"top",
/* translators: Overlay Prompt Position */
label:(0,t.__)("Top Center","newspack-popups")},{value:"top_right",
/* translators: Overlay Prompt Position */
label:(0,t.__)("Top Right","newspack-popups")},{value:"center_left",
/* translators: Overlay Prompt Position */
label:(0,t.__)("Center Left","newspack-popups")},{value:"center",
/* translators: Overlay Prompt Position */
label:(0,t.__)("Center","newspack-popups")},{value:"center_right",
/* translators: Overlay Prompt Position */
label:(0,t.__)("Center Right","newspack-popups")},{value:"bottom_left",
/* translators: Overlay Prompt Position */
label:(0,t.__)("Bottom Left","newspack-popups")},{value:"bottom",
/* translators: Overlay Prompt Position */
label:(0,t.__)("Bottom Center","newspack-popups")},{value:"bottom_right",
/* translators: Overlay Prompt Position */
label:(0,t.__)("Bottom Right","newspack-popups")}];return(0,_.jsxs)("div",{className:g()("newspack-popups-css-grid-selector","size-"+a),children:[(0,_.jsx)("p",{className:"components-base-control__label",children:n}),(0,_.jsx)(i.ButtonGroup,{"aria-label":(0,t.__)("Select Position","newspack-popups"),...s,children:c.map(({label:t,value:n},r)=>(0,_.jsx)(i.Tooltip,{text:t,children:(0,_.jsx)("div",{className:n===e?"is-selected":null,children:(0,_.jsx)(i.Button,{isSmall:!0,isSecondary:n!==e,isPrimary:n===e,onClick:()=>{o(n)}})})},`grid-tooltip-${r}`))}),(0,_.jsx)("p",{className:"components-base-control__help",children:r})]})},w=[{value:"once",label:(0,t.__)("Once a month","newspack-popups")},{value:"weekly",label:(0,t.__)("Once a week","newspack-popups")},{value:"daily",label:(0,t.__)("Once a day","newspack-popups")},{value:"always",label:(0,t.__)("Every pageview","newspack-popups")},{value:"custom",label:(0,t.__)("Custom","newspack-popups")}],y=window.wp.blockEditor;var b=(0,p.forwardRef)(({icon:e,size:t=24,...n},r)=>(0,p.cloneElement)(e,{width:t,height:t,...n,ref:r}));const x=window.wp.primitives;var k=(0,_.jsx)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,_.jsx)(x.Path,{d:"M16.5 7.5 10 13.9l-2.5-2.4-1 1 3.5 3.6 7.5-7.6z"})}),j=(0,_.jsx)(x.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,_.jsx)(x.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"})}),S=(0,_.jsx)(x.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,_.jsx)(x.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})}),C=(0,_.jsx)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,_.jsx)(x.Path,{d:"M8 7h2V5H8v2zm0 6h2v-2H8v2zm0 6h2v-2H8v2zm6-14v2h2V5h-2zm0 8h2v-2h-2v2zm0 6h2v-2h-2v2z"})});const P=({badge:e,badgeLevel:n="info",className:r,checkbox:o,children:a,collapse:s,disabled:c,title:l,description:u,handoff:d,editLink:h,href:f,notification:v,notificationLevel:m,notificationHTML:w,actionContent:y,actionText:x,secondaryActionText:P,secondaryDestructive:O,id:T,image:N,imageLink:A,indent:E,isSmall:L,isMedium:M,simple:I,onClick:R,onSecondaryActionClick:D,isWaiting:F,titleLink:z,toggleChecked:B=!1,toggleOnChange:$,hasGreyHeader:H,hasWhiteHeader:q,noBorder:V,isPending:U,expandable:W=!1,isButtonEnabled:G=!1,draggable:Z=!1,dragIndex:Q,dragWrapperRef:K,onDragCallback:J})=>{const[Y,X]=(0,p.useState)(!1),[ee,te]=(0,p.useState)(!1),[ne,re]=(0,p.useState)(null),[oe,ae]=(0,p.useState)(null);(0,p.useEffect)(()=>{K&&!oe&&ae(K)},[K?.current]),(0,p.useEffect)(()=>{s&&Y&&X(!1)},[s]);const se=v||a,ie=g()("newspack-action-card",I&&"newspack-card--is-clickable",H&&"newspack-card--has-grey-header",q&&"newspack-card--has-white-header",se&&"newspack-card--has-children",E&&"newspack-card--indent",L&&"is-small",M&&"is-medium",o&&"has-checkbox",W&&"is-expandable",Z&&"is-draggable",y&&"has-action-content",r),ce=!$||z||c?{}:{onClick:()=>$(!B),tabIndex:"0"},le=f&&0!==f.indexOf("http"),pe=P&&D,ue=!Array.isArray(e)&&e?[e]:e,de=()=>{return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:"newspack-action-card__region newspack-action-card__region-top",children:[$&&(0,_.jsx)(i.ToggleControl,{checked:B,onChange:$,disabled:c}),N&&!$&&(0,_.jsx)("div",{className:"newspack-action-card__region newspack-action-card__region-left",children:(0,_.jsx)("a",{href:A,children:(0,_.jsx)("div",{className:"newspack-action-card__image",style:(e=N,e?{backgroundImage:`url(${e})`}:{})})})}),o&&!$&&(0,_.jsx)("div",{className:"newspack-action-card__region newspack-action-card__region-left",children:(0,_.jsx)("span",{className:g()("newspack-checkbox-icon","is-primary","checked"===o&&"newspack-checkbox-icon--checked",U&&"newspack-checkbox-icon--pending"),children:"checked"===o&&(0,_.jsx)(b,{icon:k})})}),(0,_.jsx)("div",{className:"newspack-action-card__region newspack-action-card__region-center",children:(0,_.jsxs)(un,{columns:1,gutter:8,noMargin:!0,children:[(0,_.jsxs)("h2",{children:[(0,_.jsxs)("span",{className:"newspack-action-card__title",...ce,children:[z&&(0,_.jsx)("a",{href:z,children:l}),!z&&W&&(0,_.jsx)(ut,{isLink:!0,onClick:()=>X(!Y),children:l}),!z&&!W&&l]}),ue?.length&&ue.map((e,t)=>(0,_.jsx)("span",{className:`newspack-action-card__badge newspack-action-card__badge-level-${n}`,children:e},`badge-${t}`))]}),u&&(0,_.jsxs)("p",{children:["string"==typeof u&&u,"function"==typeof u&&u()]})]})}),!W&&(x||pe||y)&&(0,_.jsxs)("div",{className:"newspack-action-card__region newspack-action-card__region-right",children:[y&&y,x&&(d?(0,_.jsx)(sn,{plugin:d,editLink:h,compact:!0,isLink:!0,children:x}):R||le?(0,_.jsx)(ut,{disabled:c&&!G,isLink:!0,href:f,onClick:R,className:"newspack-action-card__primary_button",children:x}):f?(0,_.jsx)(i.ExternalLink,{href:f,className:"newspack-action-card__primary_button",children:x}):(0,_.jsxs)("div",{className:"newspack-action-card__container",children:[x,F&&(0,_.jsx)(Hn,{isRight:!0})]})),pe&&(0,_.jsx)(ut,{isLink:!0,onClick:D,className:"newspack-action-card__secondary_button",isDestructive:O,children:P})]}),W&&(0,_.jsx)(ut,{onClick:()=>X(!Y),children:(0,_.jsx)(b,{icon:Y?j:S,height:24,width:24})})]}),v&&(0,_.jsxs)("div",{className:"newspack-action-card__notification newspack-action-card__region-children",children:["error"===m&&(0,_.jsx)(wn,{noticeText:v,isError:!0,rawHTML:w}),"info"===m&&(0,_.jsx)(wn,{noticeText:v,rawHTML:w}),"success"===m&&(0,_.jsx)(wn,{noticeText:v,isSuccess:!0,rawHTML:w}),"warning"===m&&(0,_.jsx)(wn,{noticeText:v,isWarning:!0,rawHTML:w})]}),a&&(W&&Y||!W)&&(0,_.jsx)("div",{className:"newspack-action-card__region-children",children:a})]});var e};if(Z&&oe?.current&&"number"==typeof Q&&J&&T){let e=oe.current.getBoundingClientRect(),n=Array.prototype.slice.call(oe.current.querySelectorAll(".newspack-action-card__draggable-wrapper"));const r=0===Q,o=Q===n.length-1,a=()=>{n=Array.prototype.slice.call(oe.current.querySelectorAll(".newspack-action-card__draggable-wrapper")),e=oe.current.getBoundingClientRect(),ee||(re(Q),te(!0))},s=()=>{null!==ne&&ne!==Q&&J(ne),re(null),te(!1)},c=t=>{const r=t.pageY<=e.top+window.scrollY,o=t.pageY>=e.bottom+window.scrollY,a=t.target.closest(".newspack-action-card__draggable-wrapper");(r||o||a)&&(re(n.indexOf(a)),(0>ne||ne===Q+1)&&re(Q),r&&re(0),o&&re(n.length))};return(0,_.jsx)("div",{className:"newspack-action-card__draggable-wrapper"+(ee?" is-dragging":""),id:`draggable-card-${T}`,children:(0,_.jsx)(i.Draggable,{elementId:`draggable-card-${T}`,transferData:{},onDragStart:a,onDragEnd:s,onDragOver:c,children:({onDraggableStart:e,onDraggableEnd:n})=>(0,_.jsxs)(ht,{className:ie,onClick:I&&R,id:null!=T?T:null,noBorder:V,children:[(0,_.jsxs)("div",{className:"newspack-action-card__draggable-controls",children:[(0,_.jsx)("div",{className:"drag-handle",draggable:!0,onDragStart:e,onDragEnd:n,children:(0,_.jsx)(b,{icon:C,height:18,width:18})}),(0,_.jsxs)("div",{className:"movers",children:[(0,_.jsx)(ut,{icon:j,onClick:()=>J(Q-1),disabled:r,label:(0,t.__)("Move one position up","newspack-plugin")}),(0,_.jsx)(ut,{icon:S,onClick:()=>J(Q+1),disabled:o,label:(0,t.__)("Move one position down","newspack-plugin")})]})]}),(0,_.jsx)(de,{})]})})})}return(0,_.jsx)(ht,{className:ie,onClick:I&&R,id:null!=T?T:null,noBorder:V,children:(0,_.jsx)(de,{})})};var O=n(8221),T=n.n(O);p.Component;const N=window.wp.apiFetch;var A=n.n(N);window.wp.htmlEntities;const E=window.wp.url;function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}function M(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,L(e,t)}const I=window.React;var R=n.n(I),D=n(5556),F=n.n(D);function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z.apply(null,arguments)}function B(e){return"/"===e.charAt(0)}function $(e,t){for(var n=t,r=n+1,o=e.length;r<o;n+=1,r+=1)e[n]=e[r];e.pop()}const H=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],o=t&&t.split("/")||[],a=e&&B(e),s=t&&B(t),i=a||s;if(e&&B(e)?o=r:r.length&&(o.pop(),o=o.concat(r)),!o.length)return"/";if(o.length){var c=o[o.length-1];n="."===c||".."===c||""===c}else n=!1;for(var l=0,p=o.length;p>=0;p--){var u=o[p];"."===u?$(o,p):".."===u?($(o,p),l++):l&&($(o,p),l--)}if(!i)for(;l--;l)o.unshift("..");!i||""===o[0]||o[0]&&B(o[0])||o.unshift("");var d=o.join("/");return n&&"/"!==d.substr(-1)&&(d+="/"),d};function q(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}const V=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every(function(t,r){return e(t,n[r])});if("object"==typeof t||"object"==typeof n){var r=q(t),o=q(n);return r!==t||o!==n?e(r,o):Object.keys(Object.assign({},t,n)).every(function(r){return e(t[r],n[r])})}return!1};function U(e){var t=e.pathname,n=e.search,r=e.hash,o=t||"/";return n&&"?"!==n&&(o+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(o+="#"===r.charAt(0)?r:"#"+r),o}function W(e,t,n,r){var o;"string"==typeof e?(o=function(e){var t=e||"/",n="",r="",o=t.indexOf("#");-1!==o&&(r=t.substr(o),t=t.substr(0,o));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),o.state=t):(void 0===(o=z({},e)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==t&&void 0===o.state&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(o.key=n),r?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=H(o.pathname,r.pathname)):o.pathname=r.pathname:o.pathname||(o.pathname="/"),o}function G(e,t,n){return Math.min(Math.max(e,t),n)}"undefined"==typeof window||!window.document||window.document.createElement;var Z=!0,Q="Invariant failed";function K(e,t){if(!e){if(Z)throw new Error(Q);var n="function"==typeof t?t():t,r=n?"".concat(Q,": ").concat(n):Q;throw new Error(r)}}var J=n(8505),Y=n.n(J);function X(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}n(4363);var ee=n(4146),te=n.n(ee),ne=1073741823,re="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:{},oe=R().createContext||function(e,t){var n,r,o,a="__create-react-context-"+((re[o="__global_unique_id__"]=(re[o]||0)+1)+"__"),s=function(e){function n(){for(var t,n,r,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return(t=e.call.apply(e,[this].concat(a))||this).emitter=(n=t.props.value,r=[],{on:function(e){r.push(e)},off:function(e){r=r.filter(function(t){return t!==e})},get:function(){return n},set:function(e,t){n=e,r.forEach(function(e){return e(n,t)})}}),t}M(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[a]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,o=e.value;!function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(r,o)?(n="function"==typeof t?t(r,o):ne,0!=(n|=0)&&this.emitter.set(e.value,n)):n=0}},r.render=function(){return this.props.children},n}(R().Component);s.childContextTypes=((n={})[a]=F().object.isRequired,n);var i=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).observedBits=void 0,e.state={value:e.getValue()},e.onUpdate=function(t,n){(0|e.observedBits)&n&&e.setState({value:e.getValue()})},e}M(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?ne:t},r.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?ne:e},r.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},r.getValue=function(){return this.context[a]?this.context[a].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(R().Component);return i.contextTypes=((r={})[a]=F().object,r),{Provider:s,Consumer:i}},ae=function(e){var t=oe();return t.displayName=e,t},se=ae("Router-History"),ie=ae("Router"),ce=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen(function(e){n._pendingLocation=e})),n}M(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen(function(t){e._isMounted&&e.setState({location:t})})),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return R().createElement(ie.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},R().createElement(se.Provider,{children:this.props.children||null,value:this.props.history}))},t}(R().Component),le=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).history=function(e){void 0===e&&(e={});var t,n,r=e,o=r.getUserConfirmation,a=r.initialEntries,s=void 0===a?["/"]:a,i=r.initialIndex,c=void 0===i?0:i,l=r.keyLength,p=void 0===l?6:l,u=(t=null,n=[],{setPrompt:function(e){return t=e,function(){t===e&&(t=null)}},confirmTransitionTo:function(e,n,r,o){if(null!=t){var a="function"==typeof t?t(e,n):t;"string"==typeof a?"function"==typeof r?r(a,o):o(!0):o(!1!==a)}else o(!0)},appendListener:function(e){var t=!0;function r(){t&&e.apply(void 0,arguments)}return n.push(r),function(){t=!1,n=n.filter(function(e){return e!==r})}},notifyListeners:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.forEach(function(e){return e.apply(void 0,t)})}});function d(e){z(m,e),m.length=m.entries.length,u.notifyListeners(m.location,m.action)}function h(){return Math.random().toString(36).substr(2,p)}var f=G(c,0,s.length-1),v=s.map(function(e){return W(e,void 0,"string"==typeof e?h():e.key||h())}),g=U;function _(e){var t=G(m.index+e,0,m.entries.length-1),n=m.entries[t];u.confirmTransitionTo(n,"POP",o,function(e){e?d({action:"POP",location:n,index:t}):d()})}var m={length:v.length,action:"POP",location:v[f],index:f,entries:v,createHref:g,push:function(e,t){var n="PUSH",r=W(e,t,h(),m.location);u.confirmTransitionTo(r,n,o,function(e){if(e){var t=m.index+1,o=m.entries.slice(0);o.length>t?o.splice(t,o.length-t,r):o.push(r),d({action:n,location:r,index:t,entries:o})}})},replace:function(e,t){var n="REPLACE",r=W(e,t,h(),m.location);u.confirmTransitionTo(r,n,o,function(e){e&&(m.entries[m.index]=r,d({action:n,location:r}))})},go:_,goBack:function(){_(-1)},goForward:function(){_(1)},canGo:function(e){var t=m.index+e;return t>=0&&t<m.entries.length},block:function(e){return void 0===e&&(e=!1),u.setPrompt(e)},listen:function(e){return u.appendListener(e)}};return m}(t.props),t}return M(t,e),t.prototype.render=function(){return R().createElement(ce,{history:this.history,children:this.props.children})},t}(R().Component),pe=function(e){function t(){return e.apply(this,arguments)||this}M(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(R().Component);function ue(e){var t=e.message,n=e.when,r=void 0===n||n;return R().createElement(ie.Consumer,null,function(e){if(e||K(!1),!r||e.staticContext)return null;var n=e.history.block;return R().createElement(pe,{onMount:function(e){e.release=n(t)},onUpdate:function(e,r){r.message!==t&&(e.release(),e.release=n(t))},onUnmount:function(e){e.release()},message:t})})}var de={},he=1e4,fe=0;function ve(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(de[e])return de[e];var t=Y().compile(e);return fe<he&&(de[e]=t,fe++),t}(e)(t,{pretty:!0})}function ge(e){var t=e.computedMatch,n=e.to,r=e.push,o=void 0!==r&&r;return R().createElement(ie.Consumer,null,function(e){e||K(!1);var r=e.history,a=e.staticContext,s=o?r.push:r.replace,i=W(t?"string"==typeof n?ve(n,t.params):z({},n,{pathname:ve(n.pathname,t.params)}):n);return a?(s(i),null):R().createElement(pe,{onMount:function(){s(i)},onUpdate:function(e,t){var n=W(t.to);(function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&V(e.state,t.state)})(n,z({},i,{key:n.key}))||s(i)},to:n})})}var _e={},me=1e4,we=0;function ye(e,t){void 0===t&&(t={}),("string"==typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,o=n.exact,a=void 0!==o&&o,s=n.strict,i=void 0!==s&&s,c=n.sensitive,l=void 0!==c&&c;return[].concat(r).reduce(function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=_e[n]||(_e[n]={});if(r[e])return r[e];var o=[],a={regexp:Y()(e,o,t),keys:o};return we<me&&(r[e]=a,we++),a}(n,{end:a,strict:i,sensitive:l}),o=r.regexp,s=r.keys,c=o.exec(e);if(!c)return null;var p=c[0],u=c.slice(1),d=e===p;return a&&!d?null:{path:n,url:"/"===n&&""===p?"/":p,isExact:d,params:s.reduce(function(e,t,n){return e[t.name]=u[n],e},{})}},null)}var be=function(e){function t(){return e.apply(this,arguments)||this}return M(t,e),t.prototype.render=function(){var e=this;return R().createElement(ie.Consumer,null,function(t){t||K(!1);var n=e.props.location||t.location,r=z({},t,{location:n,match:e.props.computedMatch?e.props.computedMatch:e.props.path?ye(n.pathname,e.props):t.match}),o=e.props,a=o.children,s=o.component,i=o.render;return Array.isArray(a)&&function(e){return 0===R().Children.count(e)}(a)&&(a=null),R().createElement(ie.Provider,{value:r},r.match?a?"function"==typeof a?a(r):a:s?R().createElement(s,r):i?i(r):null:"function"==typeof a?a(r):null)})},t}(R().Component);function xe(e){return"/"===e.charAt(0)?e:"/"+e}function ke(e,t){if(!e)return t;var n=xe(e);return 0!==t.pathname.indexOf(n)?t:z({},t,{pathname:t.pathname.substr(n.length)})}function je(e){return"string"==typeof e?e:U(e)}function Se(e){return function(){K(!1)}}function Ce(){}var Pe=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).handlePush=function(e){return t.navigateTo(e,"PUSH")},t.handleReplace=function(e){return t.navigateTo(e,"REPLACE")},t.handleListen=function(){return Ce},t.handleBlock=function(){return Ce},t}M(t,e);var n=t.prototype;return n.navigateTo=function(e,t){var n=this.props,r=n.basename,o=void 0===r?"":r,a=n.context,s=void 0===a?{}:a;s.action=t,s.location=function(e,t){return e?z({},t,{pathname:xe(e)+t.pathname}):t}(o,W(e)),s.url=je(s.location)},n.render=function(){var e=this.props,t=e.basename,n=void 0===t?"":t,r=e.context,o=void 0===r?{}:r,a=e.location,s=void 0===a?"/":a,i=X(e,["basename","context","location"]),c={createHref:function(e){return xe(n+je(e))},action:"POP",location:ke(n,W(s)),push:this.handlePush,replace:this.handleReplace,go:Se(),goBack:Se(),goForward:Se(),listen:this.handleListen,block:this.handleBlock};return R().createElement(ce,z({},i,{history:c,staticContext:o}))},t}(R().Component),Oe=function(e){function t(){return e.apply(this,arguments)||this}return M(t,e),t.prototype.render=function(){var e=this;return R().createElement(ie.Consumer,null,function(t){t||K(!1);var n,r,o=e.props.location||t.location;return R().Children.forEach(e.props.children,function(e){if(null==r&&R().isValidElement(e)){n=e;var a=e.props.path||e.props.from;r=a?ye(o.pathname,z({},e.props,{path:a})):t.match}}),r?R().cloneElement(n,{location:o,computedMatch:r}):null})},t}(R().Component);function Te(e){var t="withRouter("+(e.displayName||e.name)+")",n=function(t){var n=t.wrappedComponentRef,r=X(t,["wrappedComponentRef"]);return R().createElement(ie.Consumer,null,function(t){return t||K(!1),R().createElement(e,z({},r,t,{ref:n}))})};return n.displayName=t,n.WrappedComponent=e,te()(n,e)}var Ne=R().useContext;function Ae(){return Ne(se)}function Ee(){return Ne(ie).location}function Le(){var e=Ne(ie).match;return e?e.params:{}}function Me(e){var t=Ee(),n=Ne(ie).match;return e?ye(t.pathname,e):n}function Ie(e){return"/"===e.charAt(0)?e:"/"+e}function Re(e){return"/"===e.charAt(0)?e.substr(1):e}function De(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function Fe(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function ze(e){var t=e.pathname,n=e.search,r=e.hash,o=t||"/";return n&&"?"!==n&&(o+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(o+="#"===r.charAt(0)?r:"#"+r),o}function Be(e,t,n,r){var o;"string"==typeof e?(o=function(e){var t=e||"/",n="",r="",o=t.indexOf("#");-1!==o&&(r=t.substr(o),t=t.substr(0,o));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),o.state=t):(void 0===(o=z({},e)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==t&&void 0===o.state&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(o.key=n),r?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=H(o.pathname,r.pathname)):o.pathname=r.pathname:o.pathname||(o.pathname="/"),o}function $e(){var e=null,t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,o){if(null!=e){var a="function"==typeof e?e(t,n):e;"string"==typeof a?"function"==typeof r?r(a,o):o(!0):o(!1!==a)}else o(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter(function(e){return e!==r})}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach(function(e){return e.apply(void 0,n)})}}}var He=!("undefined"==typeof window||!window.document||!window.document.createElement);function qe(e,t){t(window.confirm(e))}var Ve="popstate",Ue="hashchange";function We(){try{return window.history.state||{}}catch(e){return{}}}var Ge="hashchange",Ze={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+Re(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:Re,decodePath:Ie},slash:{encodePath:Ie,decodePath:Ie}};function Qe(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function Ke(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function Je(e){window.location.replace(Qe(window.location.href)+"#"+e)}var Ye=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).history=function(e){void 0===e&&(e={}),He||K(!1);var t,n=window.history,r=(-1===(t=window.navigator.userAgent).indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,o=!(-1===window.navigator.userAgent.indexOf("Trident")),a=e,s=a.forceRefresh,i=void 0!==s&&s,c=a.getUserConfirmation,l=void 0===c?qe:c,p=a.keyLength,u=void 0===p?6:p,d=e.basename?Fe(Ie(e.basename)):"";function h(e){var t=e||{},n=t.key,r=t.state,o=window.location,a=o.pathname+o.search+o.hash;return d&&(a=De(a,d)),Be(a,r,n)}function f(){return Math.random().toString(36).substr(2,u)}var v=$e();function g(e){z(O,e),O.length=n.length,v.notifyListeners(O.location,O.action)}function _(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||y(h(e.state))}function m(){y(h(We()))}var w=!1;function y(e){w?(w=!1,g()):v.confirmTransitionTo(e,"POP",l,function(t){t?g({action:"POP",location:e}):function(e){var t=O.location,n=x.indexOf(t.key);-1===n&&(n=0);var r=x.indexOf(e.key);-1===r&&(r=0);var o=n-r;o&&(w=!0,j(o))}(e)})}var b=h(We()),x=[b.key];function k(e){return d+ze(e)}function j(e){n.go(e)}var S=0;function C(e){1===(S+=e)&&1===e?(window.addEventListener(Ve,_),o&&window.addEventListener(Ue,m)):0===S&&(window.removeEventListener(Ve,_),o&&window.removeEventListener(Ue,m))}var P=!1,O={length:n.length,action:"POP",location:b,createHref:k,push:function(e,t){var o="PUSH",a=Be(e,t,f(),O.location);v.confirmTransitionTo(a,o,l,function(e){if(e){var t=k(a),s=a.key,c=a.state;if(r)if(n.pushState({key:s,state:c},null,t),i)window.location.href=t;else{var l=x.indexOf(O.location.key),p=x.slice(0,l+1);p.push(a.key),x=p,g({action:o,location:a})}else window.location.href=t}})},replace:function(e,t){var o="REPLACE",a=Be(e,t,f(),O.location);v.confirmTransitionTo(a,o,l,function(e){if(e){var t=k(a),s=a.key,c=a.state;if(r)if(n.replaceState({key:s,state:c},null,t),i)window.location.replace(t);else{var l=x.indexOf(O.location.key);-1!==l&&(x[l]=a.key),g({action:o,location:a})}else window.location.replace(t)}})},go:j,goBack:function(){j(-1)},goForward:function(){j(1)},block:function(e){void 0===e&&(e=!1);var t=v.setPrompt(e);return P||(C(1),P=!0),function(){return P&&(P=!1,C(-1)),t()}},listen:function(e){var t=v.appendListener(e);return C(1),function(){C(-1),t()}}};return O}(t.props),t}return M(t,e),t.prototype.render=function(){return R().createElement(ce,{history:this.history,children:this.props.children})},t}(R().Component),Xe=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).history=function(e){void 0===e&&(e={}),He||K(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,o=void 0===r?qe:r,a=n.hashType,s=void 0===a?"slash":a,i=e.basename?Fe(Ie(e.basename)):"",c=Ze[s],l=c.encodePath,p=c.decodePath;function u(){var e=p(Ke());return i&&(e=De(e,i)),Be(e)}var d=$e();function h(e){z(S,e),S.length=t.length,d.notifyListeners(S.location,S.action)}var f=!1,v=null;function g(){var e=Ke(),t=l(e);if(e!==t)Je(t);else{var n=u(),r=S.location;if(!f&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(r,n))return;if(v===ze(n))return;v=null,function(e){f?(f=!1,h()):d.confirmTransitionTo(e,"POP",o,function(t){t?h({action:"POP",location:e}):function(e){var t=S.location,n=y.lastIndexOf(ze(t));-1===n&&(n=0);var r=y.lastIndexOf(ze(e));-1===r&&(r=0);var o=n-r;o&&(f=!0,b(o))}(e)})}(n)}}var _=Ke(),m=l(_);_!==m&&Je(m);var w=u(),y=[ze(w)];function b(e){t.go(e)}var x=0;function k(e){1===(x+=e)&&1===e?window.addEventListener(Ge,g):0===x&&window.removeEventListener(Ge,g)}var j=!1,S={length:t.length,action:"POP",location:w,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=Qe(window.location.href)),n+"#"+l(i+ze(e))},push:function(e,t){var n="PUSH",r=Be(e,void 0,void 0,S.location);d.confirmTransitionTo(r,n,o,function(e){if(e){var t=ze(r),o=l(i+t);if(Ke()!==o){v=t,function(e){window.location.hash=e}(o);var a=y.lastIndexOf(ze(S.location)),s=y.slice(0,a+1);s.push(t),y=s,h({action:n,location:r})}else h()}})},replace:function(e,t){var n="REPLACE",r=Be(e,void 0,void 0,S.location);d.confirmTransitionTo(r,n,o,function(e){if(e){var t=ze(r),o=l(i+t);Ke()!==o&&(v=t,Je(o));var a=y.indexOf(ze(S.location));-1!==a&&(y[a]=t),h({action:n,location:r})}})},go:b,goBack:function(){b(-1)},goForward:function(){b(1)},block:function(e){void 0===e&&(e=!1);var t=d.setPrompt(e);return j||(k(1),j=!0),function(){return j&&(j=!1,k(-1)),t()}},listen:function(e){var t=d.appendListener(e);return k(1),function(){k(-1),t()}}};return S}(t.props),t}return M(t,e),t.prototype.render=function(){return R().createElement(ce,{history:this.history,children:this.props.children})},t}(R().Component),et=function(e,t){return"function"==typeof e?e(t):e},tt=function(e,t){return"string"==typeof e?Be(e,null,null,t):e},nt=function(e){return e},rt=R().forwardRef;void 0===rt&&(rt=nt);var ot=rt(function(e,t){var n=e.innerRef,r=e.navigate,o=e.onClick,a=X(e,["innerRef","navigate","onClick"]),s=a.target,i=z({},a,{onClick:function(e){try{o&&o(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||s&&"_self"!==s||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return i.ref=nt!==rt&&t||n,R().createElement("a",i)}),at=rt(function(e,t){var n=e.component,r=void 0===n?ot:n,o=e.replace,a=e.to,s=e.innerRef,i=X(e,["component","replace","to","innerRef"]);return R().createElement(ie.Consumer,null,function(e){e||K(!1);var n=e.history,c=tt(et(a,e.location),e.location),l=c?n.createHref(c):"",p=z({},i,{href:l,navigate:function(){var t=et(a,e.location),r=ze(e.location)===ze(tt(t));(o||r?n.replace:n.push)(t)}});return nt!==rt?p.ref=t||s:p.innerRef=s,R().createElement(r,p)})}),st=function(e){return e},it=R().forwardRef;void 0===it&&(it=st);var ct=it(function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,o=e.activeClassName,a=void 0===o?"active":o,s=e.activeStyle,i=e.className,c=e.exact,l=e.isActive,p=e.location,u=e.sensitive,d=e.strict,h=e.style,f=e.to,v=e.innerRef,g=X(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return R().createElement(ie.Consumer,null,function(e){e||K(!1);var n=p||e.location,o=tt(et(f,n),n),_=o.pathname,m=_&&_.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),w=m?ye(n.pathname,{path:m,exact:c,sensitive:u,strict:d}):null,y=!!(l?l(w,n):w),b="function"==typeof i?i(y):i,x="function"==typeof h?h(y):h;y&&(b=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(function(e){return e}).join(" ")}(b,a),x=z({},x,s));var k=z({"aria-current":y&&r||null,className:b,style:x,to:o},g);return st!==it?k.ref=t||v:k.innerRef=v,R().createElement(at,k)})});const lt=e,{useHistory:pt}=lt,ut=({href:e,onClick:t,...n})=>{const r=pt(),[o,a]=(0,p.useState)(!1);return e&&t?n.onClick=async()=>{a(!0),await t(),a(!1),r.push((e||"").replace("#",""))}:(n.href=e,n.onClick=t),o&&(n.disabled=!0),(0,_.jsx)(i.Button,{...n})};class dt extends p.Component{render(){const{buttonsCard:e,className:t,headerActions:n,isNarrow:r,isMedium:o,isSmall:a,isWhite:s,noBorder:i,...c}=this.props,l=g()("newspack-card",t,e&&"newspack-card__buttons-card",n&&"newspack-card__header-actions",o&&"newspack-card__is-medium",r&&"newspack-card__is-narrow",a&&"newspack-card__is-small",s&&"newspack-card__is-white",i&&"newspack-card__no-border");return(0,_.jsx)("div",{className:l,...c})}}const ht=dt;var ft=n(7309),vt=n.n(ft),gt=n(7612),_t=n.n(gt);class mt extends p.Component{state={suggestions:{},allCategories:{},isLoading:!1};constructor(e){super(e),this.debouncedUpdateSuggestions=T()(this.updateSuggestions,100)}componentDidMount(){this.setState({isLoading:!0}),A()({path:(0,E.addQueryArgs)(`/wp/v2/${this.props.taxonomy}`,{per_page:-1,_fields:"id,name"})}).then(e=>this.setState({allCategories:e})).finally(()=>this.setState({isLoading:!1}))}componentWillUnmount(){this.debouncedUpdateSuggestions.cancel()}updateSuggestions(e){this.setState({isLoading:!0}),A()({path:(0,E.addQueryArgs)(`/wp/v2/${this.props.taxonomy}`,{search:e,per_page:20,_fields:"id,name",orderby:"count",order:"desc"})}).then(e=>{this.setState({suggestions:e.reduce((e,t)=>({...e,[t.name]:t}),{})})}).finally(()=>this.setState({isLoading:!1}))}handleOnChange=e=>{const{onChange:t}=this.props,{suggestions:n}=this.state;t(e.filter(e=>void 0!==e).map(e=>"string"==typeof e?n[e]:e).filter(Boolean))};getAvailableSuggestions=()=>{const{value:e}=this.props,{suggestions:t}=this.state,n=e.reduce((e,t)=>(t?.id&&e.push(t.id),e),[]);return _t()(t,({id:e})=>-1===n.indexOf(e)).map(e=>e.name)};render(){const{className:e,disabled:t,description:n,hideHelpFromVision:r,hideLabelFromVision:o,label:a,value:s}=this.props,{allCategories:c,isLoading:l}=this.state,p=g()("newspack-category-autocomplete",e);return(0,_.jsxs)("div",{className:p,children:[(0,_.jsx)(tn,{onInputChange:e=>this.debouncedUpdateSuggestions(e),value:s.reduce((e,t)=>{const n="number"==typeof t?vt()(c,["id",t]):t;return n&&e.push({id:n.term_id||n.id,value:n.value||n.name}),e},[]),suggestions:this.getAvailableSuggestions(),onChange:this.handleOnChange,label:a,disabled:t,description:n,hideHelpFromVision:r,hideLabelFromVision:o}),l?(0,_.jsx)("span",{className:"newspack-category-autocomplete__suggestions-spinner",children:(0,_.jsx)(i.Spinner,{})}):null]})}}mt.defaultProps={taxonomy:"categories"};const wt=mt;var yt={grad:.9,turn:360,rad:360/(2*Math.PI)},bt=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},xt=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},kt=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e>t?e:t},jt=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},St=function(e){return{r:kt(e.r,0,255),g:kt(e.g,0,255),b:kt(e.b,0,255),a:kt(e.a)}},Ct=function(e){return{r:xt(e.r),g:xt(e.g),b:xt(e.b),a:xt(e.a,3)}},Pt=/^#([0-9a-f]{3,8})$/i,Ot=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},Tt=function(e){var t=e.r,n=e.g,r=e.b,o=e.a,a=Math.max(t,n,r),s=a-Math.min(t,n,r),i=s?a===t?(n-r)/s:a===n?2+(r-t)/s:4+(t-n)/s:0;return{h:60*(i<0?i+6:i),s:a?s/a*100:0,v:a/255*100,a:o}},Nt=function(e){var t=e.h,n=e.s,r=e.v,o=e.a;t=t/360*6,n/=100,r/=100;var a=Math.floor(t),s=r*(1-n),i=r*(1-(t-a)*n),c=r*(1-(1-t+a)*n),l=a%6;return{r:255*[r,i,s,s,c,r][l],g:255*[c,r,r,i,s,s][l],b:255*[s,s,c,r,r,i][l],a:o}},At=function(e){return{h:jt(e.h),s:kt(e.s,0,100),l:kt(e.l,0,100),a:kt(e.a)}},Et=function(e){return{h:xt(e.h),s:xt(e.s),l:xt(e.l),a:xt(e.a,3)}},Lt=function(e){return Nt((n=(t=e).s,{h:t.h,s:(n*=((r=t.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:t.a}));var t,n,r},Mt=function(e){return{h:(t=Tt(e)).h,s:(o=(200-(n=t.s))*(r=t.v)/100)>0&&o<200?n*r/100/(o<=100?o:200-o)*100:0,l:o/2,a:t.a};var t,n,r,o},It=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Rt=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Dt=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ft=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,zt={string:[[function(e){var t=Pt.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?xt(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?xt(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=Dt.exec(e)||Ft.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:St({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=It.exec(e)||Rt.exec(e);if(!t)return null;var n,r,o=At({h:(n=t[1],r=t[2],void 0===r&&(r="deg"),Number(n)*(yt[r]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return Lt(o)},"hsl"]],object:[[function(e){var t=e.r,n=e.g,r=e.b,o=e.a,a=void 0===o?1:o;return bt(t)&&bt(n)&&bt(r)?St({r:Number(t),g:Number(n),b:Number(r),a:Number(a)}):null},"rgb"],[function(e){var t=e.h,n=e.s,r=e.l,o=e.a,a=void 0===o?1:o;if(!bt(t)||!bt(n)||!bt(r))return null;var s=At({h:Number(t),s:Number(n),l:Number(r),a:Number(a)});return Lt(s)},"hsl"],[function(e){var t=e.h,n=e.s,r=e.v,o=e.a,a=void 0===o?1:o;if(!bt(t)||!bt(n)||!bt(r))return null;var s=function(e){return{h:jt(e.h),s:kt(e.s,0,100),v:kt(e.v,0,100),a:kt(e.a)}}({h:Number(t),s:Number(n),v:Number(r),a:Number(a)});return Nt(s)},"hsv"]]},Bt=function(e,t){for(var n=0;n<t.length;n++){var r=t[n][0](e);if(r)return[r,t[n][1]]}return[null,void 0]},$t=function(e,t){var n=Mt(e);return{h:n.h,s:kt(n.s+100*t,0,100),l:n.l,a:n.a}},Ht=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},qt=function(e,t){var n=Mt(e);return{h:n.h,s:n.s,l:kt(n.l+100*t,0,100),a:n.a}},Vt=function(){function e(e){this.parsed=function(e){return"string"==typeof e?Bt(e.trim(),zt.string):"object"==typeof e&&null!==e?Bt(e,zt.object):[null,void 0]}(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return xt(Ht(this.rgba),2)},e.prototype.isDark=function(){return Ht(this.rgba)<.5},e.prototype.isLight=function(){return Ht(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=Ct(this.rgba)).r,n=e.g,r=e.b,a=(o=e.a)<1?Ot(xt(255*o)):"","#"+Ot(t)+Ot(n)+Ot(r)+a;var e,t,n,r,o,a},e.prototype.toRgb=function(){return Ct(this.rgba)},e.prototype.toRgbString=function(){return t=(e=Ct(this.rgba)).r,n=e.g,r=e.b,(o=e.a)<1?"rgba("+t+", "+n+", "+r+", "+o+")":"rgb("+t+", "+n+", "+r+")";var e,t,n,r,o},e.prototype.toHsl=function(){return Et(Mt(this.rgba))},e.prototype.toHslString=function(){return t=(e=Et(Mt(this.rgba))).h,n=e.s,r=e.l,(o=e.a)<1?"hsla("+t+", "+n+"%, "+r+"%, "+o+")":"hsl("+t+", "+n+"%, "+r+"%)";var e,t,n,r,o},e.prototype.toHsv=function(){return e=Tt(this.rgba),{h:xt(e.h),s:xt(e.s),v:xt(e.v),a:xt(e.a,3)};var e},e.prototype.invert=function(){return Ut({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),Ut($t(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),Ut($t(this.rgba,-e))},e.prototype.grayscale=function(){return Ut($t(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),Ut(qt(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),Ut(qt(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?Ut({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):xt(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=Mt(this.rgba);return"number"==typeof e?Ut({h:e,s:t.s,l:t.l,a:t.a}):xt(t.h)},e.prototype.isEqual=function(e){return this.toHex()===Ut(e).toHex()},e}(),Ut=function(e){return e instanceof Vt?e:new Vt(e)},Wt=[],Gt=function(e){var t=e/255;return t<.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},Zt=function(e){return.2126*Gt(e.r)+.7152*Gt(e.g)+.0722*Gt(e.b)};const{useHistory:Qt}=lt;n(6449),n(6924);const Kt=e=>(0,p.useRef)(`${e}-${Math.round(99999*Math.random())}`).current,Jt=window.wp.keycodes,Yt={InteractiveDiv:({style:e={},...t})=>(0,_.jsx)("div",{tabIndex:"0",role:"button",onKeyDown:e=>Jt.ENTER===e.keyCode&&t.onClick(),style:{cursor:"pointer",...e},...t}),confirmAction:e=>!!confirm(e)};!function(e){e.forEach(function(e){Wt.indexOf(e)<0&&(e(Vt,zt),Wt.push(e))})}([function(e){e.prototype.luminance=function(){return e=Zt(this.rgba),void 0===(t=2)&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n+0;var e,t,n},e.prototype.contrast=function(t){void 0===t&&(t="#FFF");var n,r,o,a,s,i,c,l=t instanceof e?t:new e(t);return a=this.rgba,s=l.toRgb(),n=(i=Zt(a))>(c=Zt(s))?(i+.05)/(c+.05):(c+.05)/(i+.05),void 0===(r=2)&&(r=0),void 0===o&&(o=Math.pow(10,r)),Math.floor(o*n)/o+0},e.prototype.isReadable=function(e,t){return void 0===e&&(e="#FFF"),void 0===t&&(t={}),this.contrast(e)>=(s=void 0===(a=(n=t).size)?"normal":a,"AAA"===(o=void 0===(r=n.level)?"AA":r)&&"normal"===s?7:"AA"===o&&"large"===s?3:4.5);var n,r,o,a,s}}]);const{InteractiveDiv:Xt}=Yt;class en extends p.Component{render(){const{className:e,description:t,hideHelpFromVision:n,hideLabelFromVision:r,...o}=this.props,a=g()("newspack-form-token-field__input-container",e);return(0,_.jsxs)("div",{className:g()({"newspack-form-token-field--label-hidden":r,"newspack-form-token-field--help-hidden":n},"newspack-form-token-field"),children:[(0,_.jsx)(i.FormTokenField,{className:a,...o}),t&&(0,_.jsx)("p",{className:"newspack-form-token-field__help",children:t})]})}}const tn=en,nn=({simple:e})=>{const{components_demo:n=!1,support:r=!1,setup_wizard:o=!1,reset_url:a=!1,plugin_version:s={label:"Newspack"},remove_starter_content:c=!1,support_email:l}=window.newspack_urls||{},p=[{label:s.label,url:"https://newspack.com/category/release-notes/",external:!0},{label:(0,t.__)("About","newspack-plugin"),url:"https://newspack.com/",external:!0},{label:(0,t.__)("Documentation","newspack-plugin"),url:r,external:!0}];return n&&p.push({label:(0,t.__)("Components Demo","newspack-plugin"),url:n}),o&&p.push({label:(0,t.__)("Setup Wizard","newspack-plugin"),url:o}),a&&p.push({label:(0,t.__)("Reset Newspack","newspack-plugin"),url:a}),c&&p.push({label:(0,t.__)("Remove Starter Content","newspack-plugin"),url:c}),l&&p.push({label:(0,t.__)("Contact Support","newspack-plugin"),url:`mailto:${l}`}),(0,_.jsx)("div",{className:"newspack-footer",children:!e&&(0,_.jsx)("ul",{children:p.map(({url:e,label:t,external:n},r)=>(0,_.jsx)("li",{children:n?(0,_.jsx)(i.ExternalLink,{href:e,children:t}):(0,_.jsx)("a",{href:e,children:t})},r))})})};var rn=n(6139),on=n.n(rn);class an extends p.Component{constructor(){super(...arguments),this.state={pluginInfo:[],showModal:!1}}componentDidMount=()=>{this._isMounted=!0;const{plugin:e}=this.props;this.retrievePluginInfo(e)};componentWillUnmount=()=>{this._isMounted=!1};retrievePluginInfo=e=>{const{onReady:t}=this.props;A()({path:"/newspack/v1/plugins/"+e}).then(e=>{this._isMounted&&(t(e),this.setState({pluginInfo:e}))})};textForPlugin=e=>{const n={modalBody:null,modalTitle:e.Name&&`${(0,t.__)("Manage","newspack-plugin")} ${e.Name}`,primaryButton:e.Name&&`${(0,t.__)("Manage","newspack-plugin")} ${e.Name}`,primaryModalButton:(0,t.__)("Manage","newspack-plugin"),dismissModalButton:(0,t.__)("Dismiss","newspack-plugin")};return on()(n,this.props)};goToPlugin=e=>{const{editLink:t,showOnBlockEditor:n}=this.props;A()({path:"/newspack/v1/plugins/"+e+"/handoff",method:"POST",data:{editLink:t,handoffReturnUrl:window&&window.location.href,showOnBlockEditor:!!n}}).then(e=>{window.location.href=e.HandoffLink})};render(){const{className:e,children:n,compact:r,useModal:o,modalTitle:a,modalBody:s,onReady:i,editLink:c,...l}=this.props,{pluginInfo:u,showModal:d}=this.state,{modalBody:h,modalTitle:f,primaryButton:v,primaryModalButton:m,dismissModalButton:w}=this.textForPlugin(u),{Configured:y,Name:b,Slug:x,Status:k}=u,j=g()(y&&"is-configured",e);return(0,_.jsxs)(p.Fragment,{children:[b&&"active"===k&&(0,_.jsx)(ut,{className:j,isSecondary:!l.isPrimary&&!l.isTertiary&&!l.isLink,...l,onClick:()=>o?this.setState({showModal:!0}):this.goToPlugin(x),children:n||v}),b&&"active"!==k&&(0,_.jsx)(ut,{className:j,variant:"secondary",disabled:!0,...l,children:b+(0,t.__)(" not installed","newspack-plugin")}),!b&&(0,_.jsx)(ut,{className:j,isSecondary:!l.isPrimary&&!l.isTertiary&&!l.isLink,...l,children:(0,_.jsxs)(p.Fragment,{children:[!r&&(0,_.jsx)(Hn,{isLeft:!0}),(0,t.__)("Retrieving Plugin Info","newspack-plugin")]})}),d&&(0,_.jsxs)(dn,{title:f,onRequestClose:()=>this.setState({showModal:!1}),children:[(0,_.jsx)("p",{children:h}),(0,_.jsxs)(ht,{buttonsCard:!0,noBorder:!0,className:"justify-end",children:[(0,_.jsx)(ut,{variant:"secondary",onClick:()=>this.setState({showModal:!1}),children:w}),(0,_.jsx)(ut,{variant:"primary",onClick:()=>this.goToPlugin(x),children:m})]})]})]})}}an.defaultProps={onReady:()=>{}};const sn=an,cn="newspack_wizard_handoff_message";function ln(){const[e,t]=(0,p.useState)(!1);return(0,p.useEffect)(()=>{setTimeout(()=>{const e=JSON.parse(localStorage.getItem(cn));t(!!e?.message&&e.message),e?.url&&-1===window.location.href.indexOf(e.url)&&(window.localStorage.removeItem(cn),t(!1))},100)},[]),e?(0,_.jsx)(wn,{isHandoff:!0,isDismissible:!1,rawHTML:!0,noticeText:e}):null}var pn=(0,_.jsx)(x.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,_.jsx)(x.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 12a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm.75 4v1.5h-1.5V8h1.5Zm0 8v-5h-1.5v5h1.5Z"})});p.Component,p.Component;const un=({className:e="",columns:t=2,gutter:n=32,noMargin:r=!1,rowGap:o=0,...a})=>{const s=g()("newspack-grid",r&&"newspack-grid--no-margin",t&&"newspack-grid__columns-"+t,n&&"newspack-grid__gutter-"+n,o&&"newspack-grid__row-gap-"+o,e);return(0,_.jsx)("div",{className:s,...a})},dn=(0,p.forwardRef)(function({className:e,isWide:t,isNarrow:n,hideTitle:r,...o},a){const s=g()("newspack-modal",t&&"newspack-modal--wide",n&&"newspack-modal--narrow",r&&"newspack-modal--hide-title",e);return(0,_.jsx)(i.Modal,{className:s,...o,ref:a})});class hn extends p.Component{render(){const{className:e,simple:t,size:n,white:r}=this.props,o=g()("newspack-icon",t&&"newspack-icon--simple",r&&"newspack-icon--white",e);return(0,_.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",height:n,width:n,viewBox:"0 0 24 24",className:o,children:(0,_.jsx)(i.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M24 12C24 18.6271 18.6271 24 12 24C5.37213 24 0 18.6271 0 12C0 5.3729 5.3729 0 12 0C18.6271 0 24 5.3729 24 12ZM17.4545 17.4546L6.54545 6.54545V17.4545H8.72727V11.8182L14.3636 17.4546H17.4545ZM11.2727 8.18182H17.4545V6.54545H9.63636L11.2727 8.18182ZM17.4545 11.2727H14.3636L12.7273 9.63636H17.4545V11.2727ZM17.4545 12.7273V14.3636L15.8182 12.7273H17.4545Z"})})}}hn.defaultProps={size:32};const fn=hn;var vn=(0,_.jsx)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,_.jsx)(x.Path,{d:"M12 4a8 8 0 1 1 .001 16.001A8 8 0 0 1 12 4Zm0 1.5a6.5 6.5 0 1 0-.001 13.001A6.5 6.5 0 0 0 12 5.5Zm.75 11h-1.5V15h1.5v1.5Zm-.445-9.234a3 3 0 0 1 .445 5.89V14h-1.5v-1.25c0-.57.452-.958.917-1.01A1.5 1.5 0 0 0 12 8.75a1.5 1.5 0 0 0-1.5 1.5H9a3 3 0 0 1 3.305-2.984Z"})}),gn=(0,_.jsx)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,_.jsx)(x.Path,{d:"M6.13 5.5l1.926 1.927A4.975 4.975 0 007.025 10H5v1.5h2V13H5v1.5h2.1a5.002 5.002 0 009.8 0H19V13h-2v-1.5h2V10h-2.025a4.979 4.979 0 00-1.167-2.74l1.76-1.76-1.061-1.06-1.834 1.834A4.977 4.977 0 0012 5.5c-1.062 0-2.046.33-2.855.895L7.19 4.44 6.13 5.5zm2.37 5v3a3.5 3.5 0 107 0v-3a3.5 3.5 0 10-7 0z",fillRule:"evenodd",clipRule:"evenodd"})});class mn extends p.Component{render(){const{className:e,debugMode:t,isError:n,isHandoff:r,isHelp:o,isSuccess:a,isWarning:s,noticeText:i,rawHTML:c,style:l={},children:u=null}=this.props,d=g()("newspack-notice",e,t&&"newspack-notice__is-debug",n&&"newspack-notice__is-error",r&&"newspack-notice__is-handoff",o&&"newspack-notice__is-help",a&&"newspack-notice__is-success",s&&"newspack-notice__is-warning");let h;return h=o?vn:a?k:t?gn:pn,(0,_.jsxs)("div",{className:d,style:l,children:[(0,_.jsx)(b,{icon:h}),(0,_.jsxs)("div",{className:"newspack-notice__content",children:[c?(0,_.jsx)(p.RawHTML,{children:i}):i,u||null]})]})}}const wn=mn;class yn extends p.Component{constructor(){super(...arguments),this.state={pluginInfo:{},installationInitialized:!1}}componentDidMount=()=>{const{plugins:e}=this.props;this.retrievePluginInfo(e).then(()=>{this.props.autoInstall&&this.installAllPlugins()})};componentDidUpdate=e=>{const{autoInstall:t,plugins:n}=this.props,{installationInitialized:r}=this.state;n!==e.plugins&&this.retrievePluginInfo(n),t&&!r&&this.installAllPlugins()};retrievePluginInfo=e=>new Promise(t=>{A()({path:"/newspack/v1/plugins/"}).then(n=>{const r=Object.keys(n).reduce((t,r)=>(-1===e.indexOf(r)||(t[r]={...n[r],installationStatus:"active"===n[r].Status?1:0}),t),{});this.updatePluginInfo(r).then(()=>t())})});installAllPlugins=()=>{const{pluginInfo:e}=this.state;this.setState({installationInitialized:!0}),Object.keys(e).filter(t=>"active"!==e[t].Status).map(e=>()=>this.installPlugin(e)).reduce((e,t)=>e.then(e=>t().then(Array.prototype.concat.bind(e))),Promise.resolve([]))};installPlugin=e=>{this.setInstallationStatus(e,2);const t={path:`/newspack/v1/plugins/${e}/configure/`,method:"post"};return A()(t).then(t=>{const{pluginInfo:n}=this.state;this.props.onInstalled(e),this.updatePluginInfo({...n,[e]:{...t,installationStatus:1}})}).catch(t=>{this.setInstallationStatus(e,3,t.message)})};setChecked=(e,t)=>{const{pluginInfo:n}=this.state;this.updatePluginInfo({...n,[e]:{...n[e],checked:t}})};setInstallationStatus=(e,t,n=null)=>{const{pluginInfo:r}=this.state;this.updatePluginInfo({...r,[e]:{...r[e],installationStatus:t,notification:n}})};updatePluginInfo=e=>new Promise(t=>{const{onStatus:n}=this.props;this.setState({pluginInfo:e},()=>{const r=Object.values(e).every(e=>"active"===e.Status);n({complete:r,pluginInfo:e}),t()})});classForInstallationStatus=e=>{switch(e){case 1:return"newspack-plugin-installer__status-active";case 2:return"newspack-plugin-installer__status-installing";case 3:return"newspack-plugin-installer__status-error";default:return"newspack-plugin-installer__status-none"}};render(){const{autoInstall:e,isSmall:n,withoutFooterButton:r}=this.props,{pluginInfo:o}=this.state,{is_managed:a}=window.newspack_aux_data||{},s=Object.keys(o),i=[];s.forEach(e=>{const t=o[e];i.push(t.Status)});const c=e=>"active"===e||"inactive"===e,l=i.every(c)?(0,t.__)("Activate","newspack-plugin"):(0,t.__)("Install","newspack-plugin"),p=s.some(e=>{const t=o[e];return"active"!==t.Status&&0===t.installationStatus});return(0,_.jsxs)(_.Fragment,{children:[(!o||!Object.keys(o).length)&&(0,_.jsxs)("div",{className:"newspack-plugin-installer_is-waiting",children:[(0,_.jsx)(Hn,{isLeft:!0}),(0,t.__)("Retrieving plugin information","newspack-plugin")]}),o&&s.length>0&&s.map(e=>{const r=o[e],{Name:s,Description:i,Download:l,Status:p,installationStatus:u,notification:d}=r,h=2===u,f=!h&&"active"!==p,v=l||c(p);let m;2===u?m="inactive"===p?(0,t.__)("Activating"):(0,t.__)("Installing"):v?"uninstalled"===p?m=(0,_.jsxs)("span",{className:"newspack-plugin-installer__status",children:[(0,t.__)("Install","newspack"),(0,_.jsx)("span",{className:"newspack-checkbox-icon"})]}):"inactive"===p?m=(0,_.jsxs)("span",{className:"newspack-plugin-installer__status",children:[(0,t.__)("Activate","newspack-plugin"),(0,_.jsx)("span",{className:"newspack-checkbox-icon"})]}):"active"===p&&(m=(0,_.jsxs)("span",{className:"newspack-plugin-installer__status",children:[(0,t.__)("Installed","newspack-plugin"),(0,_.jsx)("span",{className:"newspack-checkbox-icon newspack-checkbox-icon--checked",children:(0,_.jsx)(b,{icon:k})})]})):m=(0,_.jsxs)("span",{className:"newspack-plugin-installer__status",children:[a?(0,t.__)("Contact Newspack support to install","newspack-plugin"):(0,t.__)("Plugin must be installed manually","newspack-plugin"),(0,_.jsx)("span",{className:"newspack-checkbox-icon"})]});const w=g()("newspack-action-card__plugin-installer",this.classForInstallationStatus(u)),y=f?()=>this.installPlugin(e):null;return(0,_.jsx)(P,{title:s,description:i,disabled:!v,actionText:m,isSmall:n,isWaiting:h,onClick:y,notification:d,notificationLevel:"error",notificationHTML:!0,className:w},e)}),!r&&!e&&o&&s.length>0&&(0,_.jsx)("div",{className:"newspack-buttons-card",children:(0,_.jsx)(ut,{disabled:!p,isPrimary:!0,onClick:this.installAllPlugins,children:l})})]})}}yn.defaultProps={onStatus:()=>{},onInstalled:()=>{}};const bn=yn,xn=window.wp.hooks,kn=e=>Array.isArray(e.options)&&e.options.length,jn=e=>{switch(e.type){case"int":case"integer":case"float":case"number":return"number";case"string":case"text":return"text";case"password":return"password";case"boolean":case"checkbox":return"checkbox";default:return null}},Sn=e=>{var n;const[r,o]=(0,p.useState)(!0),{error:a,sectionKey:s,active:c,title:l,description:u,fields:d,disabled:h,onChange:f,onUpdate:v}=e,g=e=>({disabled:h,name:`${e.section}_${e.key}`,type:jn(e),label:e.description,help:e.help||null,options:e.options?.map(e=>({value:e.value,label:e.name||e.label}))||null,value:e.value,multiple:!(!kn(e)||!e.multiple)||null,checked:"boolean"===e.type?!!e.value:null,onChange:t=>{f(e.key,t),o(!1)}}),m=(t,n=null)=>(0,xn.applyFilters)(`newspack.settingSection.${s}.${t}`,n,e);let w=2;return d.length%3==0?w=3:1===d.length&&(w=1),(0,_.jsx)(P,{id:null!==(n=e.id)&&void 0!==n?n:null,isMedium:!0,disabled:h,title:l,description:u,toggleChecked:c,hasGreyHeader:c||null===c,toggleOnChange:null!==c?e=>v({active:e}):null,actionContent:(c||null===c)&&m("buttons",(0,_.jsx)(ut,{variant:"primary",disabled:h||r,onClick:()=>{v(),o(!0)},children:(0,t.__)("Save Settings","newspack")})),children:(c||null===c)&&(0,_.jsxs)(p.Fragment,{children:[a?.message&&(0,_.jsx)(wn,{noticeText:a.message,isError:!0}),m("beforeControls"),(0,_.jsx)(un,{columns:w,gutter:32,children:d.map(e=>{const t=(e=>{if(kn(e))return Mn;switch(e.type){case"checkbox":case"boolean":return i.CheckboxControl;default:return Bn}})(e);return(0,xn.applyFilters)(`newspack.settingsSection.${s}.control`,(0,_.jsx)(t,{...g(e)},e.key),{sectionKey:s,setting:e,onChange:f})})})]})})};class Cn extends p.Component{constructor(){super(...arguments),this.state={inFlight:!1,settings:{},error:null}}fetchSettings=()=>{const{afterFetch:e,pluginSlug:t,isWizard:n}=this.props;this.setState({inFlight:!0}),A()({path:n?`/newspack/v1/wizard/${t}/settings`:`/${t}/v1/settings`}).then(t=>{this.setState({settings:t,error:null}),"function"==typeof e&&e(t)}).catch(e=>{this.setState({error:e})}).finally(()=>{this.setState({inFlight:!1})})};componentDidMount(){this.fetchSettings()}getSettingsValues=e=>this.state.settings[e]?.reduce((e,t)=>(e[t.key]=t.value,e),{})||{};handleSettingChange=e=>(t,n)=>{const r=[...this.state.settings[e]];r.forEach(e=>{e.key===t&&(e.value=n)}),this.setState({settings:{...this.state.settings,[e]:r}})};handleSectionUpdate=e=>t=>{const{afterUpdate:n,pluginSlug:r,isWizard:o}=this.props;this.setState({inFlight:!0}),A()({path:o?`/newspack/v1/wizard/${r}/settings`:`/${r}/v1/settings`,method:"POST",data:{section:e,settings:t||this.getSettingsValues(e)}}).then(t=>{this.setState({settings:{...this.state.settings,[e]:t[e]},error:null}),"function"==typeof n&&n(t)}).catch(e=>{this.setState({error:e})}).finally(()=>{this.setState({inFlight:!1})})};getSectionInfo=e=>this.state.settings[e]?.find(e=>!e.key||"active"===e.key);getSectionTitle=e=>this.getSectionInfo(e)?.description;getSectionDescription=e=>this.getSectionInfo(e)?.help;isSectionActive=e=>{const{settings:t}=this.state,n=t[e]?.find(e=>"active"===e.key);return n?n.value:null};getSectionFields=e=>this.state.settings[e]?.filter(e=>e.key&&"active"!==e.key);render(){const{title:e,description:t,hasGreyHeader:n,children:r,titleLevel:o=1}=this.props,{settings:a,inFlight:s,error:i}=this.state;return(0,_.jsxs)(p.Fragment,{children:[e&&(0,_.jsx)(On,{title:e,heading:o,description:t}),i&&(0,_.jsx)(wn,{isError:!0,noticeText:i.message}),(0,_.jsxs)("div",{className:g()("newspack-plugin-settings",{"newspack-wizard-section__is-loading":s&&!Object.keys(a).length}),children:[Object.keys(a).map(e=>(0,_.jsx)(Sn,{disabled:s,id:`plugin-settings-${e}`,sectionKey:e,title:this.getSectionTitle(e),description:this.getSectionDescription(e),active:this.isSectionActive(e),fields:this.getSectionFields(e),onChange:this.handleSettingChange(e),onUpdate:this.handleSectionUpdate(e),hasGreyHeader:n},e)),r]})]})}}Cn.defaultProps={title:(0,t.__)("General Settings","newspack-plugin")},Cn.Section=Sn;class Pn extends p.Component{render(){const{className:e,padding:t,...n}=this.props,r=g()("newspack-popover",t&&"newspack-popover__padding-"+t,e);return(0,_.jsx)(i.Popover,{className:r,...n})}}Pn.defaultProps={padding:!1};const On=({centered:e=!1,className:t=null,description:n="",heading:r=2,isWhite:o=!1,noMargin:a=!1,title:s,id:i=null})=>{const c=(0,p.useRef)();(0,p.useEffect)(()=>{const e=new Proxy(new URLSearchParams(window.location.search),{get:(e,t)=>e.get(t)}).scrollTo;e&&e===i&&window.setTimeout(()=>c.current.scrollIntoView({behavior:"smooth"}),250)},[]);const l=g()("newspack-section-header",e&&"newspack-section-header--is-centered",o&&"newspack-section-header--is-white",a&&"newspack-section-header--no-margin",t),u=`h${r}`;return(0,_.jsx)("div",{id:i,className:"newspack-section-header__container",ref:c,children:(0,_.jsxs)(un,{columns:1,gutter:8,className:l,children:["string"==typeof s&&(0,_.jsx)(u,{children:s}),"function"==typeof s&&(0,_.jsx)(u,{children:s()}),n&&"string"==typeof n&&(0,_.jsx)("p",{children:n}),"function"==typeof n&&(0,_.jsx)("p",{children:n()}),n&&"string"!=typeof n&&"function"!=typeof n&&(0,_.jsx)("p",{children:n})]})})};var Tn=n(2426),Nn=n.n(Tn);function An({help:e,label:n,onChange:r,optgroups:o=[],className:a,hideLabelFromVision:s,...c}){const l=Kt("group-select");return(0,_.jsx)(i.BaseControl,{label:n,hideLabelFromVision:s,id:l,help:e,className:g()(a,"components-select-control"),children:(0,_.jsxs)("div",{className:"relative",children:[(0,_.jsxs)("select",{id:l,className:"components-select-control__input",onChange:e=>{const{value:t}=e.target,n=vt()(o,e=>Nn()(e.options,["value",t]));r(t,n)},"aria-describedby":e?`${l}__help`:void 0,...c,children:[(0,_.jsx)("option",{value:"",children:(0,t.__)("-- Select --","newspack-plugin")}),o.map(({label:e,options:t},n)=>(0,_.jsx)("optgroup",{label:e,children:t.map((e,t)=>(0,_.jsx)("option",{value:e.value,disabled:e.disabled,children:e.label},`${e.label}-${e.value}-${t}`))},n))]}),(0,_.jsx)("div",{className:"components-select-control__arrow-wrapper",children:(0,_.jsx)(b,{icon:S,size:18})})]})})}const En=({buttonOptions:e,buttonSmall:t,className:n,help:r,hideLabelFromVision:o,label:a,onChange:s,value:c})=>{const l=Kt("button-group");return(0,_.jsx)(i.BaseControl,{label:a,help:r,hideLabelFromVision:o,id:l.current,className:g()(n,"components-select-control"),children:(0,_.jsx)(i.ButtonGroup,{children:e.map(e=>{const n=c===e.value;let r=()=>e.label;return e.icon&&(r=()=>(0,_.jsx)(b,{icon:e.icon})),(0,_.jsx)(i.Button,{variant:n?"primary":null,isPressed:n,onClick:()=>s(e.value),isSmall:t,children:(0,_.jsx)(r,{})},e.value)})})})};class Ln extends p.Component{render(){const{className:e,optgroups:t,buttonOptions:n,buttonSmall:r,...o}=this.props,a=g()("newspack-select-control",t&&"newspack-grouped-select-control",n&&"newspack-buttons-select-control",e);return(0,_.jsx)("div",{className:a,children:t?(0,_.jsx)(An,{optgroups:t,...o}):n?(0,_.jsx)(En,{buttonOptions:n,buttonSmall:r,...o}):(0,_.jsx)(i.SelectControl,{...o})})}}const Mn=Ln;var In=n(4713),Rn=n.n(In);const{NavLink:Dn,useHistory:Fn}=lt,zn=({items:e,className:t,disableUpcoming:n,children:r=null})=>{const o=e.filter(e=>!e.isHiddenInTabbedNavigation),{location:a}=Fn(),s=Rn()(o,["path",a.pathname]);return(0,_.jsxs)("div",{className:g()("newspack-tabbed-navigation",t),children:[(0,_.jsx)("ul",{children:o.map((e,t)=>(0,_.jsx)("li",{children:(0,_.jsx)(Dn,{to:e.path,isActive:(t,{pathname:n})=>function(e,t,n){return e.path===n||(Array.isArray(e?.activeTabPaths)?e.activeTabPaths.some(t=>{if(t.endsWith("*")){const e=t.slice(0,-1);return n.startsWith(e)}return e.activeTabPaths.includes(n)}):t)}(e,t,n),exact:!e.hasOwnProperty("exact")||e.exact,activeClassName:"selected",className:g()({disabled:n&&t>s}),children:e.label})},t))}),r]})},Bn=({className:e="",required:n=!1,isWide:r=!1,withMargin:o=!0,...a})=>{const s=(0,p.useRef)(null);(0,p.useEffect)(()=>{if(null===s.current)return;const e=s.current.querySelector("label");e&&e.setAttribute("data-required-text",(0,t.__)("(required)","newspack-plugin"))},[s.current]);const c=g()("newspack-text-control",{"newspack-text-control--wide":r,"newspack-text-control--with-margin":o},e);return n?(0,_.jsx)("div",{ref:s,className:"newspack-text-control--required",children:(0,_.jsx)(i.TextControl,{className:c,required:n,...a})}):(0,_.jsx)(i.TextControl,{className:c,...a})};class $n extends p.Component{render(){const{className:e,isRight:t,isLeft:n,isCenter:r,...o}=this.props,a=g()("newspack-waiting",e,{"is-right":t,"is-left":n,"is-center":r});return(0,_.jsx)(i.Spinner,{className:a,...o})}}const Hn=$n;var qn=(0,_.jsx)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,_.jsx)(x.Path,{d:"M20.5 16h-.7V8c0-1.1-.9-2-2-2H6.2c-1.1 0-2 .9-2 2v8h-.7c-.8 0-1.5.7-1.5 1.5h20c0-.8-.7-1.5-1.5-1.5zM5.7 8c0-.3.2-.5.5-.5h11.6c.3 0 .5.2.5.5v7.6H5.7V8z"})}),Vn=(0,_.jsx)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,_.jsx)(x.Path,{d:"M17 4H7c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H7c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h10c.3 0 .5.2.5.5v12zm-7.5-.5h4V16h-4v1.5z"})}),Un=(0,_.jsx)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,_.jsx)(x.Path,{d:"M15 4H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H9c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h6c.3 0 .5.2.5.5v12zm-4.5-.5h2V16h-2v1.5z"})}),Wn=(0,_.jsx)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,_.jsx)(x.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})});const Gn="newspack-components-web-preview-wrapper";class Zn extends p.Component{state={device:"desktop",loaded:!1,isPreviewVisible:!1};constructor(e){super(e),this.iframeRef=(0,p.createRef)()}componentDidMount(){const e=document.getElementById(Gn);this.modalDOMElement=e||document.createElement("div"),e||(this.modalDOMElement.id=Gn,document.body.appendChild(this.modalDOMElement))}componentDidUpdate(){!0===this.state.isPreviewVisible?document.body.classList.add("newspack-web-preview--open"):document.body.classList.remove("newspack-web-preview--open")}getWebPreviewModal=()=>{const{beforeLoad:e=()=>{},onClose:n=()=>{},url:r}=this.props,{device:o,loaded:a,isPreviewVisible:s}=this.state;if(!this.modalDOMElement||!s)return null;const c=g()("newspack-web-preview",o,a&&"is-loaded");return e(),(0,p.createPortal)((0,_.jsx)("div",{className:c,children:(0,_.jsxs)("div",{className:"newspack-web-preview__interior",children:[(0,_.jsxs)("div",{className:"newspack-web-preview__toolbar",children:[(0,_.jsx)("div",{className:"newspack-web-preview__toolbar-left",children:(0,_.jsxs)(i.ButtonGroup,{children:[(0,_.jsx)(i.Button,{onClick:()=>this.setState({device:"desktop"}),variant:"desktop"===o&&"primary",icon:qn,label:(0,t.__)("Preview Desktop Size","newspack-plugin")}),(0,_.jsx)(i.Button,{onClick:()=>this.setState({device:"tablet"}),variant:"tablet"===o&&"primary",icon:Vn,label:(0,t.__)("Preview Tablet Size","newspack-plugin")}),(0,_.jsx)(i.Button,{onClick:()=>this.setState({device:"phone"}),variant:"phone"===o&&"primary",icon:Un,label:(0,t.__)("Preview Phone Size","newspack-plugin")})]})}),(0,_.jsx)("div",{className:"newspack-web-preview__toolbar-right",children:(0,_.jsx)(i.Button,{onClick:()=>{n(),this.setState({isPreviewVisible:!1,loaded:!1})},icon:Wn,label:(0,t.__)("Close Preview","newspack-plugin")})})]}),(0,_.jsxs)("div",{className:"newspack-web-preview__content",children:[!a&&(0,_.jsxs)("div",{className:"newspack-web-preview__is-waiting",children:[(0,_.jsx)(Hn,{isLeft:!0}),(0,t.__)("Loading","newspack-plugin")]}),(0,_.jsx)("iframe",{ref:this.iframeRef,title:"web-preview",src:r,onLoad:()=>{this.setState({loaded:!0}),this.props.onLoad(this.iframeRef.current)}})]})]})}),this.modalDOMElement)};showPreview=()=>{this.setState({isPreviewVisible:!0})};render(){const{label:e,variant:t,renderButton:n}=this.props;return(0,_.jsxs)(p.Fragment,{children:[n?n({showPreview:this.showPreview}):(0,_.jsx)(i.Button,{variant:t,onClick:this.showPreview,tabIndex:"0",children:e}),this.getWebPreviewModal()]})}}Zn.defaultProps={url:"//newspack.com",label:(0,t.__)("Preview","newspack-plugin"),onLoad:()=>{}};const Qn=Zn;var Kn=(0,_.jsx)(x.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,_.jsx)(x.Path,{d:"M6 5.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM4 6a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2H6a2 2 0 01-2-2V6zm11-.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5h-3a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM13 6a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2h-3a2 2 0 01-2-2V6zm5 8.5h-3a.5.5 0 00-.5.5v3a.5.5 0 00.5.5h3a.5.5 0 00.5-.5v-3a.5.5 0 00-.5-.5zM15 13a2 2 0 00-2 2v3a2 2 0 002 2h3a2 2 0 002-2v-3a2 2 0 00-2-2h-3zm-9 1.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5v-3a.5.5 0 01.5-.5zM4 15a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2H6a2 2 0 01-2-2v-3z",fillRule:"evenodd",clipRule:"evenodd"})}),Jn=n(3560),Yn=n.n(Jn),Xn=n(8156),er=n.n(Xn),tr=n(2193),nr=n.n(tr);const rr=e=>t=>({type:e,payload:t}),or="newspack/wizards",ar={isLoading:!1,isQuietLoading:!1,apiData:{},error:null},sr=e=>JSON.parse(JSON.stringify(e)),ir={startLoadingData:rr("START_LOADING_DATA"),finishLoadingData:rr("FINISH_LOADING_DATA"),fetchFromAPI:rr("FETCH_FROM_API"),setAPIDataForWizard:rr("SET_API_DATA"),updateWizardSettings:rr("UPDATE_WIZARD_SETTINGS"),setError:rr("SET_ERROR"),*saveWizardSettings({slug:e,section:t="",payloadPath:n=!1,auxData:r={},updatePayload:a=null}){a&&(yield ir.updateWizardSettings({slug:e,...a}));const s=(0,o.select)(or).getWizardAPIData(e),i=n?er()(s,n):s,c=yield ir.fetchFromAPI({path:`/newspack/v1/wizard/${e}/${t}`,method:"POST",data:{...i,...r},isQuietFetch:!0});if(!nr()(c)&&!c.error)return ir.setAPIDataForWizard({slug:e,data:c})},*wizardApiFetch(e){return yield ir.fetchFromAPI(e)}},cr=(0,o.createReduxStore)(or,{reducer:(e=ar,{type:t,payload:n={}})=>{switch(t){case"START_LOADING_DATA":return n.isQuietLoading?{...e,isQuietLoading:!0}:{...e,isLoading:!0};case"FINISH_LOADING_DATA":return{...e,isLoading:!1,isQuietLoading:!1};case"SET_API_DATA":return Yn()(sr(e),["apiData",n.slug],n.data);case"UPDATE_WIZARD_SETTINGS":return Yn()(sr(e),["apiData",n.slug,...n.path],n.value);case"SET_ERROR":return{...e,error:n};default:return e}},actions:ir,selectors:{isLoading:e=>e.isLoading,isQuietLoading:e=>e.isQuietLoading,getWizardAPIData:(e,t)=>e.apiData[t]||{},getWizardData:(e,t)=>{var n;return null!==(n=e.apiData[t])&&void 0!==n?n:{}},getError:e=>e.error},controls:{FETCH_FROM_API:e=>{const{isLocalError:t=!1,isQuietFetch:n=!1}=e.payload;return(0,o.dispatch)(or).startLoadingData({isQuietLoading:Boolean(n)}),A()(e.payload).then(e=>((0,o.dispatch)(or).setError(null),e)).catch(e=>{if(t)throw e;(0,o.dispatch)(or).setError(e)}).finally(e=>((0,o.dispatch)(or).finishLoadingData(),e))}},resolvers:{*getWizardAPIData(e){if(e){const t=yield ir.fetchFromAPI({path:`/newspack/v1/wizard/${e}`});return ir.setAPIDataForWizard({slug:e,data:t})}return ir.finishLoadingData()}}}),lr=()=>{const e=(0,o.useSelect)(e=>e(or).getError());if(!e)return null;const{level:n,message:r}=(({data:e,message:t,code:n})=>{let r="fatal";return e&&"level"in e?r=e.level:"rest_invalid_param"===n&&(r="notice"),{message:t,level:r}})(e);if("fatal"===n){const e="undefined"!=typeof newspack_urls&&newspack_urls.dashboard;return(0,_.jsxs)(dn,{title:(0,t.__)("Unrecoverable error"),onRequestClose:e?()=>window.location=e:void 0,children:[(0,_.jsx)(wn,{noticeText:r,isError:!0,rawHTML:!0}),e&&(0,_.jsx)(ht,{buttonsCard:!0,noBorder:!0,className:"justify-end",children:(0,_.jsx)(ut,{isPrimary:!0,href:e,children:(0,t.__)("Return to Dashboard","newspack-plugin")})})]})}return(0,_.jsx)(wn,{isError:!0,className:"newspack-wizard__above-header",noticeText:r,rawHTML:!0})};(0,o.register)(cr);const{HashRouter:pr,Redirect:ur,Route:dr,Switch:hr}=lt,{Redirect:fr,Route:vr}=((0,p.forwardRef)(({sections:e=[],headerText:n,apiSlug:r,subHeaderText:a,hasSimpleFooter:s,className:i,renderAboveSections:c,requiredPlugins:l=[],isInitialFetchTriggered:u=!0},d)=>{const h=(0,o.useSelect)(e=>e(or).isLoading()),f=(0,o.useSelect)(e=>e(or).isQuietLoading());(0,o.useSelect)(e=>u&&e(or).getWizardAPIData(r));let v=e.filter(e=>!e.isHidden);const[m,w]=(0,p.useState)(0===l.length);m||(n=l.length>1?(0,t.__)("Required plugins","newspack-plugin"):(0,t.__)("Required plugin","newspack-plugin"),v=[{path:"/",render:()=>(0,_.jsx)(bn,{plugins:l,onStatus:({complete:e})=>w(e)})}]);const y=window.location.href.split("#")[0];return(0,_.jsxs)("div",{ref:d,children:[(0,_.jsx)("div",{className:g()(h?"newspack-wizard__is-loading":"newspack-wizard__is-loaded",{"newspack-wizard__is-loading-quiet":f}),children:(0,_.jsxs)(pr,{hashType:"slash",children:[newspack_aux_data.is_debug_mode&&(0,_.jsx)(wn,{debugMode:!0}),(0,_.jsx)("div",{className:"bg-white",children:(0,_.jsx)("div",{className:"newspack-wizard__header__inner",children:(0,_.jsxs)("div",{className:"newspack-wizard__title",children:[newspack_urls.dashboard!==y?(0,_.jsx)(ut,{isLink:!0,href:newspack_urls.dashboard,label:(0,t.__)("Return to Dashboard","newspack-plugin"),showTooltip:!0,icon:Kn,iconSize:36,children:(0,_.jsx)(fn,{size:36})}):(0,_.jsx)(fn,{size:36}),(0,_.jsxs)("div",{children:[n&&(0,_.jsx)("h2",{children:n}),a&&(0,_.jsx)("span",{children:a})]})]})})}),v.length>1&&(0,_.jsx)(zn,{items:v,children:(0,_.jsx)(lr,{})}),(0,_.jsx)(ln,{}),(0,_.jsxs)(hr,{children:[v.map((e,t)=>{var n;const r=e.render;return(0,_.jsx)(dr,{exact:null!==(n=e.exact)&&void 0!==n&&n,path:e.path,children:(0,_.jsxs)("div",{className:g()("newspack-wizard__content",i),children:["function"==typeof c?c():null,(0,_.jsx)(r,{})]})},t)}),(0,_.jsx)(ur,{to:v[0].path})]})]})}),!h&&(0,_.jsx)(nn,{simple:s})]})}),lt);n(1882),n(3805),n(5015);const gr=(0,r.compose)([(0,o.withSelect)(e=>{const{isSavingPost:t,getCurrentPostId:n,getEditedPostAttribute:r}=e("core/editor");return{postId:n(),metaFields:r("meta"),isSavingPost:t()}}),(0,o.withDispatch)(e=>({autosavePost:()=>e("core/editor").autosave()}))])(({autosavePost:e,isSavingPost:n,postId:r,metaFields:o})=>{const a=window.newspack_popups_data?.preview_query_keys||{},s=window?.newspack_popups_data?.frontend_url||"/",c={};Object.keys(o).forEach(e=>{a.hasOwnProperty(e)&&(c[a[e]]=o[e])});const l={pid:r,...c},p="archives"===o.placement,u=window.newspack_popups_data[p?"preview_archive":"preview_post"]||"/";return(0,_.jsx)(Qn,{url:(0,E.addQueryArgs)(u,l),onLoad:e=>{e&&[...e.contentWindow.document.querySelectorAll('a[href^="'+s+'"]')].forEach(e=>{e.setAttribute("href",(0,E.addQueryArgs)(e.getAttribute("href"),l))})},renderButton:({showPreview:r})=>(0,_.jsx)(i.Button,{isPrimary:!0,isBusy:n,disabled:n,onClick:()=>e().then(r),children:(0,t.__)("Preview","newspack-popups")})})}),_r=(0,r.compose)([(0,o.withSelect)(e=>{const{isSavingPost:t,getCurrentPostId:n,getEditedPostAttribute:r}=e("core/editor"),{duplicate_of:o}=r("meta");return{postId:n(),isSavingPost:t(),title:r("title"),campaignGroups:r("newspack_popups_taxonomy"),duplicateOf:o}}),(0,o.withDispatch)(e=>{const{autosave:t}=e("core/editor"),{createNotice:n}=e("core/notices");return{autosave:t,createNotice:n}})])(({autosave:e,campaignGroups:n,duplicateOf:r,isSavingPost:o,postId:a,title:s})=>{const[c,l]=(0,p.useState)(null),[u,d]=(0,p.useState)(!1),[h,f]=(0,p.useState)(null),[v,g]=(0,p.useState)(null);(0,p.useEffect)(()=>{l(null),u&&!h&&m(),u||(g(null),f(null))},[u]);const m=async()=>{const e=parseInt(r||a);try{const t=await A()({path:`/newspack-popups/v1/${e}/${a}/duplicate`});f(t)}catch(e){f(s+(0,t.__)("copy","newspack-popups"))}};return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(i.Button,{isSecondary:!0,isBusy:o,disabled:o,onClick:()=>d(!0),children:(0,t.__)("Duplicate","newspack-popups")}),u&&(0,_.jsxs)(i.Modal,{className:"newspack-popups__duplicate-modal",title:(0,t.sprintf)((0,t.__)("Duplicate %s","newspack-popups"),s),onRequestClose:()=>d(!1),children:[c&&(0,_.jsx)(i.Notice,{isDismissible:!1,status:"error",children:c}),v?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(i.Notice,{status:"success",isDismissible:!1,children:(0,t.sprintf)(
// translators: %s: title of the duplicated popup.
// translators: %s: title of the duplicated popup.
(0,t.__)("Duplicate of %s created as a draft.","newspack-popups"),s)}),(!n||0===n.length)&&(0,_.jsx)(i.Notice,{status:"warning",isDismissible:!1,children:(0,t.__)("This prompt is currently not assigned to any campaign.","newspack-popups")}),(0,_.jsxs)(i.Flex,{justify:"flex-end",children:[(0,_.jsx)(i.Button,{isSecondary:!0,onClick:()=>d(!1),children:(0,t.__)("Close","newspack-popups")}),(0,_.jsx)(i.Button,{isPrimary:!0,href:`/wp-admin/post.php?post=${v}&action=edit`,children:(0,t.__)("Edit","newspack-popups")})]})]}):(0,_.jsxs)(_.Fragment,{children:[(!n||0===n.length)&&(0,_.jsx)(i.Notice,{status:"warning",isDismissible:!1,children:(0,t.__)("This prompt will not be assigned to any campaign.","newspack-popups")}),(0,_.jsx)(i.TextControl,{disabled:o||null===h,label:(0,t.__)("Title","newspack-popups"),value:h,onChange:e=>f(e)}),(0,_.jsxs)(i.Flex,{justify:"flex-end",children:[(0,_.jsx)(i.Button,{isBusy:o,isSecondary:!0,onClick:()=>{d(!1)},children:(0,t.__)("Cancel","newspack-popups")}),(0,_.jsx)(i.Button,{isBusy:o,disabled:null===h,isPrimary:!0,onClick:()=>{const n=h.trim()||s+(0,t.__)("copy","newspack-popups");e().then((async(e,n)=>{l(null);try{const r=await A()({path:(0,E.addQueryArgs)(`/newspack-popups/v1/${e}/duplicate`,{title:n}),method:"POST"});if(isNaN(r))throw new Error((0,t.__)("Error duplicating prompt.","newspack-popups"));g(r)}catch(e){l(e?.message||(0,t.__)("Error duplicating prompt.","newspack-popups"))}})(a,n))},children:(0,t.__)("Duplicate","newspack-popups")})]})]})]})]})}),mr=window.wp.date,wr=()=>(0,_.jsx)(i.SVG,{width:"24",height:"24",viewBox:"0 0 24 24",children:(0,_.jsx)("path",{d:"M9.16601 4H10V5.5H9.16601C8.74401 5.5 8.25901 5.86 8.14001 6.543L7.63601 9.443C7.54684 9.96776 7.31701 10.4585 6.97101 10.863L6.00001 12L6.97301 13.138C7.31601 13.536 7.54301 14.028 7.63601 14.557L8.14001 17.457C8.25901 18.141 8.74401 18.5 9.16601 18.5H10V20H9.16601C7.87201 20 6.87901 18.965 6.66201 17.714L6.15801 14.815C6.11566 14.5585 6.00514 14.3181 5.83801 14.119L5.83701 14.118L3.99701 12L5.83901 9.88C5.99401 9.701 6.10901 9.46 6.15901 9.185L6.66201 6.287C6.87901 5.035 7.87201 4 9.16601 4ZM17.838 9.185L17.334 6.287C17.117 5.035 16.124 4 14.83 4H13.996V5.5H14.83C15.252 5.5 15.738 5.86 15.856 6.543L16.36 9.443C16.452 9.967 16.679 10.465 17.025 10.863L17.996 12L17.023 13.138C16.6782 13.5426 16.4491 14.0329 16.36 14.557L15.856 17.457C15.738 18.141 15.252 18.5 14.83 18.5H13.996V20H14.83C16.125 20 17.117 18.965 17.334 17.714L17.838 14.815C17.886 14.542 18.002 14.301 18.158 14.119L18.159 14.118L20 12L18.157 9.88C17.9902 9.68121 17.88 9.44113 17.838 9.185Z"})}),yr=({tags:e,attributes:n,setAttributes:r})=>{const{clientId:a,selectionStart:s,selectionEnd:c}=(0,o.useSelect)(e=>({clientId:e("core/block-editor").getSelectedBlockClientId(),selectionStart:e("core/block-editor").getSelectionStart(),selectionEnd:e("core/block-editor").getSelectionEnd()})),{selectionChange:l}=(0,o.useDispatch)("core/block-editor");return s.clientId!==c.clientId?null:(0,_.jsx)(y.BlockControls,{children:(0,_.jsx)(i.ToolbarGroup,{children:(0,_.jsx)(i.ToolbarDropdownMenu,{icon:wr,label:(0,t.__)("Merge tags","newspack-popups"),menuProps:{className:"newspack-popups__merge-tags-menu"},controls:e.map(e=>({title:e.description,onClick:()=>{const t=`{{${e.name.toUpperCase()}}}`,o=n.content.slice(0,s.offset)+t+n.content.slice(c.offset),i=s.offset+t.length;r({content:o}),l(a,"content",i,i)}}))})})})},br=[],xr=newspack_popups_data.segments_admin_url,kr=newspack_popups_data.segments_taxonomy,jr=(0,r.compose)([(0,o.withSelect)(e=>{const{getEditedPostAttribute:t}=e("core/editor"),n=t("meta"),{background_color:r,frequency:o,frequency_max:a,frequency_start:s,frequency_between:i,frequency_reset:c,hide_border:l,large_border:p,no_padding:u,close_button_background_color:h,enable_close_button_background:f,overlay_color:v,overlay_opacity:g,overlay_size:_,no_overlay_background:m,placement:w,trigger_type:y,trigger_delay:b,trigger_scroll_progress:x,trigger_blocks_count:k,archive_insertion_posts_count:j,archive_insertion_is_repeating:S,utm_suppression:C,post_types:P,archive_page_types:O,additional_classes:T,excluded_categories:N,excluded_tags:A,expiration_date:E}=n||{},L=d(w),M=e("core/editor").getEditedPostAttribute("status");return{background_color:r,hide_border:l,large_border:p,no_padding:u,frequency:o,frequency_max:a,frequency_start:s,frequency_between:i,frequency_reset:c,close_button_background_color:h,enable_close_button_background:f,overlay_color:v,overlay_opacity:g,featured_image_id:t("featured_media"),overlay_size:"full"===_?"full-width":_,no_overlay_background:m,placement:w,trigger_type:y,trigger_delay:b,trigger_scroll_progress:x,trigger_blocks_count:k,archive_insertion_posts_count:j,archive_insertion_is_repeating:S,utm_suppression:C,isOverlay:L,post_types:P,archive_page_types:O,additional_classes:T,excluded_categories:N,excluded_tags:A,expiration_date:E,postStatus:M}}),(0,o.withDispatch)(e=>{const{createNotice:t,removeNotice:n}=e("core/notices");return{onMetaFieldChange:(t={})=>{0<Object.keys(t).length&&e("core/editor").editPost({meta:t})},createNotice:t,removeNotice:n}})]),Sr=jr(e=>{const{onMetaFieldChange:n,placement:r,overlay_size:o,trigger_type:a,trigger_delay:s,trigger_scroll_progress:c,trigger_blocks_count:l,archive_insertion_posts_count:u,archive_insertion_is_repeating:d,isOverlay:h,archive_page_types:v=[]}=e,g=e=>{n({placement:e})},w=window.newspack_popups_data?.custom_placements||{},y=window.newspack_popups_data?.popup_size_options||{},b=window.newspack_popups_data?.available_archive_page_types||[],x=(e=>{if((e=>{const t=window.newspack_popups_data?.custom_placements||{};return-1<Object.keys(t).indexOf(e)})(e.placement)){const n=window.newspack_popups_data?.custom_placements||{};return(0,t.sprintf)(
// translators: %s: custom placement name.
// translators: %s: custom placement name.
(0,t.__)("The prompt will appear where %s is inserted using the Custom Placement block.","newspack-popups"),n[e.placement]||(0,t.__)("this custom placement","newspack-popups"))}switch(e.placement){case"center":return(0,t.__)("The prompt will be displayed as an overlay at the center of the viewport.","newspack-popups");case"center_left":return(0,t.__)("The prompt will be displayed as an overlay at the center left of the viewport.","newspack-popups");case"center_right":return(0,t.__)("The prompt will be displayed as an overlay at the center right of the viewport.","newspack-popups");case"top":return(0,t.__)("The prompt will be displayed as an overlay at the top of the viewport.","newspack-popups");case"top_left":return(0,t.__)("The prompt will be displayed as an overlay at the top left of the viewport.","newspack-popups");case"top_right":return(0,t.__)("The prompt will be displayed as an overlay at the top right of the viewport.","newspack-popups");case"bottom":return(0,t.__)("The prompt will be displayed as an overlay at the bottom of the viewport.","newspack-popups");case"bottom_left":return(0,t.__)("The prompt will be displayed as an overlay at the bottom left of the viewport.","newspack-popups");case"bottom_right":return(0,t.__)("The prompt will be displayed as an overlay at the bottom right of the viewport.","newspack-popups");case"above_header":return(0,t.__)("The prompt will be automatically inserted at the very top of the page, above the header.","newspack-popups");case"inline":return"blocks_count"===e.trigger_type?(0,t.sprintf)(
// translators: %s: blocks count until insertion.
// translators: %s: blocks count until insertion.
(0,t._n)("The prompt will be automatically inserted after %s block of content.","The prompt will be automatically inserted after %s blocks of content.",e.trigger_blocks_count,"newspack-popups"),e.trigger_blocks_count):(0,t.sprintf)(
// translators: %s: article percentage count until insertion.
// translators: %s: article percentage count until insertion.
(0,t.__)("The prompt will be automatically inserted about %s into article content.","newspack-popups"),e.trigger_scroll_progress+"%");case"archives":return e.archive_insertion_is_repeating?(0,t.sprintf)(
// translators: %d: insertion period.
// translators: %d: insertion period.
(0,t.__)("The prompt will be automatically inserted every %d articles in the archive pages.","newspack-popups"),e.archive_insertion_posts_count):(0,t.sprintf)(
// translators: %d: insertion period articles count.
// translators: %d: insertion period articles count.
(0,t.__)("The prompt will be automatically inserted after %d articles in the archive pages.","newspack-popups"),e.archive_insertion_posts_count);case"manual":return(0,t.__)("The prompt will appear only where inserted using the Single Prompt block or a shortcode.","newspack-popups");default:return(0,t.__)("The placement where the prompt can appear.","newspack-popups")}})(e);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(i.RadioControl,{className:"newspack-popups__prompt-type-control",label:(0,t.__)("Prompt type","newspack-popups"),selected:h?"center":"inline",options:[{label:(0,t.__)("Inline","newspack-popups"),value:"inline"},{label:(0,t.__)("Overlay","newspack-popups"),value:"center"}],onChange:g}),h?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(i.SelectControl,{label:(0,t.__)("Size","newspack-popups"),value:o,onChange:e=>{n({overlay_size:e}),"full-width"===e&&(()=>{switch(r){case"top_left":case"top_right":n({placement:"top"});break;case"center_left":case"center_right":n({placement:"center"});break;case"bottom_left":case"bottom_right":n({placement:"bottom"})}})()},options:y}),(0,_.jsx)(m,{layout:r,label:(0,t.__)("Position","newspack-popups"),help:x,value:r,onChange:g,size:o})]}):(0,_.jsx)(i.SelectControl,{label:(0,t.__)("Placement"),help:x,value:r,onChange:g,options:[{value:"inline",label:(0,t.__)("In article content","newspack-popups")},{value:"archives",label:(0,t.__)("In archive pages")},{value:"above_header",label:(0,t.__)("Above site header","newspack-popups")},{value:"manual",label:(0,t.__)("Manual only","newspack-popups")}].concat(Object.keys(w).map(e=>({value:e,label:w[e]})))}),h&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(i.SelectControl,{label:(0,t.__)("Trigger","newspack-popups"),help:(0,t.__)("The event to trigger the prompt.","newspack-popups"),value:a,options:[{label:(0,t.__)("Timer","newspack-popups"),value:"time"},{label:(0,t.__)("Scroll Progress","newspack-popups"),value:"scroll"}],onChange:e=>n({trigger_type:e})}),"scroll"===a?(0,_.jsx)(i.RangeControl,{label:(0,t.__)("Scroll Progress (percent)","newspack-popups"),value:c,onChange:e=>n({trigger_scroll_progress:e}),min:1,max:100}):(0,_.jsx)(i.RangeControl,{label:(0,t.__)("Delay (seconds)","newspack-popups"),value:s,onChange:e=>n({trigger_delay:e}),min:0,max:60})]}),"inline"===r&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(i.SelectControl,{label:(0,t.__)("Insertion position","newspack-popups"),help:(0,t.__)("The position at which to insert the prompt.","newspack-popups"),value:a,options:[{label:(0,t.__)("Percentage","newspack-popups"),value:"scroll"},{label:(0,t.__)("Blocks Count","newspack-popups"),value:"blocks_count"}],onChange:e=>n({trigger_type:e})}),"blocks_count"===a?(0,_.jsx)(i.RangeControl,{label:(0,t.__)("Number of blocks before the prompt","newspack-popups"),value:l,onChange:e=>n({trigger_blocks_count:e}),min:0}):(0,_.jsx)(i.RangeControl,{label:(0,t.__)("Approximate Position (in percent)","newspack-popups"),value:c,onChange:e=>n({trigger_scroll_progress:e}),min:0,max:100})]}),"archives"===r&&(0,_.jsxs)(p.Fragment,{children:[(0,_.jsx)(i.RangeControl,{label:(0,t.__)("Number of articles before prompt","newspack-popups"),value:u,onChange:e=>n({archive_insertion_posts_count:e}),min:1,max:20}),(0,_.jsxs)("div",{className:"newspack-popups__prompt-type-control",children:[(0,_.jsx)("legend",{className:"components-base-control__legend",children:(0,t.__)("Archive Page Types","newspack-popups")}),b.map(({name:e,label:t})=>(0,_.jsx)(i.CheckboxControl,{label:t,checked:v.indexOf(e)>-1,onChange:t=>{n({archive_page_types:t?[...v,e]:(0,f.without)(v,e)})}},e))]}),(0,_.jsx)(i.ToggleControl,{label:(0,t.__)("Repeat prompt","newspack-popups"),checked:d,onChange:e=>n({archive_insertion_is_repeating:e})})]})]})}),Cr=jr(e=>{const{onMetaFieldChange:n,hide_border:r,large_border:o,no_padding:a,isOverlay:s}=e;return(0,p.useEffect)(()=>{!s&&a&&n({hide_border:!1,large_border:!1,no_padding:!1})},[s]),(0,_.jsxs)("div",{className:"newspack-popups-style-selector",children:[(0,_.jsx)(i.Button,{variant:r||o||a?"secondary":"primary",isPressed:!r&&!o&&!a,onClick:()=>n({hide_border:!1,large_border:!1,no_padding:!1}),"aria-current":!r&&!o&&!a,children:(0,t.__)("Default","newspack-popups")}),(0,_.jsx)(i.Button,{variant:r?"primary":"secondary",isPressed:r,onClick:()=>n({hide_border:!0,large_border:!1,no_padding:!1}),"aria-current":r,children:s?(0,t.__)("Small Padding","newspack-popups"):(0,t.__)("Hide Border","newspack-popups")}),(0,_.jsx)(i.Button,{variant:o?"primary":"secondary",isPressed:o,onClick:()=>n({hide_border:!1,large_border:!0,no_padding:!1}),"aria-current":o,children:(0,t.sprintf)(
// Translators: %s is "padding" if the prompt is inline, or "border" if not
// Translators: %s is "padding" if the prompt is inline, or "border" if not
(0,t.__)("Large %s","newspack-popups"),s?(0,t.__)("Padding","newspack-popups"):(0,t.__)("Border","newspack-popups"))}),s&&(0,_.jsx)(i.Button,{variant:a?"primary":"secondary",isPressed:a,onClick:()=>n({hide_border:!1,large_border:!1,no_padding:!0}),"aria-current":a,children:(0,t.__)("No Padding","newspack-popups")})]})}),Pr=jr(({frequency:e,frequency_max:n,frequency_start:r,frequency_between:o,frequency_reset:a,onMetaFieldChange:s,utm_suppression:c})=>(0,_.jsxs)(p.Fragment,{children:[(0,_.jsx)(i.SelectControl,{label:(0,t.__)("Frequency"),value:e,onChange:e=>{const t={frequency:e};"once"===e&&(t.frequency_max=1,t.frequency_start=0,t.frequency_between=0,t.frequency_reset="month"),"daily"===e&&(t.frequency_max=1,t.frequency_start=0,t.frequency_between=0,t.frequency_reset="day"),"weekly"===e&&(t.frequency_max=1,t.frequency_start=0,t.frequency_between=0,t.frequency_reset="week"),"always"===e&&(t.frequency_max=0,t.frequency_start=0,t.frequency_between=0,t.frequency_reset="month"),s(t)},options:w}),"custom"===e&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(i.__experimentalNumberControl,{className:"newspack-popups__frequency-number-control",label:(0,t.__)("Start at pageview","newspack-popups"),value:r+1,min:1,onChange:e=>s({frequency_start:e-1})}),(0,_.jsx)(i.__experimentalNumberControl,{className:"newspack-popups__frequency-number-control",label:(0,t.__)("Display every n pageviews","newspack-popups"),value:o+1,min:1,onChange:e=>s({frequency_between:e-1})}),(0,_.jsx)(i.ToggleControl,{className:"newspack-popups__frequency-toggle-control",label:(0,t.__)("Limit number of displays","newspack-popups"),checked:0<n,onChange:e=>s({frequency_max:e?1:0})}),0<n&&(0,_.jsx)(i.__experimentalNumberControl,{className:"newspack-popups__frequency-number-control",disabled:0===n,label:(0,t.__)("Max number of displays","newspack-popups"),value:n,min:0,onChange:e=>s({frequency_max:e})}),(0,_.jsx)(i.SelectControl,{label:(0,t.__)("Reset counter per:","newspack-popups"),value:a,options:[{value:"month",label:(0,t.__)("Month","newspack-popups")},{value:"week",label:(0,t.__)("Week","newspack-popups")},{value:"day",label:(0,t.__)("Day","newspack-popups")}],onChange:e=>s({frequency_reset:e})})]}),(0,_.jsx)("hr",{}),(0,_.jsx)(i.TextControl,{label:(0,t.__)("UTM Suppression"),help:(0,t.__)("Readers arriving at the site via URLs with this utm_source parameter will never be shown the prompt."),value:c,placeholder:(0,t.__)("utm_campaign_name","newspack"),onChange:e=>s({utm_suppression:e})})]})),Or=jr(({background_color:e,close_button_background_color:n,enable_close_button_background:r,onMetaFieldChange:o,overlay_opacity:a,overlay_color:s,no_overlay_background:c,isOverlay:l})=>(0,_.jsxs)(p.Fragment,{children:[(0,_.jsx)(y.ColorPaletteControl,{value:e,onChange:e=>o({background_color:e||"#FFFFFF"}),label:(0,t.__)("Content Background Color","newspack-popups")}),l&&(0,_.jsxs)(p.Fragment,{children:[(0,_.jsx)(i.ToggleControl,{className:"newspack-popups__color-toggle",label:(0,t.__)("Customize close button background","newspack-popups"),checked:r,value:r,onChange:e=>o({enable_close_button_background:e})}),r&&(0,_.jsx)(y.ColorPaletteControl,{value:n,onChange:e=>o({close_button_background_color:e||"#00000000"}),label:(0,t.__)("Close Button Background Color","newspack-popups"),enableAlpha:!0}),(0,_.jsx)(i.ToggleControl,{className:"newspack-popups__color-toggle",label:(0,t.__)("Display overlay background","newspack-popups"),checked:!c,value:!c,onChange:e=>o({no_overlay_background:!e})}),!c&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(y.ColorPaletteControl,{value:s,onChange:e=>o({overlay_color:e||"#000000"}),label:(0,t.__)("Overlay Background Color","newspack-popups")}),(0,_.jsx)(i.RangeControl,{label:(0,t.__)("Overlay Background Opacity","newspack-popups"),value:a,onChange:e=>o({overlay_opacity:e}),min:0,max:100})]})]})]})),Tr=jr(({post_types:e=[],onMetaFieldChange:t})=>[{name:"post",label:"Posts"},{name:"page",label:"Pages"},...window.newspack_popups_data.available_post_types].map(({name:n,label:r})=>(0,_.jsx)(i.PanelRow,{children:(0,_.jsx)(i.CheckboxControl,{label:r,checked:e.indexOf(n)>-1,onChange:r=>{t({post_types:r?[...e,n]:(0,f.without)(e,n)})}})},n))),Nr=jr(({expiration_date:e=null,postStatus:n,onMetaFieldChange:r,createNotice:o,removeNotice:a})=>{const[s,c]=(0,p.useState)(!1);(0,p.useEffect)(()=>{if(e&&!(0,mr.isInTheFuture)(e)){if(s)return;o("warning",(0,t.sprintf)(/* translators: %s is the expiration date */ /* translators: %s is the expiration date */
(0,t.__)("This prompt has expired on %s and has been reverted to draft. Publishing it will reset the expiration date.","newspack-plugin"),new Date(e).toLocaleDateString()),{id:"newspack-popups__expired",isDismissible:!1}).then(({notice:e})=>{c(e.id)})}},[e]),(0,p.useEffect)(()=>{"publish"===n&&s&&(a(s),o("info",(0,t.__)("This prompt has been published. The expiration date has been removed.","newspack-plugin"),{id:"newspack-popups__expiration-date-removed"}),r({expiration_date:null}))},[n]);const l=(0,p.useMemo)(()=>{const e=new Date;return e.setHours(e.getHours()+24),h(e)},[]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(i.ToggleControl,{label:(0,t.__)("Expiration Date","newspack-newsletters"),checked:!!e,onChange:()=>{r({expiration_date:e?null:l})},help:(0,t.__)("If set, the prompt will be automatically unpublished at midnight on this date.","newspack-popups")}),e?(0,_.jsx)(i.DatePicker,{currentDate:e,onChange:e=>r({expiration_date:h(new Date(e))}),isInvalidDate:e=>!(0,mr.isInTheFuture)(e)}):null]})}),Ar=jr(({onMetaFieldChange:e,excluded_categories:n=[],excluded_tags:r=[],additional_classes:o=""})=>(0,_.jsx)(p.Fragment,{children:(0,_.jsxs)(i.BaseControl,{children:[(0,_.jsx)(Bn,{label:(0,t.__)("Additional CSS class(es)","newspack-popups"),help:(0,t.__)("Separate multiple classes with spaces.","newspack-popups"),value:o,onChange:t=>e({additional_classes:t})}),(0,_.jsx)("hr",{}),(0,_.jsx)(wt,{label:(0,t.__)("Excluded Categories","newspack-popups"),description:(0,t.__)("The prompt will not be shown on posts that have any these categories.","newspack-popups"),value:n,onChange:t=>e({excluded_categories:t.map(e=>parseInt(e.id))})}),(0,_.jsx)("hr",{}),(0,_.jsx)(wt,{label:(0,t.__)("Excluded Tags","newspack-popups"),description:(0,t.__)("The prompt will not be shown on posts that have any these tags.","newspack-popups"),taxonomy:"tags",value:r,onChange:t=>e({excluded_tags:t.map(e=>parseInt(e.id))})})]})}));(0,a.registerPlugin)("newspack-popups-styles",{render:()=>(0,_.jsx)(s.PluginDocumentSettingPanel,{name:"popup-styles-panel",title:(0,t.__)("Styles","newspack-popups"),children:(0,_.jsx)(Cr,{})}),icon:null}),(0,a.registerPlugin)("newspack-popups",{render:()=>(0,_.jsx)(s.PluginDocumentSettingPanel,{name:"popup-settings-panel",title:(0,t.__)("Settings","newspack-popups"),children:(0,_.jsx)(Sr,{})}),icon:null}),window?.newspack_popups_data?.segmentation_enabled&&(0,a.registerPlugin)("newspack-popups-frequency",{render:()=>(0,_.jsx)(s.PluginDocumentSettingPanel,{name:"-frequency-panel",title:(0,t.__)("Frequency","newspack-popups"),children:(0,_.jsx)(Pr,{})}),icon:null}),(0,a.registerPlugin)("newspack-popups-colors",{render:()=>(0,_.jsx)(s.PluginDocumentSettingPanel,{name:"popup-colors-panel",title:(0,t.__)("Color","newspack-popups"),children:(0,_.jsx)(Or,{})}),icon:null}),(0,a.registerPlugin)("newspack-popups-post-types",{render:()=>(0,_.jsx)(s.PluginDocumentSettingPanel,{name:"post-types-panel",title:(0,t.__)("Post Types","newspack-popups"),children:(0,_.jsx)(Tr,{})}),icon:null}),(0,a.registerPlugin)("newspack-popups-expiration",{render:()=>(0,_.jsx)(s.PluginDocumentSettingPanel,{name:"expiration-panel",title:(0,t.__)("Expiration","newspack-popups"),children:(0,_.jsx)(Nr,{})}),icon:null}),window.newspack_popups_merge_tags?.tags?.length&&wp.hooks.addFilter("editor.BlockEdit","newspack-popups/merge-tags-block-control",e=>t=>["core/paragraph","core/heading","core/list-item","core/quote","core/pullquote","core/verse","core/preformatted"].includes(t.name)?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(e,{...t}),(0,_.jsx)(yr,{tags:window.newspack_popups_merge_tags.tags,...t})]}):(0,_.jsx)(e,{...t})),(0,a.registerPlugin)("newspack-popups-advanced",{render:()=>(0,_.jsx)(s.PluginDocumentSettingPanel,{name:"popup-advanced-panel",title:(0,t.__)("Advanced Settings","newspack-popups"),children:(0,_.jsx)(Ar,{})}),icon:null}),(0,a.registerPlugin)("newspack-popups-editor",{render:()=>{const e=(0,o.useSelect)(e=>e("core/editor").getEditedPostAttribute("meta")),{background_color:t,overlay_size:n,placement:r}=e;return(0,p.useEffect)(()=>{(e=>{if(!e)return;const t="#000000",n=u(e),r=u(t),o=.2126*Math.pow(n[0]/255,2.2)+.7152*Math.pow(n[1]/255,2.2)+.0722*Math.pow(n[2]/255,2.2),a=.2126*Math.pow(r[0]/255,2.2)+.7152*Math.pow(r[1]/255,2.2)+.0722*Math.pow(r[2]/255,2.2),s=(o>a?parseInt((o+.05)/(a+.05)):parseInt((a+.05)/(o+.05)))>5?t:"#ffffff",i=document.querySelector(".editor-styles-wrapper"),c=document.querySelector(".wp-block.editor-post-title__block .editor-post-title__input");i&&(i.style.backgroundColor=e,i.style.color=s),c&&(c.style.color=s,c.style.setProperty("--newspack-popups-editor-placeholder-color",`${s}80`))})(t)},[t]),(0,p.useEffect)(()=>{const e=document.querySelector(".block-editor-block-list__layout");e&&(e.classList.forEach(t=>{t.startsWith("is-size-")&&e.classList.remove(t)}),d(r)&&e.classList.add(`is-size-${n}`))},[n,r]),null},icon:null}),(0,a.registerPlugin)("newspack-popups-disable-newspack-blocks-deduplication",{render:function(){const{placement:e}=(0,o.useSelect)(e=>{const{getEditedPostAttribute:t}=e("core/editor");return{placement:t("meta")?.placement}});return d(e)?(0,_.jsx)("style",{children:".newspack-blocks-deduplication-toggle {display: none;}"}):null},icon:null}),(0,a.registerPlugin)("newspack-popups-preview",{render:()=>(0,_.jsxs)(s.PluginPostStatusInfo,{className:"newspack-popups__status-options",children:[(0,_.jsx)(gr,{}),(0,_.jsx)(_r,{})]})});let Er=!1;const Lr=({slug:e})=>{const{editPost:n}=(0,o.useDispatch)(l.store),{terms:r,taxonomy:a}=(0,o.useSelect)(t=>{const{getEditedPostAttribute:n}=t("core/editor"),{getTaxonomy:r}=t(c.store),o=r(e);return{terms:o?n(o.rest_base):br,taxonomy:o}},[e]);return(0,p.useEffect)(()=>{const e=new URL(window.location).searchParams.get("segment");!Er&&e&&(n({[a.rest_base]:[parseInt(e)]}),Er=!0)},[]),(0,_.jsxs)(i.Flex,{direction:"column",gap:"4",children:[(0,_.jsxs)("div",{className:"newspack-popups-segments-tax-control-helper",children:[0===r.length&&(0,_.jsx)("p",{children:(0,t.__)("The prompt will be shown to all readers.","newspack-popups")}),1===r.length&&(0,_.jsx)("p",{children:(0,t.__)("The prompt will be shown only to readers who match the selected segment.","newspack-popups")}),r.length>1&&(0,_.jsx)("p",{children:(0,t.__)("The prompt will be shown only to readers who match the selected segments.","newspack-popups")})]}),(0,_.jsx)(i.ExternalLink,{href:xr,children:(0,t.__)("Manage segments","newspack-popups")},"segmentation-link")]})};wp.hooks.addFilter("editor.PostTaxonomyType","newspack/multibranded-site/brand-selector-filter",function(e){return function(t){return t.slug===kr?(0,_.jsxs)("div",{className:"newspack-popups-segments-tax-control",children:[(0,_.jsx)(e,{...t}),(0,_.jsx)(Lr,{...t})]}):(0,_.jsx)(e,{...t})}})})()})();