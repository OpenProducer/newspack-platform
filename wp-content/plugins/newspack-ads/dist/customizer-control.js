(()=>{"use strict";const n=window.lodash;var t,e;t=window.wp.customize,e=window.jQuery,t.bind("ready",(function(){let i=[];t.panel("newspack-ads").sections().forEach((function(n){i=i.concat(n.controls())})),i.forEach((function(t){const i=t.container;if("newspack_ads_placement"!==t.params.type)return;let c;try{c=JSON.parse(t.setting.get()||"{}")}catch(n){c={enabled:!1}}i.find("[data-provider]").hide(),i.find(`[data-provider="${c.provider}"]`).show();const o=(0,n.debounce)((function(){t.setting.set(JSON.stringify(c))}),300),a=(t,e,i)=>{Array.isArray(e)||(e=[e]),t&&(e=["hooks",t].concat(e)),c=(0,n.set)(c,e,i),o()},d=i.find(".placement-toggle input[type=checkbox]");d.on("change",(function(){a("","enabled",e(this).is(":checked"))})),i.on("change",".stick-to-top-checkbox input[type=checkbox]",(function(){a("","stick_to_top",e(this).is(":checked"))})),i.find(".placement-hook-control").each((function(){const n=e(this),t=n.find(".provider-select select"),i=n.find(".ad-unit-select select"),c=n.find(".bidder-id-input input"),o=n.data("hook")||"";t.on("change",(function(){const t=e(this).val();a(o,"provider",t),i.val("").change(),n.find("[data-provider]").hide(),n.find(`[data-provider="${t}"]`).show()})),i.on("change",(function(){d.attr("checked",!0).change(),a(o,"ad_unit",e(this).val())})),c.on("change",(function(){const n=e(this).data("bidder-id");a(o,["bidders_ids",n],e(this).val())}))}))}))}))})();