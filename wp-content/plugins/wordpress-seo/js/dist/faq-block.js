(()=>{"use strict";var s={n:e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},d:(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o:(s,e)=>Object.prototype.hasOwnProperty.call(s,e)};const e=window.wp.blockEditor,t=window.wp.blocks,i=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"version":"22.7","name":"yoast/faq-block","title":"Yoast FAQ","description":"List your Frequently Asked Questions in an SEO-friendly way.","category":"yoast-structured-data-blocks","icon":"editor-ul","keywords":["FAQ","Frequently Asked Questions","Schema","SEO","Structured Data"],"textdomain":"wordpress-seo","attributes":{"questions":{"type":"array"},"additionalListCssClasses":{"type":"string"}},"example":{"attributes":{"steps":[{"id":"faq-question-1","question":[],"answer":[]},{"id":"faq-question-2","question":[],"answer":[]}]}},"editorScript":"yoast-seo-faq-block","editorStyle":"yoast-seo-structured-data-blocks"}'),o=window.yoast.propTypes;var n=s.n(o);const r=window.wp.i18n,a=window.wp.a11y,u=window.wp.isShallowEqual,c=window.wp.element,h=window.wp.components,d=window.ReactJSXRuntime,l=function(s){return class extends c.Component{render(){return(0,d.jsxs)(c.Fragment,{children:[(0,d.jsx)(s,{...this.props})," "]})}}},p=l(e.RichText.Content);class m extends c.Component{constructor(s){super(s),this.onSelectImage=this.onSelectImage.bind(this),this.onFocusAnswer=this.onFocusAnswer.bind(this),this.onFocusQuestion=this.onFocusQuestion.bind(this),this.onChangeAnswer=this.onChangeAnswer.bind(this),this.onChangeQuestion=this.onChangeQuestion.bind(this),this.onInsertQuestion=this.onInsertQuestion.bind(this),this.onRemoveQuestion=this.onRemoveQuestion.bind(this),this.onMoveDown=this.onMoveDown.bind(this),this.onMoveUp=this.onMoveUp.bind(this)}getMediaUploadButton(s){return(0,d.jsx)(h.Button,{className:"schema-faq-section-button faq-section-add-media",icon:"insert",onClick:s.open,children:(0,r.__)("Add image","wordpress-seo")})}onFocusQuestion(){this.props.onFocus("question",this.props.index)}onFocusAnswer(){this.props.onFocus("answer",this.props.index)}onChangeQuestion(s){const{index:e,onChange:t,attributes:{answer:i,question:o}}=this.props;t(s,i,o,i,e)}onChangeAnswer(s){const{index:e,onChange:t,attributes:{answer:i,question:o}}=this.props;t(o,s,o,i,e)}onInsertQuestion(){this.props.insertQuestion(this.props.index)}onRemoveQuestion(){this.props.removeQuestion(this.props.index)}onMoveUp(){this.props.isFirst||this.props.onMoveUp(this.props.index)}onMoveDown(){this.props.isLast||this.props.onMoveDown(this.props.index)}getButtons(){const{attributes:s}=this.props;return(0,d.jsxs)("div",{className:"schema-faq-section-button-container",children:[(0,d.jsx)(e.MediaUpload,{onSelect:this.onSelectImage,allowedTypes:["image"],value:s.id,render:this.getMediaUploadButton}),(0,d.jsx)(h.Button,{className:"schema-faq-section-button",icon:"trash",label:(0,r.__)("Delete question","wordpress-seo"),onClick:this.onRemoveQuestion}),(0,d.jsx)(h.Button,{className:"schema-faq-section-button",icon:"insert",label:(0,r.__)("Insert question","wordpress-seo"),onClick:this.onInsertQuestion})]})}getMover(){return(0,d.jsxs)("div",{className:"schema-faq-section-mover",children:[(0,d.jsx)(h.Button,{className:"editor-block-mover__control",onClick:this.onMoveUp,icon:"arrow-up-alt2",label:(0,r.__)("Move question up","wordpress-seo"),"aria-disabled":this.props.isFirst}),(0,d.jsx)(h.Button,{className:"editor-block-mover__control",onClick:this.onMoveDown,icon:"arrow-down-alt2",label:(0,r.__)("Move question down","wordpress-seo"),"aria-disabled":this.props.isLast})]})}onSelectImage(s){const{attributes:{answer:e,question:t},index:i}=this.props;let o=e.slice();const n=(0,d.jsx)("img",{className:`wp-image-${s.id}`,alt:s.alt,src:s.url,style:"max-width:100%;"});o.push?o.push(n):o=[o,n],this.props.onChange(t,o,t,e,i)}static getImageSrc(s){if(!s||!s.filter)return!1;const e=s.filter((s=>s&&s.type&&"img"===s.type))[0];return!!e&&e.props.src}static Content(s){return(0,d.jsxs)("div",{className:"schema-faq-section",id:s.id,children:[(0,d.jsx)(p,{tagName:"strong",className:"schema-faq-question",value:s.question},s.id+"-question"),(0,d.jsx)(p,{tagName:"p",className:"schema-faq-answer",value:s.answer},s.id+"-answer")]},s.id)}shouldComponentUpdate(s){return!(0,u.isShallowEqualObjects)(s,this.props)}render(){const{attributes:s,isSelected:t}=this.props,{id:i,question:o,answer:n}=s;return(0,d.jsxs)("div",{className:"schema-faq-section",children:[(0,d.jsx)(e.RichText,{identifier:i+"-question",className:"schema-faq-question",tagName:"p",value:o,onChange:this.onChangeQuestion,onFocus:this.onFocusQuestion,unstableOnFocus:this.onFocusQuestion,placeholder:(0,r.__)("Enter a question","wordpress-seo"),allowedFormats:["core/italic","core/strikethrough","core/link","core/annotation"]},i+"-question"),(0,d.jsx)(e.RichText,{identifier:i+"-answer",className:"schema-faq-answer",tagName:"p",value:n,onChange:this.onChangeAnswer,onFocus:this.onFocusAnswer,unstableOnFocus:this.onFocusAnswer,placeholder:(0,r.__)("Enter the answer to the question","wordpress-seo")},i+"-answer"),t&&(0,d.jsxs)("div",{className:"schema-faq-section-controls-container",children:[this.getMover(),this.getButtons()]})]},i)}}m.propTypes={index:n().number.isRequired,attributes:n().object.isRequired,onChange:n().func.isRequired,insertQuestion:n().func.isRequired,removeQuestion:n().func.isRequired,onFocus:n().func.isRequired,onMoveUp:n().func.isRequired,onMoveDown:n().func.isRequired,isSelected:n().bool.isRequired,isFirst:n().bool.isRequired,isLast:n().bool.isRequired};const q=l(m.Content);class w extends c.Component{constructor(s){super(s),this.state={focus:""},this.changeQuestion=this.changeQuestion.bind(this),this.insertQuestion=this.insertQuestion.bind(this),this.removeQuestion=this.removeQuestion.bind(this),this.swapQuestions=this.swapQuestions.bind(this),this.moveQuestionDown=this.moveQuestionDown.bind(this),this.moveQuestionUp=this.moveQuestionUp.bind(this),this.setFocus=this.setFocus.bind(this),this.onAddQuestionButtonClick=this.onAddQuestionButtonClick.bind(this)}static generateId(s){return`${s}-${(new Date).getTime()}`}onAddQuestionButtonClick(){this.insertQuestion(null,[],[],!1)}changeQuestion(s,e,t,i,o){const n=this.props.attributes.questions?this.props.attributes.questions.slice():[];if(o>=n.length)return;if(n[o].question!==t||n[o].answer!==i)return;n[o]={id:n[o].id,question:s,answer:e,jsonQuestion:(0,c.renderToString)(s),jsonAnswer:(0,c.renderToString)(e)};const r=m.getImageSrc(e);r&&(n[o].jsonImageSrc=r),this.props.setAttributes({questions:n})}insertQuestion(s=null,e=[],t=[],i=!0){const o=this.props.attributes.questions?this.props.attributes.questions.slice():[];null===s&&(s=o.length-1),o.splice(s+1,0,{id:w.generateId("faq-question"),question:e,answer:t,jsonQuestion:"",jsonAnswer:""}),this.props.setAttributes({questions:o}),i?setTimeout(this.setFocus.bind(this,"question",s)):(0,a.speak)((0,r.__)("New question added","wordpress-seo"))}swapQuestions(s,e){const t=this.props.attributes.questions?this.props.attributes.questions.slice():[],i=t[s];t[s]=t[e],t[e]=i,this.props.setAttributes({questions:t});const[o,n]=this.state.focus.split(":");o===`${s}`?this.setFocus(n,e):o===`${e}`&&this.setFocus(n,s)}moveQuestionUp(s){this.swapQuestions(s,s-1)}moveQuestionDown(s){this.swapQuestions(s,s+1)}removeQuestion(s){const e=this.props.attributes.questions?this.props.attributes.questions.slice():[];e.splice(s,1),this.props.setAttributes({questions:e});let t=0;e[s]?t=s:e[s-1]&&(t=s-1),this.setFocus("question",t)}setFocus(s,e){const t=`${e}:${s}`;t!==this.state.focus&&this.setState({focus:t})}getAddQuestionButton(){return(0,d.jsx)(h.Button,{icon:"insert",onClick:this.onAddQuestionButtonClick,className:"schema-faq-add-question",children:(0,r.__)("Add question","wordpress-seo")})}getQuestions(){const{attributes:s}=this.props;if(!s.questions)return null;const[e]=this.state.focus.split(":");return s.questions.map(((t,i)=>(0,d.jsx)(m,{index:i,attributes:t,insertQuestion:this.insertQuestion,removeQuestion:this.removeQuestion,onChange:this.changeQuestion,onFocus:this.setFocus,isSelected:e===`${i}`,onMoveUp:this.moveQuestionUp,onMoveDown:this.moveQuestionDown,isFirst:0===i,isLast:i===s.questions.length-1},t.id)))}static Content(s){const{questions:e,className:t}=s,i=e?e.map(((s,e)=>(0,d.jsx)(q,{...s},e))):null,o=["schema-faq",t].filter((s=>s)).join(" ");return(0,d.jsx)("div",{className:o,children:i})}render(){const{className:s}=this.props,e=["schema-faq",s].filter((s=>s)).join(" ");return(0,d.jsxs)("div",{className:e,children:[(0,d.jsx)("div",{children:this.getQuestions()}),(0,d.jsx)("div",{className:"schema-faq-buttons",children:this.getAddQuestionButton()})]})}}function b(s){const t=l(e.RichText.Content);return(0,d.jsxs)("div",{className:"schema-faq-section",children:[(0,d.jsx)(t,{tagName:"strong",className:"schema-faq-question",value:s.question},s.id+"-question"),(0,d.jsx)(t,{tagName:"p",className:"schema-faq-answer",value:s.answer},s.id+"-answer")]},s.id)}function g(s){const{questions:e,className:t}=s.attributes,i=l(b),o=e?e.map(((s,e)=>(0,d.jsx)(i,{...s},e))):null,n=["schema-faq",t].filter((s=>s)).join(" ");return(0,d.jsx)("div",{className:n,children:o})}w.propTypes={attributes:n().object.isRequired,setAttributes:n().func.isRequired,className:n().string},w.defaultProps={className:""},g.propTypes={attributes:n().object.isRequired};const v={v13_1:g};(0,t.registerBlockType)(i,{edit:({attributes:s,setAttributes:t,className:i})=>{const o=(0,e.useBlockProps)();return s.questions&&0!==s.questions.length||(s.questions=[{id:w.generateId("faq-question"),question:[],answer:[]}]),(0,d.jsx)("div",{...o,children:(0,d.jsx)(w,{attributes:s,setAttributes:t,className:i})})},save:({attributes:s})=>{const t=e.useBlockProps.save(s);return(0,d.jsx)(w.Content,{...t})},deprecated:[{attributes:i.attributes,save:v.v13_1}]})})();