(()=>{"use strict";var e={r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};e.r(n);const s=window.wp.element,o=window.wp.i18n,t=window.wp.hooks,r=window.wp.plugins,a=window.wp.editPost;function l(e,n,s){return n in e?Object.defineProperty(e,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[n]=s,e}const p=window.wp.components,i=window.wp.compose,c=window.wp.data;var __=o.__,w=(0,i.compose)([(0,c.withSelect)((function(e){var n=e("core/editor").getEditedPostAttribute;return{meta:n("meta"),title:n("title")}})),(0,c.withDispatch)((function(e){var n=e("core/editor").editPost;return{updateMetaValue:function(e,s){return n({meta:l({},e,s)})}}}))])((function(e){var n=e.meta,o=e.title,t=e.updateMetaValue,r=n.newspack_sponsor_url,a=n.newspack_sponsor_flag_override,l=n.newspack_sponsor_byline_prefix,i=n.newspack_sponsor_sponsorship_scope,c=n.newspack_sponsor_native_byline_display,w=n.newspack_sponsor_native_category_display,u=n.newspack_sponsor_underwriter_style,d=n.newspack_sponsor_underwriter_placement,_=n.newspack_sponsor_only_direct,h=n.newspack_sponsor_disclaimer_override,m=window.newspack_sponsors_data,k=m.settings,f=m.defaults,g=m.post_type,y=m.cpt===g,b=y?"native":"",v=[{value:"native",label:__("Native content","newspack-sponsors")},{value:"underwritten",label:__("Underwritten content","newspack-sponsors")}],S=y?"sponsor":"inherit",E=[{value:"sponsor",label:__("Sponsor only","newspack-sponsors")},{value:"author",label:__("Both sponsor and author byline","newspack-sponsors")}],C=y?"sponsor":"inherit",x=[{value:"sponsor",label:__("Sponsor only","newspack-sponsors")},{value:"category",label:__("Sponsor and categories","newspack-sponsors")}],T=y?"standard":"inherit",P=[{value:"standard",label:__("Standard","newspack-sponsors")},{value:"simple",label:__("Simple","newspack-sponsors")}],N=y?"top":"inherit",O=[{value:"top",label:__("Top","newspack-sponsors")},{value:"bottom",label:__("Bottom","newspack-sponsors")}];if(!y){var F={value:"inherit",label:__("Inherit from sponsor","newspack-sponsors")};v.unshift(F),E.unshift(F),x.unshift(F),P.unshift(F),O.unshift(F)}return(0,s.createElement)(s.Fragment,null,!y&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)("h2",null,__("Sponsor Display Overrides","newspack-sponsors")),(0,s.createElement)("p",null,(0,s.createElement)("em",null,__("The following settings optionally override the settings of assigned sponsors.","newspack-sponsors")))),(0,s.createElement)(p.SelectControl,{className:"newspack-sponsors__select-control",label:__("Sponsorship Scope","newspack-sponsors"),value:i||b,options:v,onChange:function(e){return t("newspack_sponsor_sponsorship_scope",e)},help:__("Generally, native content is authored by the sponsor, while underwritten content is authored by editorial staff but supported by the sponsor. This option allows you to select a different visual treatment for native vs. underwitten content.","newspack-sponsors")}),("native"===i||y&&!i||!y)&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)(p.SelectControl,{className:"newspack-sponsors__select-control",label:__("Sponsorship Byline Display","newspack-sponsors"),value:c||S,options:E,onChange:function(e){return t("newspack_sponsor_native_byline_display",e)},help:__("Display the sponsor only in the byline, or both the sponsor and post author.","newspack-sponsors")}),(0,s.createElement)(p.SelectControl,{className:"newspack-sponsors__select-control",label:__("Sponsorship Category Display","newspack-sponsors"),value:w||C,options:x,onChange:function(e){return t("newspack_sponsor_native_category_display",e)},help:__('Show the sponsor only, or the postâ€™s categories alongside the "sponsored" flag.',"newspack-sponsors")})),("underwritten"===i||!y)&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)(p.SelectControl,{className:"newspack-sponsors__select-control",label:__("Underwriter blurb style","newspack-sponsors"),value:u||T,options:P,onChange:function(e){return t("newspack_sponsor_underwriter_style",e)},help:__("Show the underwriter blurb in a standard or simplified style.","newspack-sponsors")}),(0,s.createElement)(p.SelectControl,{className:"newspack-sponsors__select-control",label:__("Underwriter placement","newspack-sponsors"),value:d||N,options:O,onChange:function(e){return t("newspack_sponsor_underwriter_placement",e)},help:__("Show the underwriter blurb at the top or bottom of the post.","newspack-sponsors")})),y&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)(p.TextControl,{className:"newspack-sponsors__text-control",label:__("Sponsor URL","newspack-sponsors"),placeholder:__("URL to link to for this sponsor","newspack-sponsors"),help:__("Required if you want to show a link to an external URL.","newspack-sponsors"),type:"url",value:r,onChange:function(e){return t("newspack_sponsor_url",e)}}),(0,s.createElement)(p.TextControl,{className:"newspack-sponsors__text-control",label:__("Sponsor Flag Override (Optional)","newspack-sponsors"),placeholder:k.flag||f.flag,help:__("The label for the flag that appears in lieu of category flags. If not empty, this field will override the site-wide setting.","newspack-sponsors"),type:"url",value:a,onChange:function(e){return t("newspack_sponsor_flag_override",e)}}),(0,s.createElement)(p.TextareaControl,{className:"newspack-sponsors__textarea-control",label:__("Sponsor Disclaimer Override (Optional)","newspack-sponsors"),placeholder:(k.disclaimer||f.disclaimer).replace("[sponsor name]",o),help:__("Text shown to explain sponsorship by this sponsor. If not empty, this field will override the site-wide setting.","newspack-sponsors"),value:h,onChange:function(e){return t("newspack_sponsor_disclaimer_override",e)}}),(0,s.createElement)(p.TextControl,{className:"newspack-sponsors__text-control",label:__("Sponsor Byline Prefix (Optional)","newspack-sponsors"),help:__("The prefix for the sponsor attribution that appears in lieu of author byline. If not empty, this field will override the site-wide setting.","newspack-sponsors"),placeholder:k.byline||f.byline,type:"url",value:l,onChange:function(e){return t("newspack_sponsor_byline_prefix",e)}}),(0,s.createElement)(p.ToggleControl,{className:"newspack-sponsors__toggle-control",label:__("Show on posts only if a direct sponsor?","newspack-newsletters"),help:__("If this option is enabled, this sponsor will only be shown on single posts if assigned as a direct sponsor. It will still appear on category and tag archive pages, if applicable."),checked:_,onChange:function(e){return t("newspack_sponsor_only_direct",e)}})))})),u=o.__,d=o.__,_=window.newspack_sponsors_data,h=_.post_type,m=_.cpt;(0,t.addFilter)("editor.PostTaxonomyType","newspack-sponsors-editor",(function(e){return function(n){var t=window.newspack_sponsors_data,r=t.post_type,a=t.cpt,l=t.tax,p=n.slug,i=l===p,d=(0,c.useSelect)((function(e){var n=e("core/editor").getEditedPostAttribute(l);return Array.isArray(n)&&0<n.length}));if("category"!==p&&"post_tag"!==p&&!i)return(0,s.createElement)(e,n);if(i)return(0,s.createElement)(s.Fragment,null,(0,s.createElement)("p",null,u("Select one or more sponsors:","newspack-sponsors")),(0,s.createElement)(e,n),d&&(0,s.createElement)(w,null));var _="category"===p,h=u("category"===p?"categories":"tags","newspack-sponsors"),m=(0,o.sprintf)(u("%1$s one or more post %2$s to associate this sponsor with those %3$s.","newspack-sponsors"),u(_?"Select ":"Add ","newspack-sponsors"),h,h);return(0,s.createElement)(s.Fragment,null,a===r&&("category"===p||"post_tag"===p)&&(0,s.createElement)("p",null,(0,s.createElement)("em",null,m)),(0,s.createElement)(e,n))}})),m===h&&(0,r.registerPlugin)("newspack-sponsors-editor",{render:function(){return(0,s.createElement)(a.PluginDocumentSettingPanel,{className:"newspack-sponsors",name:"newspack-sponsors",title:d("Sponsor Settings","newspack-sponsors")},(0,s.createElement)(w,null))},icon:null});var k=window;for(var f in n)k[f]=n[f];n.__esModule&&Object.defineProperty(k,"__esModule",{value:!0})})();