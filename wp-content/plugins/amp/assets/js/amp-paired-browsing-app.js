!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},,function(e,t){!function(){e.exports=this.wp.url}()},,function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}e.exports=function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}},,,function(e,t,n){"use strict";n.r(t);var o=n(4),r=n.n(o),i=n(5),a=n.n(i),s=n(0),c=n.n(s),l=n(2),u=(n(9),window),d=u.app,m=u.history,f=d.ampSlug,p=d.ampPairedBrowsingQueryVar,h=d.ampValidationErrorsQueryVar,y=d.documentTitlePrefix,v=function(){function e(){r()(this,e),c()(this,"disconnectedClient",void 0),c()(this,"ampIframe",void 0),c()(this,"nonAmpIframe",void 0),c()(this,"nonAmpLink",void 0),c()(this,"ampLink",void 0),this.nonAmpIframe=document.querySelector("#non-amp iframe"),this.ampIframe=document.querySelector("#amp iframe"),this.ampPageHasErrors=!1,this.nonAmpLink=document.getElementById("non-amp-link"),this.ampLink=document.getElementById("amp-link"),this.disconnectOverlay=document.querySelector(".disconnect-overlay"),this.disconnectText={general:document.querySelector(".disconnect-overlay .dialog-text span.general"),invalidAmp:document.querySelector(".disconnect-overlay .dialog-text span.invalid-amp")},this.disconnectButtons={exit:document.querySelector(".disconnect-overlay .button.exit"),goBack:document.querySelector(".disconnect-overlay .button.go-back")},this.addDisconnectButtonListeners(),Promise.all(this.getIframeLoadedPromises())}return a()(e,[{key:"addDisconnectButtonListeners",value:function(){var e=this;this.disconnectButtons.exit.addEventListener("click",(function(){window.location.assign(e.disconnectedClient.contentWindow.location.href)})),this.disconnectButtons.goBack.addEventListener("click",(function(){window.history.back()}))}},{key:"getIframeLoadedPromises",value:function(){var e=this;return[new Promise((function(t){e.nonAmpIframe.addEventListener("load",(function(){e.toggleDisconnectOverlay(e.nonAmpIframe),t()}))})),new Promise((function(t){e.ampIframe.addEventListener("load",(function(){e.toggleDisconnectOverlay(e.ampIframe),t()}))}))]}},{key:"documentIsAmp",value:function(e){return e.querySelector('head > script[src="https://cdn.ampproject.org/v0.js"]')}},{key:"toggleDisconnectOverlay",value:function(e){var t=this.isClientConnected(e);t||(this.ampIframe===e&&this.ampPageHasErrors?(this.disconnectText.general.classList.toggle("hidden",!0),this.disconnectText.invalidAmp.classList.toggle("hidden",!1)):(this.disconnectText.general.classList.toggle("hidden",!1),this.disconnectText.invalidAmp.classList.toggle("hidden",!0)),this.disconnectButtons.goBack.classList.toggle("hidden",0>=window.history.length),this.disconnectButtons.exit.classList.toggle("hidden",null===e.contentDocument),this.disconnectedClient=e),this.disconnectOverlay.classList.toggle("amp",!t&&this.ampIframe===e),this.disconnectOverlay.classList.toggle("disconnected",!t)}},{key:"isClientConnected",value:function(e){return(this.ampIframe!==e||!this.ampPageHasErrors)&&(null!==e.contentWindow&&null!==e.contentDocument&&!0===e.contentWindow.ampPairedBrowsingClient)}},{key:"removeAmpQueryVars",value:function(e){return Object(l.removeQueryArgs)(e,f,p,h)}},{key:"addAmpQueryVar",value:function(e){return Object(l.addQueryArgs)(e,c()({},f,""))}},{key:"addPairedBrowsingQueryVar",value:function(e){return Object(l.addQueryArgs)(e,c()({},p,"1"))}},{key:"removeUrlHash",value:function(e){var t=new URL(e);return t.hash="",t.href}},{key:"urlHasValidationErrorQueryVar",value:function(e){return Object(l.hasQueryArg)(e,"amp_validation_errors")}},{key:"registerClientWindow",value:function(e){var t;if(e===this.ampIframe.contentWindow){if(!this.documentIsAmp(e.document))return this.urlHasValidationErrorQueryVar(e.location.href)?(this.ampPageHasErrors=!0,void this.toggleDisconnectOverlay(this.ampIframe)):e.document.querySelector("head > link[rel=amphtml]")?void e.location.replace(this.addAmpQueryVar(e.location.href)):(this.ampPageHasErrors=!0,void this.toggleDisconnectOverlay(this.ampIframe));this.ampLink.href=this.ampIframe.contentWindow.location.href,this.ampPageHasErrors=!1,t=this.nonAmpIframe.contentWindow}else{if(this.documentIsAmp(e.document))return void e.location.replace(this.removeAmpQueryVars(e.location.href));this.nonAmpLink.href=this.nonAmpIframe.contentWindow.location.href,t=this.ampIframe.contentWindow}if(e.addEventListener("scroll",(function(){t&&t.ampPairedBrowsingClient&&t.scrollTo&&t.scrollTo(e.scrollX,e.scrollY)}),{passive:!0}),e.document.documentElement.style.setProperty("scroll-behavior","auto","important"),t&&t.location&&this.removeAmpQueryVars(this.removeUrlHash(t.location.href))!==this.removeAmpQueryVars(this.removeUrlHash(e.location.href))){var n=t===this.ampIframe.contentWindow?this.addAmpQueryVar(e.location.href):this.removeAmpQueryVars(e.location.href);t.location.replace(n)}else document.title=y+" "+e.document.title,m.replaceState({},"",this.addPairedBrowsingQueryVar(this.removeAmpQueryVars(e.location.href)))}}]),e}();window.pairedBrowsingApp=new v},function(e,t,n){}]);