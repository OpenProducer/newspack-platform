!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},,function(e,t){e.exports=window.wp.url},,function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e},e.exports.default=e.exports,e.exports.__esModule=!0},,,function(e,t,n){"use strict";n.r(t),function(e){var t=n(5),i=n.n(t),r=n(6),o=n.n(r),a=n(0),s=n.n(a),c=n(2);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(10);var l=window,d=l.ampPairedBrowsingAppData,p=l.history,h=d.noampQueryVar,f=d.noampMobile,v=d.ampPairedBrowsingQueryVar,y=d.documentTitlePrefix,b=function(){function t(){var n=this;i()(this,t),s()(this,"disconnectedClient",void 0),s()(this,"ampIframe",void 0),s()(this,"ampHeartbeatTimestamp",Date.now()),s()(this,"nonAmpIframe",void 0),s()(this,"nonAmpHeartbeatTimestamp",Date.now()),s()(this,"currentAmpUrl",void 0),s()(this,"initialAmpUrlObject",void 0),s()(this,"navigateAmpUrl",void 0),s()(this,"currentNonAmpUrl",void 0),s()(this,"initialNonAmpUrlObject",void 0),s()(this,"navigateNonAmpUrl",void 0),s()(this,"nonAmpLink",void 0),s()(this,"ampLink",void 0),s()(this,"activeIframe",void 0),this.nonAmpIframe=document.querySelector("#non-amp iframe"),this.ampIframe=document.querySelector("#amp iframe"),this.currentNonAmpUrl=this.nonAmpIframe.src,this.initialNonAmpUrlObject=new URL(this.currentNonAmpUrl),this.currentAmpUrl=this.ampIframe.src,this.initialAmpUrlObject=new URL(this.currentNonAmpUrl),this.nonAmpLink=document.getElementById("non-amp-link"),this.ampLink=document.getElementById("amp-link"),this.disconnectOverlay=document.querySelector(".disconnect-overlay"),this.disconnectButtons={exit:document.querySelector(".disconnect-overlay .button.exit"),goBack:document.querySelector(".disconnect-overlay .button.go-back")},this.addDisconnectButtonListeners(),e.addEventListener("message",(function(e){n.receiveMessage(e)})),document.getElementById("non-amp").addEventListener("mouseenter",(function(){n.activeIframe=n.nonAmpIframe})),document.getElementById("amp").addEventListener("mouseenter",(function(){n.activeIframe=n.ampIframe})),Promise.all(this.getIframeLoadedPromises()).then((function(){setInterval((function(){n.checkConnectedClients()}),100)}))}return o()(t,[{key:"isAmpWindow",value:function(e){return e===this.ampIframe.contentWindow}},{key:"isNonAmpWindow",value:function(e){return e===this.nonAmpIframe.contentWindow}},{key:"sendMessage",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.postMessage(m(m({type:t},n),{},{ampPairedBrowsing:!0}),this.isAmpWindow(e)?this.currentAmpUrl:this.currentNonAmpUrl)}},{key:"receiveMessage",value:function(e){if(e.data&&e.data.type&&e.data.ampPairedBrowsing&&e.source&&[this.initialNonAmpUrlObject.origin,this.initialAmpUrlObject.origin].includes(e.origin)&&(this.isAmpWindow(e.source)||this.isNonAmpWindow(e.source)))switch(e.data.type){case"loaded":this.receiveLoaded(e.data,e.source);break;case"scroll":this.receiveScroll(e.data,e.source);break;case"heartbeat":this.receiveHeartbeat(e.source);break;case"navigate":this.receiveNavigate(e.data,e.source)}}},{key:"getIframeLoadedPromises",value:function(){var e=this;return[new Promise((function(t){e.nonAmpIframe.addEventListener("load",t)})),new Promise((function(t){e.ampIframe.addEventListener("load",t)}))]}},{key:"receiveHeartbeat",value:function(e){this.isAmpWindow(e)?this.ampHeartbeatTimestamp=Date.now():this.nonAmpHeartbeatTimestamp=Date.now()}},{key:"receiveNavigate",value:function(e,t){var n=e.href;this.isAmpWindow(t)?this.navigateAmpUrl=n:this.navigateNonAmpUrl=n}},{key:"checkConnectedClients",value:function(){this.sendMessage(this.ampIframe.contentWindow,"init"),this.sendMessage(this.nonAmpIframe.contentWindow,"init"),this.isClientConnected(this.ampIframe)?this.isClientConnected(this.nonAmpIframe)?this.disconnectOverlay.classList.remove("disconnected"):this.showDisconnectOverlay(this.nonAmpIframe):this.showDisconnectOverlay(this.ampIframe)}},{key:"addDisconnectButtonListeners",value:function(){this.disconnectButtons.goBack.addEventListener("click",(function(){window.history.back()}))}},{key:"showDisconnectOverlay",value:function(e){var t=this.ampIframe===e?this.navigateAmpUrl:this.navigateNonAmpUrl;t?(this.disconnectButtons.exit.hidden=!1,this.disconnectButtons.exit.href=t):this.disconnectButtons.exit.hidden=!0,this.disconnectButtons.goBack.hidden=0>=window.history.length,this.disconnectOverlay.classList.toggle("amp",this.ampIframe===e),this.disconnectOverlay.classList.add("disconnected")}},{key:"isClientConnected",value:function(e){return e===this.ampIframe?Date.now()-this.ampHeartbeatTimestamp<2e3:Date.now()-this.nonAmpHeartbeatTimestamp<2e3}},{key:"purgeRemovableQueryVars",value:function(e){return Object(c.removeQueryArgs)(e,h,v)}},{key:"addPairedBrowsingQueryVar",value:function(e){return Object(c.addQueryArgs)(e,s()({},v,"1"))}},{key:"removeUrlHash",value:function(e){var t=new URL(e);return t.hash="",t.href}},{key:"replaceLocation",value:function(e,t){this.sendMessage(e.contentWindow,"replaceLocation",{href:t})}},{key:"receiveScroll",value:function(e,t){var n=e.x,i=e.y;if(this.activeIframe||(this.activeIframe=this.isAmpWindow(t)?this.ampIframe:this.nonAmpIframe),this.activeIframe&&t===this.activeIframe.contentWindow){var r=this.isAmpWindow(t)?this.nonAmpIframe.contentWindow:this.ampIframe.contentWindow;this.sendMessage(r,"scroll",{x:n,y:i})}}},{key:"receiveLoaded",value:function(e,t){var n=e.isAmpDocument,i=e.ampUrl,r=e.nonAmpUrl,o=e.documentTitle,a=this.isAmpWindow(t),u=a?this.ampIframe:this.nonAmpIframe;if(a){if(!n)return void this.replaceLocation(u,i);this.currentAmpUrl=i,this.ampLink.href=Object(c.removeQueryArgs)(i,h)}else{if(n)return void this.replaceLocation(u,r);this.currentNonAmpUrl=r,this.nonAmpLink.href=Object(c.addQueryArgs)(r,s()({},h,f))}var m=a?r:i,l=a?this.currentNonAmpUrl:this.currentAmpUrl;if(this.purgeRemovableQueryVars(this.removeUrlHash(m))===this.purgeRemovableQueryVars(this.removeUrlHash(l)))document.title=y+" "+o,p.replaceState({},"",this.addPairedBrowsingQueryVar(this.purgeRemovableQueryVars(r)));else{var d=a?r:i;this.replaceLocation(a?this.nonAmpIframe:this.ampIframe,this.purgeRemovableQueryVars(d))}}}]),t}();window.pairedBrowsingApp=new b}.call(this,n(4))},function(e,t,n){}]);