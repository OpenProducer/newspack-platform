!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},,function(e,t){e.exports=window.wp.url},,function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},,,function(e,t,n){"use strict";n.r(t),function(e){var t=n(0),i=n.n(t),r=n(2);n(8);const{ampPairedBrowsingAppData:s,history:o}=window,{noampQueryVar:a,noampMobile:c,ampPairedBrowsingQueryVar:m,documentTitlePrefix:d}=s;window.pairedBrowsingApp=new class{constructor(){i()(this,"disconnectedClient",void 0),i()(this,"ampIframe",void 0),i()(this,"ampHeartbeatTimestamp",Date.now()),i()(this,"nonAmpIframe",void 0),i()(this,"nonAmpHeartbeatTimestamp",Date.now()),i()(this,"currentAmpUrl",void 0),i()(this,"initialAmpUrlObject",void 0),i()(this,"navigateAmpUrl",void 0),i()(this,"currentNonAmpUrl",void 0),i()(this,"initialNonAmpUrlObject",void 0),i()(this,"navigateNonAmpUrl",void 0),i()(this,"nonAmpLink",void 0),i()(this,"ampLink",void 0),i()(this,"activeIframe",void 0),this.nonAmpIframe=document.querySelector("#non-amp iframe"),this.ampIframe=document.querySelector("#amp iframe"),this.currentNonAmpUrl=this.nonAmpIframe.src,this.initialNonAmpUrlObject=new URL(this.currentNonAmpUrl),this.currentAmpUrl=this.ampIframe.src,this.initialAmpUrlObject=new URL(this.currentNonAmpUrl),this.nonAmpLink=document.getElementById("non-amp-link"),this.ampLink=document.getElementById("amp-link"),this.disconnectOverlay=document.querySelector(".disconnect-overlay"),this.disconnectButtons={exit:document.querySelector(".disconnect-overlay .button.exit"),goBack:document.querySelector(".disconnect-overlay .button.go-back")},this.addDisconnectButtonListeners(),e.addEventListener("message",e=>{this.receiveMessage(e)}),document.getElementById("non-amp").addEventListener("mouseenter",()=>{this.activeIframe=this.nonAmpIframe}),document.getElementById("amp").addEventListener("mouseenter",()=>{this.activeIframe=this.ampIframe}),Promise.all(this.getIframeLoadedPromises()).then(()=>{setInterval(()=>{this.checkConnectedClients()},100)})}isAmpWindow(e){return e===this.ampIframe.contentWindow}isNonAmpWindow(e){return e===this.nonAmpIframe.contentWindow}sendMessage(e,t,n={}){e.postMessage({type:t,...n,ampPairedBrowsing:!0},this.isAmpWindow(e)?this.currentAmpUrl:this.currentNonAmpUrl)}receiveMessage(e){if(e.data&&e.data.type&&e.data.ampPairedBrowsing&&e.source&&[this.initialNonAmpUrlObject.origin,this.initialAmpUrlObject.origin].includes(e.origin)&&(this.isAmpWindow(e.source)||this.isNonAmpWindow(e.source)))switch(e.data.type){case"loaded":this.receiveLoaded(e.data,e.source);break;case"scroll":this.receiveScroll(e.data,e.source);break;case"heartbeat":this.receiveHeartbeat(e.source);break;case"navigate":this.receiveNavigate(e.data,e.source)}}getIframeLoadedPromises(){return[new Promise(e=>{this.nonAmpIframe.addEventListener("load",e)}),new Promise(e=>{this.ampIframe.addEventListener("load",e)})]}receiveHeartbeat(e){this.isAmpWindow(e)?this.ampHeartbeatTimestamp=Date.now():this.nonAmpHeartbeatTimestamp=Date.now()}receiveNavigate({href:e},t){this.isAmpWindow(t)?this.navigateAmpUrl=e:this.navigateNonAmpUrl=e}checkConnectedClients(){this.sendMessage(this.ampIframe.contentWindow,"init"),this.sendMessage(this.nonAmpIframe.contentWindow,"init"),this.isClientConnected(this.ampIframe)?this.isClientConnected(this.nonAmpIframe)?this.disconnectOverlay.classList.remove("disconnected"):this.showDisconnectOverlay(this.nonAmpIframe):this.showDisconnectOverlay(this.ampIframe)}addDisconnectButtonListeners(){this.disconnectButtons.goBack.addEventListener("click",()=>{window.history.back()})}showDisconnectOverlay(e){const t=this.ampIframe===e?this.navigateAmpUrl:this.navigateNonAmpUrl;t?(this.disconnectButtons.exit.hidden=!1,this.disconnectButtons.exit.href=t):this.disconnectButtons.exit.hidden=!0,this.disconnectButtons.goBack.hidden=0>=window.history.length,this.disconnectOverlay.classList.toggle("amp",this.ampIframe===e),this.disconnectOverlay.classList.add("disconnected")}isClientConnected(e){return e===this.ampIframe?Date.now()-this.ampHeartbeatTimestamp<2e3:Date.now()-this.nonAmpHeartbeatTimestamp<2e3}purgeRemovableQueryVars(e){return Object(r.removeQueryArgs)(e,a,m)}addPairedBrowsingQueryVar(e){return Object(r.addQueryArgs)(e,{[m]:"1"})}removeUrlHash(e){const t=new URL(e);return t.hash="",t.href}replaceLocation(e,t){this.sendMessage(e.contentWindow,"replaceLocation",{href:t})}receiveScroll({x:e,y:t},n){if(this.activeIframe||(this.activeIframe=this.isAmpWindow(n)?this.ampIframe:this.nonAmpIframe),!this.activeIframe||n!==this.activeIframe.contentWindow)return;const i=this.isAmpWindow(n)?this.nonAmpIframe.contentWindow:this.ampIframe.contentWindow;this.sendMessage(i,"scroll",{x:e,y:t})}receiveLoaded({isAmpDocument:e,ampUrl:t,nonAmpUrl:n,documentTitle:i},s){const m=this.isAmpWindow(s),h=m?this.ampIframe:this.nonAmpIframe;if(m){if(!e)return void this.replaceLocation(h,t);this.currentAmpUrl=t,this.ampLink.href=Object(r.removeQueryArgs)(t,a)}else{if(e)return void this.replaceLocation(h,n);this.currentNonAmpUrl=n,this.nonAmpLink.href=Object(r.addQueryArgs)(n,{[a]:c})}const p=m?n:t,l=m?this.currentNonAmpUrl:this.currentAmpUrl;if(this.purgeRemovableQueryVars(this.removeUrlHash(p))===this.purgeRemovableQueryVars(this.removeUrlHash(l)))document.title=d+" "+i,o.replaceState({},"",this.addPairedBrowsingQueryVar(this.purgeRemovableQueryVars(n)));else{const e=m?n:t;this.replaceLocation(m?this.nonAmpIframe:this.ampIframe,this.purgeRemovableQueryVars(e))}}}}.call(this,n(4))},function(e,t,n){}]);