(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=ampThemes,n=window.wp.i18n,i=window.wp.domReady;var r=e.n(i);const s=wp.themes.view.Theme,a=s.extend({isAmpCompatibleTab:()=>new URLSearchParams(window.location.search.substr(1)).get("browse")===t.AMP_COMPATIBLE,render(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(s.prototype.render.apply(this,t),0>=this.$el?.length||!this.$el[0])return;const r=this.$el[0],a=this.model.toJSON();let o=a?.slug;if(o||(o=a?.id),o&&this.isAmpTheme(o)&&setTimeout((()=>{if(this.isAmpCompatibleTab())return;const e=document.createElement("div"),t=document.createElement("span"),i=document.createElement("span");e.classList.add("amp-extension-card-message"),t.classList.add("amp-logo-icon"),i.classList.add("tooltiptext"),i.append((0,n.__)("This is known to work well with the AMP plugin.","amp")),e.append(t,i),r.appendChild(e)})),o&&!this.isWPORGTheme(o)){const e=document.createElement("span");e.classList.add("dashicons","dashicons-external"),e.setAttribute("aria-hidden","true");const t=document.createElement("span");t.classList.add("screen-reader-text"),t.append((0,n.__)("(opens in a new tab)","amp"));const i=document.createElement("a");i.classList.add("button","button-primary"),i.append((0,n.__)("Visit Site","amp"),t,e),i.href=a?.preview_url?a.preview_url:a.homepage,i.target="_blank",i.rel="noopener noreferrer",i.setAttribute("aria-label",(0,n.sprintf)(/* translators: %s: theme name. */
(0,n.__)("Visit site of %s theme","amp"),a.name));const s=r.querySelector(".theme-actions");s&&(s.textContent="",s.append(i));const o=r.querySelector(".more-details");o&&(o.textContent="",o.append((0,n.__)("Visit Site","amp"),e.cloneNode(!0)))}},preview(){const e=this.model.toJSON();if(this.isWPORGTheme(e.slug)){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];s.prototype.preview.apply(this,n)}else e?.preview_url&&window.open(e.preview_url,"_blank","noopener,noreferrer")},isAmpTheme:e=>t.AMP_THEMES.includes(e),isWPORGTheme:e=>!t.NONE_WPORG_THEMES.includes(e)}),o={init(){this.addTab(),this.overrideViews()},addTab(){const e=document.querySelector(".filter-links");if(!e)return;const i=document.createElement("li"),r=document.createElement("a");r.setAttribute("href","#"),r.setAttribute("data-sort",t.AMP_COMPATIBLE),r.append((0,n.__)("AMP Compatible","amp")),i.appendChild(r),e.appendChild(i)},overrideViews(){wp.themes.view.Theme=a}};r()((()=>{o.init()}))})();