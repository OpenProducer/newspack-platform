"use strict";(self.webpackChunk_wcAdmin_webpackJsonp=self.webpackChunk_wcAdmin_webpackJsonp||[]).push([[9857],{10314:function(e,t,o){var r=o(69307),a=o(70444);const n=(0,r.createElement)(a.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,r.createElement)(a.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"}));t.Z=n},37942:function(e,t,o){var r=o(69307),a=o(70444);const n=(0,r.createElement)(a.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,r.createElement)(a.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"}));t.Z=n},42411:function(e,t,o){var r=o(69307),a=o(70444);const n=(0,r.createElement)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(a.Path,{d:"M20 5h-5.7c0-1.3-1-2.3-2.3-2.3S9.7 3.7 9.7 5H4v2h1.5v.3l1.7 11.1c.1 1 1 1.7 2 1.7h5.7c1 0 1.8-.7 2-1.7l1.7-11.1V7H20V5zm-3.2 2l-1.7 11.1c0 .1-.1.2-.3.2H9.1c-.1 0-.3-.1-.3-.2L7.2 7h9.6z"}));t.Z=n},67628:function(e,t,o){o.d(t,{a:function(){return c}});var r=o(69307),a=o(55609),n=o(73085);const c=e=>{let{children:t}=e;(0,r.useEffect)((()=>(window.document.body.classList.add("woocommerce-admin-product-layout"),()=>{window.document.body.classList.remove("woocommerce-admin-product-layout")})),[]);const o=r.Children.map(t,(e=>e.type!==n.w?null:{name:e.props.name,title:e.props.title}));return(0,r.createElement)(a.TabPanel,{className:"product-form-layout",activeClass:"is-active",tabs:o,onSelect:()=>window.document.documentElement.scrollTop=0},(e=>(0,r.createElement)(r.Fragment,null,r.Children.map(t,(t=>t.type!==n.w||t.props.name!==e.name?null:t)))))}},73085:function(e,t,o){o.d(t,{w:function(){return c}});var r=o(69307),a=o(83849),n=o.n(a);const c=e=>{let{name:t,title:o,children:a}=e;const c=n()("woocommerce-product-form-tab","woocommerce-product-form-tab__"+t);return(0,r.createElement)("div",{className:c},a)}},39857:function(e,t,o){o.d(t,{H:function(){return _t}});var r=o(69307),a=o(86020),n=o(65736),c=o(55609),l=o(62907),i=o(86158),m=o(10314),s=o(98817),d=o(14599),u=o(10431),p=o(9818),_=o(90162),g=o(85597),h=o(91920),E=o(81595),w=o(67221),N=o(54071);const I="__ADD_NEW_SHIPPING_CLASS_OPTION__";function b(e){return w.productReadOnlyProperties.forEach((t=>delete e[t])),e}function C(e,t){return"publish"===e&&t?[{label:(0,n.__)("View in store","woocommerce"),onClick:()=>{(0,d.recordEvent)("product_preview_changes",{new_product_page:!0}),window.open(t,"_blank")}}]:[]}function v(){const{createProduct:e,updateProduct:t,deleteProduct:o}=(0,p.useDispatch)(w.PRODUCTS_STORE_NAME),{createNotice:a}=(0,p.useDispatch)("core/notices"),[c,l]=(0,r.useState)(!1),[i,m]=(0,r.useState)({draft:!1,publish:!1}),s=(0,r.useContext)(N.$),d=(0,r.useCallback)((async function(t,o){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return m({...i,[o]:!0}),e({...t,status:o}).then((e=>{if(!r){const t="publish"===e.status?(0,n.__)("Product published.","woocommerce"):(0,n.__)("Product successfully created.","woocommerce");a("success",`ðŸŽ‰â€Ž ${t}`,{actions:C(e.status,e.permalink)})}return m({...i,[o]:!1}),e}),(e=>(r||a("error","publish"===o?(0,n.__)("Failed to publish product.","woocommerce"):(0,n.__)("Failed to create product.","woocommerce")),m({...i,[o]:!1}),e)))}),[i]),u=(0,r.useCallback)((async function(e,o,r){let c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return m({...i,[r]:!0}),t(e,{...o,status:r}).then((e=>{if(!c){const t="draft"===o.status&&"publish"===e.status?(0,n.__)("Product published.","woocommerce"):(0,n.__)("Product successfully updated.","woocommerce");a("success",`ðŸŽ‰â€Ž ${t}`,{actions:C(e.status,e.permalink)})}return m({...i,[r]:!1}),e}),(e=>(c||a("error",(0,n.__)("Failed to update product.","woocommerce")),m({...i,[r]:!1}),e)))}),[i]),_=(0,r.useCallback)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"draft";return d(b({...e,name:(e.name||"AUTO-DRAFT")+" - Copy"}),t)}),[]),g=(0,r.useCallback)((async e=>(l(!0),o(e).then((e=>{const t=(0,n.__)("Successfully moved product to Trash.","woocommerce");return a("success",`ðŸŽ‰â€Ž ${t}`),l(!1),e}),(e=>(a("error",(0,n.__)("Failed to move product to Trash.","woocommerce")),l(!1),e))))),[]),h=(0,r.useCallback)((e=>{const{getCurrencyConfig:t}=s,{decimalSeparator:o}=t(),r=new RegExp("[^-\\d\\%s]+".replace("%s",o),"g"),a=new RegExp("[%s](?=%s*[%s])".replaceAll("%s",o),"g");return e.replace(r,"").replace(a,"").replace(o,".")}),[s]),I=(0,r.useCallback)((e=>{const{getCurrencyConfig:t}=s,{decimalSeparator:o,thousandSeparator:r}=t();return E.numberFormat({decimalSeparator:o,thousandSeparator:r},e)}),[s]),v=(0,r.useCallback)((e=>{const{getCurrencyConfig:t}=s,{decimalSeparator:o,thousandSeparator:r}=t();return E.parseNumber({decimalSeparator:o,thousandSeparator:r},e)}),[s]);return{createProductWithStatus:d,updateProductWithStatus:u,copyProductWithStatus:_,deleteProductAndRedirect:g,sanitizePrice:h,formatNumber:I,parseNumber:v,isUpdatingDraft:i.draft,isUpdatingPublished:i.publish,isDeleting:c}}var f=o(17385),S=o(60188),k=o(7520),y=o(30226);const M="woocommerce_ces_product_mvp_ces_action",D=()=>{const{showCesModal:e}=(0,p.useDispatch)(y.Ls),{updateOptions:t}=(0,p.useDispatch)(w.OPTIONS_STORE_NAME),{cesAction:o,allowTracking:l,cesShownForActions:i,resolving:m}=(0,p.useSelect)((e=>{const{getOption:t,hasFinishedResolution:o}=e(w.OPTIONS_STORE_NAME),r=t(M);return{cesShownForActions:t(S.cS)||[],allowTracking:"yes"===(t(S.hW)||"no"),cesAction:r,resolving:!o("getOption",[S.cS])||!o("getOption",[M])||!o("getOption",[S.hW])}})),s=()=>{t({[M]:"hide"})},d=!m&&l&&o&&"hide"!==o;return(0,r.createElement)(r.Fragment,null,d&&(0,r.createElement)(k.Zz,null,(0,r.createElement)("div",{className:"woocommerce-product-mvp-ces-footer"},(0,r.createElement)("div",{className:"woocommerce-product-mvp-ces-footer__container"},(0,r.createElement)(a.Pill,null,(0,n.__)("BETA","woocommerce")),(0,n.__)("You're using the new product editor (currently in development). How is your experience so far?","woocommerce"),(0,r.createElement)(c.Button,{variant:"secondary",onClick:()=>{e({action:o,label:(0,n.__)("How's your experience with the product editor?","woocommerce"),firstQuestion:(0,n.__)("The product editing screen is easy to use","woocommerce"),secondQuestion:(0,n.__)("The product editing screen's functionality meets my needs","woocommerce"),onsubmitLabel:(0,n.__)("Thanks for the feedback. We'll put it to good use!","woocommerce")},{},{type:"snackbar",icon:(0,r.createElement)("span",null,"ðŸŒŸ")}),t({[S.cS]:[o,...i]})}},(0,n.__)("Share feedback","woocommerce")),(0,r.createElement)(c.Button,{onClick:s,variant:"tertiary"},(0,n.__)("Turn it off","woocommerce"))),(0,r.createElement)(c.Button,{className:"woocommerce-product-mvp-ces-footer__close-button",icon:f.Z,label:(0,n.__)("Remove share feedback","woocommerce"),onClick:s}))))};async function x(){return"hide"===await(0,p.resolveSelect)(w.OPTIONS_STORE_NAME).getOption(M)}var T=o(5656);const L=()=>{const{createProductWithStatus:e,updateProductWithStatus:t,deleteProductAndRedirect:o,copyProductWithStatus:s,isUpdatingDraft:E,isUpdatingPublished:N,isDeleting:I}=v(),{onPublish:b,onSaveDraft:C}=(()=>{const{updateOptions:e}=(0,p.useDispatch)(w.OPTIONS_STORE_NAME);return{onSaveDraft:async()=>{!1===await x()&&e({[M]:"new_product"})},onPublish:async()=>{!1===await x()&&e({[M]:"new_product"})}}})(),{isDirty:f,isValidForm:S,values:k,resetForm:y}=(0,a.useFormContext)();!function(e,t){const o=(0,r.useMemo)((()=>(0,n.__)("Changes you made may not be saved.","woocommerce")),[t]),{navigator:a}=(0,r.useContext)(g.Us);(0,r.useEffect)((()=>{if(e){const e=a.push;return a.push=function(){!1!==window.confirm(o)&&e(...arguments)},()=>{a.push=e}}}),[a,e,o]),(0,r.useEffect)((()=>{if(e){function e(e){return e.preventDefault(),e.returnValue=o}return window.addEventListener("beforeunload",e,{capture:!0}),()=>{window.removeEventListener("beforeunload",e,{capture:!0})}}}),[e,o])}(f),((e,t)=>{const o=(0,r.useRef)(t);(0,r.useEffect)((()=>{o.current=t}),[t]),(0,r.useEffect)((()=>()=>{o.current&&(0,T.HF)(e)}),[]),(0,r.useEffect)((()=>((0,T.Eb)(e,(()=>t)),()=>{(0,T.at)(e)})),[t])})(k.id?"editing_new_product":"new_product",f);const{isSmallViewport:D}=(0,p.useSelect)((e=>({isSmallViewport:e(_.store).isViewportMatch("< medium")}))),L=()=>({product_id:k.id,product_type:k.type,is_downloadable:k.downloadable,is_virtual:k.virtual,manage_stock:k.manage_stock}),P=async()=>{if((0,d.recordEvent)("product_update",{new_product_page:!0,...L()}),k.id){const e=await t(k.id,k,"publish");e&&e.id&&y(e)}else{const t=await e(k,"publish");null!=t&&t.id&&(y(),(0,u.navigateTo)({url:"admin.php?page=wc-admin&path=/product/"+t.id}))}await b()},j=async()=>{(0,d.recordEvent)("product_publish_and_copy",{new_product_page:!0,...L()}),k.id?await t(k.id,k,"publish"):await e(k,"publish",!1),await s(k)},R=async()=>{(0,d.recordEvent)("product_copy",{new_product_page:!0,...L()}),k.id&&await t(k.id,k,k.status||"draft"),await s(k)},A=async()=>{if((0,d.recordEvent)("product_delete",{new_product_page:!0,...L()}),k.id){const e=await o(k.id);null!=e&&e.id&&(y(e),(0,u.navigateTo)({url:"edit.php?post_type=product"}))}},z=k.id&&"publish"===k.status,O=D?c.MenuItem:c.Button,U=(0,r.createElement)(r.Fragment,null,(0,r.createElement)(O,{onClick:async()=>{if((0,d.recordEvent)("product_edit",{new_product_page:!0,...L()}),k.id){const e=await t(k.id,k,"draft");e&&e.id&&y(e)}else{const t=await e(k,"draft");null!=t&&t.id&&(y(),(0,u.navigateTo)({url:"admin.php?page=wc-admin&path=/product/"+t.id}))}await C()},disabled:!S||!f&&!!k.id&&"publish"!==k.status||E||N||I},!f&&k.id&&"publish"!==k.status&&(0,r.createElement)(l.Z,{icon:i.Z}),E?(0,n.__)("Saving","woocommerce"):null,!f&&k.id||E||"publish"===k.status?null:(0,n.__)("Save draft","woocommerce"),"publish"!==k.status||E?null:(0,n.__)("Switch to draft","woocommerce"),f||!k.id||E||"publish"===k.status?null:(0,n.__)("Saved","woocommerce")),(0,r.createElement)(O,{onClick:()=>(0,d.recordEvent)("product_preview_changes",{new_product_page:!0,...L()}),href:k.permalink+"?preview=true",disabled:!S||!k.permalink,target:"_blank"},(0,n.__)("Preview","woocommerce")));return(0,r.createElement)(h.Nw,null,(()=>(0,r.createElement)("div",{className:"woocommerce-product-form-actions"},!D&&U,(0,r.createElement)(c.ButtonGroup,{className:"woocommerce-product-form-actions__publish-button-group"},(0,r.createElement)(c.Button,{onClick:P,variant:"primary",isBusy:N,disabled:!S||!f&&!!z||E||N||I},N?(0,n.__)("Updating","woocommerce"):null,z&&!N?(0,n.__)("Update","woocommerce"):null,z||N?null:(0,n.__)("Publish","woocommerce")),(0,r.createElement)(c.DropdownMenu,{className:"woocommerce-product-form-actions__publish-dropdown",label:(0,n.__)("Publish options","woocommerce"),icon:m.Z,popoverProps:{position:"bottom left"},toggleProps:{variant:"primary",disabled:!k.id&&!S}},(()=>(0,r.createElement)(r.Fragment,null,(0,r.createElement)(c.MenuGroup,null,D&&U,(0,r.createElement)(c.MenuItem,{onClick:j,disabled:!S},z?(0,n.__)("Update & duplicate","woocommerce"):(0,n.__)("Publish & duplicate","woocommerce")),(0,r.createElement)(c.MenuItem,{onClick:R,disabled:!S},(0,n.__)("Copy to a new draft","woocommerce")),k.id&&(0,r.createElement)(c.MenuItem,{onClick:A,isDestructive:!0},(0,n.__)("Move to trash","woocommerce"))))))))))};(0,s.registerPlugin)("action-buttons-header-item",{render:L,icon:"admin-generic"});var P=o(74617),j=o(70444),R=(0,r.createElement)(j.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(j.Path,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"}));const A=()=>(0,r.createElement)("svg",{width:"18",height:"19",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,r.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.73365 13.1059L5.91005 10.7253L4.81688 9.69821L0.970703 13.8559L4.81688 18.0137L5.91005 16.9865L3.73365 14.6059H6.54528C7.67008 14.6059 8.79454 14.6362 9.91926 14.6059C11.3464 14.6047 13.2805 14.3559 14.882 13.3288C16.5414 12.2645 17.7498 10.423 17.7498 7.47022C17.7498 4.99134 16.4227 2.57446 14.1007 1.53934C12.279 0.727299 11.0554 0.740873 9.29353 0.751627C9.09868 0.752817 8.90948 0.753973 8.7271 0.753973C8.7271 0.753973 8.7271 1.08588 8.7271 1.50009C8.7271 1.9143 8.7271 2.25397 8.7271 2.25397C8.91043 2.25397 9.09488 2.25326 9.27997 2.25254C11.1006 2.24547 11.9842 2.23816 13.4899 2.90938C15.3434 3.73563 16.2498 5.56574 16.2498 7.47022C16.2498 9.94253 15.2764 11.2938 14.0722 12.0662C12.8139 12.8732 11.2081 13.1059 9.90892 13.1059H9.89866L9.8884 13.1062C8.774 13.1367 7.65978 13.1059 6.54528 13.1059H3.73365Z",fill:"#1E1E1E"})),z=()=>(0,r.createElement)("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,r.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.68822 12.625L1.5 13.8145L1.5 1.5L14.5 1.5L14.5 12.625L2.68822 12.625ZM3.31 14.125L15 14.125C15.5523 14.125 16 13.6773 16 13.125L16 1C16 0.447717 15.5523 0 15 0H1C0.447717 0 0 0.447716 0 1V15.5247C0 15.8173 0.161234 16.086 0.419354 16.2237C0.727111 16.3878 1.10601 16.3313 1.35252 16.0845L3.31 14.125ZM12 5.99997H4V4.49997H12V5.99997ZM4 9.99997H9V8.49997H4V9.99997Z",fill:"#1E1E1E"})),O=()=>{const{values:e}=(0,a.useFormContext)(),{showCesModal:t}=(0,p.useDispatch)(y.Ls),o=e.id?(0,P.getAdminLink)(`post.php?post=${e.id}&action=edit`):(0,P.getAdminLink)("post-new.php?post_type=product");return(0,r.createElement)(h.Nw,null,(0,r.createElement)(c.DropdownMenu,{className:"woocommerce-product-form-more-menu",label:(0,n.__)("More product options","woocommerce"),icon:R,popoverProps:{position:"bottom left"}},(e=>{let{onClose:a}=e;return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(c.MenuItem,{onClick:()=>{t({action:"new_product",label:(0,n.__)("How's your experience with the product editor?","woocommerce"),firstQuestion:(0,n.__)("The product editing screen is easy to use","woocommerce"),secondQuestion:(0,n.__)("The product editing screen's functionality meets my needs","woocommerce")},{},{type:"snackbar",icon:(0,r.createElement)("span",null,"ðŸŒŸ")}),a()},icon:(0,r.createElement)(z,null),iconPosition:"right"},(0,n.__)("Share feedback","woocommerce")),(0,r.createElement)(c.MenuItem,{onClick:()=>{a()},href:o,icon:(0,r.createElement)(A,null),iconPosition:"right"},(0,n.__)("Use the classic editor","woocommerce")))})))};var U=o(5267),Z=(0,r.createElement)(j.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(j.Path,{fillRule:"evenodd",d:"M10.289 4.836A1 1 0 0111.275 4h1.306a1 1 0 01.987.836l.244 1.466c.787.26 1.503.679 2.108 1.218l1.393-.522a1 1 0 011.216.437l.653 1.13a1 1 0 01-.23 1.273l-1.148.944a6.025 6.025 0 010 2.435l1.149.946a1 1 0 01.23 1.272l-.653 1.13a1 1 0 01-1.216.437l-1.394-.522c-.605.54-1.32.958-2.108 1.218l-.244 1.466a1 1 0 01-.987.836h-1.306a1 1 0 01-.986-.836l-.244-1.466a5.995 5.995 0 01-2.108-1.218l-1.394.522a1 1 0 01-1.217-.436l-.653-1.131a1 1 0 01.23-1.272l1.149-.946a6.026 6.026 0 010-2.435l-1.148-.944a1 1 0 01-.23-1.272l.653-1.131a1 1 0 011.217-.437l1.393.522a5.994 5.994 0 012.108-1.218l.244-1.466zM14.929 12a3 3 0 11-6 0 3 3 0 016 0z",clipRule:"evenodd"}));const B=e=>({onChange:t=>{(0,d.recordEvent)(`product_checkbox_${e}`,{checked:t})}}),F=(e,t,o)=>{const{decimalSeparator:r,thousandSeparator:a}=t,n=new RegExp("[^-0-9%s1%s2]".replace("%s1",r).replace("%s2",a),"g");return void 0===e?e:o(e).replace(n,"")},H=()=>{const{getCheckboxControlProps:e,getInputProps:t}=(0,a.useFormContext)(),[o,l]=(0,r.useState)(!1);return(0,r.createElement)(h.Nw,null,(0,r.createElement)(r.Fragment,null,(0,r.createElement)(c.Button,{"aria-label":(0,n.__)("Settings","woocommerce"),icon:Z,isPressed:o,onClick:()=>l(!o),className:"woocommerce-product-settings__toggle"}),o&&(0,r.createElement)(c.Panel,{className:"woocommerce-product-settings__panel"},(0,r.createElement)(c.PanelHeader,{label:(0,n.__)("Settings","woocommerce")},(0,r.createElement)(c.Button,{icon:f.Z,onClick:()=>l(!1),"aria-label":(0,n.__)("Close settings","woocommerce")})),(0,r.createElement)(c.PanelBody,{title:(0,n.__)("Advanced","woocommerce")},(0,r.createElement)(c.CheckboxControl,(0,U.Z)({label:(0,n.__)("Enable reviews","woocommerce")},e("reviews_allowed",B("reviews_allowed")))),(0,r.createElement)(c.TextControl,(0,U.Z)({label:(0,n.__)("Menu order","woocommerce"),type:"number"},t("menu_order")))))))};var W=(0,r.createElement)(j.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(j.Path,{d:"M10.8622 8.04053L14.2805 12.0286L10.8622 16.0167L9.72327 15.0405L12.3049 12.0286L9.72327 9.01672L10.8622 8.04053Z"}));const V=e=>{let{breadcrumbs:t}=e;const o=t.length>3?[t[0],{title:(0,r.createElement)(r.Fragment,null,"â€¦")},t[t.length-1]]:t;return(0,r.createElement)("span",{className:"woocommerce-product-breadcrumbs"},o.map((e=>{const{href:t,title:o,type:n}=e;return(0,r.createElement)(r.Fragment,{key:t},(0,r.createElement)("span",{className:"woocommerce-product-breadcrumbs__item"},t?(0,r.createElement)(a.Link,{href:t,type:n||"wp-admin"},o):o),(0,r.createElement)("span",{className:"woocommerce-product-breadcrumbs__separator"},(0,r.createElement)(l.Z,{icon:W})))})))};var Y=o(83849),Q=o.n(Y);let G;!function(e){e.unsaved="unsaved",e.draft="draft",e.instock="instock",e.outofstock="outofstock"}(G||(G={}));const J={[G.unsaved]:(0,n.__)("Unsaved","woocommerce"),[G.draft]:(0,n.__)("Draft","woocommerce"),[G.instock]:(0,n.__)("In stock","woocommerce"),[G.outofstock]:(0,n.__)("Out of stock","woocommerce")},X=()=>{const{productId:e}=(0,g.UO)(),t=(o=(0,p.useSelect)((t=>e?t(w.PRODUCTS_STORE_NAME).getProduct(parseInt(e,10),void 0):void 0)))?"draft"===o.status?G.draft:"instock"===o.stock_status?G.instock:G.outofstock:G.unsaved;var o;return(0,r.createElement)(a.Pill,{className:Q()("woocommerce-product-status",`is-${t}`)},J[t])},q=()=>{const{values:e}=(0,a.useFormContext)(),{productId:t}=(0,g.UO)(),{persistedName:o}=(0,p.useSelect)((e=>{const o=t?e(w.PRODUCTS_STORE_NAME).getProduct(parseInt(t,10),void 0):null;return{persistedName:null==o?void 0:o.name}})),c=[{href:(0,P.getAdminLink)("edit.php?post_type=product"),title:(0,n.__)("Products","woocommerce")}],l=((e,t,o)=>null!=e&&e.length?e:o||("simple"===t?(0,n.__)("New standard product","woocommerce"):(0,n.__)("New product","woocommerce")))(e.name,e.type,o);return(0,r.createElement)(h.Kr,null,(0,r.createElement)("span",{className:"woocommerce-product-title"},(0,r.createElement)(V,{breadcrumbs:c}),(0,r.createElement)("span",{className:"woocommerce-product-title__wrapper"},l,(0,r.createElement)(X,null))))},$=()=>(0,r.createElement)(r.Fragment,null,(0,r.createElement)(q,null),(0,r.createElement)(L,null),(0,r.createElement)(H,null),(0,r.createElement)(O,null));var K=o(67628),ee=o(96483),te=o(78674),oe=o(4981),re=o(92819),ae=o(37942);const ne=e=>{let{item:t,selectedIds:o=[],items:a,highlightedIndex:n,openParent:l,getItemProps:i}=e;const[s,d]=(0,r.useState)(t.isOpen||!1),u=a.findIndex((e=>e.id===t.data.id)),p=t.children.filter((e=>a.includes(e.data)));return(0,r.useEffect)((()=>{n===u&&p.length>0&&!s?d(!0):n===u&&l&&l()}),[n]),(0,r.useEffect)((()=>{t.isOpen!==s&&d(t.isOpen)}),[t.isOpen]),(0,r.createElement)("li",{className:Q()("woocommerce-category-field-dropdown__item",{item_highlighted:u===n})},(0,r.createElement)("div",(0,U.Z)({className:"woocommerce-category-field-dropdown__item-content"},i({item:t.data,index:u})),p.length>0?(0,r.createElement)(c.Icon,{className:"woocommerce-category-field-dropdown__toggle",icon:s?ae.Z:m.Z,size:20,onClick:e=>{e.stopPropagation(),d(!s)}}):(0,r.createElement)("div",{className:"woocommerce-category-field-dropdown__toggle-placeholder"}),(0,r.createElement)(c.CheckboxControl,{label:t.data.name,checked:o.includes(t.data.id),onChange:()=>t.data})),p.length>0?(0,r.createElement)("ul",{className:Q()("woocommerce-category-field-dropdown__item-children",{"woocommerce-category-field-dropdown__item-open":s})},p.map((e=>(0,r.createElement)(ne,{key:e.data.id,item:e,selectedIds:o,items:a,highlightedIndex:n,openParent:()=>!s&&d(!0),getItemProps:i})))):null)},ce={};function le(e,t){e[t.parentID]&&(e[t.parentID].isOpen=!0,0!==e[t.parentID].parentID&&le(e,e[t.parentID]))}const ie=e=>e.sort(((e,t)=>e.data.count===t.data.count?e.data.name.localeCompare(t.data.name):t.data.count-e.data.count));function me(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;for(const o of t)e.push(o.data),o.children.length>0&&(o.children=ie(o.children),me(e,o.children));return e}async function se(e,t){const o={},r=[];for(const t of e)o[t.id]={data:t,children:[],parentID:t.parent,isOpen:!1};if(Object.keys(o).forEach((e=>{const a=o[parseInt(e,10)];if(0!==a.parentID)if(!o[a.parentID]&&ce[a.parentID]&&(o[a.parentID]={data:ce[a.parentID],children:[],parentID:ce[a.parentID].parent,isOpen:!1}),o[a.parentID]){o[a.parentID].children.push(a),ce[a.parentID]=o[a.parentID].data;const e=new RegExp((0,re.escapeRegExp)(t),"i");t.length>0&&e.test(a.data.name)&&le(o,a)}else r.push(a.parentID)})),r.length>0)return(0,p.resolveSelect)(w.EXPERIMENTAL_PRODUCT_CATEGORIES_STORE_NAME).getProductCategories({include:r}).then((o=>se([...o,...e],t)));const a=ie(Object.values(o).filter((e=>0===e.parentID))),n=me([],a);return Promise.resolve([n,a,o])}const de={per_page:100},ue=()=>{const e=(0,r.useRef)(""),{initialCategories:t,totalCount:o}=(0,p.useSelect)((e=>{const{getProductCategories:t,getProductCategoriesTotalCount:o}=e(w.EXPERIMENTAL_PRODUCT_CATEGORIES_STORE_NAME);return{initialCategories:t(de),totalCount:o(de)}})),[a,n]=(0,r.useState)(!0),[c,l]=(0,r.useState)([[],[],{}]),i=!t||t.length>0&&o>100;(0,r.useEffect)((()=>{t&&t.length>0&&(0===c[0].length||0===e.current.length)&&(n(!0),se([...t],"").then((e=>{l(e),n(!1)}),(()=>{n(!1)})))}),[t]);const m=(0,r.useCallback)((async o=>{if(e.current=o||"",!i&&t.length>0)return se([...t],o||"").then((e=>(l(e),e[1])));n(!0);try{const e=await(0,p.resolveSelect)(w.EXPERIMENTAL_PRODUCT_CATEGORIES_STORE_NAME).getProductCategories({search:o,per_page:100}),t=await se(e,o||"");return n(!1),l(t),t[1]}catch(e){return n(!1),[]}}),[t]),s=c[2];return{searchCategories:m,getFilteredItems:(0,r.useCallback)(((e,t,o)=>{const r=new RegExp((0,re.escapeRegExp)(t),"i");return e.filter((e=>o.indexOf(e)<0&&(r.test(e.name)||s[e.id]&&s[e.id].isOpen)))}),[c]),categoriesSelectList:c[0],categories:c[1],isSearching:a,categoryTreeKeyValues:s}};var pe=o(94333);const _e=e=>{let{initialCategoryName:t,onCancel:o,onCreate:l}=e;const{categoriesSelectList:i,isSearching:m,categoryTreeKeyValues:s,searchCategories:u,getFilteredItems:_}=ue(),{createNotice:g}=(0,p.useDispatch)("core/notices"),[h,E]=(0,r.useState)(!1),{createProductCategory:N,invalidateResolutionForStoreSelector:I}=(0,p.useDispatch)(w.EXPERIMENTAL_PRODUCT_CATEGORIES_STORE_NAME),[b,C]=(0,r.useState)(t||""),[v,f]=(0,r.useState)(null),S=(0,pe.useDebounce)(u,250);return(0,r.createElement)(c.Modal,{title:(0,n.__)("Create category","woocommerce"),onRequestClose:()=>o(),className:"woocommerce-create-new-category-modal"},(0,r.createElement)("div",{className:"woocommerce-create-new-category-modal__wrapper"},(0,r.createElement)(c.TextControl,{label:(0,n.__)("Name","woocommerce"),name:"Tops",value:b,onChange:C}),(0,r.createElement)(a.__experimentalSelectControl,{items:i,label:(0,te.Z)({mixedString:(0,n.__)("Parent category {{optional/}}","woocommerce"),components:{optional:(0,r.createElement)("span",{className:"woocommerce-product-form__optional-input"},(0,n.__)("(optional)","woocommerce"))}}),selected:v,onSelect:e=>e&&f(e),onRemove:()=>f(null),onInputChange:S,getFilteredItems:_,getItemLabel:e=>(null==e?void 0:e.name)||"",getItemValue:e=>(null==e?void 0:e.id)||""},(e=>{let{items:t,isOpen:o,getMenuProps:n,highlightedIndex:l,getItemProps:i}=e;return(0,r.createElement)(a.__experimentalSelectControlMenu,{isOpen:o,getMenuProps:n,className:"woocommerce-category-field-dropdown__menu"},[m?(0,r.createElement)("div",{key:"loading-spinner",className:"woocommerce-category-field-dropdown__item"},(0,r.createElement)("div",{className:"woocommerce-category-field-dropdown__item-content"},(0,r.createElement)(c.Spinner,null))):null,...t.filter((e=>{var t;return 0===(null===(t=s[e.id])||void 0===t?void 0:t.parentID)})).map((e=>(0,r.createElement)(ne,{key:`${e.id}`,item:s[e.id],selectedIds:v?[v.id]:[],items:t,highlightedIndex:l,getItemProps:i})))].filter((e=>null!==e)))})),(0,r.createElement)("div",{className:"woocommerce-create-new-category-modal__buttons"},(0,r.createElement)(c.Button,{isSecondary:!0,onClick:()=>o(),disabled:h},(0,n.__)("Cancel","woocommerce")),(0,r.createElement)(c.Button,{isPrimary:!0,disabled:0===b.length||h,isBusy:h,onClick:()=>{(async()=>{(0,d.recordEvent)("product_category_add",{new_product_page:!0}),E(!0);try{const e=await N({name:b,parent:v?v.id:void 0});I("getProductCategories"),E(!1),l(e)}catch(e){g("error",(0,n.__)("Failed to create category.","woocommerce")),E(!1),o()}})()}},(0,n.__)("Save","woocommerce")))))};var ge=(0,r.createElement)(j.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(j.Path,{d:"M18 11.2h-5.2V6h-1.6v5.2H6v1.6h5.2V18h1.6v-5.2H18z"}));const he=e=>{let{item:t,highlightedIndex:o,getItemProps:a,items:l}=e;const i=l.findIndex((e=>e.id===t.id));return(0,r.createElement)("li",(0,U.Z)({},a({item:t,index:i}),{className:Q()("woocommerce-category-field-dropdown__item is-new",{item_highlighted:o===i})}),(0,r.createElement)("div",{className:"woocommerce-category-field-dropdown__item-content"},(0,r.createElement)(c.Icon,{className:"category-field-dropdown__toggle",icon:ge,size:20}),(0,n.sprintf)((0,n.__)('Create "%s"',"woocommerce"),t.name)))};function Ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;e.push({id:t.id,name:t.name});const r=void 0!==t.parent?t.parent:o[t.id].parentID;return r>0&&o[r]&&!e.find((e=>e.id===r))&&Ee(e,o[r].data,o),e}const we=e=>{let{label:t,placeholder:o,value:n=[],onChange:c}=e;const{isSearching:l,categoriesSelectList:i,categoryTreeKeyValues:m,searchCategories:s,getFilteredItems:d}=ue(),[u,p]=(0,r.useState)(!1),[_,g]=(0,r.useState)(""),h=e=>{g(e||""),s(e||"")},E=(0,r.useMemo)((()=>(0,re.debounce)(h,150)),[h]),w=(e,t)=>{if(-99!==e)if(t){const t=m[e].data;t&&c(Ee([...n],t,m))}else c(n.filter((t=>t.id!==e)));else p(!0)},N=n.map((e=>e.id));return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(a.__experimentalSelectControl,{className:"woocommerce-category-field-dropdown components-base-control",multiple:!0,items:i,label:t,selected:n,getItemLabel:e=>(null==e?void 0:e.name)||"",getItemValue:e=>(null==e?void 0:e.id)||"",onSelect:e=>{e&&w(e.id,!N.includes(e.id))},onRemove:e=>e&&w(e.id,!1),onInputChange:E,getFilteredItems:(e,t,o)=>{const r=d(e,t,o);return t.length>0&&!l&&!r.find((e=>e.name.toLowerCase()===t.toLowerCase()))?[...r,{id:-99,name:t}]:r},placeholder:0===n.length?o:"",stateReducer:(e,t)=>{const{changes:o,type:r}=t;switch(r){case a.selectControlStateChangeTypes.ControlledPropUpdatedSelectedItem:return{...o,inputValue:e.inputValue};case a.selectControlStateChangeTypes.ItemClick:return o.selectedItem&&-99===o.selectedItem.id?o:{...o,isOpen:!0,inputValue:e.inputValue,highlightedIndex:e.highlightedIndex};default:return o}},__experimentalOpenMenuOnFocus:!0},(e=>{let{items:t,isOpen:o,getMenuProps:n,getItemProps:c,highlightedIndex:i}=e;const s=t.length>0?t.filter((e=>{var t;return 0===(null===(t=m[e.id])||void 0===t?void 0:t.parentID)||-99===e.id})):[];return(0,r.createElement)(a.__experimentalSelectControlMenu,{isOpen:o,getMenuProps:n,className:"woocommerce-category-field-dropdown__menu"},(0,r.createElement)(r.Fragment,null,l?(0,r.createElement)("li",{className:"woocommerce-category-field-dropdown__item"},(0,r.createElement)("div",{className:"woocommerce-category-field-dropdown__item-content"},(0,r.createElement)(a.Spinner,null))):s.map((e=>-99===e.id?(0,r.createElement)(he,{key:`${e.id}`,item:e,highlightedIndex:i,items:t,getItemProps:c}):(0,r.createElement)(ne,{key:`${e.id}`,item:m[e.id],highlightedIndex:i,selectedIds:N,items:t,getItemProps:c})))))})),(0,r.createElement)(a.__experimentalSelectControlMenuSlot,null),u&&(0,r.createElement)(_e,{initialCategoryName:_,onCancel:()=>p(!1),onCreate:e=>{c(Ee([...n],e,m)),p(!1),h("")}}))};var Ne=o(14812);const Ie=e=>{let{product:t,permalinkPrefix:o,permalinkSuffix:l,onCancel:i,onSaved:m}=e;const{createNotice:s}=(0,p.useDispatch)("core/notices"),{updateProductWithStatus:u,isUpdatingDraft:_,isUpdatingPublished:g}=v(),[h,E]=(0,r.useState)(t.slug||(0,ee.cleanForSlug)(t.name)),{resetForm:w,touched:N,errors:I}=(0,a.useFormContext)(),b=o+(0,ee.cleanForSlug)(h)+l;return(0,r.createElement)(c.Modal,{title:(0,n.__)("Edit product link","woocommerce"),onRequestClose:()=>i(),className:"woocommerce-product-link-edit-modal"},(0,r.createElement)("div",{className:"woocommerce-product-link-edit-modal__wrapper"},(0,r.createElement)(c.TextControl,{label:b,name:"slug",value:h,onChange:E}),(0,r.createElement)(Ne.Text,{size:12},(0,n.__)("Use simple, descriptive words and numbers. We'll replace spaces with hyphens (-).","woocommerce")),(0,r.createElement)("div",{className:"woocommerce-product-link-edit-modal__buttons"},(0,r.createElement)(c.Button,{isSecondary:!0,onClick:()=>i()},(0,n.__)("Cancel","woocommerce")),(0,r.createElement)(c.Button,{isPrimary:!0,isBusy:_||g,disabled:_||g||h===t.slug,onClick:()=>{(async()=>{(0,d.recordEvent)("product_update_slug",{new_product_page:!0,product_id:t.id,product_type:t.type});const e=await u(t.id,{slug:h},t.status,!0);e&&e.id?(w({...t,slug:e.slug,permalink:e.permalink},N,I),s(e.slug===(0,ee.cleanForSlug)(h)?"success":"info",e.slug===(0,ee.cleanForSlug)(h)?(0,n.__)("Product link successfully updated.","woocommerce"):(0,n.__)("Product link already existed, updated to ","woocommerce")+e.permalink)):s("error",(0,n.__)("Failed to update product link.","woocommerce")),m()})()}},(0,n.__)("Save","woocommerce")))))};o(99196);var be=o(15635);const Ce=e=>{let{children:t,fieldName:o,categoryName:a,location:n,order:l=1}=e;const i=(0,re.snakeCase)(a),m=(0,re.snakeCase)(o);return(0,r.createElement)(c.Fill,{name:`woocommerce_product_${i}_${m}_${n}`},(e=>(0,be.uh)(t,l,e)))};Ce.Slot=e=>{let{fillProps:t,fieldName:o,categoryName:a,location:n}=e;const l=(0,re.snakeCase)(a),i=(0,re.snakeCase)(o);return(0,r.createElement)(c.Slot,{name:`woocommerce_product_${l}_${i}_${n}`,fillProps:t},be.qk)};const ve=e=>{let{fieldName:t,categoryName:o,children:a}=e;return(0,r.createElement)("div",{className:"product-field-layout"},(0,r.createElement)(Ce.Slot,{fieldName:t,categoryName:o,location:"before"}),a,(0,r.createElement)(Ce.Slot,{fieldName:t,categoryName:o,location:"after"}))},fe=e=>{let{title:t,description:o,className:n,children:c}=e;return(0,r.createElement)(a.FormSection,{title:t,description:o,className:n},r.Children.map(c,(e=>(0,r.isValidElement)(e)&&e.props.onChange?(0,r.createElement)(ve,{fieldName:e.props.name,categoryName:t},e):e)))},Se=()=>{const{getCheckboxControlProps:e,getInputProps:t,values:o,touched:l,errors:i,setValue:m}=(0,a.useFormContext)(),[s,u]=(0,r.useState)(!1),[_,g]=(0,r.useState)((0,oe.parse)(o.description||"")),[h,E]=(0,r.useState)((0,oe.parse)(o.short_description||"")),{permalinkPrefix:N,permalinkSuffix:I}=(0,p.useSelect)((e=>{const{getPermalinkParts:t}=e(w.PRODUCTS_STORE_NAME);if(o.id){const e=t(o.id);return{permalinkPrefix:null==e?void 0:e.prefix,permalinkSuffix:null==e?void 0:e.suffix}}return{}}));return(0,r.createElement)(fe,{title:(0,n.__)("Product details","woocommerce"),description:(0,n.__)("This info will be displayed on the product page, category pages, social media, and search results.","woocommerce")},(0,r.createElement)(c.Card,null,(0,r.createElement)(c.CardBody,null,(0,r.createElement)("div",null,(0,r.createElement)(c.TextControl,(0,U.Z)({label:(0,te.Z)({mixedString:(0,n.__)("Name {{required/}}","woocommerce"),components:{required:(0,r.createElement)("span",{className:"woocommerce-product-form__optional-input"},(0,n.__)("(required)","woocommerce"))}}),name:"product-details-name",placeholder:(0,n.__)("e.g. 12 oz Coffee Mug","woocommerce")},t("name",{onBlur:()=>{var e;!o.sku&&null!==(e=o.name)&&void 0!==e&&e.length&&m("sku",(0,ee.cleanForSlug)(o.name))}}))),o.id&&!(Boolean(l.name)&&Boolean(i.name))&&N&&(0,r.createElement)("span",{className:"woocommerce-product-form__secondary-text product-details-section__product-link"},(0,n.__)("Product link","woocommerce"),":Â ",(0,r.createElement)("a",{href:o.permalink,target:"_blank",rel:"noreferrer"},N,o.slug||(0,ee.cleanForSlug)(o.name),I),(0,r.createElement)(c.Button,{variant:"link",onClick:()=>u(!0)},(0,n.__)("Edit","woocommerce")))),(0,r.createElement)(we,(0,U.Z)({label:(0,n.__)("Categories","woocommerce"),placeholder:(0,n.__)("Search or create categoryâ€¦","woocommerce")},t("categories"))),(0,r.createElement)(c.CheckboxControl,(0,U.Z)({label:(0,r.createElement)(r.Fragment,null,(0,n.__)("Feature this product","woocommerce"),(0,r.createElement)(a.__experimentalTooltip,{text:(0,te.Z)({mixedString:(0,n.__)("Include this product in a featured section on your website with a widget or shortcode. {{moreLink/}}","woocommerce"),components:{moreLink:(0,r.createElement)(a.Link,{href:"https://woocommerce.com/document/woocommerce-shortcodes/#products",target:"_blank",type:"external",onClick:()=>(0,d.recordEvent)("add_product_learn_more",{category:"product-details"})},(0,n.__)("Learn more","woocommerce"))}})}))},e("featured",B("featured")))),s&&(0,r.createElement)(Ie,{permalinkPrefix:N||"",permalinkSuffix:I||"",product:o,onCancel:()=>u(!1),onSaved:()=>u(!1)}),(0,r.createElement)(a.__experimentalRichTextEditor,{label:(0,n.__)("Summary","woocommerce"),blocks:h,onChange:e=>{E(e),h.length&&m("short_description",(0,oe.serialize)(e))},placeholder:(0,n.__)("Summarize this product in 1-2 short sentences. We'll show it at the top of the page.","woocommerce")}),(0,r.createElement)(a.__experimentalRichTextEditor,{label:(0,n.__)("Description","woocommerce"),blocks:_,onChange:e=>{g(e),_.length&&m("description",(0,oe.serialize)(e))},placeholder:(0,n.__)("Describe this product. What makes it unique? What are its most important features?","woocommerce")}))))},ke=()=>{const{getCheckboxControlProps:e,getInputProps:t,values:o}=(0,a.useFormContext)(),l=t("backorders");return delete l.checked,delete l.value,(0,r.createElement)(r.Fragment,null,o.manage_stock&&(0,r.createElement)(c.RadioControl,(0,U.Z)({label:(0,n.__)("When out of stock","woocommerce"),options:[{label:(0,n.__)("Allow purchases","woocommerce"),value:"yes"},{label:(0,n.__)("Allow purchases, but notify customers","woocommerce"),value:"notify"},{label:(0,n.__)("Don't allow purchases","woocommerce"),value:"no"}]},l)),(0,r.createElement)("h4",null,(0,n.__)("Restrictions","woocommerce")),(0,r.createElement)(c.CheckboxControl,(0,U.Z)({label:(0,n.__)("Limit purchases to 1 item per order","woocommerce")},e("sold_individually",B("sold_individually")))))};var ye=o(79205);const Me=()=>{const{getInputProps:e}=(0,a.useFormContext)(),t=(0,ye.O3)("notifyLowStockAmount",2);return(0,r.createElement)(r.Fragment,null,(0,r.createElement)("h4",null,(0,n.__)("Product quantity","woocommerce")),(0,r.createElement)(c.TextControl,(0,U.Z)({type:"number",label:(0,n.__)("Current quantity","woocommerce")},e("stock_quantity"),{min:0})),(0,r.createElement)(c.TextControl,(0,U.Z)({type:"number",label:(0,n.__)("Email me when quantity reaches","woocommerce"),placeholder:(0,n.sprintf)((0,n.__)("%d (store default)","woocommerce"),t)},e("low_stock_amount"),{min:0})),(0,r.createElement)("span",{className:"woocommerce-product-form__secondary-text"},(0,te.Z)({mixedString:(0,n.__)("Make sure to enable notifications in {{link}}store settings{{/link}}.","woocommerce"),components:{link:(0,r.createElement)(a.Link,{href:(0,P.getAdminLink)("admin.php?page=wc-settings&tab=products&section=inventory"),target:"_blank",type:"wp-admin",onClick:()=>{(0,d.recordEvent)("product_pricing_list_price_help_tax_settings_click")}},(0,r.createElement)(r.Fragment,null)),strong:(0,r.createElement)("strong",null)}})))},De=()=>{const{getInputProps:e}=(0,a.useFormContext)(),t=e("stock_status");return delete t.checked,delete t.value,(0,r.createElement)(c.RadioControl,(0,U.Z)({label:(0,n.__)("Stock status","woocommerce"),options:[{label:(0,n.__)("In stock","woocommerce"),value:"instock"},{label:(0,n.__)("Out of stock","woocommerce"),value:"outofstock"},{label:(0,n.__)("On backorder","woocommerce"),value:"onbackorder"}]},t))},xe=()=>{const{getCheckboxControlProps:e,getInputProps:t,values:o}=(0,a.useFormContext)(),l="yes"===(0,ye.O3)("manageStock","yes");return(0,r.createElement)(fe,{title:(0,n.__)("Inventory","woocommerce"),description:(0,r.createElement)(r.Fragment,null,(0,r.createElement)("span",null,(0,n.__)("Set up and manage inventory for this product, including status and available quantity.","woocommerce")),(0,r.createElement)(a.Link,{href:(0,P.getAdminLink)("admin.php?page=wc-settings&tab=products&section=inventory"),target:"_blank",type:"wp-admin",onClick:()=>{(0,d.recordEvent)("add_product_inventory_help")},className:"woocommerce-form-section__header-link"},(0,n.__)("Manage global inventory settings","woocommerce")))},(0,r.createElement)(c.Card,null,(0,r.createElement)(c.CardBody,null,(0,r.createElement)(c.TextControl,(0,U.Z)({label:(0,n.__)("SKU (Stock Keeping Unit)","woocommerce")},t("sku",{className:"half-width-field"}))),(0,r.createElement)("div",{className:"woocommerce-product-form__field"},(0,r.createElement)(a.__experimentalConditionalWrapper,{condition:!l,wrapper:e=>(0,r.createElement)(c.Tooltip,{text:(0,n.__)("Quantity tracking is disabled for all products. Go to global store settings to change it.","woocommerce"),position:"top center"},(0,r.createElement)("div",{className:"woocommerce-product-form__tooltip-disabled-overlay"},e))},(0,r.createElement)(c.ToggleControl,(0,U.Z)({label:(0,n.__)("Track quantity for this product","woocommerce")},e("manage_stock",B("manage_stock")),{disabled:!l})))),o.manage_stock?(0,r.createElement)(Me,null):(0,r.createElement)(De,null),(0,r.createElement)(a.CollapsibleContent,{toggleText:(0,n.__)("Advanced","woocommerce")},(0,r.createElement)(ke,null)))))};var Te=o(69771),Le=o(76292),Pe=o.n(Le);const je=()=>{var e,t,o;const{sanitizePrice:l}=v(),{getInputProps:i,setValues:m,values:s}=(0,a.useFormContext)(),[u,_]=(0,r.useState)(!1),[g,h]=(0,r.useState)(!1),[E,I]=(0,r.useState)(!1),{isResolving:b,taxSettings:C}=(0,p.useSelect)((e=>{const{getSettings:t,hasFinishedResolution:o}=e(w.SETTINGS_STORE_NAME);return{isResolving:!o("getSettings",["tax"]),taxSettings:t("tax").tax||{}}})),f="yes"===C.woocommerce_prices_include_tax,S=(0,r.useContext)(N.$),{getCurrencyConfig:k,formatAmount:y}=S,M=k(),D=(0,n.__)("Per your {{link}}store settings{{/link}}, tax is {{strong}}included{{/strong}} in the price.","woocommerce"),x=(0,n.__)("Per your {{link}}store settings{{/link}}, tax is {{strong}}not included{{/strong}} in the price.","woocommerce"),{dateFormat:T,timeFormat:L}=(0,p.useSelect)((e=>{const{getOption:t}=e(w.OPTIONS_STORE_NAME);return{dateFormat:t("date_format")||"F j, Y",timeFormat:t("time_format")||"H:i"}}));(0,r.useEffect)((()=>{if(g||E)return;const e="string"==typeof s.date_on_sale_from_gmt&&s.date_on_sale_from_gmt.length>0,t="string"==typeof s.date_on_sale_to_gmt&&s.date_on_sale_to_gmt.length>0;(e||t)&&(I(!0),_(!0))}),[g,E,s]);const P=(0,te.Z)({mixedString:f?D:x,components:{link:(0,r.createElement)(a.Link,{href:`${ye.SX}admin.php?page=wc-settings&tab=tax`,target:"_blank",type:"external",onClick:()=>{(0,d.recordEvent)("product_pricing_list_price_help_tax_settings_click")}},(0,r.createElement)(r.Fragment,null)),strong:(0,r.createElement)("strong",null)}}),j={prefix:M.symbol,className:"half-width-field components-currency-control",sanitize:e=>l(String(e)),onFocus(e){setTimeout((function(e){e.select()}),0,e.currentTarget)},onKeyUp(e){const t=e.currentTarget.name,o=Number.parseFloat(l(s[t]||"0")),r=Number(e.currentTarget.step||"1");"ArrowUp"===e.code&&m({[t]:String(o+r)}),"ArrowDown"===e.code&&m({[t]:String(o-r)})}},R=i("regular_price",j),A=i("sale_price",j),z={className:"woocommerce-product__date-time-picker",isDateOnlyPicker:!0,dateTimeFormat:T};return(0,r.createElement)(fe,{title:(0,n.__)("Pricing","woocommerce"),description:(0,r.createElement)(r.Fragment,null,(0,r.createElement)("span",null,(0,n.__)("Set a competitive price, put the product on sale, and manage tax calculations.","woocommerce")),(0,r.createElement)(a.Link,{className:"woocommerce-form-section__header-link",href:"https://woocommerce.com/posts/how-to-price-products-strategies-expert-tips/",target:"_blank",type:"external",onClick:()=>{(0,d.recordEvent)("add_product_pricing_help")}},(0,n.__)("How to price your product: expert tips","woocommerce")))},(0,r.createElement)(c.Card,null,(0,r.createElement)(c.CardBody,null,(0,r.createElement)(c.BaseControl,{id:"product_pricing_regular_price",help:null!==(e=null==R?void 0:R.help)&&void 0!==e?e:""},(0,r.createElement)(c.__experimentalInputControl,(0,U.Z)({},R,{name:"regular_price",label:(0,n.__)("List price","woocommerce"),value:F(String(null==R?void 0:R.value),M,y)}))),!b&&(0,r.createElement)("span",{className:"woocommerce-product-form__secondary-text"},P),(0,r.createElement)(c.BaseControl,{id:"product_pricing_sale_price",help:null!==(t=null==A?void 0:A.help)&&void 0!==t?t:""},(0,r.createElement)(c.__experimentalInputControl,(0,U.Z)({},A,{name:"sale_price",label:(0,n.__)("Sale price","woocommerce"),value:F(String(null==A?void 0:A.value),M,y)}))),(0,r.createElement)(c.ToggleControl,{label:(0,r.createElement)(r.Fragment,null,(0,n.__)("Schedule sale","woocommerce"),(0,r.createElement)(a.__experimentalTooltip,{text:(0,te.Z)({mixedString:(0,n.__)('The sale will start at the beginning of the "From" date ({{startTime/}}) and expire at the end of the "To" date ({{endTime/}}). {{moreLink/}}',"woocommerce"),components:{startTime:(0,r.createElement)("span",null,(0,Te.format)(L,Pe()().startOf("day"))),endTime:(0,r.createElement)("span",null,(0,Te.format)(L,Pe()().endOf("day"))),moreLink:(0,r.createElement)(a.Link,{href:"https://woocommerce.com/document/managing-products/#product-data",target:"_blank",type:"external",onClick:()=>(0,d.recordEvent)("add_product_learn_more",{category:"product-scheduled-sale"})},(0,n.__)("Learn more","woocommerce"))}})})),checked:u,onChange:e=>{(0,d.recordEvent)("product_pricing_schedule_sale_toggle_click",{enabled:e}),h(!0),_(e),m(e?{date_on_sale_from_gmt:Pe()().startOf("day").toISOString(),date_on_sale_to_gmt:null}:{date_on_sale_from_gmt:null,date_on_sale_to_gmt:null})},disabled:!((null===(o=s.sale_price)||void 0===o?void 0:o.length)>0)}),u&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)(a.DateTimePickerControl,(0,U.Z)({label:(0,n.__)("From","woocommerce"),placeholder:(0,n.__)("Now","woocommerce"),timeForDateOnly:"start-of-day",currentDate:s.date_on_sale_from_gmt},i("date_on_sale_from_gmt",{...z}))),(0,r.createElement)(a.DateTimePickerControl,(0,U.Z)({label:(0,n.__)("To","woocommerce"),placeholder:(0,n.__)("No end date","woocommerce"),timeForDateOnly:"end-of-day",currentDate:s.date_on_sale_to_gmt},i("date_on_sale_to_gmt",{...z})))))))};function Re(e){let{highlight:t,...o}=e;return(0,r.createElement)("svg",(0,U.Z)({},o,{viewBox:"0 0 288 195",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),(0,r.createElement)("path",{d:"M10.4922 134.221V35.2617C10.4922 33.8539 11.9079 32.8867 13.2193 33.3986L98.3109 66.6076C99.0711 66.9043 99.5748 67.633 99.5837 68.449L100.703 171.089C100.719 172.534 99.2449 173.518 97.9167 172.95L11.7054 136.06C10.9695 135.745 10.4922 135.022 10.4922 134.221Z",fill:"A"===t?"#F0F6FC":"#F6F7F7"}),(0,r.createElement)("path",{d:"M43.9062 84.2338V44.7946L187.953 11.877L211.485 20.5392L67.0049 53.3546V93.6078L43.9062 84.2338Z",fill:"#F0F0F0",stroke:"#DDDDDD",strokeWidth:"2"}),(0,r.createElement)("path",{d:"M43.9062 99.8824V90.6973L67.0049 100.301V109.256L43.9062 99.8824Z",fill:"#F0F0F0",stroke:"#DDDDDD",strokeWidth:"2"}),(0,r.createElement)("path",{d:"M10.4922 134.22V35.2617C10.4922 33.8539 11.9079 32.8867 13.2193 33.3986L98.2977 66.6025C99.0645 66.9017 99.5696 67.6402 99.5705 68.4633L99.6936 173.635L11.7067 136.06C10.9701 135.745 10.4922 135.021 10.4922 134.22Z",stroke:"#DDDDDD",strokeWidth:"2"}),(0,r.createElement)("path",{d:"M249.015 32.8879L99.5703 66.7689V172.489C99.5703 173.801 100.812 174.758 102.081 174.423L249.968 135.378C250.846 135.146 251.458 134.352 251.458 133.444V34.8384C251.458 33.5554 250.267 32.6042 249.015 32.8879Z",fill:"B"===t?"#F0F6FC":"#F6F7F7",stroke:"#DDDDDD",strokeWidth:"2"}),(0,r.createElement)("path",{d:"M154.224 117.401L115.969 126.13C115.059 126.337 114.414 127.147 114.414 128.08V154.212C114.414 155.526 115.658 156.483 116.928 156.145L155.182 145.98C156.058 145.747 156.668 144.954 156.668 144.047V119.351C156.668 118.067 155.475 117.115 154.224 117.401Z",fill:"#F0F0F0",stroke:"#DDDDDD",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"6 6"}),(0,r.createElement)("path",{d:"M12.0625 33.3189L159.943 1.6182C160.304 1.54091 160.679 1.5648 161.027 1.68725L249.4 32.7973",stroke:"#DDDDDD",strokeWidth:"2"}),(0,r.createElement)("path",{d:"M0.214844 149.961L5.30102 156.971L8.8282 149.061L0.214844 149.961ZM84.7236 187.648L79.6374 180.638L76.1102 188.548L84.7236 187.648ZM6.07417 153.396L78.2533 185.584L78.8642 184.214L6.68509 152.026L6.07417 153.396Z",fill:"A"===t?"#007CBA":"#BBBBBB"}),(0,r.createElement)("path",{d:"M256.025 152.246L247.662 149.998L249.897 158.365L256.025 152.246ZM106.422 192.216L114.785 194.463L112.55 186.097L106.422 192.216ZM249.31 153.263L112.75 189.749L113.137 191.198L249.698 154.713L249.31 153.263Z",fill:"B"===t?"#007CBA":"#BBBBBB"}),(0,r.createElement)("path",{d:"M268.586 28.908L264.256 36.408H272.916L268.586 28.908ZM268.586 131.689L272.916 124.189H264.256L268.586 131.689ZM267.836 35.658V124.939H269.336V35.658H267.836Z",fill:"C"===t?"#007CBA":"#BBBBBB"}),(0,r.createElement)("path",{d:"M26.8564 184.66L29.6548 176.909H30.9492L33.7476 184.66H32.4692L31.7603 182.603H28.8062L28.0918 184.66H26.8564ZM29.1123 181.593H31.4541L30.3315 178.316H30.2402L29.1123 181.593Z",fill:"A"===t?"#007CBA":"#757575"}),(0,r.createElement)("path",{d:"M189.621 189.228V181.478H192.736C193.463 181.478 194.032 181.651 194.444 181.999C194.859 182.342 195.067 182.813 195.067 183.411C195.067 183.816 194.936 184.179 194.675 184.501C194.413 184.82 194.091 185.012 193.708 185.076V185.167C194.231 185.221 194.652 185.42 194.97 185.764C195.292 186.104 195.454 186.526 195.454 187.031C195.454 187.715 195.219 188.252 194.75 188.643C194.281 189.033 193.633 189.228 192.806 189.228H189.621ZM190.824 188.208H192.564C193.105 188.208 193.516 188.1 193.799 187.885C194.082 187.67 194.224 187.357 194.224 186.945C194.224 186.541 194.077 186.235 193.783 186.027C193.49 185.816 193.06 185.71 192.494 185.71H190.824V188.208ZM190.824 184.759H192.252C192.782 184.759 193.183 184.664 193.456 184.475C193.731 184.281 193.869 184 193.869 183.631C193.869 183.273 193.744 182.996 193.493 182.799C193.246 182.598 192.901 182.498 192.457 182.498H190.824V184.759Z",fill:"B"===t?"#007CBA":"#757575"}),(0,r.createElement)("path",{d:"M279.519 80.2898C279.519 79.033 279.83 78.0411 280.453 77.3142C281.08 76.5873 281.932 76.2239 283.01 76.2239C283.862 76.2239 284.587 76.4745 285.185 76.9758C285.787 77.4736 286.136 78.1181 286.232 78.9094H285.035C284.92 78.4332 284.68 78.0536 284.315 77.7708C283.953 77.4879 283.518 77.3464 283.01 77.3464C282.315 77.3464 281.764 77.6114 281.355 78.1414C280.951 78.6677 280.749 79.3839 280.749 80.2898C280.749 81.1921 280.951 81.9083 281.355 82.4382C281.764 82.9646 282.317 83.2278 283.015 83.2278C283.527 83.2278 283.964 83.0989 284.326 82.8411C284.691 82.5833 284.927 82.2359 285.035 81.7991H286.232C286.125 82.5653 285.778 83.183 285.19 83.6521C284.603 84.1176 283.878 84.3503 283.015 84.3503C281.937 84.3503 281.085 83.9869 280.458 83.26C279.832 82.5331 279.519 81.5431 279.519 80.2898Z",fill:"C"===t?"#007CBA":"#757575"}))}function Ae(e){var t;let{onAdd:o,onCancel:l}=e;const{errors:i,getInputProps:m,isValidForm:s}=(0,a.useFormContext)(),[d,u]=(0,r.useState)(!1);return(0,r.createElement)("div",{className:"woocommerce-add-new-shipping-class-modal__wrapper"},(0,r.createElement)(c.TextControl,(0,U.Z)({},m("name"),{placeholder:(0,n.__)("e.g. Fragile products","woocommerce"),label:(0,te.Z)({mixedString:(0,n.__)("Name {{required/}}","woocommerce"),components:{required:(0,r.createElement)("span",{className:"woocommerce-add-new-shipping-class-modal__optional-input"},(0,n.__)("(required)","woocommerce"))}})})),(0,r.createElement)(c.TextControl,(0,U.Z)({},m("slug"),{label:(0,n.__)("Slug","woocommerce")})),(0,r.createElement)(c.TextControl,(0,U.Z)({},m("description"),{label:(0,n.__)("Description","woocommerce"),help:null!==(t=null==i?void 0:i.description)&&void 0!==t?t:(0,n.__)("Describe how you and other store administrators can use this shipping class.","woocommerce")})),(0,r.createElement)("div",{className:"woocommerce-add-new-shipping-class-modal__buttons"},(0,r.createElement)(c.Button,{isSecondary:!0,onClick:l},(0,n.__)("Cancel","woocommerce")),(0,r.createElement)(c.Button,{isPrimary:!0,isBusy:d,disabled:!s||d,onClick:function(){u(!0),o().then((()=>{u(!1),l()})).catch((()=>{u(!1)}))}},(0,n.__)("Add","woocommerce"))))}function ze(e){var t;const o={};return null!==(t=e.name)&&void 0!==t&&t.length||(o.name=(0,n.__)("The shipping class name is required.","woocommerce")),o}const Oe={name:"",slug:"",description:""};function Ue(e){let{shippingClass:t,onAdd:o,onCancel:l}=e;return(0,r.createElement)(c.Modal,{title:(0,n.__)("New shipping class","woocommerce"),className:"woocommerce-add-new-shipping-class-modal",onRequestClose:l},(0,r.createElement)(a.Form,{initialValues:null!=t?t:Oe,validate:ze,errors:{},onSubmit:o},(e=>(0,r.createElement)(Ae,{onAdd:e.handleSubmit,onCancel:l}))))}const Ze=[{value:"",label:(0,n.__)("No shipping class","woocommerce")},{value:I,label:(0,n.__)("Add new shipping class","woocommerce")}];function Be(e){return e.map((e=>{let{slug:t,name:o}=e;return{value:t,label:o}}))}function Fe(e){return(0,te.Z)({mixedString:e,components:{span:(0,r.createElement)("span",{className:"woocommerce-product-form__secondary-text"})}})}function He(e,t){var o;const r=null==e||null===(o=e.categories)||void 0===o?void 0:o.find((e=>{let{slug:t}=e;return"uncategorized"!==t}));if(r&&(null==t||!t.some((e=>{let{slug:t}=e;return t===r.slug}))))return{name:r.name,slug:r.slug}}function We(e){let{product:t}=e;const{getInputProps:o,getSelectControlProps:l,setValue:i}=(0,a.useFormContext)(),{formatNumber:m,parseNumber:s}=v(),[u,_]=(0,r.useState)(),[g,h]=(0,r.useState)(!1),{shippingClasses:E,hasResolvedShippingClasses:N}=(0,p.useSelect)((e=>{const{getProductShippingClasses:t,hasFinishedResolution:o}=e(w.EXPERIMENTAL_PRODUCT_SHIPPING_CLASSES_STORE_NAME);return{hasResolvedShippingClasses:o("getProductShippingClasses"),shippingClasses:t()}}),[]),{dimensionUnit:b,weightUnit:C,hasResolvedUnits:f}=(0,p.useSelect)((e=>{const{getOption:t,hasFinishedResolution:o}=e(w.OPTIONS_STORE_NAME);return{dimensionUnit:t("woocommerce_dimension_unit"),weightUnit:t("woocommerce_weight_unit"),hasResolvedUnits:o("getOption",["woocommerce_dimension_unit"])&&o("getOption",["woocommerce_weight_unit"])}}),[]),{createProductShippingClass:S,invalidateResolution:k}=(0,p.useDispatch)(w.EXPERIMENTAL_PRODUCT_SHIPPING_CLASSES_STORE_NAME),{createErrorNotice:y}=(0,p.useDispatch)("core/notices"),M={onBlur:()=>{_(void 0)},sanitize:e=>s(String(e)),suffix:b},D=o("dimensions.width",M),x=o("dimensions.length",M),T=o("dimensions.height",M),L=o("weight",{sanitize:e=>s(String(e))}),P=o("shipping_class");function j(e){let t=(0,n.__)("We couldnâ€™t add this shipping class. Try again in a few seconds.","woocommerce");throw"term_exists"===e.code&&(t=(0,n.__)("A shipping class with that slug already exists.","woocommerce")),y(t,{explicitDismiss:!0}),e}return(0,r.createElement)(fe,{title:(0,n.__)("Shipping","woocommerce"),description:(0,n.__)("Set up shipping costs and enter dimensions used for accurate rate calculations.","woocommerce")},(0,r.createElement)(c.Card,null,(0,r.createElement)(c.CardBody,{className:"product-shipping-section__classes"},N?(0,r.createElement)(r.Fragment,null,(0,r.createElement)(c.SelectControl,(0,U.Z)({label:(0,n.__)("Shipping class","woocommerce")},l("shipping_class",{className:"half-width-field"}),{onChange:e=>{e!==I?P.onChange(e):h(!0)},options:[...Ze,...Be(null!=E?E:[])]})),(0,r.createElement)("span",{className:"woocommerce-product-form__secondary-text"},(0,te.Z)({mixedString:(0,n.__)("Manage shipping classes and rates in {{link}}global settings{{/link}}.","woocommerce"),components:{link:(0,r.createElement)(a.Link,{href:`${ye.SX}admin.php?page=wc-settings&tab=shipping&section=classes`,target:"_blank",type:"external",onClick:()=>{(0,d.recordEvent)("product_shipping_global_settings_link_click")}},(0,r.createElement)(r.Fragment,null))}}))):(0,r.createElement)("div",{className:"product-shipping-section__spinner-wrapper"},(0,r.createElement)(a.Spinner,null)))),(0,r.createElement)(c.Card,null,(0,r.createElement)(c.CardBody,{className:"product-shipping-section__dimensions"},f?(0,r.createElement)(r.Fragment,null,(0,r.createElement)("h4",null,(0,n.__)("Dimensions","woocommerce")),(0,r.createElement)("p",{className:"woocommerce-product-form__secondary-text"},(0,n.__)("Enter the size of the product as youâ€™d put it in a shipping box, including packaging like bubble wrap.","woocommerce")),(0,r.createElement)("div",{className:"product-shipping-section__dimensions-body"},(0,r.createElement)("div",{className:"product-shipping-section__dimensions-body-col"},(0,r.createElement)(c.BaseControl,{id:"product_shipping_dimensions_width",className:D.className,help:D.help},(0,r.createElement)(c.__experimentalInputControl,(0,U.Z)({},D,{value:m(String(D.value)),label:Fe((0,n.__)("Width {{span}}A{{/span}}","woocommerce")),onFocus:()=>{_("A")}}))),(0,r.createElement)(c.BaseControl,{id:"product_shipping_dimensions_length",className:x.className,help:x.help},(0,r.createElement)(c.__experimentalInputControl,(0,U.Z)({},x,{value:m(String(x.value)),label:Fe((0,n.__)("Length {{span}}B{{/span}}","woocommerce")),onFocus:()=>{_("B")}}))),(0,r.createElement)(c.BaseControl,{id:"product_shipping_dimensions_height",className:T.className,help:T.help},(0,r.createElement)(c.__experimentalInputControl,(0,U.Z)({},T,{value:m(String(T.value)),label:Fe((0,n.__)("Height {{span}}C{{/span}}","woocommerce")),onFocus:()=>{_("C")}}))),(0,r.createElement)(c.BaseControl,{id:"product_shipping_weight",className:L.className,help:L.help},(0,r.createElement)(c.__experimentalInputControl,(0,U.Z)({},L,{value:m(String(L.value)),label:(0,n.__)("Weight","woocommerce"),suffix:C})))),(0,r.createElement)("div",{className:"product-shipping-section__dimensions-body-col"},(0,r.createElement)(Re,{highlight:u,className:"product-shipping-section__dimensions-image"})))):(0,r.createElement)("div",{className:"product-shipping-section__spinner-wrapper"},(0,r.createElement)(a.Spinner,null)))),g&&(0,r.createElement)(Ue,{shippingClass:He(t,E),onAdd:e=>S(e).then((e=>((0,d.recordEvent)("product_new_shipping_class_modal_add_button_click"),k("getProductShippingClasses"),i("shipping_class",e.slug),e))).catch(j),onCancel:()=>h(!1)}))}let Ve;!function(e){e.instock="instock",e.onbackorder="onbackorder",e.outofstock="outofstock"}(Ve||(Ve={}));const Ye={[Ve.instock]:(0,n.__)("In stock","woocommerce"),[Ve.onbackorder]:(0,n.__)("On backorder","woocommerce"),[Ve.outofstock]:(0,n.__)("Out of stock","woocommerce")},Qe=()=>{const[e,t]=(0,r.useState)(1),[o,l]=(0,r.useState)(25),{productId:i}=(0,g.UO)(),m=(0,r.useContext)(N.$),{formatAmount:s,getCurrencyConfig:d}=m,{isLoading:u,variations:_,totalCount:h}=(0,p.useSelect)((t=>{const{getProductVariations:r,hasFinishedResolution:a,getProductVariationsTotalCount:n}=t(w.EXPERIMENTAL_PRODUCT_VARIATIONS_STORE_NAME),c={product_id:i,page:e,per_page:o};return{isLoading:!a("getProductVariations",[c]),variations:r(c),totalCount:n(c)}}),[e,o]);if(!_||u)return(0,r.createElement)(c.Card,{className:"woocommerce-product-variations is-loading"},(0,r.createElement)(c.Spinner,null));const E=d();return(0,r.createElement)(c.Card,{className:"woocommerce-product-variations"},(0,r.createElement)("div",{className:"woocommerce-product-variations__header"},(0,r.createElement)("h4",null,(0,n.__)("Variation","woocommerce")),(0,r.createElement)("h4",null,(0,n.sprintf)((0,n.__)("Price (%s)","woocommerce"),E.code)),(0,r.createElement)("h4",null,(0,n.__)("Quantity","woocommerce"))),(0,r.createElement)(a.Sortable,null,_.map((e=>{return(0,r.createElement)(a.ListItem,{key:e.id},(0,r.createElement)("div",{className:"woocommerce-product-variations__attributes"},e.attributes.map((e=>(0,r.createElement)(a.Tag,{id:e.id,className:"woocommerce-product-variations__attribute",key:e.id,label:e.option})))),(0,r.createElement)("div",{className:"woocommerce-product-variations__price"},s(e.price)),(0,r.createElement)("div",{className:"woocommerce-product-variations__quantity"},(t=e).manage_stock?t.stock_quantity||0:t.stock_status?Ye[t.stock_status]:Ye.instock));var t}))),(0,r.createElement)(a.Pagination,{className:"woocommerce-product-variations__footer",page:e,perPage:o,total:h,showPagePicker:!1,onPageChange:t,onPerPageChange:l}))},Ge=()=>(0,r.createElement)(fe,{title:(0,n.__)("Variations","woocommerce"),description:(0,r.createElement)(r.Fragment,null,(0,r.createElement)("span",null,(0,n.__)("Manage individual product combinations created from options.","woocommerce")),(0,r.createElement)(a.Link,{className:"woocommerce-form-section__header-link",href:"https://woocommerce.com/posts/product-variations-display/",target:"_blank",type:"external",onClick:()=>{(0,d.recordEvent)("add_product_variation_help")}},(0,n.__)("How to make variations work for you","woocommerce")))},(0,r.createElement)(Qe,null));var Je=o(42411),Xe=o(34537);const qe=()=>{const{getInputProps:e,setValue:t}=(0,a.useFormContext)(),o=e("images").value||[],[i,m]=(0,r.useState)(!1),[s,u]=(0,r.useState)(!1),[p,_]=(0,r.useState)(null),g=()=>{m(!i)};return(0,r.createElement)(fe,{title:(0,n.__)("Images","woocommerce"),description:(0,r.createElement)(r.Fragment,null,(0,r.createElement)("span",null,(0,n.__)("For best results, use JPEG files that are 1000 by 1000 pixels or larger.","woocommerce")),(0,r.createElement)(a.Link,{className:"woocommerce-form-section__header-link",href:"https://woocommerce.com/posts/fast-high-quality-product-photos/",target:"_blank",type:"external",onClick:()=>{(0,d.recordEvent)("prepare_images_help")}},(0,n.__)("How should I prepare images?","woocommerce")))},(0,r.createElement)(c.Card,{className:Q()("woocommerce-product-form__images",{"has-images":o.length>0})},(0,r.createElement)(c.CardBody,null,(0,r.createElement)(a.ImageGallery,{onDragStart:e=>{const{id:t,dataset:r}=e.target;if(t)_(parseInt(t,10));else{const e=null==r?void 0:r.index;var a;e&&_(null===(a=o[parseInt(e,10)])||void 0===a?void 0:a.id)}g()},onDragEnd:()=>{s&&p&&((0,d.recordEvent)("product_images_remove_image_button_click"),t("images",o.filter((e=>e.id!==p))),u(!1),_(null)),g()},onOrderChange:e=>{const r=e.map((e=>o.find((t=>{var o;return t.id===parseInt(null==e||null===(o=e.props)||void 0===o?void 0:o.id,10)}))));(0,d.recordEvent)("product_images_change_image_order_via_image_gallery"),t("images",r)},onReplace:e=>{let{replaceIndex:r,media:a}=e;void 0===o.find((e=>a.id===e.id))&&(o[r]=a,(0,d.recordEvent)("product_images_replace_image_button_click"),t("images",o))},onSelectAsCover:()=>(0,d.recordEvent)("product_images_select_image_as_cover_button_click")},o.map((e=>(0,r.createElement)(a.ImageGalleryItem,{key:e.id||e.url,alt:e.alt,src:e.url||e.src,id:`${e.id}`})))),(0,r.createElement)("div",{className:"woocommerce-product-form__image-drop-zone"},i?(0,r.createElement)(c.CardBody,null,(0,r.createElement)("div",{className:"woocommerce-product-form__remove-image-drop-zone"},(0,r.createElement)("span",null,(0,r.createElement)(l.Z,{icon:Je.Z,size:20,className:"icon-control"}),(0,n.__)("Drop here to remove","woocommerce")),(0,r.createElement)(c.DropZone,{onHTMLDrop:()=>u(!0),onDrop:()=>u(!0),label:(0,n.__)("Drop here to remove","woocommerce")}))):(0,r.createElement)(c.CardBody,null,(0,r.createElement)(a.MediaUploader,{multipleSelect:!0,onError:()=>null,onFileUploadChange:e=>{e[0].id&&((0,d.recordEvent)("product_images_add_via_file_upload_area"),t("images",[...o,...e]))},onSelect:e=>{const r=e.filter((e=>!o.find((t=>t.id===e.id))));r.length>0&&((0,d.recordEvent)("product_images_add_via_media_library"),t("images",[...o,...r]))},onUpload:e=>{e[0].id&&((0,d.recordEvent)("product_images_add_via_drag_and_drop_upload"),t("images",[...o,...e]))},label:(0,r.createElement)(r.Fragment,null,(0,r.createElement)("img",{src:Xe,alt:(0,n.__)("Completed","woocommerce"),className:"woocommerce-product-form__drag-and-drop-image"}),(0,r.createElement)("span",null,(0,n.__)("Drag images here or click to upload","woocommerce")))}))))))};function $e(e){const t={},o=Pe()(e.date_on_sale_from_gmt,Pe().ISO_8601,!0),r=Pe()(e.date_on_sale_to_gmt,Pe().ISO_8601,!0);return e.date_on_sale_from_gmt&&!o.isValid()&&(t.date_on_sale_from_gmt=(0,n.__)("Please enter a valid date.","woocommerce")),e.date_on_sale_to_gmt&&!r.isValid()&&(t.date_on_sale_to_gmt=(0,n.__)("Please enter a valid date.","woocommerce")),o.isAfter(r)&&(t.date_on_sale_from_gmt=(0,n.__)("The start date of the sale must be before the end date.","woocommerce")),r.isBefore(o)&&(t.date_on_sale_to_gmt=(0,n.__)("The end date of the sale must be after the start date.","woocommerce")),t}const Ke=e=>{var t,o,r,a;let c={};var l,i;return c=((e,t)=>{const o={...t};return e.stock_quantity&&e.stock_quantity<0&&(o.stock_quantity=(0,n.__)("Stock quantity must be a positive number.","woocommerce")),e.low_stock_amount&&e.low_stock_amount<0&&(o.low_stock_amount=(0,n.__)("Stock quantity must be a positive number.","woocommerce")),o})(e,c),null!==(t=e.name)&&void 0!==t&&t.length||(c.name=(0,n.__)("This field is required.","woocommerce")),e.name&&e.name.length>120&&(c.name=(0,n.__)("Please enter a product name shorter than 120 characters.","woocommerce")),e.regular_price&&!/^[0-9.,]+$/.test(e.regular_price)&&(c.regular_price=(0,n.__)("Please enter a price with one monetary decimal point without thousand separators and currency symbols.","woocommerce")),e.sale_price&&!/^[0-9.,]+$/.test(e.sale_price)&&(c.sale_price=(0,n.__)("Please enter a price with one monetary decimal point without thousand separators and currency symbols.","woocommerce")),e.sale_price&&(!e.regular_price||parseFloat(e.sale_price)>=parseFloat(null==e?void 0:e.regular_price))&&(c.sale_price=(0,n.__)("Sale price cannot be equal to or higher than list price.","woocommerce")),c={...c,...$e(e)},null!==(o=e.dimensions)&&void 0!==o&&o.width&&+e.dimensions.width<=0&&(c.dimensions={width:(0,n.__)("Width must be higher than zero.","woocommerce")}),null!==(r=e.dimensions)&&void 0!==r&&r.length&&+e.dimensions.length<=0&&(c.dimensions={...null!==(l=c.dimensions)&&void 0!==l?l:{},length:(0,n.__)("Length must be higher than zero.","woocommerce")}),null!==(a=e.dimensions)&&void 0!==a&&a.height&&+e.dimensions.height<=0&&(c.dimensions={...null!==(i=c.dimensions)&&void 0!==i?i:{},height:(0,n.__)("Height must be higher than zero.","woocommerce")}),e.weight&&+e.weight<=0&&(c.weight=(0,n.__)("Weight must be higher than zero.","woocommerce")),c};var et=o(38863);function tt(e){return-99===e.id}const ot=e=>{let{value:t=null,onChange:o,placeholder:l,label:i,disabled:m,ignoredAttributeIds:s=[]}=e;const{attributes:u,isLoading:_}=(0,p.useSelect)((e=>{const{getProductAttributes:t,hasFinishedResolution:o}=e(w.EXPERIMENTAL_PRODUCT_ATTRIBUTES_STORE_NAME);return{isLoading:!o("getProductAttributes"),attributes:t()}}));return(0,r.createElement)(a.__experimentalSelectControl,{className:"woocommerce-attribute-input-field",items:u||[],label:i||"",disabled:m,getFilteredItems:(e,t)=>{const o=e.filter((e=>(e=>!s.length||!s.includes(e.id))(e)&&(e.name||"").toLowerCase().startsWith(t.toLowerCase())));return t.length>0&&!e.find((e=>e.name.toLowerCase()===t.toLowerCase()))?[...o,{id:-99,name:t}]:o},placeholder:l,getItemLabel:e=>(null==e?void 0:e.name)||"",getItemValue:e=>(null==e?void 0:e.id)||"",selected:t,onSelect:e=>{tt(e)&&(0,d.recordEvent)("product_attribute_add_custom_attribute",{new_product_page:!0}),o(tt(e)?e.name:{id:e.id,name:e.name,options:[]})},onRemove:()=>o(),__experimentalOpenMenuOnFocus:!0},(e=>{let{items:t,highlightedIndex:o,getItemProps:l,getMenuProps:i,isOpen:m}=e;return(0,r.createElement)(a.__experimentalSelectControlMenu,{getMenuProps:i,isOpen:m},_?(0,r.createElement)(c.Spinner,null):t.map(((e,t)=>(0,r.createElement)(a.__experimentalSelectControlMenuItem,{key:e.id,index:t,isActive:o===t,item:e,getItemProps:l},tt(e)?(0,r.createElement)("div",{className:"woocommerce-attribute-input-field__add-new"},(0,r.createElement)(c.Icon,{icon:ge,size:20,className:"woocommerce-attribute-input-field__add-new-icon"}),(0,r.createElement)("span",null,(0,n.sprintf)((0,n.__)('Create "%s"',"woocommerce"),e.name))):e.name))))}))},rt=e=>{let{initialAttributeTermName:t,attributeId:o,onCancel:l=(()=>{}),onCreated:i=(()=>{})}=e;const{createNotice:m}=(0,p.useDispatch)("core/notices"),[s,u]=(0,r.useState)(!1),{createProductAttributeTerm:_,invalidateResolutionForStoreSelector:g}=(0,p.useDispatch)(w.EXPERIMENTAL_PRODUCT_ATTRIBUTE_TERMS_STORE_NAME);return(0,r.createElement)(c.Modal,{title:(0,n.__)("Create attribute","woocommerce"),onRequestClose:e=>{e.stopPropagation(),l()},className:"woocommerce-create-attribute-term-modal"},(0,r.createElement)(a.Form,{initialValues:{name:t,slug:(0,ee.cleanForSlug)(t)},validate:function(e){var t;const o={};return null!==(t=e.name)&&void 0!==t&&t.length||(o.name=(0,n.__)("The attribute term name is required.","woocommerce")),o},errors:{},onSubmit:async e=>{(0,d.recordEvent)("product_attribute_term_add",{new_product_page:!0}),u(!0);try{const t=await _({...e,attribute_id:o});(0,d.recordEvent)("product_attribute_term_add_success",{new_product_page:!0}),g("getProductAttributes"),u(!1),i(t)}catch(e){(0,d.recordEvent)("product_attribute_term_add_failed",{new_product_page:!0}),m("error",(0,n.__)("Failed to create attribute term.","woocommerce")),u(!1),l()}}},(e=>{let{getInputProps:t,handleSubmit:o,isValidForm:a,setValue:i,values:m}=e;const d=t("name");return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(c.TextControl,(0,U.Z)({label:(0,n.__)("Name","woocommerce")},d,{onBlur:()=>{d.onBlur(),i("slug",(0,ee.cleanForSlug)(m.name))}})),(0,r.createElement)(c.TextControl,(0,U.Z)({label:(0,n.__)("Slug","woocommerce")},t("slug"),{help:(0,n.__)("The â€œslugâ€ is the URL-friendly version of the name. It is usually all lowercase and contains only letters, numbers, and hyphens.","woocommerce")})),(0,r.createElement)(c.TextareaControl,(0,U.Z)({label:(0,n.__)("Description","woocommerce")},t("description"))),(0,r.createElement)("div",{className:"woocommerce-create-attribute-term-modal__buttons"},(0,r.createElement)(c.Button,{isSecondary:!0,label:(0,n.__)("Cancel","woocommerce"),onClick:()=>l()},(0,n.__)("Cancel","woocommerce")),(0,r.createElement)(c.Button,{isPrimary:!0,isBusy:s,label:(0,n.__)("Add attribute","woocommerce"),disabled:!a||s,onClick:o},(0,n.__)("Add","woocommerce"))))})))};let at=0;const nt=e=>{let{value:t=[],onChange:o,placeholder:l,disabled:i,attributeId:m,label:s=""}=e;const d=(0,r.useRef)("woocommerce-attribute-term-field-"+ ++at),[u,_]=(0,r.useState)([]),[g,h]=(0,r.useState)(!1),[E,N]=(0,r.useState)(),I=(0,r.useCallback)((e=>(h(!0),(0,p.resolveSelect)(w.EXPERIMENTAL_PRODUCT_ATTRIBUTE_TERMS_STORE_NAME).getProductAttributeTerms({search:e||"",attribute_id:m}).then((e=>(_(e),h(!1),e)),(e=>(h(!1),e))))),[m]),b=(0,pe.useDebounce)(I,250);(0,r.useEffect)((()=>{i||void 0===m||u.length||I()}),[i,m]);const C=e=>{o(t.filter((t=>t.slug!==e.slug)))},v=e=>{-99!==e.id?t.find((t=>t.slug===e.slug))?C(e):o([...t,e]):N(e.name)},f=()=>{const e=document.querySelector("."+d.current+" .woocommerce-experimental-select-control__input");e&&setTimeout((()=>{e.focus()}),0)},S=(t||[]).map((e=>e.slug));return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(a.__experimentalSelectControl,{items:u,multiple:!0,disabled:i||!m,label:s,getFilteredItems:(e,t)=>t.length>0&&!e.find((e=>e.name.toLowerCase()===t.toLowerCase()))?[...e,{id:-99,name:t}]:e,onInputChange:b,placeholder:l||"",getItemLabel:e=>(null==e?void 0:e.name)||"",getItemValue:e=>(null==e?void 0:e.slug)||"",stateReducer:(e,t)=>{const{changes:o,type:r}=t;switch(r){case a.selectControlStateChangeTypes.ControlledPropUpdatedSelectedItem:return{...o,inputValue:e.inputValue};case a.selectControlStateChangeTypes.ItemClick:return o.selectedItem&&-99===o.selectedItem.id?o:{...o,isOpen:!0,inputValue:e.inputValue,highlightedIndex:e.highlightedIndex};default:return o}},selected:t,onSelect:v,onRemove:C,className:"woocommerce-attribute-term-field "+d.current,__experimentalOpenMenuOnFocus:!0},(e=>{let{items:t,highlightedIndex:o,getItemProps:l,getMenuProps:i,isOpen:m}=e;return(0,r.createElement)(a.__experimentalSelectControlMenu,{isOpen:m,getMenuProps:i},[g?(0,r.createElement)("div",{key:"loading-spinner",className:"woocommerce-attribute-term-field__loading-spinner"},(0,r.createElement)(c.Spinner,null)):null,...t.map(((e,t)=>{const i=S.includes(e.slug);return(0,r.createElement)(a.__experimentalSelectControlMenuItem,{key:`${e.slug}`,index:t,isActive:o===t,item:e,getItemProps:l},-99!==e.id?(0,r.createElement)(c.CheckboxControl,{onChange:()=>null,checked:i,label:(0,r.createElement)("span",{style:{fontWeight:i?"bold":"normal"}},e.name)}):(0,r.createElement)("div",{className:"woocommerce-attribute-term-field__add-new"},(0,r.createElement)(c.Icon,{icon:ge,size:20,className:"woocommerce-attribute-term-field__add-new-icon"}),(0,r.createElement)("span",null,(0,n.sprintf)((0,n.__)('Create "%s"',"woocommerce"),e.name))))}))].filter((e=>null!==e)))})),E&&void 0!==m&&(0,r.createElement)(rt,{initialAttributeTermName:E,onCancel:()=>{N(void 0),f()},attributeId:m,onCreated:e=>{v(e),N(void 0),f()}}))};function ct(e){return null!==e&&"object"==typeof e&&!!e.label}const lt=e=>{let{value:t=[],onChange:o,placeholder:l,disabled:i,label:m}=e;const[s,d]=(0,r.useState)(t),u=e=>{o(t.filter((t=>t!==e)))};return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(a.__experimentalSelectControl,{items:s,multiple:!0,disabled:i,label:m||"",placeholder:l||"",getItemLabel:e=>ct(e)?e.label:e||"",getItemValue:e=>ct(e)?e.id:e||"",getFilteredItems:(e,t)=>{const o=e.filter((e=>!t.length||!ct(e)&&e.toLowerCase().includes(t.toLowerCase())));return t.length>0&&!o.find((e=>!ct(e)&&e.toLowerCase()===t.toLowerCase()))?[...o,{id:"is-new",label:t}]:o},selected:t,onSelect:e=>{if(ct(e))return d([...s,e.label]),void o([...t,e.label]);t.includes(e)?u(e):o([...t,e])},onRemove:u,className:"woocommerce-attribute-term-field"},(e=>{let{items:o,highlightedIndex:l,getItemProps:i,getMenuProps:m,isOpen:s}=e;return(0,r.createElement)(a.__experimentalSelectControlMenu,{isOpen:s,getMenuProps:m},o.map(((e,o)=>(0,r.createElement)(a.__experimentalSelectControlMenuItem,{key:`${ct(e)?e.id:e}`,index:o,isActive:l===o,item:e,getItemProps:i},ct(e)?(0,r.createElement)("div",{className:"woocommerce-attribute-term-field__add-new"},(0,r.createElement)(c.Icon,{icon:ge,size:20,className:"woocommerce-attribute-term-field__add-new-icon"}),(0,r.createElement)("span",null,(0,n.sprintf)((0,n.__)('Create "%s"',"woocommerce"),e.label))):(0,r.createElement)(c.CheckboxControl,{onChange:()=>null,checked:t.includes(e),label:(0,r.createElement)("span",{style:{fontWeight:t.includes(e)?"bold":"normal"}},e)})))))})))},it=e=>{let{onCancel:t,onAdd:o,selectedAttributeIds:l=[]}=e;const[i,m]=(0,r.useState)(!1),s=e=>{e.attributes.some((e=>null!==e&&(null==e?void 0:e.terms)&&(null==e?void 0:e.terms.length)>0))?m(!0):t()},u=(0,n.__)("Attribute","woocommerce"),p=(0,n.__)("Values","woocommerce");return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(a.Form,{initialValues:{attributes:[null]}},(e=>{let{values:t,setValue:a}=e;return(0,r.createElement)(c.Modal,{title:(0,n.__)("Add attributes","woocommerce"),onRequestClose:e=>{e.isPropagationStopped()||s(t)},className:"woocommerce-add-attribute-modal"},(0,r.createElement)(c.Notice,{isDismissible:!1},(0,r.createElement)("p",null,(0,n.__)("By default, attributes are filterable and visible on the product page. You can change these settings for each attribute separately later.","woocommerce"))),(0,r.createElement)("div",{className:"woocommerce-add-attribute-modal__body"},(0,r.createElement)("table",{className:"woocommerce-add-attribute-modal__table"},(0,r.createElement)("thead",null,(0,r.createElement)("tr",{className:"woocommerce-add-attribute-modal__table-header"},(0,r.createElement)("th",null,u),(0,r.createElement)("th",null,p))),(0,r.createElement)("tbody",null,t.attributes.map(((e,o)=>(0,r.createElement)("tr",{key:o,className:`woocommerce-add-attribute-modal__table-row woocommerce-add-attribute-modal__table-row-${o}`},(0,r.createElement)("td",{className:"woocommerce-add-attribute-modal__table-attribute-column"},(0,r.createElement)(ot,{placeholder:(0,n.__)("Search or create attribute","woocommerce"),value:e,label:u,onChange:e=>{a("attributes["+o+"]",e&&function(e){return"string"==typeof e?{id:0,name:e,options:[]}:e}(e)),e&&(e=>{setTimeout((()=>{const t=document.querySelector(".woocommerce-add-attribute-modal__table-row-"+e+" .woocommerce-add-attribute-modal__table-attribute-value-column .woocommerce-experimental-select-control__input");t&&t.focus()}),0)})(o)},ignoredAttributeIds:[...l,...t.attributes.map((e=>null==e?void 0:e.id)).filter((e=>void 0!==e))]})),(0,r.createElement)("td",{className:"woocommerce-add-attribute-modal__table-attribute-value-column"},null===e||0!==e.id?(0,r.createElement)(nt,{placeholder:(0,n.__)("Search or create value","woocommerce"),disabled:!e||!e.id,attributeId:e?e.id:void 0,value:null===e?[]:e.terms,label:p,onChange:e=>a("attributes["+o+"].terms",e)}):(0,r.createElement)(lt,{placeholder:(0,n.__)("Search or create value","woocommerce"),disabled:!e.name,value:e.options,label:p,onChange:e=>a("attributes["+o+"].options",e)})),(0,r.createElement)("td",{className:"woocommerce-add-attribute-modal__table-attribute-trash-column"},(0,r.createElement)(c.Button,{icon:Je.Z,disabled:1===t.attributes.length&&null===t.attributes[0],label:(0,n.__)("Remove attribute","woocommerce"),onClick:()=>((e,t,o)=>{(0,d.recordEvent)("product_add_attributes_modal_remove_attribute_button_click"),t.attributes.length>1?o("attributes",t.attributes.filter(((t,o)=>o!==e))):o(`attributes[${e}]`,[null])})(o,t,a)})))))))),(0,r.createElement)("div",null,(0,r.createElement)(c.Button,{className:"woocommerce-add-attribute-modal__add-attribute",variant:"tertiary",label:(0,n.__)("Add another attribute","woocommerce"),onClick:()=>{(0,d.recordEvent)("product_add_attributes_modal_add_another_attribute_button_click"),((e,t)=>{t("attributes",[...e.attributes,null])})(t,a)}},"+Â ",(0,n.__)("Add another","woocommerce"))),(0,r.createElement)("div",{className:"woocommerce-add-attribute-modal__buttons"},(0,r.createElement)(c.Button,{isSecondary:!0,label:(0,n.__)("Cancel","woocommerce"),onClick:()=>s(t)},(0,n.__)("Cancel","woocommerce")),(0,r.createElement)(c.Button,{isPrimary:!0,label:(0,n.__)("Add attributes","woocommerce"),disabled:1===t.attributes.length&&null===t.attributes[0],onClick:()=>(e=>{const t=[];e.attributes.forEach((e=>{if(null!==e&&e.name&&((e.terms||[]).length>0||(e.options||[]).length>0)){const o=0!==e.id?(e.terms||[]).map((e=>e.name)):e.options;t.push({...e,options:o})}})),o(t)})(t)},(0,n.__)("Add","woocommerce"))))})),(0,r.createElement)(a.__experimentalSelectControlMenuSlot,null),i&&(0,r.createElement)(c.__experimentalConfirmDialog,{cancelButtonText:(0,n.__)("No thanks","woocommerce"),confirmButtonText:(0,n.__)("Yes please!","woocommerce"),onCancel:()=>m(!1),onConfirm:t},(0,n.__)("You have some attributes added to the list, are you sure you want to cancel?","woocommerce")))},mt=e=>{let{onCancel:t,onEdit:o,attribute:l}=e;const[i,m]=(0,r.useState)({...l}),s=0===(null==i?void 0:i.id);return(0,r.createElement)(c.Modal,{title:(0,n.__)("Edit attribute","woocommerce"),onRequestClose:()=>t(),className:"woocommerce-edit-attribute-modal"},(0,r.createElement)("div",{className:"woocommerce-edit-attribute-modal__body"},(0,r.createElement)(c.TextControl,{label:(0,n.__)("Name","woocommerce"),disabled:!s,value:null!=i&&i.name?null==i?void 0:i.name:"",onChange:e=>m({...i,name:e})}),(0,r.createElement)("p",{className:"woocommerce-edit-attribute-modal__helper-text"},s?(0,n.__)("Your customers will see this on the product page","woocommerce"):(0,te.Z)({mixedString:(0,n.__)("You can change the attribute's name in {{link}}Attributes{{/link}}.","woocommerce"),components:{link:(0,r.createElement)(a.Link,{href:(0,P.getAdminLink)("edit.php?post_type=product&page=product_attributes"),target:"_blank",type:"wp-admin"},(0,r.createElement)(r.Fragment,null))}})),l.terms?(0,r.createElement)(nt,{label:(0,n.__)("Values","woocommerce"),placeholder:(0,n.__)("Search or create value","woocommerce"),value:null==i?void 0:i.terms,attributeId:null==i?void 0:i.id,onChange:e=>{m({...i,terms:e})}}):(0,r.createElement)(lt,{label:(0,n.__)("Values","woocommerce"),placeholder:(0,n.__)("Search or create value","woocommerce"),disabled:!(null!=l&&l.name),value:null==i?void 0:i.options,onChange:e=>{m({...i,options:e})}}),(0,r.createElement)("div",{className:"woocommerce-edit-attribute-modal__option-container"},(0,r.createElement)(c.CheckboxControl,{onChange:e=>m({...i,visible:e}),checked:null==i?void 0:i.visible,label:(0,n.__)("Visible to customers","woocommerce")}),(0,r.createElement)(a.__experimentalTooltip,{text:(0,n.__)("Show or hide this attribute on the product page","woocommerce")})),(0,r.createElement)("div",{className:"woocommerce-edit-attribute-modal__option-container"},(0,r.createElement)(c.CheckboxControl,{onChange:e=>m({...i,variation:e}),checked:null==i?void 0:i.variation,label:(0,n.__)("Used for filters","woocommerce")}),(0,r.createElement)(a.__experimentalTooltip,{text:(0,n.__)("Show or hide this attribute in the filters section on your store's category and shop pages","woocommerce")}))),(0,r.createElement)("div",{className:"woocommerce-add-attribute-modal__buttons"},(0,r.createElement)(c.Button,{isSecondary:!0,label:(0,n.__)("Cancel","woocommerce"),onClick:()=>t()},(0,n.__)("Cancel","woocommerce")),(0,r.createElement)(c.Button,{isPrimary:!0,label:(0,n.__)("Edit attribute","woocommerce"),onClick:()=>{o(i)}},(0,n.__)("Update","woocommerce"))))},st=e=>{let{value:t,onChange:o,productId:l}=e;const[i,m]=(0,r.useState)(!1),[s,u]=(0,r.useState)(!t),[_,g]=(0,r.useState)([]),[h,E]=(0,r.useState)(null),N="product_add_attributes_modal_cancel_button_click",I=(0,r.useCallback)((e=>(0,p.resolveSelect)(w.EXPERIMENTAL_PRODUCT_ATTRIBUTE_TERMS_STORE_NAME).getProductAttributeTerms({attribute_id:e,product:l}).then((e=>e),(e=>e))),[l]);(0,r.useEffect)((()=>{if(!t||s)return;const[e,o]=(0,be.QB)(t,(e=>0===e.id));Promise.all(o.map((e=>I(e.id)))).then((t=>{g([...o.map(((e,o)=>({...e,terms:t[o],options:void 0}))),...e]),u(!0)}))}),[l,t,s]);const b=e=>`${e.id}-${e.name}`,C=e=>{g(e),o(e.map((e=>({...e,options:e.terms?e.terms.map((e=>e.name)):e.options,terms:void 0}))))},v=e=>{C([..._||[],...e.filter((e=>!(t||[]).find((t=>0===e.id?e.name===t.name:t.id===e.id)))).map(((e,o)=>(e.position=(t||[]).length+o,e)))]),(0,d.recordEvent)("product_add_attributes_modal_add_button_click"),m(!1)};if(!t||0===t.length||0===_.length)return(0,r.createElement)(c.Card,null,(0,r.createElement)(c.CardBody,null,(0,r.createElement)("div",{className:"woocommerce-attribute-field"},(0,r.createElement)("div",{className:"woocommerce-attribute-field__empty-container"},(0,r.createElement)("img",{src:et,alt:"Completed",className:"woocommerce-attribute-field__empty-logo"}),(0,r.createElement)(Ne.Text,{variant:"subtitle.small",weight:"600",size:"14",lineHeight:"20px",className:"woocommerce-attribute-field__empty-subtitle"},(0,n.__)("No attributes yet","woocommerce")),(0,r.createElement)(c.Button,{variant:"secondary",className:"woocommerce-attribute-field__add-new",onClick:()=>{(0,d.recordEvent)("product_add_first_attribute_button_click"),m(!0)}},(0,n.__)("Add first attribute","woocommerce"))),i&&(0,r.createElement)(it,{onCancel:()=>{(0,d.recordEvent)(N),m(!1)},onAdd:v,selectedAttributeIds:(t||[]).map((e=>e.id))}),(0,r.createElement)(a.__experimentalSelectControlMenuSlot,null))));const S=t.sort(((e,t)=>e.position-t.position)),k=t.reduce(((e,t)=>(e[t.id]=t,e)),{});return(0,r.createElement)("div",{className:"woocommerce-attribute-field"},(0,r.createElement)(a.Sortable,{onOrderChange:e=>{o(function(e,t){return e.map(((e,o)=>{const r=e.key?parseInt(e.key,10):NaN;if(NaN!==r&&t[r])return{...t[r],position:o}})).filter((e=>void 0!==e))}(e,k))}},S.map((e=>(0,r.createElement)(a.ListItem,{key:b(e)},(0,r.createElement)("div",null,e.name),(0,r.createElement)("div",{className:"woocommerce-attribute-field__attribute-options"},e.options.slice(0,2).map(((e,t)=>(0,r.createElement)("div",{className:"woocommerce-attribute-field__attribute-option-chip",key:t},e))),e.options.length>2&&(0,r.createElement)("div",{className:"woocommerce-attribute-field__attribute-option-chip"},(0,n.sprintf)((0,n.__)("+ %i more","woocommerce"),e.options.length-2))),(0,r.createElement)("div",{className:"woocommerce-attribute-field__attribute-actions"},(0,r.createElement)(c.Button,{variant:"tertiary",onClick:()=>E(b(e))},(0,n.__)("edit","woocommerce")),(0,r.createElement)(c.Button,{icon:f.Z,label:(0,n.__)("Remove attribute","woocommerce"),onClick:()=>(e=>{window.confirm((0,n.__)("Remove this attribute?","woocommerce"))?((0,d.recordEvent)("product_remove_attribute_confirmation_confirm_click"),C(_.filter((t=>b(t)!==b(e))))):(0,d.recordEvent)("product_remove_attribute_confirmation_cancel_click")})(e)})))))),(0,r.createElement)(a.ListItem,null,(0,r.createElement)(c.Button,{variant:"secondary",className:"woocommerce-attribute-field__add-attribute",onClick:()=>{(0,d.recordEvent)("product_add_attribute_button"),m(!0)}},(0,n.__)("Add attribute","woocommerce"))),i&&(0,r.createElement)(it,{onCancel:()=>{(0,d.recordEvent)(N),m(!1)},onAdd:v,selectedAttributeIds:t.map((e=>e.id))}),(0,r.createElement)(a.__experimentalSelectControlMenuSlot,null),h&&(0,r.createElement)(mt,{onCancel:()=>E(null),onEdit:e=>{const t=[..._],o=t.findIndex((t=>t.id===e.id));t.splice(o,1,e),C(t),E(null)},attribute:_.find((e=>b(e)===h))}))},dt=()=>{const{getInputProps:e,values:{id:t}}=(0,a.useFormContext)();return(0,r.createElement)(fe,{title:(0,n.__)("Attributes","woocommerce"),className:"woocommerce-product-attributes-section",description:(0,r.createElement)(r.Fragment,null,(0,r.createElement)("span",null,(0,n.__)("Add descriptive pieces of information that customers can use to filter and search for this product.","woocommerce")),(0,r.createElement)(a.Link,{className:"woocommerce-form-section__header-link",href:"https://woocommerce.com/document/managing-product-taxonomies/#product-attributes",target:"_blank",type:"external",onClick:()=>{(0,d.recordEvent)("learn_more_about_attributes_help")}},(0,n.__)("Learn more about attributes","woocommerce")))},(0,r.createElement)(st,e("attributes",{productId:t})))},ut=()=>(0,r.createElement)(r.Fragment,null,(0,r.createElement)(D,null));var pt=o(73085);const _t=e=>{let{product:t,formRef:o}=e;return(0,r.createElement)(a.Form,{initialValues:t||{reviews_allowed:!0,name:"",sku:"",stock_quantity:0,stock_status:"instock"},ref:o,errors:{},validate:Ke},(0,r.createElement)($,null),(0,r.createElement)(K.a,null,(0,r.createElement)(pt.w,{name:"general",title:"General"},(0,r.createElement)(Se,null),(0,r.createElement)(qe,null),(0,r.createElement)(dt,null)),(0,r.createElement)(pt.w,{name:"pricing",title:"Pricing"},(0,r.createElement)(je,null)),(0,r.createElement)(pt.w,{name:"inventory",title:"Inventory"},(0,r.createElement)(xe,null)),(0,r.createElement)(pt.w,{name:"shipping",title:"Shipping"},(0,r.createElement)(We,{product:t})),(0,r.createElement)(pt.w,{name:"options",title:"Options"},(0,r.createElement)(Ge,null))),(0,r.createElement)(ut,null))}},38863:function(e){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUxIiBoZWlnaHQ9IjcyIiB2aWV3Qm94PSIwIDAgMTUxIDcyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cmVjdCB4PSI0NS44MjkxIiB5PSIyNS4yMzYzIiB3aWR0aD0iNzguNDk0NSIgaGVpZ2h0PSI0NS4yNjM3IiByeD0iMy43MzgxIiBmaWxsPSIjRjZGN0Y3IiBzdHJva2U9IiNEREREREQiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlLWRhc2hhcnJheT0iNCAzIi8+CjxyZWN0IHg9IjIuMzEyNSIgeT0iMS41IiB3aWR0aD0iNzguNDk0NSIgaGVpZ2h0PSI2OSIgcng9IjMuNzM4MSIgZmlsbD0id2hpdGUiIHN0cm9rZT0iI0RERERERCIgc3Ryb2tlLXdpZHRoPSIzIi8+CjxsaW5lIHgxPSIxMS4zNTE2IiB5MT0iOS45NDkyMiIgeDI9IjMzLjY3MDIiIHkyPSI5Ljk0OTIyIiBzdHJva2U9IiNEREREREQiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+CjxsaW5lIHgxPSIxMS4wMTU2IiB5MT0iNTUuNDY2OCIgeDI9IjMzLjMzNDMiIHkyPSI1NS40NjY4IiBzdHJva2U9IiNEREREREQiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+CjxsaW5lIHgxPSIxMS4wMTU2IiB5MT0iNjEuMDA1NCIgeDI9IjI2LjIxMzQiIHkyPSI2MS4wMDU0IiBzdHJva2U9IiNEREREREQiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+CjxyZWN0IHg9IjExLjAxNTYiIHk9IjQxLjA2MDUiIHdpZHRoPSIyNy4wNjU5IiBoZWlnaHQ9IjguMDc2OTIiIHJ4PSIxLjUiIHN0cm9rZT0iI0RERERERCIgc3Ryb2tlLXdpZHRoPSIzIi8+CjxsaW5lIHgxPSI0NS4wMzYxIiB5MT0iNTUuNDY3MyIgeDI9IjY3LjM1NDgiIHkyPSI1NS40NjczIiBzdHJva2U9IiNEREREREQiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+CjxsaW5lIHgxPSI0NS4wMzYxIiB5MT0iNjEuMDA1NCIgeDI9IjYwLjIzMzkiIHkyPSI2MS4wMDU0IiBzdHJva2U9IiNEREREREQiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+CjxyZWN0IHg9IjQ1LjAzNjEiIHk9IjQxLjA2MDUiIHdpZHRoPSIyNy4wNjU5IiBoZWlnaHQ9IjguMDc2OTIiIHJ4PSIxLjUiIHN0cm9rZT0iI0RERERERCIgc3Ryb2tlLXdpZHRoPSIzIi8+CjxyZWN0IHg9IjExLjAxNTYiIHk9IjE4LjExNTIiIHdpZHRoPSI2MS4wODc5IiBoZWlnaHQ9IjE0LjQwNjYiIHJ4PSIxLjUiIHN0cm9rZT0iI0RERERERCIgc3Ryb2tlLXdpZHRoPSIzIi8+CjxwYXRoIGQ9Ik01OC41NzAzIDIzLjczNjNMNjEuNDIzNiAyNi41ODk3QzYxLjgxNDIgMjYuOTgwMiA2Mi40NDczIDI2Ljk4MDIgNjIuODM3OSAyNi41ODk3TDY1LjY5MTIgMjMuNzM2MyIgc3Ryb2tlPSIjREREREREIiBzdHJva2Utd2lkdGg9IjMiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgo8bGluZSB4MT0iMTcuNSIgeTE9IjI1IiB4Mj0iMzkuODE4NyIgeTI9IjI1IiBzdHJva2U9IiNEREREREQiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+CjxwYXRoIGQ9Ik0xNDkuMTg4IDQyLjYzMDhMMTM0Ljk3NyAzMC4xOTY4IiBzdHJva2U9IiNEREREREQiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxjaXJjbGUgcj0iMTguMDM5MiIgdHJhbnNmb3JtPSJtYXRyaXgoLTEgMCAwIDEgMTIyLjU0MSAxOS41MzkyKSIgZmlsbD0id2hpdGUiIHN0cm9rZT0iI0RERERERCIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMjEuMjk3IDE1LjgzNEgxMzEuNjY3TTEyMS4yOTcgMjQuMDAwN0gxMzEuNjY3IiBzdHJva2U9IiNEREREREQiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxlbGxpcHNlIGN4PSIxMTQuMzMzIiBjeT0iMjMuOTk5MyIgcng9IjIuMzMzMzMiIHJ5PSIyLjMzMzMzIiBmaWxsPSIjREREREREIi8+CjxlbGxpcHNlIGN4PSIxMTQuMzMzIiBjeT0iMTUuODMzMyIgcng9IjIuMzMzMzMiIHJ5PSIyLjMzMzMzIiBmaWxsPSIjREREREREIi8+Cjwvc3ZnPgo="},34537:function(e){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzIiIGhlaWdodD0iNzQiIHZpZXdCb3g9IjAgMCA3MiA3NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCTxyZWN0IHg9IjIwLjcxIiB5PSIxLjUiIHdpZHRoPSI0OS42NTExIiBoZWlnaHQ9IjQ5LjY1MTEiIHJ4PSIyLjUiIGZpbGw9IiNGNkY3RjciIHN0cm9rZT0iI0UwRTBFMCIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1kYXNoYXJyYXk9IjQgOSIvPgoJPHJlY3QgeD0iMS44MzM4MSIgeT0iMTguMDE4OCIgd2lkdGg9IjQ5LjY1MTEiIGhlaWdodD0iNDkuNjUxMSIgcng9IjIuNSIgdHJhbnNmb3JtPSJyb3RhdGUoLTggMS44MzM4MSAxOC4wMTg4KSIgZmlsbD0id2hpdGUiIHN0cm9rZT0iI0NDQ0NDQyIgc3Ryb2tlLXdpZHRoPSIzIi8+Cgk8cGF0aCBkPSJNNy4xMzM5MiA1NC4xMTA1TDE5LjY5MjQgNDIuNDY3MkwzMS4wNCA0Ny40NThMNDEuNjMxNiAzNC40NDQ3TDU1LjM5OTkgNDQuMDM0NCIgc3Ryb2tlPSIjQ0NDQ0NDIiBzdHJva2Utd2lkdGg9IjMiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KCTxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNDguMTQyNiA1NS43MDczTDY1LjE3NjIgNjEuNzQyNkw1OS4xODgzIDY1LjYzMDVMNDguMTQyNiA1NS43MDczWk00OC4xNDI1IDU1LjcwNzdMNTUuOTYxNyA3MS45OTk3TDU5LjE4ODIgNjUuNjMwOUw0OC4xNDI1IDU1LjcwNzdaIiBmaWxsPSIjQkJCQkJCIi8+Cgk8cGF0aCBkPSJNNjUuMTc2MiA2MS43NDI2TDY1Ljc4NzkgNjIuNjg0N0M2Ni4xNDY2IDYyLjQ1MTggNjYuMzQyIDYyLjAzNTQgNjYuMjkxNyA2MS42MTA3QzY2LjI0MTUgNjEuMTg2IDY1Ljk1NDUgNjAuODI2NiA2NS41NTE0IDYwLjY4MzhMNjUuMTc2MiA2MS43NDI2Wk00OC4xNDI2IDU1LjcwNzNMNDguNTE3OCA1NC42NDg1QzQ4LjAxMjQgNTQuNDY5NCA0Ny40NTA5IDU0LjY3MjUgNDcuMTc3IDU1LjEzMzRDNDYuOTAzIDU1LjU5NDQgNDYuOTkzIDU2LjE4NDYgNDcuMzkxOSA1Ni41NDI5TDQ4LjE0MjYgNTUuNzA3M1pNNTkuMTg4MyA2NS42MzA1TDU4LjQzNzYgNjYuNDY2MkM1OC44MTU0IDY2LjgwNTYgNTkuMzc0IDY2Ljg0OTMgNTkuOCA2Ni41NzI3TDU5LjE4ODMgNjUuNjMwNVpNNTUuOTYxNyA3MS45OTk3TDU0Ljk0OSA3Mi40ODU3QzU1LjEzNCA3Mi44NzEzIDU1LjUyMiA3My4xMTgzIDU1Ljk0OTYgNzMuMTIyOUM1Ni4zNzczIDczLjEyNzUgNTYuNzcwNCA3Mi44ODg4IDU2Ljk2MzcgNzIuNTA3M0w1NS45NjE3IDcxLjk5OTdaTTQ4LjE0MjUgNTUuNzA3N0w0OC44OTMyIDU0Ljg3MjFDNDguNDk0MyA1NC41MTM3IDQ3Ljg5NzggNTQuNDg3MyA0Ny40Njg4IDU0LjgwODhDNDcuMDM5NyA1NS4xMzA0IDQ2Ljg5NzggNTUuNzEwMyA0Ny4xMjk4IDU2LjE5MzdMNDguMTQyNSA1NS43MDc3Wk01OS4xODgyIDY1LjYzMDlMNjAuMTkwMiA2Ni4xMzg2QzYwLjQxOTcgNjUuNjg1NSA2MC4zMTY3IDY1LjEzNDcgNTkuOTM4OSA2NC43OTUzTDU5LjE4ODIgNjUuNjMwOVpNNjUuNTUxNCA2MC42ODM4TDQ4LjUxNzggNTQuNjQ4NUw0Ny43Njc0IDU2Ljc2NjFMNjQuODAxMSA2Mi44MDE0TDY1LjU1MTQgNjAuNjgzOFpNNTkuOCA2Ni41NzI3TDY1Ljc4NzkgNjIuNjg0N0w2NC41NjQ1IDYwLjgwMDVMNTguNTc2NiA2NC42ODg0TDU5LjggNjYuNTcyN1pNNDcuMzkxOSA1Ni41NDI5TDU4LjQzNzYgNjYuNDY2Mkw1OS45MzkgNjQuNzk0OUw0OC44OTMzIDU0Ljg3MTdMNDcuMzkxOSA1Ni41NDI5Wk01Ni45NzQ0IDcxLjUxMzZMNDkuMTU1MiA1NS4yMjE2TDQ3LjEyOTggNTYuMTkzN0w1NC45NDkgNzIuNDg1N0w1Ni45NzQ0IDcxLjUxMzZaTTU4LjE4NjEgNjUuMTIzM0w1NC45NTk2IDcxLjQ5Mkw1Ni45NjM3IDcyLjUwNzNMNjAuMTkwMiA2Ni4xMzg2TDU4LjE4NjEgNjUuMTIzM1pNNDcuMzkxOCA1Ni41NDMzTDU4LjQzNzUgNjYuNDY2NUw1OS45Mzg5IDY0Ljc5NTNMNDguODkzMiA1NC44NzIxTDQ3LjM5MTggNTYuNTQzM1oiIGZpbGw9IiNCQkJCQkIiLz4KPC9zdmc+Cg=="}}]);