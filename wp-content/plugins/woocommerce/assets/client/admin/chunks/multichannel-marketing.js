"use strict";(self.webpackChunk_wcAdmin_webpackJsonp=self.webpackChunk_wcAdmin_webpackJsonp||[]).push([[4882],{53252:function(e,t,n){n.r(t),n.d(t,{default:function(){return de}});var r={};n.r(r),n.d(r,{receiveRecommendedChannelsError:function(){return y},receiveRecommendedChannelsSuccess:function(){return f},receiveRegisteredChannelsError:function(){return v},receiveRegisteredChannelsSuccess:function(){return _}});var a={};n.r(a),n.d(a,{getRecommendedChannels:function(){return k},getRegisteredChannels:function(){return w}});var l={};n.r(l),n.d(l,{getRecommendedChannels:function(){return N},getRegisteredChannels:function(){return b}});var o=n(69307),c=n(67221),i=(n(77975),n(9818)),s=n(23418);const m="wc/marketing-multichannel",d="/wc-admin/marketing",u="RECEIVE_REGISTERED_CHANNELS_SUCCESS",g="RECEIVE_REGISTERED_CHANNELS_ERROR",p="RECEIVE_RECOMMENDED_CHANNELS_SUCCESS",h="RECEIVE_RECOMMENDED_CHANNELS_ERROR",E={registeredChannels:{data:void 0,error:void 0},recommendedChannels:{data:void 0,error:void 0}},_=e=>({type:u,payload:e}),v=e=>({type:g,payload:e,error:!0}),f=e=>({type:p,payload:e}),y=e=>({type:h,payload:e,error:!0}),w=e=>e.registeredChannels,k=e=>e.recommendedChannels,C=e=>(e=>!!e&&"object"==typeof e)(e)&&"code"in e&&"data"in e&&"message"in e;function*b(){try{const e=yield(0,s.apiFetch)({path:`${d}/channels`});yield _(e)}catch(e){throw C(e)&&(yield v(e)),e}}function*N(){try{const e=yield(0,s.apiFetch)({path:`${d}/recommendations?category=channels`});yield f(e)}catch(e){throw C(e)&&(yield y(e)),e}}const P=(0,i.createReduxStore)(m,{reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return{...e,registeredChannels:{data:t.payload}};case g:return{...e,registeredChannels:{error:t.payload}};case p:return{...e,recommendedChannels:{data:t.payload}};case h:return{...e,recommendedChannels:{error:t.payload}};default:return e}},actions:r,selectors:a,resolvers:l,controls:s.controls});(0,i.register)(P);var S=n(87818),O=n(51455);const R=()=>{const{installedPlugins:e,activatingPlugins:t}=(0,i.useSelect)((e=>{const{getInstalledPlugins:t,getActivatingPlugins:n}=e(O.L);return{installedPlugins:t(),activatingPlugins:n()}}),[]),{activateInstalledPlugin:n,loadInstalledPluginsAfterActivation:r}=(0,i.useDispatch)(O.L);return{installedPlugins:e,activatingPlugins:t,activateInstalledPlugin:n,loadInstalledPluginsAfterActivation:r}};var A=n(65736);const x={"sync-in-progress":"syncing","sync-failed":"failed",synced:"synced"},L=e=>{const t=e.errors_count>=1?"error":"none",n=e.errors_count>=1?(0,A.sprintf)((0,A.__)("%d issues to resolve","woocommerce"),e.errors_count):(0,A.__)("No issues to resolve","woocommerce");return{slug:e.slug,title:e.name,description:e.description,icon:e.icon,isSetupCompleted:e.is_setup_completed,setupUrl:e.settings_url,manageUrl:e.settings_url,syncStatus:x[e.product_listings_status],issueType:t,issueText:n}};var I=n(92819),B=n(79205),j=n(55609),z=n(37942),M=n(10314),D=n(68998),F=n(24710),U=n(22817),T=n(83849),V=n.n(T);const Z="woocommerce-marketing-sync-status",H=e=>{let{status:t}=e;return"failed"===t?(0,o.createElement)("div",{className:V()(Z,`${Z}__failed`)},(0,o.createElement)(U.Z,{size:18}),(0,A.__)("Sync failed","woocommerce")):"syncing"===t?(0,o.createElement)("div",{className:V()(Z,`${Z}__syncing`)},(0,o.createElement)(F.Z,{size:18}),(0,A.__)("Syncing","woocommerce")):(0,o.createElement)("div",{className:V()(Z,`${Z}__synced`)},(0,o.createElement)(D.Z,{size:18}),(0,A.__)("Synced","woocommerce"))},$="woocommerce-marketing-issue-status",G=e=>{let{registeredChannel:t}=e;return"error"===t.issueType?(0,o.createElement)("div",{className:V()($,`${$}__error`)},(0,o.createElement)(U.Z,{size:18}),t.issueText):"warning"===t.issueType?(0,o.createElement)("div",{className:V()($,`${$}__warning`)},(0,o.createElement)(U.Z,{size:18}),t.issueText):(0,o.createElement)("div",{className:$},t.issueText)},W=e=>{let{registeredChannel:t}=e;const n=t.isSetupCompleted?(0,o.createElement)("div",{className:"woocommerce-marketing-registered-channel-description"},t.syncStatus&&(0,o.createElement)(o.Fragment,null,(0,o.createElement)(H,{status:t.syncStatus}),(0,o.createElement)("div",{className:"woocommerce-marketing-registered-channel-description__separator"})),(0,o.createElement)(G,{registeredChannel:t})):t.description,r=t.isSetupCompleted?(0,o.createElement)(j.Button,{variant:"secondary",href:t.manageUrl},(0,A.__)("Manage","woocommerce")):(0,o.createElement)(j.Button,{variant:"primary",href:t.setupUrl},(0,A.__)("Finish setup","woocommerce"));return(0,o.createElement)(S.o_,{className:"woocommerce-marketing-registered-channel-card-body",icon:(0,o.createElement)("img",{src:t.icon,alt:t.title}),name:t.title,description:n,button:r})},q=e=>{let{registeredChannels:t,recommendedChannels:n,onInstalledAndActivated:r}=e;const a=t.length>=1,[l,c]=(0,o.useState)(!a);return(0,o.createElement)(j.Card,{className:"woocommerce-marketing-channels-card"},(0,o.createElement)(j.CardHeader,null,(0,o.createElement)(S.wP,null,(0,A.__)("Channels","woocommerce")),!a&&(0,o.createElement)(S.mi,null,(0,A.__)("Start by adding a channel to your store","woocommerce"))),t.map(((e,n)=>(0,o.createElement)(o.Fragment,{key:e.slug},(0,o.createElement)(W,{registeredChannel:e}),n!==t.length-1&&(0,o.createElement)(j.CardDivider,null)))),n.length>=1&&(0,o.createElement)("div",null,a&&(0,o.createElement)(o.Fragment,null,(0,o.createElement)(j.CardDivider,null),(0,o.createElement)(j.CardBody,null,(0,o.createElement)(j.Button,{variant:"link",onClick:()=>c(!l)},(0,A.__)("Add channels","woocommerce"),(0,o.createElement)(j.Icon,{icon:l?z.Z:M.Z,size:24})))),l&&n.map(((e,t)=>(0,o.createElement)(o.Fragment,{key:e.plugin},(0,o.createElement)(S.NH,{plugin:e,onInstalledAndActivated:r}),t!==n.length-1&&(0,o.createElement)(j.CardDivider,null))))))};var J=n(14599);const K=()=>{const{installedPlugins:e,activatingPlugins:t,activateInstalledPlugin:n}=R();return 0===e.length?null:(0,o.createElement)(S.NP,{header:(0,A.__)("Installed extensions","woocommerce")},e.map(((r,a)=>{return(0,o.createElement)(o.Fragment,{key:r.slug},(0,o.createElement)(S.o_,{icon:(0,o.createElement)(S.wq,{product:r.slug}),name:r.name,description:r.description,button:(l=r,"installed"===l.status?(0,o.createElement)(j.Button,{variant:"secondary",isBusy:t.includes(l.slug),disabled:t.includes(l.slug),onClick:()=>{(0,J.recordEvent)("marketing_installed_activate",{name:l.name}),n(l.slug)}},(0,A.__)("Activate","woocommerce")):"activated"===l.status?(0,o.createElement)(j.Button,{variant:"primary",href:l.settingsUrl,onClick:()=>{(0,J.recordEvent)("marketing_installed_finish_setup",{name:l.name})}},(0,A.__)("Finish setup","woocommerce")):"configured"===l.status?(0,o.createElement)(j.Button,{variant:"secondary",href:l.dashboardUrl||l.settingsUrl,onClick:()=>{(0,J.recordEvent)("marketing_installed_options",{name:l.name,link:"manage"})}},(0,A.__)("Manage","woocommerce")):void 0)}),a!==e.length-1&&(0,o.createElement)(S.xx,null));var l})))};var Q=n(62907),X=n(70444),Y=(0,o.createElement)(X.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(X.Path,{d:"M3.445 16.505a.75.75 0 001.06.05l5.005-4.55 4.024 3.521 4.716-4.715V14h1.5V8.25H14v1.5h3.19l-3.724 3.723L9.49 9.995l-5.995 5.45a.75.75 0 00-.05 1.06z"}));const ee="getRecommendedPlugins",te="marketing";var ne=n(86020),re=n(85883),ae=n(37657);const le=e=>(0,I.uniqBy)((0,I.flatMapDeep)(e,(e=>e.subcategories)),(e=>e.slug)).map((e=>({name:e.slug,title:e.name}))),oe=e=>{let{isLoading:t,plugins:n,onInstallAndActivate:r}=e;const[a,l]=(0,o.useState)(null),{installAndActivatePlugins:s}=(0,i.useDispatch)(c.PLUGINS_STORE_NAME),{loadInstalledPluginsAfterActivation:m}=R();return(0,o.createElement)(j.TabPanel,{tabs:le(n)},(e=>{const c=n.filter((t=>t.subcategories.some((t=>t.slug===e.name)))),i=e=>{const n=!!a||t;return e.direct_install?(0,o.createElement)(j.Button,{variant:"secondary",isBusy:a===e.product,disabled:n,onClick:()=>{(async e=>{l(e.product);try{(0,J.recordEvent)("marketing_recommended_extension",{name:e.title});const t=await s([e.product]);r(e.product),m(e.product),(0,ae.a)(t)}catch(e){(0,ae.a)(e)}l(null)})(e)}},(0,A.__)("Install plugin","woocommerce")):(0,o.createElement)(j.Button,{variant:"secondary",href:(0,re.C)(e.url),disabled:n,onClick:()=>{(0,J.recordEvent)("marketing_recommended_extension",{name:e.title})}},(0,A.__)("View details","woocommerce"))};return(0,o.createElement)(o.Fragment,null,c.map((e=>(0,o.createElement)(o.Fragment,{key:e.product},(0,o.createElement)(S.xx,null),(0,o.createElement)(S.o_,{icon:(0,o.createElement)("img",{src:e.icon,alt:e.title}),name:e.title,pills:e.tags.map((e=>(0,o.createElement)(ne.Pill,{key:e.slug},e.name))),description:e.description,button:i(e)})))))}))},ce=()=>{const{isInitializing:e,isLoading:t,plugins:n,installAndActivate:r}=(()=>{const{invalidateResolution:e,installAndActivateRecommendedPlugin:t}=(0,i.useDispatch)(O.L),n=n=>{t(n,te),e(ee,[te])};return(0,i.useSelect)((e=>{const{getRecommendedPlugins:t,hasFinishedResolution:r}=e(O.L),a=t(te),l=!r(ee,[te]);return{isInitializing:!a.length&&l,isLoading:l,plugins:a,installAndActivate:n}}),[])})();return(0,o.createElement)(S.NP,{header:(0,A.__)("Discover more marketing tools","woocommerce")},e?(0,o.createElement)(S.eW,null,(0,o.createElement)(S.Lb,null)):0===n.length?(0,o.createElement)(S.eW,{className:"woocommerce-marketing-discover-tools-card-body-empty-content"},(0,o.createElement)(Q.Z,{icon:Y,size:32}),(0,o.createElement)("div",null,(0,A.__)("Continue to reach the right audiences and promote your products in ways that matter to them with our range of marketing solutions.","woocommerce")),(0,o.createElement)(j.Button,{variant:"tertiary",href:"https://woocommerce.com/product-category/woocommerce-extensions/marketing-extensions/",onClick:()=>{(0,J.recordEvent)("marketing_explore_more_extensions")}},(0,A.__)("Explore more marketing extensions","woocommerce"))):(0,o.createElement)(oe,{plugins:n,isLoading:t,onInstallAndActivate:r}))},ie=()=>(0,o.createElement)("div",{role:"progressbar",className:"woocommerce-marketing-learn-marketing-card__post"},(0,o.createElement)("div",{className:"woocommerce-marketing-learn-marketing-card__post-img woocommerce-marketing-learn-marketing-card__post-img--placeholder"}),(0,o.createElement)("div",{className:"woocommerce-marketing-learn-marketing-card__post-title woocommerce-marketing-learn-marketing-card__post-title--placeholder"}),(0,o.createElement)("div",{className:"woocommerce-marketing-learn-marketing-card__post-description woocommerce-marketing-learn-marketing-card__post-description--placeholder"})),se=e=>{let{post:t}=e;return(0,o.createElement)("a",{className:"woocommerce-marketing-learn-marketing-card__post",href:t.link,target:"_blank",rel:"noopener noreferrer",onClick:()=>{(0,J.recordEvent)("marketing_knowledge_article",{title:t.title})}},(0,o.createElement)("div",{className:"woocommerce-marketing-learn-marketing-card__post-img"},t.image&&(0,o.createElement)("img",{src:t.image,alt:""})),(0,o.createElement)("div",{className:"woocommerce-marketing-learn-marketing-card__post-title"},t.title),(0,o.createElement)("div",{className:"woocommerce-marketing-learn-marketing-card__post-description"},(0,A.sprintf)((0,A.__)("By %s","woocommerce"),t.author_name),t.author_avatar&&(0,o.createElement)("img",{src:t.author_avatar.replace("s=96","s=32"),alt:""})))},me=()=>{const[e,t]=(0,o.useState)(1),{isLoading:n,error:r,posts:a}=(e=>(0,i.useSelect)((t=>{const{getBlogPosts:n,getBlogPostsError:r,isResolving:a}=t(O.L);return{isLoading:a("getBlogPosts",[e]),error:r(e),posts:n(e)}}),[e]))("marketing");return(0,o.createElement)(S.NP,{initialCollapsed:!0,className:"woocommerce-marketing-learn-marketing-card",header:(0,A.__)("Learn about marketing a store","woocommerce"),footer:n?(0,o.createElement)("div",{role:"progressbar",className:"woocommerce-marketing-learn-marketing-card__footer--placeholder"}):r||!a||0===a.length?null:(0,o.createElement)(ne.Pagination,{showPagePicker:!1,showPerPagePicker:!1,page:e,perPage:2,total:a.length,onPageChange:e=>{t(e)}})},(0,o.createElement)("div",{className:"woocommerce-marketing-learn-marketing-card__body"},n?[...Array(2).keys()].map((e=>(0,o.createElement)(ie,{key:e}))):r?(0,o.createElement)(ne.EmptyContent,{title:(0,A.__)("Oops, our posts aren't loading right now","woocommerce"),message:(0,o.createElement)(S.WL,null),illustration:"",actionLabel:""}):0===a.length?(0,o.createElement)(ne.EmptyContent,{title:(0,A.__)("No posts yet","woocommerce"),message:(0,o.createElement)(S.WL,null),illustration:"",actionLabel:""}):a.slice(2*(e-1),2*e).map(((e,t)=>(0,o.createElement)(se,{key:t,post:e})))))},de=()=>{const{loading:e,data:t,refetch:n}=(()=>{const{invalidateResolution:e}=(0,i.useDispatch)(m),t=(0,o.useCallback)((()=>{e("getRegisteredChannels")}),[e]);return(0,i.useSelect)((e=>{var n;const{hasFinishedResolution:r,getRegisteredChannels:a}=e(m),l=a();return{loading:!r("getRegisteredChannels"),data:null===(n=l.data)||void 0===n?void 0:n.map(L),error:l.error,refetch:t}}))})(),{loading:r,data:a}=(0,i.useSelect)((e=>{const{hasFinishedResolution:t,getRecommendedChannels:n}=e(m),{data:r,error:a}=n(),{getActivePlugins:l}=e(c.PLUGINS_STORE_NAME),o=l(),i=r&&(0,I.differenceWith)(r,o,((e,t)=>e.product===t));return{loading:!t("getRecommendedChannels"),data:i,error:a}})),{currentUserCan:l}=(0,c.useUser)(),s=(0,B.O3)("allowMarketplaceSuggestions",!1)&&l("install_plugins");return e&&!t||r&&!a?(0,o.createElement)(S.Lb,null):(0,o.createElement)("div",{className:"woocommerce-marketing-overview-multichannel"},t&&a&&(t.length||a.length)&&(0,o.createElement)(q,{registeredChannels:t,recommendedChannels:a,onInstalledAndActivated:n}),(0,o.createElement)(K,null),s&&(0,o.createElement)(ce,null),(0,o.createElement)(me,null))}},68998:function(e,t,n){t.Z=function(e){var t=e.size,n=void 0===t?24:t,r=e.onClick,c=(e.icon,e.className),i=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,l),s=["gridicon","gridicons-checkmark-circle",c,!1,!1,!1].filter(Boolean).join(" ");return a.default.createElement("svg",o({className:s,height:n,width:n,onClick:r},i,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M11 17.768l-4.884-4.884 1.768-1.768L11 14.232l8.658-8.658A9.98 9.98 0 0012 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10a9.94 9.94 0 00-.966-4.266L11 17.768z"})))};var r,a=(r=n(99196))&&r.__esModule?r:{default:r},l=["size","onClick","icon","className"];function o(){return o=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)}},22817:function(e,t,n){t.Z=function(e){var t=e.size,n=void 0===t?24:t,r=e.onClick,c=(e.icon,e.className),i=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,l),s=["gridicon","gridicons-notice",c,!!function(e){return 0==e%18}(n)&&"needs-offset",!1,!1].filter(Boolean).join(" ");return a.default.createElement("svg",o({className:s,height:n,width:n,onClick:r},i,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm1 15h-2v-2h2v2zm0-4h-2l-.5-6h3l-.5 6z"})))};var r,a=(r=n(99196))&&r.__esModule?r:{default:r},l=["size","onClick","icon","className"];function o(){return o=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)}},24710:function(e,t,n){t.Z=function(e){var t=e.size,n=void 0===t?24:t,r=e.onClick,c=(e.icon,e.className),i=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,l),s=["gridicon","gridicons-sync",c,!1,!1,!1].filter(Boolean).join(" ");return a.default.createElement("svg",o({className:s,height:n,width:n,onClick:r},i,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M23.5 13.5l-3.086 3.086L19 18l-4.5-4.5 1.414-1.414L18 14.172V12c0-3.308-2.692-6-6-6V4a8 8 0 018 8v2.172l2.086-2.086L23.5 13.5zM6 12V9.828l2.086 2.086L9.5 10.5 5 6 3.586 7.414.5 10.5l1.414 1.414L4 9.828V12a8 8 0 008 8v-2c-3.308 0-6-2.692-6-6z"})))};var r,a=(r=n(99196))&&r.__esModule?r:{default:r},l=["size","onClick","icon","className"];function o(){return o=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)}}}]);