"use strict";(self.webpackChunk_wcAdmin_webpackJsonp=self.webpackChunk_wcAdmin_webpackJsonp||[]).push([[4882],{99145:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var a=n(69307),r=n(67221),l=n(79205),o=n(65736),i=n(55609),c=n(14599),s=n(87818),m=n(9818),g=n(51455);const d=()=>{const{installedPlugins:e,activatingPlugins:t}=(0,m.useSelect)((e=>{const{getInstalledPlugins:t,getActivatingPlugins:n}=e(g.L);return{installedPlugins:t(),activatingPlugins:n()}}),[]),{activateInstalledPlugin:n,loadInstalledPluginsAfterActivation:a}=(0,m.useDispatch)(g.L);return{installedPlugins:e,activatingPlugins:t,activateInstalledPlugin:n,loadInstalledPluginsAfterActivation:a}},u=()=>{const{installedPlugins:e,activatingPlugins:t,activateInstalledPlugin:n}=d();return 0===e.length?null:(0,a.createElement)(s.NP,{header:(0,o.__)("Installed extensions","woocommerce")},e.map(((r,l)=>{return(0,a.createElement)(a.Fragment,{key:r.slug},(0,a.createElement)(s.o_,{icon:(0,a.createElement)(s.wq,{product:r.slug}),name:r.name,description:r.description,button:(m=r,"installed"===m.status?(0,a.createElement)(i.Button,{variant:"secondary",isBusy:t.includes(m.slug),disabled:t.includes(m.slug),onClick:()=>{(0,c.recordEvent)("marketing_installed_activate",{name:m.name}),n(m.slug)}},(0,o.__)("Activate","woocommerce")):"activated"===m.status?(0,a.createElement)(i.Button,{variant:"primary",href:m.settingsUrl,onClick:()=>{(0,c.recordEvent)("marketing_installed_finish_setup",{name:m.name})}},(0,o.__)("Finish setup","woocommerce")):"configured"===m.status?(0,a.createElement)(i.Button,{variant:"secondary",href:m.dashboardUrl||m.settingsUrl,onClick:()=>{(0,c.recordEvent)("marketing_installed_options",{name:m.name,link:"manage"})}},(0,o.__)("Manage","woocommerce")):void 0)}),l!==e.length-1&&(0,a.createElement)(s.xx,null));var m})))};var p=n(62907),_=n(70444),k=(0,a.createElement)(_.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(_.Path,{d:"M3.445 16.505a.75.75 0 001.06.05l5.005-4.55 4.024 3.521 4.716-4.715V14h1.5V8.25H14v1.5h3.19l-3.724 3.723L9.49 9.995l-5.995 5.45a.75.75 0 00-.05 1.06z"})),E=n(86020);const v="getRecommendedPlugins",w="marketing";var h=n(92819),P=n(85883),y=n(37657);const A=e=>(0,h.uniqBy)((0,h.flatMapDeep)(e,(e=>e.subcategories)),(e=>e.slug)).map((e=>({name:e.slug,title:e.name}))),b=e=>{let{isLoading:t,plugins:n,onInstallAndActivate:l}=e;const[g,u]=(0,a.useState)(null),{installAndActivatePlugins:p}=(0,m.useDispatch)(r.PLUGINS_STORE_NAME),{loadInstalledPluginsAfterActivation:_}=d();return(0,a.createElement)(i.TabPanel,{tabs:A(n)},(e=>{const r=n.filter((t=>t.subcategories.some((t=>t.slug===e.name)))),m=e=>{const n=!!g||t;return e.direct_install?(0,a.createElement)(i.Button,{variant:"secondary",isBusy:g===e.product,disabled:n,onClick:()=>{(async e=>{u(e.product);try{(0,c.recordEvent)("marketing_recommended_extension",{name:e.title});const t=await p([e.product]);l(e.product),_(e.product),(0,y.a)(t)}catch(e){(0,y.a)(e)}u(null)})(e)}},(0,o.__)("Install plugin","woocommerce")):(0,a.createElement)(i.Button,{variant:"secondary",href:(0,P.C)(e.url),disabled:n,onClick:()=>{(0,c.recordEvent)("marketing_recommended_extension",{name:e.title})}},(0,o.__)("View details","woocommerce"))};return(0,a.createElement)(a.Fragment,null,r.map((e=>(0,a.createElement)(a.Fragment,{key:e.product},(0,a.createElement)(s.xx,null),(0,a.createElement)(s.o_,{icon:(0,a.createElement)("img",{src:e.icon,alt:e.title}),name:e.title,pills:e.tags.map((e=>(0,a.createElement)(E.Pill,{key:e.slug},e.name))),description:e.description,button:m(e)})))))}))},f=()=>{const{isInitializing:e,isLoading:t,plugins:n,installAndActivate:r}=(()=>{const{invalidateResolution:e,installAndActivateRecommendedPlugin:t}=(0,m.useDispatch)(g.L),n=n=>{t(n,w),e(v,[w])};return(0,m.useSelect)((e=>{const{getRecommendedPlugins:t,hasFinishedResolution:a}=e(g.L),r=t(w),l=!a(v,[w]);return{isInitializing:!r.length&&l,isLoading:l,plugins:r,installAndActivate:n}}),[])})();return(0,a.createElement)(s.NP,{className:"woocommerce-marketing-discover-tools-card",header:(0,o.__)("Discover more marketing tools","woocommerce")},e?(0,a.createElement)(s.eW,null,(0,a.createElement)(E.Spinner,null)):0===n.length?(0,a.createElement)(s.eW,{className:"woocommerce-marketing-discover-tools-card-body-empty-content"},(0,a.createElement)(p.Z,{icon:k,size:32}),(0,a.createElement)("div",null,(0,o.__)("Continue to reach the right audiences and promote your products in ways that matter to them with our range of marketing solutions.","woocommerce")),(0,a.createElement)(i.Button,{variant:"tertiary",href:"https://woocommerce.com/product-category/woocommerce-extensions/marketing-extensions/",onClick:()=>{(0,c.recordEvent)("marketing_explore_more_extensions")}},(0,o.__)("Explore more marketing extensions","woocommerce"))):(0,a.createElement)(b,{plugins:n,isLoading:t,onInstallAndActivate:r}))},N=()=>(0,a.createElement)("div",{role:"progressbar",className:"woocommerce-marketing-learn-marketing-card__post"},(0,a.createElement)("div",{className:"woocommerce-marketing-learn-marketing-card__post-img woocommerce-marketing-learn-marketing-card__post-img--placeholder"}),(0,a.createElement)("div",{className:"woocommerce-marketing-learn-marketing-card__post-title woocommerce-marketing-learn-marketing-card__post-title--placeholder"}),(0,a.createElement)("div",{className:"woocommerce-marketing-learn-marketing-card__post-description woocommerce-marketing-learn-marketing-card__post-description--placeholder"})),L=e=>{let{post:t}=e;return(0,a.createElement)("a",{className:"woocommerce-marketing-learn-marketing-card__post",href:t.link,target:"_blank",rel:"noopener noreferrer",onClick:()=>{(0,c.recordEvent)("marketing_knowledge_article",{title:t.title})}},(0,a.createElement)("div",{className:"woocommerce-marketing-learn-marketing-card__post-img"},t.image&&(0,a.createElement)("img",{src:t.image,alt:""})),(0,a.createElement)("div",{className:"woocommerce-marketing-learn-marketing-card__post-title"},t.title),(0,a.createElement)("div",{className:"woocommerce-marketing-learn-marketing-card__post-description"},(0,o.sprintf)((0,o.__)("By %s","woocommerce"),t.author_name),t.author_avatar&&(0,a.createElement)("img",{src:t.author_avatar.replace("s=96","s=32"),alt:""})))},C=()=>{const[e,t]=(0,a.useState)(1),{isLoading:n,error:r,posts:l}=(e=>(0,m.useSelect)((t=>{const{getBlogPosts:n,getBlogPostsError:a,isResolving:r}=t(g.L);return{isLoading:r("getBlogPosts",[e]),error:a(e),posts:n(e)}}),[e]))("marketing");return(0,a.createElement)(s.NP,{initialCollapsed:!0,className:"woocommerce-marketing-learn-marketing-card",header:(0,o.__)("Learn about marketing a store","woocommerce"),footer:n?(0,a.createElement)("div",{role:"progressbar",className:"woocommerce-marketing-learn-marketing-card__footer--placeholder"}):r||!l||0===l.length?null:(0,a.createElement)(E.Pagination,{showPagePicker:!1,showPerPagePicker:!1,page:e,perPage:2,total:l.length,onPageChange:e=>{t(e)}})},(0,a.createElement)("div",{className:"woocommerce-marketing-learn-marketing-card__body"},n?[...Array(2).keys()].map((e=>(0,a.createElement)(N,{key:e}))):r?(0,a.createElement)(E.EmptyContent,{title:(0,o.__)("Oops, our posts aren't loading right now","woocommerce"),message:(0,a.createElement)(s.WL,null),illustration:"",actionLabel:""}):0===l.length?(0,a.createElement)(E.EmptyContent,{title:(0,o.__)("No posts yet","woocommerce"),message:(0,a.createElement)(s.WL,null),illustration:"",actionLabel:""}):l.slice(2*(e-1),2*e).map(((e,t)=>(0,a.createElement)(L,{key:t,post:e})))))};n(77975);const x=()=>{const{currentUserCan:e}=(0,r.useUser)(),t=(0,l.O3)("allowMarketplaceSuggestions",!1)&&e("install_plugins");return(0,a.createElement)("div",{className:"woocommerce-marketing-overview-multichannel"},(0,a.createElement)(u,null),t&&(0,a.createElement)(f,null),(0,a.createElement)(C,null))}}}]);