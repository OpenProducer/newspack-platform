"use strict";(self.webpackChunk_wcAdmin_webpackJsonp=self.webpackChunk_wcAdmin_webpackJsonp||[]).push([[8851],{55722:function(e,t,o){o.d(t,{U:function(){return h},e:function(){return w}});var n=o(69307),a=o(83849),c=o.n(a),s=o(59838),r=o(76292),i=o.n(r),l=o(7862),m=o.n(l),d=o(86020),u=o(55609),_=o(92819);class p extends n.Component{render(){const{className:e,hasAction:t,hasDate:o,hasSubtitle:a,lines:s}=this.props,r=c()("woocommerce-activity-card is-loading",e);return(0,n.createElement)("div",{className:r,"aria-hidden":!0},(0,n.createElement)("span",{className:"woocommerce-activity-card__icon"},(0,n.createElement)("span",{className:"is-placeholder"})),(0,n.createElement)("div",{className:"woocommerce-activity-card__header"},(0,n.createElement)("div",{className:"woocommerce-activity-card__title is-placeholder"}),a&&(0,n.createElement)("div",{className:"woocommerce-activity-card__subtitle is-placeholder"}),o&&(0,n.createElement)("div",{className:"woocommerce-activity-card__date"},(0,n.createElement)("span",{className:"is-placeholder"}))),(0,n.createElement)("div",{className:"woocommerce-activity-card__body"},(0,_.range)(s).map((e=>(0,n.createElement)("span",{className:"is-placeholder",key:e})))),t&&(0,n.createElement)("div",{className:"woocommerce-activity-card__actions"},(0,n.createElement)("span",{className:"is-placeholder"})))}}p.propTypes={className:m().string,hasAction:m().bool,hasDate:m().bool,hasSubtitle:m().bool,lines:m().number},p.defaultProps={hasAction:!1,hasDate:!1,hasSubtitle:!1,lines:1};var w=p;class h extends n.Component{getCard(){const{actions:e,className:t,children:o,date:a,icon:s,subtitle:r,title:l,unread:m}=this.props,u=c()("woocommerce-activity-card",t),_=Array.isArray(e)?e:[e],p=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/.test(a)?i().utc(a).fromNow():a;return(0,n.createElement)("section",{className:u},m&&(0,n.createElement)("span",{className:"woocommerce-activity-card__unread"}),s&&(0,n.createElement)("span",{className:"woocommerce-activity-card__icon","aria-hidden":!0},s),l&&(0,n.createElement)("header",{className:"woocommerce-activity-card__header"},(0,n.createElement)(d.H,{className:"woocommerce-activity-card__title"},l),r&&(0,n.createElement)("div",{className:"woocommerce-activity-card__subtitle"},r),p&&(0,n.createElement)("span",{className:"woocommerce-activity-card__date"},p)),o&&(0,n.createElement)(d.Section,{className:"woocommerce-activity-card__body"},o),e&&(0,n.createElement)("footer",{className:"woocommerce-activity-card__actions"},_.map(((e,t)=>(0,n.cloneElement)(e,{key:t})))))}render(){const{onClick:e}=this.props;return e?(0,n.createElement)(u.Button,{className:"woocommerce-activity-card__button",onClick:e},this.getCard()):this.getCard()}}h.propTypes={actions:m().oneOfType([m().arrayOf(m().element),m().element]),onClick:m().func,className:m().string,children:m().node,date:m().string,icon:m().node,subtitle:m().node,title:m().oneOfType([m().string,m().node]),unread:m().bool},h.defaultProps={icon:(0,n.createElement)(s.Z,{size:48}),unread:!1}},53919:function(e,t,o){o.r(t),o.d(t,{InboxPanel:function(){return s}});var n=o(69307),a=o(27488),c=o(31610);const s=e=>{let{hasAbbreviatedNotifications:t,thingsToDoNextCount:o}=e;return(0,n.createElement)("div",{className:"woocommerce-notification-panels"},t&&(0,n.createElement)(c.vn,{thingsToDoNextCount:o}),(0,n.createElement)(a.Z,{showHeader:!1}))};t.default=s},27488:function(e,t,o){o.d(t,{Z:function(){return y}});var n=o(69307),a=o(65736),c=o(86020),s=o(55609),r=o(67221),i=o(9818),l=o(14599),m=o(82418),d=o(83786),u=o(14812),_=o(76292),p=o.n(_),w=o(55722),h=o(82846),E=o(92761),N=e=>{let{onClose:t}=e;const{createNotice:o}=(0,i.useDispatch)("core/notices"),{batchUpdateNotes:c,removeAllNotes:m}=(0,i.useDispatch)(r.NOTES_STORE_NAME);return(0,n.createElement)(n.Fragment,null,(0,n.createElement)(s.Modal,{title:(0,a.__)("Dismiss all messages","woocommerce"),className:"woocommerce-inbox-dismiss-all-modal",onRequestClose:t},(0,n.createElement)("div",{className:"woocommerce-inbox-dismiss-all-modal__wrapper"},(0,n.createElement)("div",{className:"woocommerce-usage-modal__message"},(0,a.__)("Are you sure? Inbox messages will be dismissed forever.","woocommerce")),(0,n.createElement)("div",{className:"woocommerce-usage-modal__actions"},(0,n.createElement)(s.Button,{onClick:t},(0,a.__)("Cancel","woocommerce")),(0,n.createElement)(s.Button,{isPrimary:!0,onClick:()=>{(async()=>{(0,l.recordEvent)("wcadmin_inbox_action_dismissall",{});try{const e=await m({status:"unactioned"});o("success",(0,a.__)("All messages dismissed","woocommerce"),{actions:[{label:(0,a.__)("Undo","woocommerce"),onClick:()=>{c(e.map((e=>e.id)),{is_deleted:0})}}]})}catch(e){o("error",(0,a.__)("Messages could not be dismissed","woocommerce")),t()}})(),t()}},(0,a.__)("Yes, dismiss all","woocommerce"))))))};const g=(e,t)=>{(0,l.recordEvent)("inbox_action_click",{note_name:e.name,note_title:e.title,note_content_inner_link:t})};let v=!1;const b={page:1,per_page:r.QUERY_DEFAULTS.pageSize,status:"unactioned",type:r.QUERY_DEFAULTS.noteTypes,orderby:"date",order:"desc",_fields:["id","name","title","content","type","status","actions","date_created","date_created_gmt","layout","image","is_deleted","is_read","locale"]};var y=e=>{let{showHeader:t=!0}=e;const{createNotice:o}=(0,i.useDispatch)("core/notices"),{removeNote:_,updateNote:y,triggerNoteAction:f}=(0,i.useDispatch)(r.NOTES_STORE_NAME),{isError:C,isResolvingNotes:k,isBatchUpdating:x,notes:A}=(0,i.useSelect)((e=>{const{getNotes:t,getNotesError:o,isResolving:n,isNotesRequesting:a}=e(r.NOTES_STORE_NAME),c=p()("2022-01-11","YYYY-MM-DD").valueOf(),s=["en_US","en_AU","en_CA","en_GB","en_ZA"];return{notes:t(b).map((e=>{const t=p()(e.date_created_gmt,"YYYY-MM-DD").valueOf();return s.includes(e.locale)&&t>=c?{...e,content:(0,h.r7)(e.content,320)}:e})),isError:Boolean(o("getNotes",[b])),isResolvingNotes:n("getNotes",[b]),isBatchUpdating:a("batchUpdateNotes")}})),[O,S]=(0,n.useState)(!1);if(C){const e=(0,a.__)("There was an error getting your inbox. Please try again.","woocommerce"),t=(0,a.__)("Reload","woocommerce"),o=()=>{window.location.reload()};return(0,n.createElement)(c.EmptyContent,{title:e,actionLabel:t,actionURL:null,actionCallback:o})}const D=(0,h.kS)(A);return(0,n.createElement)(n.Fragment,null,O&&(0,n.createElement)(N,{onClose:()=>{S(!1)}}),(0,n.createElement)("div",{className:"woocommerce-homepage-notes-wrapper"},(k||x)&&(0,n.createElement)(c.Section,null,(0,n.createElement)(u.InboxNotePlaceholder,{className:"banner message-is-unread"})),(0,n.createElement)(c.Section,null,!k&&!x&&(e=>{let{hasNotes:t,isBatchUpdating:o,notes:r,onDismiss:i,onNoteActionClick:_,setShowDismissAllModal:p,showHeader:h=!0}=e;if(o)return;if(!t)return(0,n.createElement)(w.U,{className:"woocommerce-empty-activity-card",title:(0,a.__)("Your inbox is empty","woocommerce"),icon:!1},(0,a.__)("As things begin to happen in your store your inbox will start to fill up. You'll see things like achievements, new feature announcements, extension recommendations and more!","woocommerce"));v||((0,l.recordEvent)("inbox_panel_view",{total:r.length}),v=!0);const N=(0,E.GG)(),b=e=>{(0,l.recordEvent)("inbox_note_view",{note_content:e.content,note_name:e.name,note_title:e.title,note_type:e.type,screen:N})},y=Object.keys(r).map((e=>r[e]));return(0,n.createElement)(s.Card,{size:"large"},h&&(0,n.createElement)(s.CardHeader,{size:"medium"},(0,n.createElement)("div",{className:"wooocommerce-inbox-card__header"},(0,n.createElement)(u.Text,{size:"20",lineHeight:"28px",variant:"title.small"},(0,a.__)("Inbox","woocommerce")),(0,n.createElement)(c.Badge,{count:y.length})),(0,n.createElement)(c.EllipsisMenu,{label:(0,a.__)("Inbox Notes Options","woocommerce"),renderContent:e=>{let{onToggle:t}=e;return(0,n.createElement)("div",{className:"woocommerce-inbox-card__section-controls"},(0,n.createElement)(s.Button,{onClick:()=>{p(!0),t()}},(0,a.__)("Dismiss all","woocommerce")))}})),(0,n.createElement)(m.Z,{role:"menu"},y.map((e=>{const{id:t,is_deleted:o}=e;return o?null:(0,n.createElement)(d.Z,{key:t,timeout:500,classNames:"woocommerce-inbox-message"},(0,n.createElement)(u.InboxNoteCard,{key:t,note:e,onDismiss:i,onNoteActionClick:_,onBodyLinkClick:g,onNoteVisible:b}))}))))})({hasNotes:D,isBatchUpdating:x,notes:A,onDismiss:e=>{const t=(0,E.GG)();(0,l.recordEvent)("inbox_action_dismiss",{note_name:e.name,note_title:e.title,note_name_dismiss_all:!1,note_name_dismiss_confirmation:!0,screen:t});const n=e.id;try{_(n),o("success",(0,a.__)("Message dismissed","woocommerce"),{actions:[{label:(0,a.__)("Undo","woocommerce"),onClick:()=>{y(n,{is_deleted:0})}}]})}catch(e){o("error",(0,a._n)("Message could not be dismissed","Messages could not be dismissed",1,"woocommerce"))}},onNoteActionClick:(e,t)=>{f(e.id,t.id)},setShowDismissAllModal:S,showHeader:t}))))}},92761:function(e,t,o){function n(e){return e?e.substr(1).split("&").reduce(((e,t)=>{const o=t.split("="),n=o[0];let a=decodeURIComponent(o[1]);return a=isNaN(Number(a))?a:Number(a),e[n]=a,e}),{}):{}}function a(){let e="";const{page:t,path:o,post_type:a}=n(window.location.search);if(t){const n="wc-admin"===t?"home_screen":t;e=o?o.replace(/\//g,"_").substring(1):n}else a&&(e=a);return e}o.d(t,{DP:function(){return n},GG:function(){return a}})},59838:function(e,t,o){t.Z=function(e){var t=e.size,o=void 0===t?24:t,n=e.onClick,r=(e.icon,e.className),i=function(e,t){if(null==e)return{};var o,n,a=function(e,t){if(null==e)return{};var o,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)o=c[n],0<=t.indexOf(o)||(a[o]=e[o]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)o=c[n],0<=t.indexOf(o)||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}(e,c),l=["gridicon","gridicons-notice-outline",r,!!function(e){return 0==e%18}(o)&&"needs-offset",!1,!1].filter(Boolean).join(" ");return a.default.createElement("svg",s({className:l,height:o,width:o,onClick:n},i,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M12 4c4.411 0 8 3.589 8 8s-3.589 8-8 8-8-3.589-8-8 3.589-8 8-8m0-2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm1 13h-2v2h2v-2zm-2-2h2l.5-6h-3l.5 6z"})))};var n,a=(n=o(99196))&&n.__esModule?n:{default:n},c=["size","onClick","icon","className"];function s(){return s=Object.assign||function(e){for(var t,o=1;o<arguments.length;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},s.apply(this,arguments)}}}]);