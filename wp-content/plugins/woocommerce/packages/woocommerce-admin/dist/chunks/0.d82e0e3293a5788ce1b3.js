(window.__wcAdmin_webpackJsonp=window.__wcAdmin_webpackJsonp||[]).push([[0],{718:function(e,t,r){"use strict";r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return u}));var a=r(0),n=r(49),c=r(188),o=r.n(c),i=r(33),s=o()(i.b),l=function(e){var t=s.getCurrencyConfig(),r=Object(n.applyFilters)("woocommerce_admin_report_currency",t,e);return o()(r)},u=Object(a.createContext)(s)},719:function(e,t,r){"use strict";var a=r(14),n=r.n(a),c=r(13),o=r.n(c),i=r(16),s=r.n(i),l=r(17),u=r.n(l),d=r(6),p=r.n(d),m=r(0),b=r(3),f=r(1),y=r.n(f),g=r(68),O=r(33);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=p()(e);if(t){var n=p()(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return u()(this,r)}}var j=function(e){s()(r,e);var t=h(r);function r(){return n()(this,r),t.apply(this,arguments)}return o()(r,[{key:"render",value:function(){var e,t,r,a,n=this.props,c=n.className,o=n.isError,i=n.isEmpty;return o?(e=Object(b.__)("There was an error getting your stats. Please try again.",'woocommerce'),t=Object(b.__)("Reload",'woocommerce'),a=function(){window.location.reload()}):i&&(e=Object(b.__)("No results could be found for this date range.",'woocommerce'),t=Object(b.__)("View Orders",'woocommerce'),r=Object(O.f)("edit.php?post_type=shop_order")),Object(m.createElement)(g.EmptyContent,{className:c,title:e,actionLabel:t,actionURL:r,actionCallback:a})}}]),r}(m.Component);j.propTypes={className:y.a.string,isError:y.a.bool,isEmpty:y.a.bool},j.defaultProps={className:""},t.a=j},725:function(e,t,r){"use strict";var a=r(5),n=r.n(a),c=r(14),o=r.n(c),i=r(13),s=r.n(i),l=r(10),u=r.n(l),d=r(16),p=r.n(d),m=r(17),b=r.n(m),f=r(6),y=r.n(f),g=r(0),O=r(1),h=r.n(O),j=r(2),v=r(24),_=r(68),w=r(33),E=r(41),S=r(35),D=r(61),k=r(718);function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=y()(e);if(t){var n=y()(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return b()(this,r)}}var F=function(e){p()(r,e);var t=C(r);function r(){var e;return o()(this,r),(e=t.call(this)).trackDateSelect=e.trackDateSelect.bind(u()(e)),e.trackFilterSelect=e.trackFilterSelect.bind(u()(e)),e.trackAdvancedFilterAction=e.trackAdvancedFilterAction.bind(u()(e)),e}return s()(r,[{key:"trackDateSelect",value:function(e){var t=this.props.report;Object(D.recordEvent)("datepicker_update",P({report:t},Object(j.omitBy)(e,j.isUndefined)))}},{key:"trackFilterSelect",value:function(e){var t=this.props.report;Object(D.recordEvent)("analytics_filter",{report:t,filter:e.filter||"all"})}},{key:"trackAdvancedFilterAction",value:function(e,t){var r=this.props.report;switch(e){case"add":Object(D.recordEvent)("analytics_filters_add",{report:r,filter:t.key});break;case"remove":Object(D.recordEvent)("analytics_filters_remove",{report:r,filter:t.key});break;case"filter":var a=Object.keys(t).reduce((function(e,r){return e[Object(j.snakeCase)(r)]=t[r],e}),{});Object(D.recordEvent)("analytics_filters_filter",P({report:r},a));break;case"clear_all":Object(D.recordEvent)("analytics_filters_clear_all",{report:r});break;case"match":Object(D.recordEvent)("analytics_filters_all_any",{report:r,value:t.match})}}},{key:"render",value:function(){var e=this.props,t=e.advancedFilters,r=e.filters,a=e.path,n=e.query,c=e.showDatePicker,o=e.defaultDateRange,i=Object(S.getDateParamsFromQuery)(n,o),s=i.period,l=i.compare,u=i.before,d=i.after,p=Object(S.getCurrentDates)(n,o),m={period:s,compare:l,before:u,after:d,primaryDate:p.primary,secondaryDate:p.secondary},b=this.context;return Object(g.createElement)(_.ReportFilters,{query:n,siteLocale:w.c.siteLocale,currency:b.getCurrencyConfig(),path:a,filters:r,advancedFilters:t,showDatePicker:c,onDateSelect:this.trackDateSelect,onFilterSelect:this.trackFilterSelect,onAdvancedFilterAction:this.trackAdvancedFilterAction,dateQuery:m,isoDateFormat:S.isoDateFormat})}}]),r}(g.Component);F.contextType=k.a,t.a=Object(v.withSelect)((function(e){return{defaultDateRange:e(E.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings").woocommerce_default_date_range}}))(F),F.propTypes={advancedFilters:h.a.object,filters:h.a.array,path:h.a.string.isRequired,query:h.a.object,showDatePicker:h.a.bool,report:h.a.string.isRequired}},728:function(e,t,r){"use strict";var a=r(37),n=r.n(a),c=r(30),o=r.n(c),i=r(5),s=r.n(i),l=r(38),u=r.n(l),d=r(60),p=r.n(d),m=r(0),b=r(735),f=r(72),y=r(49),g=r(270),O=r(413),h=r(24),j=r(2),v=r(3),_=r(4),w=r.n(_),E=r(1),S=r.n(E),D=r(68),k=r(32),R=r(700),P=r(41),C=r(61),F=function(){return Object(m.createElement)("svg",{role:"img","aria-hidden":"true",focusable:"false",version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 24 24"},Object(m.createElement)("path",{d:"M18,9c-0.009,0-0.017,0.002-0.025,0.003C17.72,5.646,14.922,3,11.5,3C7.91,3,5,5.91,5,9.5c0,0.524,0.069,1.031,0.186,1.519 C5.123,11.016,5.064,11,5,11c-2.209,0-4,1.791-4,4c0,1.202,0.541,2.267,1.38,3h18.593C22.196,17.089,23,15.643,23,14 C23,11.239,20.761,9,18,9z M12,16l-4-5h3V8h2v3h3L12,16z"}))},q=r(719);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(879);function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Q=function(e){var t=e.getHeadersContent,r=e.getRowsContent,a=e.getSummary,c=e.isRequesting,i=e.primaryData,l=e.tableData,d=e.endpoint,g=(e.itemIdField,e.tableQuery,e.compareBy),h=e.searchBy,_=e.labels,E=void 0===_?{}:_,S=p()(e,["getHeadersContent","getRowsContent","getSummary","isRequesting","primaryData","tableData","endpoint","itemIdField","tableQuery","compareBy","searchBy","labels"]),x=e.query,T=e.columnPrefsKey,N=l.items,Q=l.query,B=x.filter?Object(k.getIdsFromQuery)(x[g]):[],I=Object(m.useState)(B),L=u()(I,2),M=L[0],U=L[1],V=Object(m.useRef)(null),z=Object(P.useUserPreferences)(),H=z.updateUserPreferences,G=p()(z,["updateUserPreferences"]);if(l.isError||i.isError)return Object(m.createElement)(q.a,{isError:!0});var J=[];T&&(J=G&&G[T]?G[T]:J);var K,Y,W,X,Z=function(t){var r=e.ids;U(t?r:[])},$=function(t,r){var a=e.ids;if(r)U(Object(j.uniq)([a[t]].concat(o()(M))));else{var n=M.indexOf(a[t]);U([].concat(o()(M.slice(0,n)),o()(M.slice(n+1))))}},ee=function(t){var r=e.ids,a=void 0===r?[]:r,n=-1!==M.indexOf(a[t]);return{display:Object(m.createElement)(b.a,{onChange:Object(j.partial)($,t),checked:n}),value:!1}},te=c||l.isRequesting||i.isRequesting,re=Object(j.get)(i,["data","totals"],{}),ae=N.totalResults,ne=ae>0,ce=Object(k.getSearchWords)(x).map((function(e){return{key:e,label:e}})),oe=Object(y.applyFilters)("woocommerce_admin_report_table",{endpoint:d,headers:t(),rows:r(N.data),totals:re,summary:a?a(re,ae):null,items:N}),ie=oe.headers,se=oe.rows,le=oe.summary;g&&(se=se.map((function(e,t){return[ee(t)].concat(o()(e))})),ie=[(K=e.ids,Y=void 0===K?[]:K,W=Y.length>0,X=W&&Y.length===M.length,{cellClassName:"is-checkbox-column",key:"compare",label:Object(m.createElement)(b.a,{onChange:Z,"aria-label":Object(v.__)("Select All"),checked:X,disabled:!W}),required:!0})].concat(o()(ie)));var ue=function(e,t){return t?e.map((function(e){return A(A({},e),{},{visible:e.required||!t.includes(e.key)})})):e.map((function(e){return A(A({},e),{},{visible:e.required||!e.hiddenByDefault})}))}(ie,J),de=w()("woocommerce-report-table",{"has-compare":!!g,"has-search":!!h});return Object(m.createElement)(m.Fragment,null,Object(m.createElement)("div",{className:"woocommerce-report-table__scroll-point",ref:V,"aria-hidden":!0}),Object(m.createElement)(D.TableCard,n()({className:de,actions:[g&&Object(m.createElement)(D.CompareButton,{key:"compare",className:"woocommerce-table__compare",count:M.length,helpText:E.helpText||Object(v.__)("Check at least two items below to compare",'woocommerce'),onClick:function(){var t=e.compareParam;g&&Object(k.onQueryChange)("compare")(g,t,M.join(","))},disabled:!ne},E.compareButton||Object(v.__)("Compare",'woocommerce')),h&&Object(m.createElement)(D.Search,{allowFreeTextSearch:!0,inlineTags:!0,key:"search",onChange:function(t){var r,a=e.baseSearchQuery,n=e.compareParam,c=t.map((function(e){return e.label.replace(",","%2C")}));c.length?Object(k.updateQueryString)(A(A((r={filter:void 0},s()(r,n,void 0),s()(r,h,void 0),r),a),{},{search:Object(j.uniq)(c).join(",")})):Object(k.updateQueryString)({search:void 0});Object(C.recordEvent)("analytics_table_filter",{report:d})},placeholder:E.placeholder||Object(v.__)("Search by item name",'woocommerce'),selected:ce,showClearButton:!0,type:h,disabled:!ne}),ne&&Object(m.createElement)(f.a,{key:"download",className:"woocommerce-table__download-button",disabled:te,onClick:function(){var a=e.createNotice,n=e.startExport,c=e.title,o=Object.assign({},x),i=N.data,s=N.totalResults,l="browser";delete o.extended_info,o.search&&delete o[h],i&&i.length===s?Object(R.downloadCSVFile)(Object(R.generateCSVFileName)(c,o),Object(R.generateCSVDataFromTable)(t(),r(i))):(l="email",n(d,Q).then((function(){return a("success",Object(v.sprintf)(Object(v.__)("Your %s Report will be emailed to you.",'woocommerce'),c))})).catch((function(e){return a("error",e.message||Object(v.sprintf)(Object(v.__)("There was a problem exporting your %s Report. Please try again.",'woocommerce'),c))}))),Object(C.recordEvent)("analytics_table_download",{report:d,rows:s,downloadType:l})}},Object(m.createElement)(F,null),Object(m.createElement)("span",{className:"woocommerce-table__download-button__label"},E.downloadButton||Object(v.__)("Download",'woocommerce')))],headers:ue,isLoading:te,onQueryChange:k.onQueryChange,onColumnsChange:function(e,t){var r=ie.map((function(e){return e.key})).filter((function(t){return!e.includes(t)}));if(T){var a=s()({},T,r);H(a)}if(t){var n={report:d,column:t,status:e.includes(t)?"on":"off"};Object(C.recordEvent)("analytics_table_header_toggle",n)}},onSort:function(e,t){Object(k.onQueryChange)("sort")(e,t);var r={report:d,column:e,direction:t};Object(C.recordEvent)("analytics_table_sort",r)},onPageChange:function(e,t){V.current.scrollIntoView();var r=V.current.nextSibling.querySelector(".woocommerce-table__table"),a=O.a.focusable.find(r);a.length&&a[0].focus(),t&&("goto"===t?Object(C.recordEvent)("analytics_table_go_to_page",{report:d,page:e}):Object(C.recordEvent)("analytics_table_page_click",{report:d,direction:t}))},rows:se,rowsPerPage:parseInt(Q.per_page,10)||P.QUERY_DEFAULTS.pageSize,summary:le,totalRows:ae},S)))};Q.propTypes={baseSearchQuery:S.a.object,compareBy:S.a.string,compareParam:S.a.string,columnPrefsKey:S.a.string,endpoint:S.a.string,extendItemsMethodNames:S.a.shape({getError:S.a.string,isRequesting:S.a.string,load:S.a.string}),extendedItemsStoreName:S.a.string,getHeadersContent:S.a.func.isRequired,getRowsContent:S.a.func.isRequired,getSummary:S.a.func,itemIdField:S.a.string,labels:S.a.shape({compareButton:S.a.string,downloadButton:S.a.string,helpText:S.a.string,placeholder:S.a.string}),primaryData:S.a.object,searchBy:S.a.string,summaryFields:S.a.arrayOf(S.a.string),tableData:S.a.object.isRequired,tableQuery:S.a.object,title:S.a.string.isRequired},Q.defaultProps={primaryData:{},tableData:{items:{data:[],totalResults:0},query:{}},tableQuery:{},compareParam:"filter",downloadable:!1,onSearch:j.noop,baseSearchQuery:{}};t.a=Object(g.a)(Object(h.withSelect)((function(e,t){var r=t.endpoint,a=t.getSummary,n=t.isRequesting,c=t.itemIdField,o=t.query,i=t.tableData,s=t.tableQuery,l=t.filters,u=t.advancedFilters,d=t.summaryFields;if(n||o.search&&(!o[r]||!o[r].length))return{};var p=e(P.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings").woocommerce_default_date_range,m=["variations","categories"].includes(r)?"products":r,b=a?Object(P.getReportChartData)({endpoint:m,dataType:"primary",query:o,select:e,filters:l,advancedFilters:u,tableQuery:s,defaultDateRange:p,fields:d}):{},f=function(e,t,r){var a=t.extendItemsMethodNames,n=t.extendedItemsStoreName,c=t.itemIdField,o=r.items.data;if(!(Array.isArray(o)&&o.length&&a&&c))return r;var i=e(n),s=i[a.getError],l=i[a.isRequesting],u=i[a.load],d={include:o.map((function(e){return e[c]})).join(","),per_page:o.length},p=u(d),m=!!l&&l(d),b=!!s&&s(d),f=o.map((function(e){var t=Object(j.first)(p.filter((function(t){return e.id===t.id})));return T(T({},e),t)})),y=r.isRequesting||m,g=r.isError||b;return T(T({},r),{},{isRequesting:y,isError:g,items:T(T({},r.items),{},{data:f})})}(e,t,i||Object(P.getReportTableData)({endpoint:r,query:o,select:e,tableQuery:s,filters:l,advancedFilters:u,defaultDateRange:p}));return{primaryData:b,ids:c&&f.items.data?f.items.data.map((function(e){return e[c]})):[],tableData:f,query:A(A({},s),o)}})),Object(h.withDispatch)((function(e){var t=e(P.EXPORT_STORE_NAME).startExport;return{createNotice:e("core/notices").createNotice,startExport:t}})))(Q)},879:function(e,t,r){}}]);