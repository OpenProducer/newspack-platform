(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{773:function(e,t,r){"use strict";r.d(t,"b",(function(){return d})),r.d(t,"a",(function(){return m}));var n=r(16),a=r.n(n),c=r(2),o=r(24),i=r(43),s=r(23),u=r(201),l=r(22);var d=function(e){var t=e.indicator,r=e.primaryData,n=e.secondaryData,a=e.currency,o=e.formatCurrency,i=e.persistedQuery,d=Object(c.find)(r.data,(function(e){return e.stat===t.stat})),m=Object(c.find)(n.data,(function(e){return e.stat===t.stat}));if(!d||!m)return{};var p=d._links&&d._links.report[0]&&d._links.report[0].href||"",f=function(e,t,r){return e?"/jetpack"===e?Object(l.f)("admin.php?page=jetpack#/dashboard"):Object(s.getNewPath)(t,e,{chart:r.chart}):""}(p,i,d),b="/jetpack"===p?"wp-admin":"wc-admin",y="currency"===d.format,O=Object(u.calculateDelta)(d.value,m.value);return{primaryValue:y?o(d.value):Object(u.formatValue)(a,d.format,d.value),secondaryValue:y?o(m.value):Object(u.formatValue)(a,m.format,m.value),delta:O,reportUrl:f,reportUrlType:b}},m=function(e,t,r){var n=e("wc-api"),c=n.getReportItems,s=n.getReportItemsError,u=n.isReportItemsRequesting,l=e(i.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings").woocommerce_default_date_range,d=Object(o.getCurrentDates)(r,l),m=d.primary.before,p=d.secondary.before,f=t.map((function(e){return e.stat})).join(","),b={after:Object(o.appendTimestamp)(d.primary.after,"start"),before:Object(o.appendTimestamp)(m,m.isSame(a()(),"day")?"now":"end"),stats:f},y={after:Object(o.appendTimestamp)(d.secondary.after,"start"),before:Object(o.appendTimestamp)(p,p.isSame(a()(),"day")?"now":"end"),stats:f};return{primaryData:c("performance-indicators",b),primaryError:s("performance-indicators",b)||null,primaryRequesting:u("performance-indicators",b),secondaryData:c("performance-indicators",y),secondaryError:s("performance-indicators",y)||null,secondaryRequesting:u("performance-indicators",y),defaultDateRange:l}}},908:function(e,t,r){},928:function(e,t,r){"use strict";r.r(t);var n=r(17),a=r.n(n),c=r(38),o=r.n(c),i=r(37),s=r.n(i),u=r(39),l=r.n(u),d=r(42),m=r.n(d),p=r(26),f=r.n(p),b=r(0),y=r(3),O=r(169),j=r(108),g=r(23),h=r(22),v=r(43),w=r(53),_=r(101),k=(r(908),r(63)),E=r(200),T=r(773);function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f()(e);if(t){var a=f()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return m()(this,r)}}var P=Object(h.g)("dataEndpoints",{performanceIndicators:[]}).performanceIndicators,I=function(e){l()(r,e);var t=R(r);function r(){return o()(this,r),t.apply(this,arguments)}return s()(r,[{key:"renderMenu",value:function(){var e=this.props,t=e.hiddenBlocks,r=e.isFirst,n=e.isLast,a=e.onMove,c=e.onRemove,o=e.onTitleBlur,i=e.onTitleChange,s=e.onToggleHiddenBlock,u=e.titleInput,l=e.controls;return Object(b.createElement)(w.EllipsisMenu,{label:Object(y.__)("Choose which analytics to display and the section name",'woocommerce'),renderContent:function(e){var d=e.onToggle;return Object(b.createElement)(b.Fragment,null,Object(b.createElement)(w.MenuTitle,null,Object(y.__)("Display Stats:",'woocommerce')),P.map((function(e,r){var n=!t.includes(e.stat);return Object(b.createElement)(w.MenuItem,{checked:n,isCheckbox:!0,isClickable:!0,key:r,onInvoke:function(){s(e.stat)(),Object(k.b)("dash_indicators_toggle",{status:n?"off":"on",key:e.stat})}},e.label)})),window.wcAdminFeatures["analytics-dashboard/customizable"]&&Object(b.createElement)(l,{onToggle:d,onMove:a,onRemove:c,isFirst:r,isLast:n,onTitleBlur:o,onTitleChange:i,titleInput:u}))}})}},{key:"renderList",value:function(){var e=this.props,t=e.query,r=e.primaryRequesting,n=e.secondaryRequesting,a=e.primaryError,c=e.secondaryError,o=e.primaryData,i=e.secondaryData,s=e.userIndicators,u=e.defaultDateRange;if(r||n)return Object(b.createElement)(w.SummaryListPlaceholder,{numberOfItems:s.length});if(a||c)return null;var l=Object(g.getPersistedQuery)(t),d="previous_period"===Object(j.h)(t,u).compare?Object(y.__)("Previous Period:",'woocommerce'):Object(y.__)("Previous Year:",'woocommerce'),m=this.context,p=m.formatCurrency,f=(0,m.getCurrency)();return Object(b.createElement)(w.SummaryList,null,(function(){return s.map((function(e,t){var r=Object(T.b)({indicator:e,primaryData:o,secondaryData:i,currency:f,formatCurrency:p,persistedQuery:l}),n=r.primaryValue,a=r.secondaryValue,c=r.delta,s=r.reportUrl,u=r.reportUrlType;return Object(b.createElement)(w.SummaryNumber,{key:t,href:s,hrefType:u,label:e.label,value:n,prevLabel:d,prevValue:a,delta:c,onLinkClickCallback:function(){Object(k.b)("dash_indicators_click",{key:e.stat})}})}))}))}},{key:"render",value:function(){var e=this.props,t=e.userIndicators,r=e.title;return Object(b.createElement)(b.Fragment,null,Object(b.createElement)(w.SectionHeader,{title:r||Object(y.__)("Store Performance",'woocommerce'),menu:this.renderMenu()}),t.length>0&&Object(b.createElement)("div",{className:"woocommerce-dashboard__store-performance"},this.renderList()))}}]),r}(b.Component);I.contextType=E.a,t.default=Object(O.a)(Object(_.a)((function(e,t){var r=t.hiddenBlocks,n=t.query,a=P.filter((function(e){return!r.includes(e.stat)})),c=e(v.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings").woocommerce_default_date_range,o={hiddenBlocks:r,userIndicators:a,indicators:P,defaultDateRange:c};if(0===a.length)return o;var i=Object(T.a)(e,a,n);return D(D({},o),i)})))(I)}}]);
