(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{709:function(e,t,r){"use strict";var a=r(11),n=r(17),o=r(16),s=r(0),i=r(2),c=r(173),l=r(171);t.a=Object(c.a)((function(e){var t=e.help,r=e.instanceId,c=e.label,u=e.multiple,d=void 0!==u&&u,b=e.onChange,m=e.options,p=void 0===m?[]:m,f=e.className,h=e.hideLabelFromVision,g=Object(o.a)(e,["help","instanceId","label","multiple","onChange","options","className","hideLabelFromVision"]),v="inspector-select-control-".concat(r);return!Object(i.isEmpty)(p)&&Object(s.createElement)(l.a,{label:c,hideLabelFromVision:h,id:v,help:t,className:f},Object(s.createElement)("select",Object(a.a)({id:v,className:"components-select-control__input",onChange:function(e){if(d){var t=Object(n.a)(e.target.options).filter((function(e){return e.selected})).map((function(e){return e.value}));b(t)}else b(e.target.value)},"aria-describedby":t?"".concat(v,"__help"):void 0,multiple:d},g),p.map((function(e,t){return Object(s.createElement)("option",{key:"".concat(e.label,"-").concat(e.value,"-").concat(t),value:e.value,disabled:e.disabled},e.label)}))))}))},747:function(e,t,r){"use strict";var a=r(758),n=["a","b","em","i","strong","p"],o=["target","href","rel","name","download"];t.a=function(e){return{__html:Object(a.sanitize)(e,{ALLOWED_TAGS:n,ALLOWED_ATTR:o})}}},895:function(e,t,r){},896:function(e,t,r){},914:function(e,t,r){"use strict";r.r(t);var a=r(41),n=r.n(a),o=r(40),s=r.n(o),i=r(44),c=r.n(i),l=r(29),u=r.n(l),d=r(42),b=r.n(d),m=r(0),p=r(3),f=r(256),h=r(1),g=r.n(h),v=r(709),y=r(19),w=r(63),O=r(26),j=r(22),_=r(51),R=r(267),E=r(261),T=r(747),L=r(101);r(895);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=u()(e);if(t){var n=u()(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return c()(this,r)}}var C=function(e){b()(r,e);var t=k(r);function r(){return n()(this,r),t.apply(this,arguments)}return s()(r,[{key:"getFormattedHeaders",value:function(){return this.props.headers.map((function(e,t){return{isLeftAligned:0===t,hiddenByDefault:!1,isSortable:!1,key:e.label,label:e.label}}))}},{key:"getFormattedRows",value:function(){return this.props.rows.map((function(e){return e.map((function(e){return{display:Object(m.createElement)("div",{dangerouslySetInnerHTML:Object(T.a)(e.display)}),value:e.value}}))}))}},{key:"render",value:function(){var e=this.props,t=e.isRequesting,r=e.isError,a=e.totalRows,n=e.title,o="woocommerce-leaderboard";if(r)return Object(m.createElement)(E.a,{className:o,isError:!0});var s=this.getFormattedRows();return t||0!==s.length?Object(m.createElement)(w.TableCard,{className:o,headers:this.getFormattedHeaders(),isLoading:t,rows:s,rowsPerPage:a,showMenu:!1,title:n,totalRows:a}):Object(m.createElement)(w.Card,{title:n,className:o},Object(m.createElement)(w.EmptyTable,null,Object(p.__)("No data recorded for the selected time period.",'woocommerce')))}}]),r}(m.Component);C.propTypes={headers:g.a.arrayOf(g.a.shape({label:g.a.string})),id:g.a.string.isRequired,query:g.a.object,rows:g.a.arrayOf(g.a.arrayOf(g.a.shape({display:g.a.node,value:g.a.oneOfType([g.a.string,g.a.number,g.a.bool])}))).isRequired,title:g.a.string.isRequired,totalRows:g.a.number.isRequired},C.defaultProps={rows:[],isError:!1,isRequesting:!1};var I=Object(f.a)(Object(L.a)((function(e,t){var r=t.id,a=t.query,n=t.totalRows,o=e(_.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings").woocommerce_default_date_range,s={id:r,per_page:n,persisted_query:Object(j.getPersistedQuery)(a),query:a,select:e,defaultDateRange:o};return Object(R.a)(s)})))(C),q=r(79);r(896);function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=u()(e);if(t){var n=u()(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return c()(this,r)}}var D=function(e){b()(r,e);var t=P(r);function r(e){var a;return n()(this,r),(a=t.apply(this,arguments)).setRowsPerTable=function(e){a.setState({rowsPerTable:parseInt(e,10)});var t={dashboard_leaderboard_rows:parseInt(e,10)};a.props.updateCurrentUserData(t)},a.state={rowsPerTable:parseInt(e.userPrefLeaderboardRows,10)||5},a}return s()(r,[{key:"renderMenu",value:function(){var e=this,t=this.props,r=t.allLeaderboards,a=t.isFirst,n=t.isLast,o=t.hiddenBlocks,s=t.onMove,i=t.onRemove,c=t.onTitleBlur,l=t.onTitleChange,u=t.onToggleHiddenBlock,d=t.titleInput,b=t.controls,f=this.state.rowsPerTable;return Object(m.createElement)(w.EllipsisMenu,{label:Object(p.__)("Choose which leaderboards to display and other settings",'woocommerce'),renderContent:function(t){var h=t.onToggle;return Object(m.createElement)(m.Fragment,null,Object(m.createElement)(w.MenuTitle,null,Object(p.__)("Leaderboards",'woocommerce')),r.map((function(e){var t=!o.includes(e.id);return Object(m.createElement)(w.MenuItem,{checked:t,isCheckbox:!0,isClickable:!0,key:e.id,onInvoke:function(){u(e.id)(),Object(q.b)("dash_leaderboards_toggle",{status:t?"off":"on",key:e.id})}},e.label)})),Object(m.createElement)(v.a,{className:"woocommerce-dashboard__dashboard-leaderboards__select",label:Object(p.__)("Rows Per Table",'woocommerce'),value:f,options:Array.from({length:20},(function(e,t){return{v:t+1,label:t+1}})),onChange:e.setRowsPerTable}),Object(m.createElement)(b,{onToggle:h,onMove:s,onRemove:i,isFirst:a,isLast:n,onTitleBlur:c,onTitleChange:l,titleInput:d}))}})}},{key:"renderLeaderboards",value:function(){var e=this.state.rowsPerTable,t=this.props,r=t.allLeaderboards,a=t.hiddenBlocks,n=t.query;return r.map((function(t){if(!a.includes(t.id))return Object(m.createElement)(I,{headers:t.headers,id:t.id,key:t.id,query:n,title:t.label,totalRows:e})}))}},{key:"render",value:function(){var e=this.props.title;return Object(m.createElement)(m.Fragment,null,Object(m.createElement)("div",{className:"woocommerce-dashboard__dashboard-leaderboards"},Object(m.createElement)(w.SectionHeader,{title:e||Object(p.__)("Leaderboards",'woocommerce'),menu:this.renderMenu()}),Object(m.createElement)("div",{className:"woocommerce-dashboard__columns"},this.renderLeaderboards())))}}]),r}(m.Component);D.propTypes={query:g.a.object.isRequired};t.default=Object(f.a)(Object(L.a)((function(e){var t=e("wc-api"),r=t.getCurrentUserData,a=t.getItems,n=t.getItemsError,o=t.isGetItemsRequesting,s=r();return{allLeaderboards:Object(O.g)("dataEndpoints",{leaderboards:[]}).leaderboards,getItems:a,getItemsError:n,isGetItemsRequesting:o,userPrefLeaderboardRows:s.dashboard_leaderboard_rows}})),Object(y.withDispatch)((function(e){return{updateCurrentUserData:e("wc-api").updateCurrentUserData}})))(D)}}]);
