(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{747:function(e,t,n){"use strict";var r=n(758),o=["a","b","em","i","strong","p"],a=["target","href","rel","name","download"];t.a=function(e){return{__html:Object(r.sanitize)(e,{ALLOWED_TAGS:o,ALLOWED_ATTR:a})}}},748:function(e,t,n){"use strict";n.d(t,"a",(function(){return C})),n.d(t,"b",(function(){return k}));var r=n(41),o=n.n(r),a=n(40),i=n.n(a),c=n(44),s=n.n(c),l=n(29),u=n.n(l),m=n(42),p=n.n(m),f=n(0),d=n(10),b=n.n(d),h=n(66),v=n.n(h),y=n(12),g=n.n(y),_=n(1),w=n.n(_),O=(n(756),n(63)),j=n(2);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u()(e);if(t){var o=u()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s()(this,n)}}var R=function(e){p()(n,e);var t=E(n);function n(){return o()(this,n),t.apply(this,arguments)}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.hasAction,r=e.hasDate,o=e.hasSubtitle,a=e.lines,i=b()("woocommerce-activity-card is-loading",t);return Object(f.createElement)("div",{className:i,"aria-hidden":!0},Object(f.createElement)("span",{className:"woocommerce-activity-card__icon"},Object(f.createElement)("span",{className:"is-placeholder"})),Object(f.createElement)("div",{className:"woocommerce-activity-card__header"},Object(f.createElement)("div",{className:"woocommerce-activity-card__title is-placeholder"}),o&&Object(f.createElement)("div",{className:"woocommerce-activity-card__subtitle is-placeholder"}),r&&Object(f.createElement)("div",{className:"woocommerce-activity-card__date"},Object(f.createElement)("span",{className:"is-placeholder"}))),Object(f.createElement)("div",{className:"woocommerce-activity-card__body"},Object(j.range)(a).map((function(e){return Object(f.createElement)("span",{className:"is-placeholder",key:e})}))),n&&Object(f.createElement)("div",{className:"woocommerce-activity-card__actions"},Object(f.createElement)("span",{className:"is-placeholder"})))}}]),n}(f.Component);R.propTypes={className:w.a.string,hasAction:w.a.bool,hasDate:w.a.bool,hasSubtitle:w.a.bool,lines:w.a.number},R.defaultProps={hasAction:!1,hasDate:!1,hasSubtitle:!1,lines:1};var k=R;function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u()(e);if(t){var o=u()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s()(this,n)}}var C=function(e){p()(n,e);var t=T(n);function n(){return o()(this,n),t.apply(this,arguments)}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.actions,n=e.className,r=e.children,o=e.date,a=e.icon,i=e.subtitle,c=e.title,s=e.unread,l=b()("woocommerce-activity-card",n),u=Array.isArray(t)?t:[t];return Object(f.createElement)("section",{className:l},s&&Object(f.createElement)("span",{className:"woocommerce-activity-card__unread"}),Object(f.createElement)("span",{className:"woocommerce-activity-card__icon","aria-hidden":!0},a),Object(f.createElement)("header",{className:"woocommerce-activity-card__header"},Object(f.createElement)(O.H,{className:"woocommerce-activity-card__title"},c),i&&Object(f.createElement)("div",{className:"woocommerce-activity-card__subtitle"},i),o&&Object(f.createElement)("span",{className:"woocommerce-activity-card__date"},g.a.utc(o).fromNow())),Object(f.createElement)(O.Section,{className:"woocommerce-activity-card__body"},r),t&&Object(f.createElement)("footer",{className:"woocommerce-activity-card__actions"},u.map((function(e,t){return Object(f.cloneElement)(e,{key:t})}))))}}]),n}(f.Component);C.propTypes={actions:w.a.oneOfType([w.a.arrayOf(w.a.element),w.a.element]),className:w.a.string,children:w.a.node.isRequired,date:w.a.string,icon:w.a.node,subtitle:w.a.node,title:w.a.oneOfType([w.a.string,w.a.node]).isRequired,unread:w.a.bool},C.defaultProps={icon:Object(f.createElement)(v.a,{icon:"notice-outline",size:48}),unread:!1}},754:function(e,t,n){"use strict";var r=n(41),o=n.n(r),a=n(40),i=n.n(a),c=n(44),s=n.n(c),l=n(29),u=n.n(l),m=n(42),p=n.n(m),f=n(0),d=n(10),b=n.n(d),h=n(1),v=n.n(h),y=(n(757),n(63));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u()(e);if(t){var o=u()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s()(this,n)}}var _=function(e){p()(n,e);var t=g(n);function n(){return o()(this,n),t.apply(this,arguments)}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.className,r=e.menu,o=b()("woocommerce-layout__activity-panel-header",n);return Object(f.createElement)("div",{className:o},Object(f.createElement)(y.H,{className:"woocommerce-layout__activity-panel-header-title"},t),r&&Object(f.createElement)("div",{className:"woocommerce-layout__activity-panel-header-menu"},r))}}]),n}(f.Component);_.propTypes={className:v.a.string,title:v.a.string.isRequired,menu:v.a.shape({type:v.a.oneOf([y.EllipsisMenu])})},t.a=_},756:function(e,t,n){},757:function(e,t,n){},888:function(e,t,n){var r;r=function(e,t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){e.exports=n(5)()},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=function(e,t,n){var r=e.direction,o=e.value;switch(r){case"top":return n.top+o<t.top&&n.bottom>t.bottom&&n.left<t.left&&n.right>t.right;case"left":return n.left+o<t.left&&n.bottom>t.bottom&&n.top<t.top&&n.right>t.right;case"bottom":return n.bottom-o>t.bottom&&n.left<t.left&&n.right>t.right&&n.top<t.top;case"right":return n.right-o>t.right&&n.left<t.left&&n.top<t.top&&n.bottom>t.bottom}}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return v}));var r=n(1),o=n.n(r),a=n(2),i=n.n(a),c=n(0),s=n.n(c),l=n(3),u=n.n(l);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=f(t).call(this,e),n=!o||"object"!==m(o)&&"function"!=typeof o?d(r):o,h(d(n),"getContainer",(function(){return n.props.containment||window})),h(d(n),"addEventListener",(function(e,t,r,o){var a;n.debounceCheck||(n.debounceCheck={});var i=function(){a=null,n.check()},c={target:e,fn:o>-1?function(){a||(a=setTimeout(i,o||0))}:function(){clearTimeout(a),a=setTimeout(i,r||0)},getLastTimeout:function(){return a}};e.addEventListener(t,c.fn),n.debounceCheck[t]=c})),h(d(n),"startWatching",(function(){n.debounceCheck||n.interval||(n.props.intervalCheck&&(n.interval=setInterval(n.check,n.props.intervalDelay)),n.props.scrollCheck&&n.addEventListener(n.getContainer(),"scroll",n.props.scrollDelay,n.props.scrollThrottle),n.props.resizeCheck&&n.addEventListener(window,"resize",n.props.resizeDelay,n.props.resizeThrottle),!n.props.delayedCall&&n.check())})),h(d(n),"stopWatching",(function(){if(n.debounceCheck)for(var e in n.debounceCheck)if(n.debounceCheck.hasOwnProperty(e)){var t=n.debounceCheck[e];clearTimeout(t.getLastTimeout()),t.target.removeEventListener(e,t.fn),n.debounceCheck[e]=null}n.debounceCheck=null,n.interval&&(n.interval=clearInterval(n.interval))})),h(d(n),"check",(function(){var e,t,r=n.node;if(!r)return n.state;if(e=function(e){return void 0===e.width&&(e.width=e.right-e.left),void 0===e.height&&(e.height=e.bottom-e.top),e}(n.roundRectDown(r.getBoundingClientRect())),n.props.containment){var o=n.props.containment.getBoundingClientRect();t={top:o.top,left:o.left,bottom:o.bottom,right:o.right}}else t={top:0,left:0,bottom:window.innerHeight||document.documentElement.clientHeight,right:window.innerWidth||document.documentElement.clientWidth};var a=n.props.offset||{};"object"===m(a)&&(t.top+=a.top||0,t.left+=a.left||0,t.bottom-=a.bottom||0,t.right-=a.right||0);var i={top:e.top>=t.top,left:e.left>=t.left,bottom:e.bottom<=t.bottom,right:e.right<=t.right},c=e.height>0&&e.width>0,s=c&&i.top&&i.left&&i.bottom&&i.right;if(c&&n.props.partialVisibility){var l=e.top<=t.bottom&&e.bottom>=t.top&&e.left<=t.right&&e.right>=t.left;"string"==typeof n.props.partialVisibility&&(l=i[n.props.partialVisibility]),s=n.props.minTopValue?l&&e.top<=t.bottom-n.props.minTopValue:l}"string"==typeof a.direction&&"number"==typeof a.value&&(console.warn("[notice] offset.direction and offset.value have been deprecated. They still work for now, but will be removed in next major version. Please upgrade to the new syntax: { %s: %d }",a.direction,a.value),s=u()(a,e,t));var p=n.state;return n.state.isVisible!==s&&(p={isVisible:s,visibilityRect:i},n.setState(p),n.props.onChange&&n.props.onChange(s)),p})),n.state={isVisible:null,visibilityRect:{}},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.node=i.a.findDOMNode(this),this.props.active&&this.startWatching()}},{key:"componentWillUnmount",value:function(){this.stopWatching()}},{key:"componentDidUpdate",value:function(e){this.node=i.a.findDOMNode(this),this.props.active&&!e.active?(this.setState({isVisible:null,visibilityRect:{}}),this.startWatching()):this.props.active||this.stopWatching()}},{key:"roundRectDown",value:function(e){return{top:Math.floor(e.top),left:Math.floor(e.left),bottom:Math.floor(e.bottom),right:Math.floor(e.right)}}},{key:"render",value:function(){return this.props.children instanceof Function?this.props.children({isVisible:this.state.isVisible,visibilityRect:this.state.visibilityRect}):o.a.Children.only(this.props.children)}}])&&p(n.prototype,r),a&&p(n,a),t}(o.a.Component);h(v,"defaultProps",{active:!0,partialVisibility:!1,minTopValue:0,scrollCheck:!1,scrollDelay:250,scrollThrottle:-1,resizeCheck:!1,resizeDelay:250,resizeThrottle:-1,intervalCheck:!0,intervalDelay:100,delayedCall:!1,offset:{},containment:null,children:o.a.createElement("span",null)}),h(v,"propTypes",{onChange:s.a.func,active:s.a.bool,partialVisibility:s.a.oneOfType([s.a.bool,s.a.oneOf(["top","right","bottom","left"])]),delayedCall:s.a.bool,offset:s.a.oneOfType([s.a.shape({top:s.a.number,left:s.a.number,bottom:s.a.number,right:s.a.number}),s.a.shape({direction:s.a.oneOf(["top","right","bottom","left"]),value:s.a.number})]),scrollCheck:s.a.bool,scrollDelay:s.a.number,scrollThrottle:s.a.number,resizeCheck:s.a.bool,resizeDelay:s.a.number,resizeThrottle:s.a.number,intervalCheck:s.a.bool,intervalDelay:s.a.number,containment:"undefined"!=typeof window?s.a.instanceOf(window.Element):s.a.any,children:s.a.oneOfType([s.a.element,s.a.func]),minTopValue:s.a.number})},function(e,t,n){"use strict";var r=n(6);function o(){}function a(){}a.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,a,i){if(i!==r){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}])},e.exports=r(n(14),n(87))},902:function(e,t,n){"use strict";n.r(t);var r=n(41),o=n.n(r),a=n(40),i=n.n(a),c=n(44),s=n.n(c),l=n(29),u=n.n(l),m=n(42),p=n.n(m),f=n(0),d=n(3),b=n(10),h=n.n(b),v=n(88),y=n(66),g=n.n(y),_=n(35),w=n.n(_),O=n(2),j=n(1),E=n.n(j),R=n(63),k=n(26),T=n(748),C=n(754),D=n(24),N=n(747),S=n(101),x=n(79);function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u()(e);if(t){var o=u()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s()(this,n)}}var L=function(e){p()(n,e);var t=P(n);function n(){var e;return o()(this,n),(e=t.call(this)).mountTime=(new Date).getTime(),e}return i()(n,[{key:"renderReview",value:function(e,t){var n=t.lastRead,r=e&&e._embedded&&e._embedded.up&&e._embedded.up[0]||null;if(Object(O.isNull)(r))return null;var o=w()({mixedString:Object(d.sprintf)(Object(d.__)("{{productLink}}%s{{/productLink}} reviewed by {{authorLink}}%s{{/authorLink}}",'woocommerce'),r.name,e.reviewer),components:{productLink:Object(f.createElement)(R.Link,{href:r.permalink,type:"external"}),authorLink:Object(f.createElement)(R.Link,{href:"mailto:"+e.reviewer_email,type:"external"})}}),a=Object(f.createElement)(f.Fragment,null,Object(f.createElement)(R.ReviewRating,{review:e}),e.verified&&Object(f.createElement)("span",{className:"woocommerce-review-activity-card__verified"},Object(f.createElement)(g.a,{icon:"checkmark",size:18}),Object(d.__)("Verified customer",'woocommerce'))),i=Object(O.get)(r,["images",0])||Object(O.get)(r,["image"]),c=h()("woocommerce-review-activity-card__image-overlay__product",{"is-placeholder":!i||!i.src}),s=Object(f.createElement)("div",{className:"woocommerce-review-activity-card__image-overlay"},Object(f.createElement)(R.Gravatar,{user:e.reviewer_email,size:24}),Object(f.createElement)("div",{className:c},Object(f.createElement)(R.ProductImage,{product:r}))),l={date:e.date_created_gmt,status:e.status},u=Object(f.createElement)(v.a,{isDefault:!0,onClick:function(){return Object(x.b)("review_manage_click",l)},href:Object(k.f)("comment.php?action=editcomment&c="+e.id)},Object(d.__)("Manage",'woocommerce'));return Object(f.createElement)(T.a,{className:"woocommerce-review-activity-card",key:e.id,title:o,subtitle:a,date:e.date_created_gmt,icon:s,actions:u,unread:"hold"===e.status||!n||!e.date_created_gmt||new Date(e.date_created_gmt+"Z").getTime()>n},Object(f.createElement)("span",{dangerouslySetInnerHTML:Object(N.a)(e.review)}))}},{key:"renderEmptyMessage",value:function(){var e=this.props.lastApprovedReviewTime,t=Object(d.__)("You have no reviews to moderate",'woocommerce'),n="",r="",o="",a="";if(e){((new Date).getTime()-e)/864e5>30?(n="https://woocommerce.com/posts/reviews-woocommerce-best-practices/",r="_blank",o=Object(d.__)("Learn more",'woocommerce'),a=Object(f.createElement)(f.Fragment,null,Object(f.createElement)("p",null,Object(d.__)("We noticed that it's been a while since your products had any reviews.",'woocommerce')),Object(f.createElement)("p",null,Object(d.__)("Take some time to learn about best practices for collecting and using your reviews.",'woocommerce')))):(n=Object(k.f)("edit-comments.php?comment_type=review"),o=Object(d.__)("View all Reviews",'woocommerce'),a=Object(f.createElement)("p",null,Object(d.__)("Awesome, you've moderated all of your product reviews. How about responding to some of those negative reviews?",'woocommerce')))}else n="https://woocommerce.com/posts/reviews-woocommerce-best-practices/",r="_blank",o=Object(d.__)("Learn more",'woocommerce'),a=Object(f.createElement)(f.Fragment,null,Object(f.createElement)("p",null,Object(d.__)("Your customers haven't started reviewing your products.",'woocommerce')),Object(f.createElement)("p",null,Object(d.__)("Take some time to learn about best practices for collecting and using your reviews.",'woocommerce')));return Object(f.createElement)(T.a,{className:"woocommerce-empty-activity-card",title:t,icon:Object(f.createElement)(g.a,{icon:"time",size:48}),actions:Object(f.createElement)(v.a,{href:n,target:r,isDefault:!0},o)},a)}},{key:"render",value:function(){var e=this,t=this.props,n=t.isError,r=t.isRequesting,o=t.reviews;if(n){var a=Object(d.__)("There was an error getting your reviews. Please try again.",'woocommerce'),i=Object(d.__)("Reload",'woocommerce');return Object(f.createElement)(f.Fragment,null,Object(f.createElement)(R.EmptyContent,{title:a,actionLabel:i,actionURL:null,actionCallback:function(){window.location.reload()}}))}var c=r||o.length?Object(d.__)("Reviews",'woocommerce'):Object(d.__)("No reviews to moderate",'woocommerce');return Object(f.createElement)(f.Fragment,null,Object(f.createElement)(C.a,{title:c}),Object(f.createElement)(R.Section,null,r?Object(f.createElement)(T.b,{className:"woocommerce-review-activity-card",hasAction:!0,hasDate:!0,lines:2}):Object(f.createElement)(f.Fragment,null,o.length?o.map((function(t){return e.renderReview(t,e.props)})):this.renderEmptyMessage())))}}]),n}(f.Component);L.propTypes={reviews:E.a.array.isRequired,isError:E.a.bool,isRequesting:E.a.bool},L.defaultProps={reviews:[],isError:!1,isRequesting:!1},t.default=Object(S.a)((function(e,t){var n=t.hasUnapprovedReviews,r=e("wc-api"),o=r.getReviews,a=r.getReviewsError,i=r.isGetReviewsRequesting,c=[],s=!1,l=!1,u=null;if(n){var m={page:1,per_page:D.d.pageSize,status:"hold",_embed:1};c=o(m),s=Boolean(a(m)),l=i(m)}else{var p={page:1,per_page:1,status:"approved",_embed:1},f=o(p);if(f.length){var d=f[0];if(d.date_created_gmt)u=new Date(d.date_created_gmt).getTime()}s=Boolean(a(p)),l=i(p)}return{reviews:c,isError:s,isRequesting:l,lastApprovedReviewTime:u}}))(L)},909:function(e,t,n){"use strict";n.r(t);var r=n(41),o=n.n(r),a=n(40),i=n.n(a),c=n(44),s=n.n(c),l=n(29),u=n.n(l),m=n(42),p=n.n(m),f=n(0),d=n(3),b=n(256),h=n(66),v=n.n(h),y=n(19),g=n(748),_=n(754),w=n(59),O=n.n(w),j=n(1),E=n.n(j),R=n(888),k=n.n(R),T=n(88),C=n(26);function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u()(e);if(t){var o=u()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s()(this,n)}}var N=function(e){p()(n,e);var t=D(n);function n(e){var r;return o()(this,n),(r=t.call(this,e)).state={inAction:!1},r.handleActionClick=r.handleActionClick.bind(O()(r)),r}return i()(n,[{key:"handleActionClick",value:function(e){var t=this.props,n=t.action,r=t.noteId,o=t.triggerNoteAction,a=e.target.href||"",i=!0;a.length&&!a.startsWith(C.a)&&(e.preventDefault(),i=!1,window.open(a,"_blank")),this.setState({inAction:i},(function(){return o(r,n.id)}))}},{key:"render",value:function(){var e=this.props.action;return Object(f.createElement)(T.a,{isDefault:!0,isPrimary:e.primary,isBusy:this.state.inAction,disabled:this.state.inAction,href:e.url||void 0,onClick:this.handleActionClick},e.label)}}]),n}(f.Component);N.propTypes={noteId:E.a.number,action:E.a.shape({id:E.a.number.isRequired,url:E.a.string,label:E.a.string.isRequired,primary:E.a.bool.isRequired})};var S=Object(b.a)(Object(y.withDispatch)((function(e){return{triggerNoteAction:e("wc-api").triggerNoteAction}})))(N),x=n(747),P=n(10),L=n.n(P),A=n(79);function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u()(e);if(t){var o=u()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s()(this,n)}}var q=function(e){p()(n,e);var t=V(n);function n(e){var r;return o()(this,n),(r=t.call(this,e)).onVisible=r.onVisible.bind(O()(r)),r.hasBeenSeen=!1,r}return i()(n,[{key:"onVisible",value:function(e){if(e&&!this.hasBeenSeen){var t=this.props.note;Object(A.b)("inbox_note_view",{note_content:t.content,note_name:t.name,note_title:t.title,note_type:t.type,note_icon:t.icon}),this.hasBeenSeen=!0}}},{key:"render",value:function(){var e=this.props,t=e.lastRead,n=e.note;return Object(f.createElement)(k.a,{onChange:this.onVisible},Object(f.createElement)(g.a,{className:L()("woocommerce-inbox-activity-card",{actioned:"unactioned"!==n.status}),title:n.title,date:n.date_created,icon:Object(f.createElement)(v.a,{icon:n.icon,size:48}),unread:!t||!n.date_created_gmt||new Date(n.date_created_gmt+"Z").getTime()>t,actions:n.actions?n.actions.map((function(e){return Object(f.createElement)(S,{key:n.id,noteId:n.id,action:e})})):[]},Object(f.createElement)("span",{dangerouslySetInnerHTML:Object(x.a)(n.content)})))}}]),n}(f.Component);q.propTypes={note:E.a.shape({id:E.a.number,status:E.a.string,title:E.a.string,icon:E.a.string,content:E.a.string,date_created:E.a.string,date_created_gmt:E.a.string,actions:E.a.arrayOf(E.a.shape({id:E.a.number.isRequired,url:E.a.string,label:E.a.string.isRequired,primary:E.a.bool.isRequired}))}),lastRead:E.a.number};var z=q,M=n(63),W=n(24),I=n(101);function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u()(e);if(t){var o=u()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s()(this,n)}}var B=function(e){p()(n,e);var t=U(n);function n(e){var r;return o()(this,n),(r=t.call(this,e)).mountTime=Date.now(),r}return i()(n,[{key:"componentWillUnmount",value:function(){var e={activity_panel_inbox_last_read:this.mountTime};this.props.updateCurrentUserData(e)}},{key:"renderEmptyCard",value:function(){return Object(f.createElement)(g.a,{className:"woocommerce-empty-activity-card",title:Object(d.__)("Your inbox is empty",'woocommerce'),icon:Object(f.createElement)(v.a,{icon:"checkmark",size:48})},Object(d.__)("As things begin to happen in your store your inbox will start to fill up. You'll see things like achievements, new feature announcements, extension recommendations and more!",'woocommerce'))}},{key:"renderNotes",value:function(){var e=this.props,t=e.lastRead,n=e.notes;return 0===Object.keys(n).length?this.renderEmptyCard():Object.keys(n).map((function(e){return n[e]})).map((function(e){return Object(f.createElement)(z,{key:e.id,note:e,lastRead:t})}))}},{key:"render",value:function(){var e=this.props,t=e.isError,n=e.isRequesting;if(t){var r=Object(d.__)("There was an error getting your inbox. Please try again.",'woocommerce'),o=Object(d.__)("Reload",'woocommerce');return Object(f.createElement)(f.Fragment,null,Object(f.createElement)(M.EmptyContent,{title:r,actionLabel:o,actionURL:null,actionCallback:function(){window.location.reload()}}))}return Object(f.createElement)(f.Fragment,null,Object(f.createElement)(_.a,{title:Object(d.__)("Inbox",'woocommerce')}),Object(f.createElement)(M.Section,null,n?Object(f.createElement)(g.b,{className:"woocommerce-inbox-activity-card",hasAction:!0,hasDate:!0,lines:2}):this.renderNotes()))}}]),n}(f.Component);t.default=Object(b.a)(Object(I.a)((function(e){var t=e("wc-api"),n=t.getCurrentUserData,r=t.getNotes,o=t.getNotesError,a=t.isGetNotesRequesting,i=n(),c={page:1,per_page:W.d.pageSize,type:"info,warning",orderby:"date",order:"desc",status:"unactioned",_fields:["id","name","title","content","type","icon","status","actions","date_created","date_created_gmt"]};return{notes:r(c),isError:Boolean(o(c)),isRequesting:a(c),lastRead:i.activity_panel_inbox_last_read}})),Object(y.withDispatch)((function(e){return{updateCurrentUserData:e("wc-api").updateCurrentUserData}})))(B)}}]);
