(window.__wcAdmin_webpackJsonp=window.__wcAdmin_webpackJsonp||[]).push([[45],{278:function(e,t,n){"use strict";var r=n(11),a=n(19),c=n(4),o=n.n(c),l=n(0);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}t.a=function(e){var t=e.as,n=void 0===t?"div":t,c=e.className,s=Object(a.a)(e,["as","className"]);return function(e){var t=e.as,n=void 0===t?"div":t,r=Object(a.a)(e,["as"]);return"function"==typeof r.children?r.children(r):Object(l.createElement)(n,r)}(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({as:n,className:o()("components-visually-hidden",c)},s))}},279:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=new WeakMap;function c(e,t){return Object(r.useMemo)((function(){var n=function(e){var t=a.get(e)||0;return a.set(e,t+1),t}(e);return t?"".concat(t,"-").concat(n):n}),[e])}},742:function(e,t,n){"use strict";var r=n(0),a=n(4),c=n.n(a),o=n(278);function l(e){var t=e.id,n=e.label,a=e.hideLabelFromVision,i=e.help,s=e.className,u=e.children;return Object(r.createElement)("div",{className:c()("components-base-control",s)},Object(r.createElement)("div",{className:"components-base-control__field"},n&&t&&(a?Object(r.createElement)(o.a,{as:"label",htmlFor:t},n):Object(r.createElement)("label",{className:"components-base-control__label",htmlFor:t},n)),n&&!t&&(a?Object(r.createElement)(o.a,{as:"label"},n):Object(r.createElement)(l.VisualLabel,null,n)),u),!!i&&Object(r.createElement)("p",{id:t+"__help",className:"components-base-control__help"},i))}l.VisualLabel=function(e){var t=e.className,n=e.children;return t=c()("components-base-control__label",t),Object(r.createElement)("span",{className:t},n)},t.a=l},746:function(e,t,n){"use strict";var r=n(756),a=["a","b","em","i","strong","p"],c=["target","href","rel","name","download"];t.a=function(e){return{__html:Object(r.sanitize)(e,{ALLOWED_TAGS:a,ALLOWED_ATTR:c})}}},760:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(8),a=n(27),c=n(19),o=n(0),l=n(2),i=n(279),s=n(742);function u(e){var t=e.help,n=e.label,m=e.multiple,d=void 0!==m&&m,b=e.onChange,p=e.options,f=void 0===p?[]:p,v=e.className,O=e.hideLabelFromVision,h=Object(c.a)(e,["help","label","multiple","onChange","options","className","hideLabelFromVision"]),j=Object(i.a)(u),_="inspector-select-control-".concat(j);return!Object(l.isEmpty)(f)&&Object(o.createElement)(s.a,{label:n,hideLabelFromVision:O,id:_,help:t,className:v},Object(o.createElement)("select",Object(r.a)({id:_,className:"components-select-control__input",onChange:function(e){if(d){var t=Object(a.a)(e.target.options).filter((function(e){return e.selected})).map((function(e){return e.value}));b(t)}else b(e.target.value)},"aria-describedby":t?"".concat(_,"__help"):void 0,multiple:d},h),f.map((function(e,t){return Object(o.createElement)("option",{key:"".concat(e.label,"-").concat(e.value,"-").concat(t),value:e.value,disabled:e.disabled},e.label)}))))}},788:function(e,t,n){},789:function(e,t,n){"use strict";var r=n(0),a=n(51),c=Object(r.createElement)(a.c,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(r.createElement)(a.b,{d:"M10.6 6L9.4 7l4.6 5-4.6 5 1.2 1 5.4-6z"}));t.a=c},930:function(e,t,n){"use strict";n.r(t);var r=n(13),a=n.n(r),c=n(12),o=n.n(c),l=n(7),i=n.n(l),s=n(14),u=n.n(s),m=n(15),d=n.n(m),b=n(6),p=n.n(b),f=n(0),v=n(3),O=n(90),h=n(760),j=n(95),_=n(4),w=n.n(_),g=n(42),y=n.n(g),E=n(185),N=n(24),A=n(17),x=n.n(A),k=n(452),L=n(51),P=Object(f.createElement)(L.c,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(f.createElement)(L.b,{d:"M14.6 7l-1.2-1L8 12l5.4 6 1.2-1-4.6-5z"})),S=n(789),R=n(55),C=n(28),D=n(104),M=n(36),z=n(746),F=n(1),I=n.n(F);function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d()(this,n)}}var V=function(e){u()(n,e);var t=T(n);function n(){return a()(this,n),t.apply(this,arguments)}return o()(n,[{key:"render",value:function(){var e=this.props.hasMultipleAlerts;return Object(f.createElement)("div",{className:"woocommerce-card woocommerce-store-alerts is-loading","aria-hidden":!0},Object(f.createElement)("div",{className:"woocommerce-card__header"},Object(f.createElement)("div",{className:"woocommerce-card__title woocommerce-card__header-item"},Object(f.createElement)("span",{className:"is-placeholder"})),e&&Object(f.createElement)("div",{className:"woocommerce-card__action woocommerce-card__header-item"},Object(f.createElement)("span",{className:"is-placeholder"}))),Object(f.createElement)("div",{className:"woocommerce-card__body"},Object(f.createElement)("div",{className:"woocommerce-store-alerts__message"},Object(f.createElement)("span",{className:"is-placeholder"}),Object(f.createElement)("span",{className:"is-placeholder"})),Object(f.createElement)("div",{className:"woocommerce-store-alerts__actions"},Object(f.createElement)("span",{className:"is-placeholder"}))))}}]),n}(f.Component),W=V;V.propTypes={hasMultipleAlerts:I.a.bool},V.defaultProps={hasMultipleAlerts:!1};var B=n(63);n(788);function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d()(this,n)}}var J=function(e){u()(n,e);var t=G(n);function n(e){var r;a()(this,n);var c=(r=t.call(this,e)).props.alerts;return r.state={currentIndex:c?0:null},r.previousAlert=r.previousAlert.bind(i()(r)),r.nextAlert=r.nextAlert.bind(i()(r)),r}return o()(n,[{key:"previousAlert",value:function(e){e.stopPropagation();var t=this.state.currentIndex;t>0&&this.setState({currentIndex:t-1})}},{key:"nextAlert",value:function(e){e.stopPropagation();var t=this.props.alerts,n=this.state.currentIndex;n<t.length-1&&this.setState({currentIndex:n+1})}},{key:"renderActions",value:function(e){var t=this.props,n=t.triggerNoteAction,r=t.updateNote,a=e.actions.map((function(t){return Object(f.createElement)(O.a,{key:t.name,isPrimary:t.primary,isSecondary:!t.primary,href:t.url||void 0,onClick:function(){return n(e.id,t.id)}},t.label)})),c=[{value:x()().add(4,"hours").unix().toString(),label:Object(v.__)("Later Today",'woocommerce')},{value:x()().add(1,"day").hour(9).minute(0).second(0).millisecond(0).unix().toString(),label:Object(v.__)("Tomorrow",'woocommerce')},{value:x()().add(1,"week").hour(9).minute(0).second(0).millisecond(0).unix().toString(),label:Object(v.__)("Next Week",'woocommerce')},{value:x()().add(1,"month").hour(9).minute(0).second(0).millisecond(0).unix().toString(),label:Object(v.__)("Next Month",'woocommerce')}],o=e.is_snoozable&&Object(f.createElement)(h.a,{className:"woocommerce-store-alerts__snooze",options:[{label:Object(v.__)("Remind Me Later",'woocommerce'),value:"0"}].concat(c),onChange:function(t){if("0"!==t){var n=c.find((function(e){return e.value===t}));!function(t){r(e.id,{status:"snoozed",date_reminder:t.value});var n={alert_name:e.name,alert_title:e.title,snooze_duration:t.value,snooze_label:t.label};Object(B.b)("store_alert_snooze",n)}({value:t,label:n&&n.label})}}});if(a||o)return Object(f.createElement)("div",{className:"woocommerce-store-alerts__actions"},a,o)}},{key:"render",value:function(){var e=this.props.alerts||[],t=Object(C.g)("alertCount",0,(function(e){return parseInt(e,10)}));if(t>0&&this.props.isLoading)return Object(f.createElement)(W,{hasMultipleAlerts:t>1});if(0===e.length)return null;var n=this.state.currentIndex,r=e.length,a=e[n],c=a.type,o=w()("woocommerce-store-alerts","woocommerce-analytics__card",{"is-alert-error":"error"===c,"is-alert-update":"update"===c});return Object(f.createElement)(R.Card,{title:[a.icon&&Object(f.createElement)(j.a,{key:"icon",icon:a.icon}),Object(f.createElement)(f.Fragment,{key:"title"},a.title)],className:o,action:r>1&&Object(f.createElement)("div",{className:"woocommerce-store-alerts__pagination"},Object(f.createElement)(O.a,{onClick:this.previousAlert,disabled:0===n,label:Object(v.__)("Previous Alert",'woocommerce')},Object(f.createElement)(k.a,{icon:P})),Object(f.createElement)("span",{className:"woocommerce-store-alerts__pagination-label",role:"status","aria-live":"polite"},y()({mixedString:Object(v.__)("{{current /}} of {{total /}}",'woocommerce'),components:{current:Object(f.createElement)(f.Fragment,null,n+1),total:Object(f.createElement)(f.Fragment,null,r)}})),Object(f.createElement)(O.a,{onClick:this.nextAlert,disabled:r-1===n,label:Object(v.__)("Next Alert",'woocommerce')},Object(f.createElement)(k.a,{icon:S.a})))},Object(f.createElement)("div",{className:"woocommerce-store-alerts__message",dangerouslySetInnerHTML:Object(z.a)(a.content)}),this.renderActions(a))}}]),n}(f.Component);t.default=Object(E.a)(Object(D.a)((function(e){var t=e("wc-api"),n=t.getNotes,r=t.isGetNotesRequesting,a={page:1,per_page:M.d.pageSize,type:"error,update",status:"unactioned"};return{alerts:n(a).filter((function(e){return"unactioned"===e.status})),isLoading:r(a)}})),Object(N.withDispatch)((function(e){var t=e("wc-api");return{triggerNoteAction:t.triggerNoteAction,updateNote:t.updateNote}})))(J)}}]);
