(window.__wcAdmin_webpackJsonp=window.__wcAdmin_webpackJsonp||[]).push([[14],{743:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return z}));var o=r(5),c=r.n(o),a=r(17),n=r.n(a),i=r(15),s=r.n(i),l=r(18),m=r.n(l),u=r(19),d=r.n(u),g=r(9),p=r.n(g),b=r(0),y=r(1),_=r.n(y),f=r(3),O=r(55),h=r(764),j=Object(O.applyFilters)("woocommerce_admin_categories_report_charts",[{key:"items_sold",label:Object(f.__)("Items Sold",'woocommerce'),order:"desc",orderby:"items_sold",type:"number"},{key:"net_revenue",label:Object(f.__)("Net Sales",'woocommerce'),order:"desc",orderby:"net_revenue",type:"currency"},{key:"orders_count",label:Object(f.__)("Orders",'woocommerce'),order:"desc",orderby:"orders_count",type:"number"}]),v=Object(O.applyFilters)("woocommerce_admin_categories_report_filters",[{label:Object(f.__)("Show",'woocommerce'),staticParams:["chartType","paged","per_page"],param:"filter",showFilters:function(){return!0},filters:[{label:Object(f.__)("All Categories",'woocommerce'),value:"all"},{label:Object(f.__)("Single Category",'woocommerce'),value:"select_category",chartMode:"item-comparison",subFilters:[{component:"Search",value:"single_category",chartMode:"item-comparison",path:["select_category"],settings:{type:"categories",param:"categories",getLabels:h.a,labels:{placeholder:Object(f.__)("Type to search for a category",'woocommerce'),button:Object(f.__)("Single Category",'woocommerce')}}}]},{label:Object(f.__)("Comparison",'woocommerce'),value:"compare-categories",chartMode:"item-comparison",settings:{type:"categories",param:"categories",getLabels:h.a,labels:{helpText:Object(f.__)("Check at least two categories below to compare",'woocommerce'),placeholder:Object(f.__)("Search for categories to compare",'woocommerce'),title:Object(f.__)("Compare Categories",'woocommerce'),update:Object(f.__)("Compare",'woocommerce')}}}]}]),w=Object(O.applyFilters)("woocommerce_admin_category_report_advanced_filters",{}),C=r(11),S=r.n(C),R=r(277),q=r(20),k=r(2),P=r(32),E=r(77),F=r(298),D=r(35),x=r(796),N=r(771),T=r(762);function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=p()(e);if(t){var c=p()(this).constructor;r=Reflect.construct(o,arguments,c)}else r=o.apply(this,arguments);return d()(this,r)}}var I=function(e){m()(r,e);var t=V(r);function r(e){var o;return n()(this,r),(o=t.call(this,e)).getRowsContent=o.getRowsContent.bind(S()(o)),o.getSummary=o.getSummary.bind(S()(o)),o}return s()(r,[{key:"getHeadersContent",value:function(){return[{label:Object(f.__)("Category",'woocommerce'),key:"category",required:!0,isSortable:!0,isLeftAligned:!0},{label:Object(f.__)("Items Sold",'woocommerce'),key:"items_sold",required:!0,defaultSort:!0,isSortable:!0,isNumeric:!0},{label:Object(f.__)("Net Sales",'woocommerce'),key:"net_revenue",isSortable:!0,isNumeric:!0},{label:Object(f.__)("Products",'woocommerce'),key:"products_count",isSortable:!0,isNumeric:!0},{label:Object(f.__)("Orders",'woocommerce'),key:"orders_count",isSortable:!0,isNumeric:!0}]}},{key:"getRowsContent",value:function(e){var t=this,r=this.context,o=r.render,c=r.formatDecimal,a=(0,r.getCurrencyConfig)();return Object(k.map)(e,(function(e){var r=e.category_id,n=e.items_sold,i=e.net_revenue,s=e.products_count,l=e.orders_count,m=t.props,u=m.categories,d=m.query,g=u.get(r),p=Object(P.getPersistedQuery)(d);return[{display:Object(b.createElement)(x.a,{query:d,category:g,categories:u}),value:g&&g.name},{display:Object(F.formatValue)(a,"number",n),value:n},{display:o(i),value:c(i)},{display:g&&Object(b.createElement)(E.Link,{href:Object(P.getNewPath)(p,"/analytics/categories",{filter:"single_category",categories:g.id}),type:"wc-admin"},Object(F.formatValue)(a,"number",s)),value:s},{display:Object(F.formatValue)(a,"number",l),value:l}]}))}},{key:"getSummary",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e.items_sold,o=void 0===r?0:r,c=e.net_revenue,a=void 0===c?0:c,n=e.orders_count,i=void 0===n?0:n,s=this.context,l=s.formatAmount,m=s.getCurrencyConfig,u=m();return[{label:Object(f._n)("category","categories",t,'woocommerce'),value:Object(F.formatValue)(u,"number",t)},{label:Object(f._n)("item sold","items sold",o,'woocommerce'),value:Object(F.formatValue)(u,"number",o)},{label:Object(f.__)("net sales",'woocommerce'),value:l(a)},{label:Object(f._n)("order","orders",i,'woocommerce'),value:Object(F.formatValue)(u,"number",i)}]}},{key:"render",value:function(){var e=this.props,t=e.advancedFilters,r=e.filters,o=e.isRequesting,c=e.query,a={helpText:Object(f.__)("Check at least two categories below to compare",'woocommerce'),placeholder:Object(f.__)("Search by category name",'woocommerce')};return Object(b.createElement)(N.a,{compareBy:"categories",endpoint:"categories",getHeadersContent:this.getHeadersContent,getRowsContent:this.getRowsContent,getSummary:this.getSummary,summaryFields:["items_sold","net_revenue","orders_count"],isRequesting:o,itemIdField:"category_id",query:c,searchBy:"categories",labels:a,tableQuery:{orderby:c.orderby||"items_sold",order:c.order||"desc",extended_info:!0},title:Object(f.__)("Categories",'woocommerce'),columnPrefsKey:"categories_report_columns",filters:r,advancedFilters:t})}}]),r}(b.Component);I.contextType=T.a;var L=Object(R.a)(Object(q.withSelect)((function(e,t){var r=t.isRequesting,o=t.query;if(r||o.search&&(!o.categories||!o.categories.length))return{};var c=e(D.ITEMS_STORE_NAME),a=c.getItems,n=c.getItemsError,i=c.isResolving,s={per_page:-1};return{categories:a("categories",s),isError:Boolean(n("categories",s)),isRequesting:i("getItems",["categories",s])}})))(I),M=r(768),A=r(766),B=r(769),H=r(795),Q=r(770);function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=p()(e);if(t){var c=p()(this).constructor;r=Reflect.construct(o,arguments,c)}else r=o.apply(this,arguments);return d()(this,r)}}var z=function(e){m()(r,e);var t=K(r);function r(){return n()(this,r),t.apply(this,arguments)}return s()(r,[{key:"getChartMeta",value:function(){var e=this.props.query,t="compare-categories"===e.filter&&e.categories&&e.categories.split(",").length>1,r="single_category"===e.filter&&!!e.categories,o=t||r?"item-comparison":"time-comparison";return{isSingleCategoryView:r,itemsLabel:r?Object(f.__)("%d products",'woocommerce'):Object(f.__)("%d categories",'woocommerce'),mode:o}}},{key:"render",value:function(){var e=this.props,t=e.isRequesting,r=e.query,o=e.path,a=this.getChartMeta(),n=a.mode,i=a.itemsLabel,s=a.isSingleCategoryView,l=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r);return"item-comparison"===n&&(l.segmentby=s?"product":"category"),Object(b.createElement)(b.Fragment,null,Object(b.createElement)(Q.a,{query:r,path:o,filters:v,advancedFilters:w,report:"categories"}),Object(b.createElement)(B.a,{charts:j,endpoint:"products",isRequesting:t,limitProperties:s?["products","categories"]:["categories"],query:l,selectedChart:Object(M.a)(r.chart,j),filters:v,advancedFilters:w,report:"categories"}),Object(b.createElement)(A.a,{charts:j,filters:v,advancedFilters:w,mode:n,endpoint:"products",limitProperties:s?["products","categories"]:["categories"],path:o,query:l,isRequesting:t,itemsLabel:i,selectedChart:Object(M.a)(r.chart,j)}),s?Object(b.createElement)(H.a,{isRequesting:t,query:l,baseSearchQuery:{filter:"single_category"},hideCompare:s,filters:v,advancedFilters:w}):Object(b.createElement)(L,{isRequesting:t,query:r,filters:v,advancedFilters:w}))}}]),r}(b.Component);z.propTypes={query:_.a.object.isRequired,path:_.a.string.isRequired}}}]);