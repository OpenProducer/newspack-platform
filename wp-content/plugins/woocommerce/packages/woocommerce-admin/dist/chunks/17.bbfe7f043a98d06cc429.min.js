(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{730:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return N}));var a=r(15),n=r.n(a),o=r(41),i=r.n(o),c=r(40),s=r.n(c),u=r(44),l=r.n(u),d=r(29),m=r.n(d),p=r(42),f=r.n(p),y=r(0),b=r(1),h=r.n(b),g=r(3),v=r(767),O=r(743),_=r(741),j=r(744),R=r(59),x=r.n(R),w=r(2),q=r(63),k=r(22),C=r(740),D=r(204),T=r(746),S=r(203);function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=m()(e);if(t){var n=m()(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return l()(this,r)}}var E=function(e){f()(r,e);var t=P(r);function r(){var e;return i()(this,r),(e=t.call(this)).getHeadersContent=e.getHeadersContent.bind(x()(e)),e.getRowsContent=e.getRowsContent.bind(x()(e)),e.getSummary=e.getSummary.bind(x()(e)),e}return s()(r,[{key:"getHeadersContent",value:function(){return[{label:Object(g.__)("Tax Code",'woocommerce'),key:"tax_code",required:!0,isLeftAligned:!0,isSortable:!0},{label:Object(g.__)("Rate",'woocommerce'),key:"rate",isSortable:!0,isNumeric:!0},{label:Object(g.__)("Total Tax",'woocommerce'),key:"total_tax",isSortable:!0},{label:Object(g.__)("Order Tax",'woocommerce'),key:"order_tax",isSortable:!0},{label:Object(g.__)("Shipping Tax",'woocommerce'),key:"shipping_tax",isSortable:!0},{label:Object(g.__)("Orders",'woocommerce'),key:"orders_count",required:!0,defaultSort:!0,isSortable:!0,isNumeric:!0}]}},{key:"getRowsContent",value:function(e){var t=this,r=this.context,a=r.render,n=r.formatDecimal,o=r.getCurrency;return Object(w.map)(e,(function(e){var r=t.props.query,i=e.order_tax,c=e.orders_count,s=e.tax_rate,u=e.tax_rate_id,l=e.total_tax,d=e.shipping_tax,m=Object(C.a)(e),p=Object(k.getPersistedQuery)(r),f=Object(k.getNewPath)(p,"/analytics/orders",{filter:"advanced",tax_rate_includes:u});return[{display:Object(y.createElement)(q.Link,{href:f,type:"wc-admin"},m),value:m},{display:s.toFixed(2)+"%",value:s},{display:a(l),value:n(l)},{display:a(i),value:n(i)},{display:a(d),value:n(d)},{display:Object(D.formatValue)(o(),"number",c),value:c}]}))}},{key:"getSummary",value:function(e){var t=e.tax_codes,r=void 0===t?0:t,a=e.total_tax,n=void 0===a?0:a,o=e.order_tax,i=void 0===o?0:o,c=e.shipping_tax,s=void 0===c?0:c,u=e.orders_count,l=void 0===u?0:u,d=this.context,m=d.formatCurrency,p=(0,d.getCurrency)();return[{label:Object(g._n)("tax code","tax codes",r,'woocommerce'),value:Object(D.formatValue)(p,"number",r)},{label:Object(g.__)("total tax",'woocommerce'),value:m(n)},{label:Object(g.__)("order tax",'woocommerce'),value:m(i)},{label:Object(g.__)("shipping tax",'woocommerce'),value:m(s)},{label:Object(g._n)("order","orders",l,'woocommerce'),value:Object(D.formatValue)(p,"number",l)}]}},{key:"render",value:function(){var e=this.props,t=e.advancedFilters,r=e.filters,a=e.isRequesting,n=e.query;return Object(y.createElement)(T.a,{compareBy:"taxes",endpoint:"taxes",getHeadersContent:this.getHeadersContent,getRowsContent:this.getRowsContent,getSummary:this.getSummary,summaryFields:["tax_codes","total_tax","order_tax","shipping_tax","orders_count"],isRequesting:a,itemIdField:"tax_rate_id",query:n,searchBy:"taxes",tableQuery:{orderby:n.orderby||"tax_rate_id"},title:Object(g.__)("Taxes",'woocommerce'),columnPrefsKey:"taxes_report_columns",filters:r,advancedFilters:t})}}]),r}(y.Component);E.contextType=S.a;var F=E,L=r(745);function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=m()(e);if(t){var n=m()(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return l()(this,r)}}var N=function(e){f()(r,e);var t=H(r);function r(){return i()(this,r),t.apply(this,arguments)}return s()(r,[{key:"getChartMeta",value:function(){var e="compare-taxes"===this.props.query.filter?"item-comparison":"time-comparison";return{itemsLabel:Object(g.__)("%d taxes",'woocommerce'),mode:e}}},{key:"render",value:function(){var e=this.props,t=e.isRequesting,r=e.query,a=e.path,o=this.getChartMeta(),i=o.mode,c=o.itemsLabel,s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r);return"item-comparison"===i&&(s.segmentby="tax_rate_id"),Object(y.createElement)(y.Fragment,null,Object(y.createElement)(L.a,{query:r,path:a,filters:v.c,advancedFilters:v.a,report:"taxes"}),Object(y.createElement)(j.a,{charts:v.b,endpoint:"taxes",isRequesting:t,query:s,selectedChart:Object(O.a)(r.chart,v.b),filters:v.c,advancedFilters:v.a}),Object(y.createElement)(_.a,{charts:v.b,filters:v.c,advancedFilters:v.a,mode:i,endpoint:"taxes",query:s,path:a,isRequesting:t,itemsLabel:c,selectedChart:Object(O.a)(r.chart,v.b)}),Object(y.createElement)(F,{isRequesting:t,query:r,filters:v.c,advancedFilters:v.a}))}}]),r}(y.Component);N.propTypes={query:h.a.object.isRequired}},739:function(e,t,r){"use strict";r.d(t,"e",(function(){return l})),r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return m})),r.d(t,"c",(function(){return p})),r.d(t,"d",(function(){return f})),r.d(t,"f",(function(){return y})),r.d(t,"g",(function(){return b}));var a=r(30),n=r(20),o=r.n(n),i=r(2),c=r(22),s=r(740),u=r(24);function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.identity;return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,i="function"==typeof e?e(n):e,s=Object(c.getIdsFromQuery)(r);if(s.length<1)return Promise.resolve([]);var u={include:s.join(","),per_page:s.length};return o()({path:Object(a.addQueryArgs)(i,u)}).then((function(e){return e.map(t)}))}}var d=l(u.c+"/products/categories",(function(e){return{key:e.id,label:e.name}})),m=l(u.c+"/coupons",(function(e){return{key:e.id,label:e.code}})),p=l(u.c+"/customers",(function(e){return{key:e.id,label:e.name}})),f=l(u.c+"/products",(function(e){return{key:e.id,label:e.name}})),y=l(u.c+"/taxes",(function(e){return{key:e.id,label:Object(s.a)(e)}})),b=l((function(e){return u.c+"/products/".concat(e.products,"/variations")}),(function(e){return{key:e.id,label:e.attributes.reduce((function(e,t,r,a){return e+"".concat(t.option).concat(a.length===r+1?"":", ")}),"")}}))},740:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r(3);function n(e){return[e.country,e.state,e.name||Object(a.__)("TAX",'woocommerce'),e.priority].map((function(e){return e.toString().toUpperCase().trim()})).filter(Boolean).join("-")}},741:function(e,t,r){"use strict";var a=r(15),n=r.n(a),o=r(41),i=r.n(o),c=r(40),s=r.n(c),u=r(44),l=r.n(u),d=r(29),m=r.n(d),p=r(42),f=r.n(p),y=r(0),b=r(3),h=r(256),g=r(172),v=r(2),O=r(1),_=r.n(O),j=r(104),R=r(63),x=r(51),w=r(203),q=r(738),k=r(261),C=r(101),D=r(22);function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=m()(e);if(t){var n=m()(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return l()(this,r)}}var E=function(e){f()(r,e);var t=P(r);function r(){return i()(this,r),t.apply(this,arguments)}return s()(r,[{key:"shouldComponentUpdate",value:function(e){return e.isRequesting!==this.props.isRequesting||e.primaryData.isRequesting!==this.props.primaryData.isRequesting||e.secondaryData.isRequesting!==this.props.secondaryData.isRequesting||!Object(v.isEqual)(e.query,this.props.query)}},{key:"getItemChartData",value:function(){var e=this.props,t=e.primaryData,r=e.selectedChart;return t.data.intervals.map((function(e){var t={};return e.subtotals.segments.forEach((function(e){if(e.segment_label){var a=t[e.segment_label]?e.segment_label+" (#"+e.segment_id+")":e.segment_label;t[e.segment_id]={label:a,value:e.subtotals[r.key]||0}}})),S({date:Object(g.a)("Y-m-d\\TH:i:s",e.date_start)},t)}))}},{key:"getTimeChartData",value:function(){var e=this.props,t=e.query,r=e.primaryData,a=e.secondaryData,n=e.selectedChart,o=e.defaultDateRange,i=Object(j.i)(t),c=Object(j.f)(t,o),s=c.primary,u=c.secondary;return r.data.intervals.map((function(e,r){var o=Object(j.j)(e.date_start,s.after,u.after,t.compare,i),c=a.data.intervals[r];return{date:Object(g.a)("Y-m-d\\TH:i:s",e.date_start),primary:{label:"".concat(s.label," (").concat(s.range,")"),labelDate:e.date_start,value:e.subtotals[n.key]||0},secondary:{label:"".concat(u.label," (").concat(u.range,")"),labelDate:o.format("YYYY-MM-DD HH:mm:ss"),value:c&&c.subtotals[n.key]||0}}}))}},{key:"getTimeChartTotals",value:function(){var e=this.props,t=e.primaryData,r=e.secondaryData,a=e.selectedChart;return{primary:Object(v.get)(t,["data","totals",a.key],null),secondary:Object(v.get)(r,["data","totals",a.key],null)}}},{key:"renderChart",value:function(e,t,r,a){var n=this.props,o=n.emptySearchResults,i=n.filterParam,c=n.interactiveLegend,s=n.itemsLabel,u=n.legendPosition,l=n.path,d=n.query,m=n.selectedChart,p=n.showHeaderControls,f=n.primaryData,h=Object(j.i)(d),g=Object(j.d)(d),v=Object(j.g)(h,f.data.intervals.length),O=o?Object(b.__)("No data for the current search",'woocommerce'):Object(b.__)("No data for the selected date range",'woocommerce'),_=this.context,x=_.formatCurrency,w=_.getCurrency;return Object(y.createElement)(R.Chart,{allowedIntervals:g,data:r,dateParser:"%Y-%m-%dT%H:%M:%S",emptyMessage:O,filterParam:i,interactiveLegend:c,interval:h,isRequesting:t,itemsLabel:s,legendPosition:u,legendTotals:a,mode:e,path:l,query:d,screenReaderFormat:v.screenReaderFormat,showHeaderControls:p,title:m.label,tooltipLabelFormat:v.tooltipLabelFormat,tooltipTitle:"time-comparison"===e&&m.label||null,tooltipValueFormat:Object(q.e)(m.type,x),chartType:Object(j.e)(d),valueType:m.type,xFormat:v.xFormat,x2Format:v.x2Format,currency:w()})}},{key:"renderItemComparison",value:function(){var e=this.props,t=e.isRequesting,r=e.primaryData;if(r.isError)return Object(y.createElement)(k.a,{isError:!0});var a=t||r.isRequesting,n=this.getItemChartData();return this.renderChart("item-comparison",a,n)}},{key:"renderTimeComparison",value:function(){var e=this.props,t=e.isRequesting,r=e.primaryData,a=e.secondaryData;if(!r||r.isError||a.isError)return Object(y.createElement)(k.a,{isError:!0});var n=t||r.isRequesting||a.isRequesting,o=this.getTimeChartData(),i=this.getTimeChartTotals();return this.renderChart("time-comparison",n,o,i)}},{key:"render",value:function(){return"item-comparison"===this.props.mode?this.renderItemComparison():this.renderTimeComparison()}}]),r}(y.Component);E.contextType=w.a,E.propTypes={filters:_.a.array,isRequesting:_.a.bool,itemsLabel:_.a.string,limitProperties:_.a.array,mode:_.a.string,path:_.a.string.isRequired,primaryData:_.a.object,query:_.a.object.isRequired,secondaryData:_.a.object,selectedChart:_.a.shape({key:_.a.string.isRequired,label:_.a.string.isRequired,order:_.a.oneOf(["asc","desc"]),orderby:_.a.string,type:_.a.oneOf(["average","number","currency"]).isRequired}).isRequired},E.defaultProps={isRequesting:!1,primaryData:{data:{intervals:[]},isError:!1,isRequesting:!1},secondaryData:{data:{intervals:[]},isError:!1,isRequesting:!1}};t.a=Object(h.a)(Object(C.a)((function(e,t){var r=t.charts,a=t.endpoint,n=t.filters,o=t.isRequesting,i=t.limitProperties,c=t.query,s=t.advancedFilters,u=i||[a],l=function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t||0===t.length)return null;var n=t.slice(0),o=n.pop();if(o.showFilters(r,a)){var i=Object(D.flattenFilters)(o.filters),c=r[o.param]||o.defaultValue||"all";return Object(v.find)(i,{value:c})}return e(n,r,a)}(n,c),d=Object(v.get)(l,["settings","param"]),m=t.mode||function(e,t){if(e&&t){var r=Object(v.get)(e,["settings","param"]);if(!r||Object.keys(t).includes(r))return Object(v.get)(e,["chartMode"])}return null}(l,c)||"time-comparison",p=e(x.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings").woocommerce_default_date_range,f={mode:m,filterParam:d,defaultDateRange:p};if(o)return f;var y=u.some((function(e){return c[e]&&c[e].length}));if(c.search&&!y)return S({},f,{emptySearchResults:!0});var b=r&&r.map((function(e){return e.key})),h=Object(q.a)({endpoint:a,dataType:"primary",query:c,select:e,limitBy:u,filters:n,advancedFilters:s,defaultDateRange:p,fields:b});return S({},f,"item-comparison"===m?{primaryData:h}:{primaryData:h,secondaryData:Object(q.a)({endpoint:a,dataType:"secondary",query:c,select:e,limitBy:u,filters:n,advancedFilters:s,defaultDateRange:p,fields:b})})})))(E)},743:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r(2);function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Object(a.find)(t,{key:e});return r||t[0]}},744:function(e,t,r){"use strict";var a=r(41),n=r.n(a),o=r(40),i=r.n(o),c=r(44),s=r.n(c),u=r(29),l=r.n(u),d=r(42),m=r.n(d),p=r(0),f=r(3),y=r(256),b=r(1),h=r.n(b),g=r(104),v=r(22),O=r(63),_=r(204),j=r(51),R=r(738),x=r(261),w=r(101),q=r(79),k=r(203);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=l()(e);if(t){var n=l()(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return s()(this,r)}}var D=function(e){m()(r,e);var t=C(r);function r(){return n()(this,r),t.apply(this,arguments)}return i()(r,[{key:"formatVal",value:function(e,t){var r=this.context,a=r.formatCurrency,n=r.getCurrency;return"currency"===t?a(e):Object(_.formatValue)(n(),t,e)}},{key:"getValues",value:function(e,t){var r=this.props,a=r.emptySearchResults,n=r.summaryData.totals,o=a?0:n.primary[e],i=a?0:n.secondary[e];return{delta:Object(_.calculateDelta)(o,i),prevValue:this.formatVal(i,t),value:this.formatVal(o,t)}}},{key:"render",value:function(){var e=this,t=this.props,r=t.charts,a=t.isRequesting,n=t.query,o=t.selectedChart,i=t.summaryData,c=t.endpoint,s=t.report,u=t.defaultDateRange,l=i.isError,d=i.isRequesting;if(l)return Object(p.createElement)(x.a,{isError:!0});if(a||d)return Object(p.createElement)(O.SummaryListPlaceholder,{numberOfItems:r.length});var m=Object(g.h)(n,u).compare;return Object(p.createElement)(O.SummaryList,null,(function(t){var a=t.onToggle;return r.map((function(t){var r=t.key,n=t.order,i=t.orderby,u=t.label,l=t.type,d={chart:r};i&&(d.orderby=i),n&&(d.order=n);var y=Object(v.getNewPath)(d),b=o.key===r,h=e.getValues(r,l),g=h.delta,_=h.prevValue,j=h.value;return Object(p.createElement)(O.SummaryNumber,{key:r,delta:g,href:y,label:u,prevLabel:"previous_period"===m?Object(f.__)("Previous Period:",'woocommerce'):Object(f.__)("Previous Year:",'woocommerce'),prevValue:_,selected:b,value:j,onLinkClickCallback:function(){a&&a(),Object(q.b)("analytics_chart_tab_click",{report:s||c,key:r})}})}))}))}}]),r}(p.Component);D.propTypes={charts:h.a.array.isRequired,endpoint:h.a.string.isRequired,limitProperties:h.a.array,query:h.a.object.isRequired,isRequesting:h.a.bool,selectedChart:h.a.shape({key:h.a.string.isRequired,label:h.a.string.isRequired,order:h.a.oneOf(["asc","desc"]),orderby:h.a.string,type:h.a.oneOf(["average","number","currency"]).isRequired}).isRequired,summaryData:h.a.object,report:h.a.string},D.defaultProps={summaryData:{totals:{primary:{},secondary:{}},isError:!1,isRequesting:!1}},D.contextType=k.a,t.a=Object(y.a)(Object(w.a)((function(e,t){var r=t.charts,a=t.endpoint,n=t.isRequesting,o=t.limitProperties,i=t.query,c=t.filters,s=t.advancedFilters,u=o||[a];if(n)return{};var l=u.some((function(e){return i[e]&&i[e].length}));if(i.search&&!l)return{emptySearchResults:!0};var d=r&&r.map((function(e){return e.key})),m=e(j.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings").woocommerce_default_date_range;return{summaryData:Object(R.d)({endpoint:a,query:i,select:e,limitBy:u,filters:c,advancedFilters:s,defaultDateRange:m,fields:d}),defaultDateRange:m}})))(D)},767:function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return u})),r.d(t,"a",(function(){return l}));var a=r(3),n=r(48),o=r(739),i=r(740),c=r(24),s=Object(n.applyFilters)("woocommerce_admin_taxes_report_charts",[{key:"total_tax",label:Object(a.__)("Total Tax",'woocommerce'),order:"desc",orderby:"total_tax",type:"currency"},{key:"order_tax",label:Object(a.__)("Order Tax",'woocommerce'),order:"desc",orderby:"order_tax",type:"currency"},{key:"shipping_tax",label:Object(a.__)("Shipping Tax",'woocommerce'),order:"desc",orderby:"shipping_tax",type:"currency"},{key:"orders_count",label:Object(a.__)("Orders",'woocommerce'),order:"desc",orderby:"orders_count",type:"number"}]),u=Object(n.applyFilters)("woocommerce_admin_taxes_report_filters",[{label:Object(a.__)("Show",'woocommerce'),staticParams:["chart"],param:"filter",showFilters:function(){return!0},filters:[{label:Object(a.__)("All Taxes",'woocommerce'),value:"all"},{label:Object(a.__)("Comparison",'woocommerce'),value:"compare-taxes",chartMode:"item-comparison",settings:{type:"taxes",param:"taxes",getLabels:Object(o.e)(c.c+"/taxes",(function(e){return{id:e.id,label:Object(i.a)(e)}})),labels:{helpText:Object(a.__)("Check at least two tax codes below to compare",'woocommerce'),placeholder:Object(a.__)("Search for tax codes to compare",'woocommerce'),title:Object(a.__)("Compare Tax Codes",'woocommerce'),update:Object(a.__)("Compare",'woocommerce')}}}]}]),l=Object(n.applyFilters)("woocommerce_admin_taxes_report_advanced_filters",{})}}]);
