this.wc=this.wc||{},this.wc.data=function(t){var e={};function r(n){if(e[n])return e[n].exports;var u=e[n]={i:n,l:!1,exports:{}};return t[n].call(u.exports,u,u.exports,r),u.l=!0,u.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var u in t)r.d(n,u,function(e){return t[e]}.bind(null,u));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=833)}({0:function(t,e){!function(){t.exports=this.wp.element}()},25:function(t,e){!function(){t.exports=this.wp.data}()},26:function(t,e,r){"use strict";function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,"a",(function(){return n}))},3:function(t,e){!function(){t.exports=this.lodash}()},31:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(50);var u=r(62);function o(t){return function(t){if(Array.isArray(t))return Object(n.a)(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(u.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},50:function(t,e,r){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r.d(e,"a",(function(){return n}))},62:function(t,e,r){"use strict";r.d(e,"a",(function(){return u}));var n=r(50);function u(t,e){if(t){if("string"==typeof t)return Object(n.a)(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(n.a)(t,e):void 0}}},69:function(t,e){!function(){t.exports=this.wp.dataControls}()},833:function(t,e,r){"use strict";r.r(e),r.d(e,"SETTINGS_STORE_NAME",(function(){return M})),r.d(e,"withSettingsHydration",(function(){return Q})),r.d(e,"useSettings",(function(){return H}));var n={};r.r(n),r.d(n,"getSettingsGroupNames",(function(){return g})),r.d(n,"getSettings",(function(){return d})),r.d(n,"getDirtyKeys",(function(){return l})),r.d(n,"getIsDirty",(function(){return b})),r.d(n,"getSettingsForGroup",(function(){return O})),r.d(n,"isGetSettingsRequesting",(function(){return S})),r.d(n,"getSetting",(function(){return y})),r.d(n,"getLastSettingsErrorForGroup",(function(){return v})),r.d(n,"getSettingsError",(function(){return R}));var u={};r.r(u),r.d(u,"updateSettingsForGroup",(function(){return m})),r.d(u,"updateErrorForGroup",(function(){return T})),r.d(u,"setIsRequesting",(function(){return P})),r.d(u,"clearIsDirty",(function(){return w})),r.d(u,"updateAndPersistSettingsForGroup",(function(){return G})),r.d(u,"persistSettingsForGroup",(function(){return I})),r.d(u,"clearSettings",(function(){return D}));var o={};r.r(o),r.d(o,"getSettings",(function(){return U})),r.d(o,"getSettingsForGroup",(function(){return k}));var i=r(25),c=r(69),a="wc/admin/settings",s=r(31);function f(t,e){var r=JSON.stringify(e,Object.keys(e).sort());return"".concat(t,":").concat(r)}function p(t){var e=t.indexOf(":");return e<0?t:t.substring(0,e)}var g=function(t){var e=new Set(Object.keys(t).map((function(t){return p(t)})));return Object(s.a)(e)},d=function(t,e){var r={},n=t[e]&&t[e].data||[];return 0===n.length||n.forEach((function(n){r[n]=t[f(e,n)].data})),r},l=function(t,e){return t[e].dirty||[]},b=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=l(t,e);return 0!==n.length&&r.some((function(t){return n.includes(t)}))},O=function(t,e,r){var n=d(t,e);return r.reduce((function(t,e){return t[e]=n[e]||{},t}),{})},S=function(t,e){return t[e]&&Boolean(t[e].isRequesting)};function y(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(t){return t},o=f(e,r),i=t[o]&&t[o].data||n;return u(i,n)}var v=function(t,e){var r=t[e].data;return 0===r.length?t[e].error:Object(s.a)(r).pop().error},R=function(t,e,r){return r?t[f(e,r)].error||!1:t[e]&&t[e].error||!1},j=r(3),E={UPDATE_SETTINGS_FOR_GROUP:"UPDATE_SETTINGS_FOR_GROUP",UPDATE_ERROR_FOR_GROUP:"UPDATE_ERROR_FOR_GROUP",CLEAR_SETTINGS:"CLEAR_SETTINGS",SET_IS_REQUESTING:"SET_IS_REQUESTING",CLEAR_IS_DIRTY:"CLEAR_IS_DIRTY"},h=regeneratorRuntime.mark(G),_=regeneratorRuntime.mark(I);function m(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;return{type:E.UPDATE_SETTINGS_FOR_GROUP,group:t,data:e,time:r}}function T(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Date;return{type:E.UPDATE_ERROR_FOR_GROUP,group:t,data:e,error:r,time:n}}function P(t,e){return{type:E.SET_IS_REQUESTING,group:t,isRequesting:e}}function w(t){return{type:E.CLEAR_IS_DIRTY,group:t}}function G(t,e){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,m(t,e);case 2:return r.delegateYield(I(t),"t0",3);case 3:case"end":return r.stop()}}),h)}function I(t){var e,r,n,u;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,P(t,!0);case 2:return o.next=4,Object(c.select)(a,"getDirtyKeys",t);case 4:if(0!==(e=o.sent).length){o.next=9;break}return o.next=8,P(t,!1);case 8:return o.abrupt("return");case 9:return o.next=11,Object(c.select)(a,"getSettingsForGroup",t,e);case 11:return r=o.sent,n="".concat("/wc-analytics","/settings/").concat(t,"/batch"),u=e.reduce((function(t,e){var n=Object.keys(r[e]).map((function(t){return{id:t,value:r[e][t]}}));return Object(j.concat)(t,n)}),[]),o.prev=14,o.next=17,Object(c.apiFetch)({path:n,method:"POST",data:{update:u}});case 17:if(o.sent){o.next=20;break}throw new Error("settings did not update");case 20:return o.next=22,w(t);case 22:o.next=28;break;case 24:return o.prev=24,o.t0=o.catch(14),o.next=28,T(t,null,o.t0);case 28:return o.next=30,P(t,!1);case 30:case"end":return o.stop()}}),_,null,[[14,24]])}function D(){return{type:E.CLEAR_SETTINGS}}var x=r(26),A=regeneratorRuntime.mark(U),F=regeneratorRuntime.mark(k);function U(t){var e,r,n;return regeneratorRuntime.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Object(c.dispatch)(a,"setIsRequesting",t,!0);case 2:return u.prev=2,e="/wc-analytics/settings/"+t,u.next=6,Object(c.apiFetch)({path:e,method:"GET"});case 6:return r=u.sent,n=r.reduce((function(t,e){return t[e.id]=e.value,t}),{}),u.abrupt("return",m(t,Object(x.a)({},t,n)));case 11:return u.prev=11,u.t0=u.catch(2),u.abrupt("return",T(t,null,u.t0.message));case 14:case"end":return u.stop()}}),A,null,[[2,11]])}function k(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U(t));case 1:case"end":return e.stop()}}),F)}function N(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function q(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?N(Object(r),!0).forEach((function(e){Object(x.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var C=function(t,e){var r=e.group,n=e.groupIds,u=e.data,o=e.time,i=e.error;return n.forEach((function(e){t[f(r,e)]={data:u[e],lastReceived:o,error:i}})),t},L=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,r=e.type,n=e.group,u=e.data,o=e.error,i=e.time,c=e.isRequesting,a={};switch(r){case E.SET_IS_REQUESTING:t=q({},t,Object(x.a)({},n,q({},t[n],{isRequesting:c})));break;case E.CLEAR_IS_DIRTY:t=q({},t,Object(x.a)({},n,q({},t[n],{dirty:[]})));break;case E.UPDATE_SETTINGS_FOR_GROUP:case E.UPDATE_ERROR_FOR_GROUP:var f=u?Object.keys(u):[];t=null===u?q({},t,Object(x.a)({},n,{data:t[n]?t[n].data:[],error:o,lastReceived:i})):q({},t,Object(x.a)({},n,{data:t[n]&&t[n].data?[].concat(Object(s.a)(t[n].data),Object(s.a)(f)):f,error:o,lastReceived:i,isRequesting:!1,dirty:t[n]&&t[n].dirty?Object(j.union)(t[n].dirty,f):f}),C(a,{group:n,groupIds:f,data:u,time:i,error:o}));break;case E.CLEAR_SETTINGS:t={}}return t};Object(i.registerStore)(a,{reducer:L,actions:u,controls:c.controls,selectors:n,resolvers:o});var M=a,Y=r(0),Q=function(t,e){return function(r){return function(n){var u=Object(Y.useRef)(e);return Object(i.useSelect)((function(e,r){if(u.current){var n=e(a),o=n.isResolving,i=n.hasFinishedResolution,c=r.dispatch(a),s=c.startResolution,f=c.finishResolution,p=c.updateSettingsForGroup,g=c.clearIsDirty;o("getSettings",[t])||i("getSettings",[t])||(s("getSettings",[t]),p(t,u.current),g(t),f("getSettings",[t]))}}),[]),Object(Y.createElement)(r,n)}}};function B(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function K(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?B(Object(r),!0).forEach((function(e){Object(x.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var H=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Object(i.useSelect)((function(r){var n=r(a),u=n.getLastSettingsErrorForGroup,o=n.getSettingsForGroup,i=n.getIsDirty,c=n.isGetSettingsRequesting;return{requestedSettings:o(t,e),settingsError:Boolean(u(t)),isRequesting:c(t),isDirty:i(t,e)}}),[t,e]),n=r.requestedSettings,u=r.settingsError,o=r.isRequesting,c=r.isDirty,s=Object(i.useDispatch)(a),f=s.persistSettingsForGroup,p=s.updateAndPersistSettingsForGroup,g=s.updateSettingsForGroup,d=Object(Y.useCallback)((function(e,r){g(t,Object(x.a)({},e,r))}),[t]),l=Object(Y.useCallback)((function(){f(t)}),[t]),b=Object(Y.useCallback)((function(e,r){p(t,Object(x.a)({},e,r))}),[t]);return K({settingsError:u,isRequesting:o,isDirty:c},n,{persistSettings:l,updateAndPersistSettings:b,updateSettings:d})}}});
