var tribe_logger_admin=tribe_logger_admin||{},tribe_logger_data=tribe_logger_data||{};!function(e,t){var r=!1,n="",a="",o=!1,i=e("#tribe-log-controls"),l=i.find("select"),d=i.find(".working"),g=e("#tribe-log-viewer"),c=e("a.download_log");function s(t){v(),e.isArray(t.data.entries)&&(g.html(function(e){var t="<table>";for(var r in e){for(var n in t+="<tr>",e[r])t+="<td>"+e[r][n]+"</td>";t+="</tr>"}return t+"</table>"}(t.data.entries)),f())}function f(){if(!(1>c.length)){var t=c.attr("href"),r=encodeURI(_()),n=t.match(/&log=([a-z0-9\-]+)/i);t=e.isArray(n)&&2===n.length?t.replace(n[0],"&log="+r):t.indexOf("?")?t+"&log="+r:t+"?log="+r,c.attr("href",t)}}function u(){v()}function v(){r=!1,l.prop("disabled",!1),d.addClass("hidden")}function _(){return e("#log-selector").find(":selected").attr("name")}function b(){return e("#log-engine").find(":selected").attr("name")}n=_(),a=b(),f(),l.change(function(){var t,i;r||(t=_(),i=b(),t!==n||i!==a?(o=!0,n=t,a=i):o=!1,r=!0,l.prop("disabled",!0),d.removeClass("hidden"),g={action:"tribe_logging_controls",check:tribe_logger_data.check,"log-level":e("#log-level").find(":selected").attr("name"),"log-engine":e("#log-engine").find(":selected").attr("name")},o&&(g["log-view"]=n),e.ajax(ajaxurl,{method:"POST",success:s,error:u,dataType:"json",data:g}));var g})}(jQuery);