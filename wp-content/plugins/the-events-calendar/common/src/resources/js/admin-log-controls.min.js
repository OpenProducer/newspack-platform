var tribe_logger_admin=tribe_logger_admin||{},tribe_logger_data=tribe_logger_data||{};!function(e,r){var t=!1,n="",a="",o=!1,i=e("#tribe-log-controls"),l=i.find("select"),d=i.find(".working"),g=e("#tribe-log-viewer"),c=e("a.download_log");function s(e){v(),Array.isArray(e.data.entries)&&(g.html(function(e){var r="<table>";for(var t in e){for(var n in r+="<tr>",e[t])r+="<td>"+e[t][n]+"</td>";r+="</tr>"}return r+"</table>"}(e.data.entries)),f())}function f(){if(!(1>c.length)){var e=c.attr("href"),r=encodeURI(_()),t=e.match(/&log=([a-z0-9\-]+)/i);e=Array.isArray(t)&&2===t.length?e.replace(t[0],"&log="+r):e.indexOf("?")?e+"&log="+r:e+"?log="+r,c.attr("href",e)}}function u(){v()}function v(){t=!1,l.prop("disabled",!1),d.addClass("hidden")}function _(){return e("#log-selector").find(":selected").attr("name")}function b(){return e("#log-engine").find(":selected").attr("name")}n=_(),a=b(),f(),l.on("change",function(){var r,i;t||(r=_(),i=b(),r!==n||i!==a?(o=!0,n=r,a=i):o=!1,t=!0,l.prop("disabled",!0),d.removeClass("hidden"),g={action:"tribe_logging_controls",check:tribe_logger_data.check,"log-level":e("#log-level").find(":selected").attr("name"),"log-engine":e("#log-engine").find(":selected").attr("name")},o&&(g["log-view"]=n),e.ajax(ajaxurl,{method:"POST",success:s,error:u,dataType:"json",data:g}));var g})}(jQuery);