(()=>{var e={4184:(e,t)=>{var n;
/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var r={}.hasOwnProperty;function l(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var s=typeof n;if("string"===s||"number"===s)e.push(n);else if(Array.isArray(n)){if(n.length){var a=l.apply(null,n);a&&e.push(a)}}else if("object"===s)if(n.toString===Object.prototype.toString)for(var o in n)r.call(n,o)&&n[o]&&e.push(o);else e.push(n.toString())}}return e.join(" ")}e.exports?(l.default=l,e.exports=l):void 0===(n=function(){return l}.apply(t,[]))||(e.exports=n)}()},6531:(e,t,n)=>{"use strict";n.r(t),n.d(t,{blocks:()=>S});var r={};function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n.r(r),n.d(r,{metadata:()=>k,name:()=>O,settings:()=>j});const a=window.wp.blocks,o=window.wp.element,i=window.wp.primitives,c=(0,o.createElement)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(i.Path,{fillRule:"evenodd",d:"M6 5.5h12a.5.5 0 01.5.5v7H14a2 2 0 11-4 0H5.5V6a.5.5 0 01.5-.5zm-.5 9V18a.5.5 0 00.5.5h12a.5.5 0 00.5-.5v-3.5h-3.337a3.5 3.5 0 01-6.326 0H5.5zM4 13V6a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2v-5z",clipRule:"evenodd"}));function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,s=[],_n=!0,a=!1;try{for(n=n.call(e);!(_n=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);_n=!0);}catch(o){a=!0,l=o}finally{try{_n||null==n.return||n.return()}finally{if(a)throw l}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var m=n(4184),f=n.n(m);const d=window.lodash,b=window.wp.apiFetch;var w=n.n(b);const y=window.wp.i18n,v=window.wp.components,g=window.wp.blockEditor;var __=y.__,h=function(e){return"newspack-newsletters-list-checkbox-"+e},E=window.newspack_newsletters_blocks.settings_url;const k=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"newspack-newsletters/subscribe","title":"Newsletter Subscription Form","category":"newspack","description":"Subscribe an email to a newsletter list.","textdomain":"newspack-newsletters","attributes":{"placeholder":{"type":"string","default":"Enter your email address"},"label":{"type":"string","default":"Subscribe"},"displayDescription":{"type":"boolean","default":true},"lists":{"type":"array","default":[],"items":{"type":"string"}}},"supports":{"html":false,"align":true}}');for(var O=k.name,j={icon:{src:c,foreground:"#36f"},edit:function(e){var t=e.setAttributes,n=e.attributes,r=n.placeholder,l=n.label,s=n.lists,a=n.displayDescription,i=(0,g.useBlockProps)(),c=p((0,o.useState)(!1),2),u=c[0],m=c[1],b=p((0,o.useState)({}),2),y=b[0],k=b[1];return(0,o.useEffect)((function(){m(!0),w()({path:"/newspack-newsletters/v1/lists_config"}).then(k).finally((function(){return m(!1)}))}),[]),(0,o.useEffect)((function(){var e=Object.keys(y);!e.length||s.length&&(0,d.intersection)(s,e).length||t({lists:[Object.keys(y)[0]]})}),[y]),(0,o.createElement)(o.Fragment,null,(0,o.createElement)(g.InspectorControls,null,(0,o.createElement)(v.PanelBody,{title:__("Form settings","newspack-newsletters")},(0,o.createElement)(v.TextControl,{label:__("Input placeholder","newspack-newsletters"),value:r,onChange:function(e){return t({placeholder:e})}}),(0,o.createElement)(v.TextControl,{label:__("Button label","newspack-newsletters"),value:l,onChange:function(e){return t({label:e})}}),s.length>1&&(0,o.createElement)(v.ToggleControl,{label:__("Display list description","newspack-newsletters"),checked:a,onChange:function(){return t({displayDescription:!a})}})),(0,o.createElement)(v.PanelBody,{title:__("Subscription Lists","newspack-newsletters")},u&&(0,o.createElement)(v.Spinner,null),!u&&!Object.keys(y).length&&(0,o.createElement)("div",{style:{marginBottom:"1.5rem"}},(0,o.createElement)(v.Notice,{isDismissible:!1,status:"error"},__("You must enable lists for subscription.","newspack-newsletters"))),s.length<1&&(0,o.createElement)("div",{style:{marginBottom:"1.5rem"}},(0,o.createElement)(v.Notice,{isDismissible:!1,status:"error"},__("You must select at least one list.","newspack-newsletters"))),Object.keys(y).map((function(e){return(0,o.createElement)(v.ToggleControl,{key:e,label:y[e].title,checked:s.includes(e),onChange:function(){s.includes(e)?t({lists:s.filter((function(t){return t!==e}))}):t({lists:s.concat(e)})}})})),(0,o.createElement)("p",null,(0,o.createElement)("a",{href:E},__("Manage your subscription lists","newspack-newsletters"))))),(0,o.createElement)("div",i,u?(0,o.createElement)(v.Spinner,null):(0,o.createElement)("div",{className:f()({"newspack-newsletters-subscribe":!0,"multiple-lists":s.length>1})},(0,o.createElement)("form",{onSubmit:function(e){return e.preventDefault()}},(0,o.createElement)("div",{className:"newspack-newsletters-email-input"},(0,o.createElement)("input",{type:"email",placeholder:r})),s.length>1&&(0,o.createElement)("ul",{className:"newspack-newsletters-lists"},s.map((function(e){var t,n;return(0,o.createElement)("li",{key:e},(0,o.createElement)("span",{className:"list-checkbox"},(0,o.createElement)("input",{id:h(e),type:"checkbox",checked:!0,readOnly:!0})),(0,o.createElement)("span",{className:"list-details"},(0,o.createElement)("label",{htmlFor:h(e)},(0,o.createElement)("span",{className:"list-title"},null===(t=y[e])||void 0===t?void 0:t.title),a&&(0,o.createElement)("span",{className:"list-description"},null===(n=y[e])||void 0===n?void 0:n.description))))}))),(0,o.createElement)("input",{type:"submit",value:l})))))}},S=[r],P=function(e){if(e){var t=e.metadata,n=e.settings,r=e.name;(0,a.registerBlockType)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:r},t),n)}},x=0,_=S;x<_.length;x++){P(_[x])}}},t={};function n(r){var l=t[r];if(void 0!==l)return l.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r=n(6531),l=window;for(var s in r)l[s]=r[s];r.__esModule&&Object.defineProperty(l,"__esModule",{value:!0})})();