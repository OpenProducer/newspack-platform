(()=>{var e={2:(e,t,n)=>{var r=n(2199),o=n(4664),s=n(5950);e.exports=function(e){return r(e,s,o)}},79:(e,t,n)=>{var r=n(3702),o=n(80),s=n(4739),a=n(8655),i=n(1175);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=s,c.prototype.has=a,c.prototype.set=i,e.exports=c},80:(e,t,n)=>{var r=n(6025),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():o.call(t,n,1),--this.size,0))}},104:(e,t,n)=>{var r=n(3661);function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],s=n.cache;if(s.has(o))return s.get(o);var a=e.apply(this,r);return n.cache=s.set(o,a)||s,a};return n.cache=new(o.Cache||r),n}o.Cache=r,e.exports=o},124:(e,t,n)=>{var r=n(9325);e.exports=function(){return r.Date.now()}},181:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},270:(e,t,n)=>{var r=n(7068),o=n(346);e.exports=function e(t,n,s,a,i){return t===n||(null==t||null==n||!o(t)&&!o(n)?t!=t&&n!=n:r(t,n,s,a,e,i))}},289:(e,t,n)=>{var r=n(2651);e.exports=function(e){return r(this,e).get(e)}},294:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},317:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}},346:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},361:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},392:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},583:(e,t,n)=>{var r=n(7237),o=n(7255),s=n(8586),a=n(7797);e.exports=function(e){return s(e)?r(a(e)):o(e)}},631:(e,t,n)=>{var r=n(8077),o=n(9326);e.exports=function(e,t){return null!=e&&o(e,t,r)}},641:(e,t,n)=>{var r=n(6649),o=n(5950);e.exports=function(e,t){return e&&r(e,t,o)}},659:(e,t,n)=>{var r=n(1873),o=Object.prototype,s=o.hasOwnProperty,a=o.toString,i=r?r.toStringTag:void 0;e.exports=function(e){var t=s.call(e,i),n=e[i];try{e[i]=void 0;var r=!0}catch(e){}var o=a.call(e);return r&&(t?e[i]=n:delete e[i]),o}},689:(e,t,n)=>{var r=n(2),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,s,a,i){var c=1&n,l=r(e),u=l.length;if(u!=r(t).length&&!c)return!1;for(var p=u;p--;){var d=l[p];if(!(c?d in t:o.call(t,d)))return!1}var h=i.get(e),f=i.get(t);if(h&&f)return h==t&&f==e;var g=!0;i.set(e,t),i.set(t,e);for(var v=c;++p<u;){var m=e[d=l[p]],w=t[d];if(s)var y=c?s(w,m,d,t,e,i):s(m,w,d,e,t,i);if(!(void 0===y?m===w||a(m,w,n,s,i):y)){g=!1;break}v||(v="constructor"==d)}if(g&&!v){var x=e.constructor,b=t.constructor;x==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof b&&b instanceof b||(g=!1)}return i.delete(e),i.delete(t),g}},695:(e,t,n)=>{var r=n(8096),o=n(2428),s=n(6449),a=n(3656),i=n(361),c=n(7167),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=s(e),u=!n&&o(e),p=!n&&!u&&a(e),d=!n&&!u&&!p&&c(e),h=n||u||p||d,f=h?r(e.length,String):[],g=f.length;for(var v in e)!t&&!l.call(e,v)||h&&("length"==v||p&&("offset"==v||"parent"==v)||d&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||i(v,g))||f.push(v);return f}},756:(e,t,n)=>{var r=n(3805);e.exports=function(e){return e==e&&!r(e)}},776:(e,t,n)=>{var r=n(756),o=n(5950);e.exports=function(e){for(var t=o(e),n=t.length;n--;){var s=t[n],a=e[s];t[n]=[s,a,r(a)]}return t}},909:(e,t,n)=>{var r=n(641),o=n(8329)(r);e.exports=o},916:(e,t,n)=>{var r=n(909);e.exports=function(e,t){var n;return r(e,function(e,r,o){return!(n=t(e,r,o))}),!!n}},938:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},945:(e,t,n)=>{var r=n(79),o=n(8223),s=n(3661);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!o||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new s(a)}return n.set(e,t),this.size=n.size,this}},999:(e,t,n)=>{var r=n(9302),o=n(6800);e.exports=function(e){return r(function(t,n){var r=-1,s=n.length,a=s>1?n[s-1]:void 0,i=s>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(s--,a):void 0,i&&o(n[0],n[1],i)&&(a=s<3?void 0:a,s=1),t=Object(t);++r<s;){var c=n[r];c&&e(t,c,r,a)}return t})}},1033:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},1042:(e,t,n)=>{var r=n(6110)(Object,"create");e.exports=r},1175:(e,t,n)=>{var r=n(6025);e.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},1331:(e,t,n)=>{var r=n(2552),o=n(8879),s=n(346),a=Function.prototype,i=Object.prototype,c=a.toString,l=i.hasOwnProperty,u=c.call(Object);e.exports=function(e){if(!s(e)||"[object Object]"!=r(e))return!1;var t=o(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==u}},1380:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},1420:(e,t,n)=>{var r=n(79);e.exports=function(){this.__data__=new r,this.size=0}},1459:e=>{e.exports=function(e){return this.__data__.has(e)}},1489:(e,t,n)=>{var r=n(7400);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},1549:(e,t,n)=>{var r=n(2032),o=n(3862),s=n(6721),a=n(2749),i=n(5749);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=s,c.prototype.has=a,c.prototype.set=i,e.exports=c},1769:(e,t,n)=>{var r=n(6449),o=n(8586),s=n(1802),a=n(3222);e.exports=function(e,t){return r(e)?e:o(e,t)?[e]:s(a(e))}},1791:(e,t,n)=>{var r=n(6547),o=n(3360);e.exports=function(e,t,n,s){var a=!n;n||(n={});for(var i=-1,c=t.length;++i<c;){var l=t[i],u=s?s(n[l],e[l],l,n,e):void 0;void 0===u&&(u=e[l]),a?o(n,l,u):r(n,l,u)}return n}},1799:(e,t,n)=>{var r=n(7217),o=n(270);e.exports=function(e,t,n,s){var a=n.length,i=a,c=!s;if(null==e)return!i;for(e=Object(e);a--;){var l=n[a];if(c&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){var u=(l=n[a])[0],p=e[u],d=l[1];if(c&&l[2]){if(void 0===p&&!(u in e))return!1}else{var h=new r;if(s)var f=s(p,d,u,e,t,h);if(!(void 0===f?o(d,p,3,s,h):f))return!1}}return!0}},1800:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},1802:(e,t,n)=>{var r=n(2224),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,a=r(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,function(e,n,r,o){t.push(r?o.replace(s,"$1"):n||e)}),t});e.exports=a},1811:e=>{var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var o=t(),s=16-(o-r);if(r=o,s>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},1873:(e,t,n)=>{var r=n(9325).Symbol;e.exports=r},1882:(e,t,n)=>{var r=n(2552),o=n(3805);e.exports=function(e){if(!o(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1961:(e,t,n)=>{var r=n(9653);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},1986:(e,t,n)=>{var r=n(1873),o=n(7828),s=n(5288),a=n(5911),i=n(317),c=n(4247),l=r?r.prototype:void 0,u=l?l.valueOf:void 0;e.exports=function(e,t,n,r,l,p,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!p(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return s(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var h=i;case"[object Set]":var f=1&r;if(h||(h=c),e.size!=t.size&&!f)return!1;var g=d.get(e);if(g)return g==t;r|=2,d.set(e,t);var v=a(h(e),h(t),r,l,p,d);return d.delete(e),v;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},2006:(e,t,n)=>{var r=n(5389),o=n(4894),s=n(5950);e.exports=function(e){return function(t,n,a){var i=Object(t);if(!o(t)){var c=r(n,3);t=s(t),n=function(e){return c(i[e],e,i)}}var l=e(t,n,a);return l>-1?i[c?t[l]:l]:void 0}}},2032:(e,t,n)=>{var r=n(1042);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},2193:(e,t,n)=>{var r=n(8984),o=n(5861),s=n(2428),a=n(6449),i=n(4894),c=n(3656),l=n(5527),u=n(7167),p=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(i(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||c(e)||u(e)||s(e)))return!e.length;var t=o(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(l(e))return!r(e).length;for(var n in e)if(p.call(e,n))return!1;return!0}},2199:(e,t,n)=>{var r=n(4528),o=n(6449);e.exports=function(e,t,n){var s=t(e);return o(e)?s:r(s,n(e))}},2224:(e,t,n)=>{var r=n(104);e.exports=function(e){var t=r(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}},2426:(e,t,n)=>{var r=n(4248),o=n(5389),s=n(916),a=n(6449),i=n(6800);e.exports=function(e,t,n){var c=a(e)?r:s;return n&&i(e,t,n)&&(t=void 0),c(e,o(t,3))}},2428:(e,t,n)=>{var r=n(7534),o=n(346),s=Object.prototype,a=s.hasOwnProperty,i=s.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return o(e)&&a.call(e,"callee")&&!i.call(e,"callee")};e.exports=c},2523:e=>{e.exports=function(e,t,n,r){for(var o=e.length,s=n+(r?1:-1);r?s--:++s<o;)if(t(e[s],s,e))return s;return-1}},2552:(e,t,n)=>{var r=n(1873),o=n(659),s=n(9350),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):s(e)}},2651:(e,t,n)=>{var r=n(4218);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},2694:(e,t,n)=>{"use strict";var r=n(6925);function o(){}function s(){}s.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,s,a){if(a!==r){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:o};return n.PropTypes=n,n}},2749:(e,t,n)=>{var r=n(1042),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}},2804:(e,t,n)=>{var r=n(6110)(n(9325),"Promise");e.exports=r},2824:(e,t,n)=>{var r=n(7805),o=n(3290),s=n(1961),a=n(3007),i=n(5529),c=n(2428),l=n(6449),u=n(3693),p=n(3656),d=n(1882),h=n(3805),f=n(1331),g=n(7167),v=n(4974),m=n(9884);e.exports=function(e,t,n,w,y,x,b){var _=v(e,n),k=v(t,n),j=b.get(k);if(j)r(e,n,j);else{var S=x?x(_,k,n+"",e,t,b):void 0,P=void 0===S;if(P){var C=l(k),I=!C&&p(k),O=!C&&!I&&g(k);S=k,C||I||O?l(_)?S=_:u(_)?S=a(_):I?(P=!1,S=o(k,!0)):O?(P=!1,S=s(k,!0)):S=[]:f(k)||c(k)?(S=_,c(_)?S=m(_):h(_)&&!d(_)||(S=i(k))):P=!1}P&&(b.set(k,S),y(S,k,w,x,b),b.delete(k)),r(e,n,S)}}},2865:(e,t,n)=>{var r=n(9570),o=n(1811)(r);e.exports=o},2903:(e,t,n)=>{var r=n(3805),o=n(5527),s=n(181),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return s(e);var t=o(e),n=[];for(var i in e)("constructor"!=i||!t&&a.call(e,i))&&n.push(i);return n}},2949:(e,t,n)=>{var r=n(2651);e.exports=function(e,t){var n=r(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},3007:e=>{e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},3040:(e,t,n)=>{var r=n(1549),o=n(79),s=n(8223);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(s||o),string:new r}}},3072:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,i=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,p=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,w=n?Symbol.for("react.fundamental"):60117,y=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function b(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case p:case s:case i:case a:case h:return e;default:switch(e=e&&e.$$typeof){case l:case d:case v:case g:case c:return e;default:return t}}case o:return t}}}function _(e){return b(e)===p}t.AsyncMode=u,t.ConcurrentMode=p,t.ContextConsumer=l,t.ContextProvider=c,t.Element=r,t.ForwardRef=d,t.Fragment=s,t.Lazy=v,t.Memo=g,t.Portal=o,t.Profiler=i,t.StrictMode=a,t.Suspense=h,t.isAsyncMode=function(e){return _(e)||b(e)===u},t.isConcurrentMode=_,t.isContextConsumer=function(e){return b(e)===l},t.isContextProvider=function(e){return b(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===d},t.isFragment=function(e){return b(e)===s},t.isLazy=function(e){return b(e)===v},t.isMemo=function(e){return b(e)===g},t.isPortal=function(e){return b(e)===o},t.isProfiler=function(e){return b(e)===i},t.isStrictMode=function(e){return b(e)===a},t.isSuspense=function(e){return b(e)===h},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===p||e===i||e===a||e===h||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===g||e.$$typeof===c||e.$$typeof===l||e.$$typeof===d||e.$$typeof===w||e.$$typeof===y||e.$$typeof===x||e.$$typeof===m)},t.typeOf=b},3170:(e,t,n)=>{var r=n(6547),o=n(1769),s=n(361),a=n(3805),i=n(7797);e.exports=function(e,t,n,c){if(!a(e))return e;for(var l=-1,u=(t=o(t,e)).length,p=u-1,d=e;null!=d&&++l<u;){var h=i(t[l]),f=n;if("__proto__"===h||"constructor"===h||"prototype"===h)return e;if(l!=p){var g=d[h];void 0===(f=c?c(g,h,d):void 0)&&(f=a(g)?g:s(t[l+1])?[]:{})}r(d,h,f),d=d[h]}return e}},3221:e=>{e.exports=function(e){return function(t,n,r){for(var o=-1,s=Object(t),a=r(t),i=a.length;i--;){var c=a[e?i:++o];if(!1===n(s[c],c,s))break}return t}}},3222:(e,t,n)=>{var r=n(7556);e.exports=function(e){return null==e?"":r(e)}},3243:(e,t,n)=>{var r=n(6110),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},3290:(e,t,n)=>{e=n.nmd(e);var r=n(9325),o=t&&!t.nodeType&&t,s=o&&e&&!e.nodeType&&e,a=s&&s.exports===o?r.Buffer:void 0,i=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=i?i(n):new e.constructor(n);return e.copy(r),r}},3345:e=>{e.exports=function(){return[]}},3360:(e,t,n)=>{var r=n(3243);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},3404:(e,t,n)=>{"use strict";e.exports=n(3072)},3488:e=>{e.exports=function(e){return e}},3560:(e,t,n)=>{var r=n(3170);e.exports=function(e,t,n){return null==e?e:r(e,t,n)}},3605:e=>{e.exports=function(e){return this.__data__.get(e)}},3650:(e,t,n)=>{var r=n(4335)(Object.keys,Object);e.exports=r},3656:(e,t,n)=>{e=n.nmd(e);var r=n(9325),o=n(9935),s=t&&!t.nodeType&&t,a=s&&e&&!e.nodeType&&e,i=a&&a.exports===s?r.Buffer:void 0,c=(i?i.isBuffer:void 0)||o;e.exports=c},3661:(e,t,n)=>{var r=n(3040),o=n(7670),s=n(289),a=n(4509),i=n(2949);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=s,c.prototype.has=a,c.prototype.set=i,e.exports=c},3663:(e,t,n)=>{var r=n(1799),o=n(776),s=n(7197);e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?s(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},3693:(e,t,n)=>{var r=n(4894),o=n(346);e.exports=function(e){return o(e)&&r(e)}},3702:e=>{e.exports=function(){this.__data__=[],this.size=0}},3805:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},3862:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},4128:(e,t,n)=>{var r=n(1800),o=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},4146:(e,t,n)=>{"use strict";var r=n(3404),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};function c(e){return r.isMemo(e)?a:i[e.$$typeof]||o}i[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i[r.Memo]=a;var l=Object.defineProperty,u=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(f){var o=h(n);o&&o!==f&&e(t,o,r)}var a=u(n);p&&(a=a.concat(p(n)));for(var i=c(t),g=c(n),v=0;v<a.length;++v){var m=a[v];if(!(s[m]||r&&r[m]||g&&g[m]||i&&i[m])){var w=d(n,m);try{l(t,m,w)}catch(e){}}}}return t}},4218:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},4247:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},4248:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},4335:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},4394:(e,t,n)=>{var r=n(2552),o=n(346);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==r(e)}},4509:(e,t,n)=>{var r=n(2651);e.exports=function(e){return r(this,e).has(e)}},4528:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},4664:(e,t,n)=>{var r=n(9770),o=n(3345),s=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(e){return null==e?[]:(e=Object(e),r(a(e),function(t){return s.call(e,t)}))}:o;e.exports=i},4713:(e,t,n)=>{var r=n(2523),o=n(5389),s=n(1489),a=Math.max;e.exports=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var c=null==n?0:s(n);return c<0&&(c=a(i+c,0)),r(e,o(t,3),c)}},4739:(e,t,n)=>{var r=n(6025);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},4840:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},4894:(e,t,n)=>{var r=n(1882),o=n(294);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},4901:(e,t,n)=>{var r=n(2552),o=n(294),s=n(346),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return s(e)&&o(e.length)&&!!a[r(e)]}},4912:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for;n&&Symbol.for("react.element"),n&&Symbol.for("react.portal"),n&&Symbol.for("react.fragment"),n&&Symbol.for("react.strict_mode"),n&&Symbol.for("react.profiler"),n&&Symbol.for("react.provider"),n&&Symbol.for("react.context"),n&&Symbol.for("react.async_mode"),n&&Symbol.for("react.concurrent_mode"),n&&Symbol.for("react.forward_ref"),n&&Symbol.for("react.suspense"),n&&Symbol.for("react.suspense_list"),n&&Symbol.for("react.memo"),n&&Symbol.for("react.lazy"),n&&Symbol.for("react.block"),n&&Symbol.for("react.fundamental"),n&&Symbol.for("react.responder"),n&&Symbol.for("react.scope")},4932:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}},4974:e=>{e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},5015:(e,t,n)=>{var r=n(2552),o=n(6449),s=n(346);e.exports=function(e){return"string"==typeof e||!o(e)&&s(e)&&"[object String]"==r(e)}},5083:(e,t,n)=>{var r=n(1882),o=n(7296),s=n(3805),a=n(7473),i=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,p=l.hasOwnProperty,d=RegExp("^"+u.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!s(e)||o(e))&&(r(e)?d:i).test(a(e))}},5250:(e,t,n)=>{var r=n(7217),o=n(7805),s=n(6649),a=n(2824),i=n(3805),c=n(7241),l=n(4974);e.exports=function e(t,n,u,p,d){t!==n&&s(n,function(s,c){if(d||(d=new r),i(s))a(t,n,c,u,e,p,d);else{var h=p?p(l(t,c),s,c+"",t,n,d):void 0;void 0===h&&(h=s),o(t,c,h)}},c)}},5288:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},5389:(e,t,n)=>{var r=n(3663),o=n(7978),s=n(3488),a=n(6449),i=n(583);e.exports=function(e){return"function"==typeof e?e:null==e?s:"object"==typeof e?a(e)?o(e[0],e[1]):r(e):i(e)}},5481:(e,t,n)=>{var r=n(9325)["__core-js_shared__"];e.exports=r},5527:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},5529:(e,t,n)=>{var r=n(9344),o=n(8879),s=n(5527);e.exports=function(e){return"function"!=typeof e.constructor||s(e)?{}:r(o(e))}},5556:(e,t,n)=>{e.exports=n(2694)()},5580:(e,t,n)=>{var r=n(6110)(n(9325),"DataView");e.exports=r},5749:(e,t,n)=>{var r=n(1042);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},5861:(e,t,n)=>{var r=n(5580),o=n(8223),s=n(2804),a=n(6545),i=n(8303),c=n(2552),l=n(7473),u="[object Map]",p="[object Promise]",d="[object Set]",h="[object WeakMap]",f="[object DataView]",g=l(r),v=l(o),m=l(s),w=l(a),y=l(i),x=c;(r&&x(new r(new ArrayBuffer(1)))!=f||o&&x(new o)!=u||s&&x(s.resolve())!=p||a&&x(new a)!=d||i&&x(new i)!=h)&&(x=function(e){var t=c(e),n="[object Object]"==t?e.constructor:void 0,r=n?l(n):"";if(r)switch(r){case g:return f;case v:return u;case m:return p;case w:return d;case y:return h}return t}),e.exports=x},5911:(e,t,n)=>{var r=n(8859),o=n(4248),s=n(9219);e.exports=function(e,t,n,a,i,c){var l=1&n,u=e.length,p=t.length;if(u!=p&&!(l&&p>u))return!1;var d=c.get(e),h=c.get(t);if(d&&h)return d==t&&h==e;var f=-1,g=!0,v=2&n?new r:void 0;for(c.set(e,t),c.set(t,e);++f<u;){var m=e[f],w=t[f];if(a)var y=l?a(w,m,f,t,e,c):a(m,w,f,e,t,c);if(void 0!==y){if(y)continue;g=!1;break}if(v){if(!o(t,function(e,t){if(!s(v,t)&&(m===e||i(m,e,n,a,c)))return v.push(t)})){g=!1;break}}else if(m!==w&&!i(m,w,n,a,c)){g=!1;break}}return c.delete(e),c.delete(t),g}},5950:(e,t,n)=>{var r=n(695),o=n(8984),s=n(4894);e.exports=function(e){return s(e)?r(e):o(e)}},6009:(e,t,n)=>{e=n.nmd(e);var r=n(4840),o=t&&!t.nodeType&&t,s=o&&e&&!e.nodeType&&e,a=s&&s.exports===o&&r.process,i=function(){try{return s&&s.require&&s.require("util").types||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=i},6025:(e,t,n)=>{var r=n(5288);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},6110:(e,t,n)=>{var r=n(5083),o=n(392);e.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},6139:(e,t,n)=>{var r=n(6547),o=n(1791),s=n(999),a=n(4894),i=n(5527),c=n(5950),l=Object.prototype.hasOwnProperty,u=s(function(e,t){if(i(t)||a(t))o(t,c(t),e);else for(var n in t)l.call(t,n)&&r(e,n,t[n])});e.exports=u},6449:e=>{var t=Array.isArray;e.exports=t},6545:(e,t,n)=>{var r=n(6110)(n(9325),"Set");e.exports=r},6547:(e,t,n)=>{var r=n(3360),o=n(5288),s=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];s.call(e,t)&&o(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},6574:(e,t,n)=>{var r=n(909);e.exports=function(e,t){var n=[];return r(e,function(e,r,o){t(e,r,o)&&n.push(e)}),n}},6649:(e,t,n)=>{var r=n(3221)();e.exports=r},6721:(e,t,n)=>{var r=n(1042),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(t,e)?t[e]:void 0}},6757:(e,t,n)=>{var r=n(1033),o=Math.max;e.exports=function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var s=arguments,a=-1,i=o(s.length-t,0),c=Array(i);++a<i;)c[a]=s[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=s[a];return l[t]=n(c),r(e,this,l)}}},6800:(e,t,n)=>{var r=n(5288),o=n(4894),s=n(361),a=n(3805);e.exports=function(e,t,n){if(!a(n))return!1;var i=typeof t;return!!("number"==i?o(n)&&s(t,n.length):"string"==i&&t in n)&&r(n[t],e)}},6924:(e,t,n)=>{var r=n(5250),o=n(999)(function(e,t,n,o){r(e,t,n,o)});e.exports=o},6925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},6942:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,s(n)))}return e}function s(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},7068:(e,t,n)=>{var r=n(7217),o=n(5911),s=n(1986),a=n(689),i=n(5861),c=n(6449),l=n(3656),u=n(7167),p="[object Arguments]",d="[object Array]",h="[object Object]",f=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,g,v,m){var w=c(e),y=c(t),x=w?d:i(e),b=y?d:i(t),_=(x=x==p?h:x)==h,k=(b=b==p?h:b)==h,j=x==b;if(j&&l(e)){if(!l(t))return!1;w=!0,_=!1}if(j&&!_)return m||(m=new r),w||u(e)?o(e,t,n,g,v,m):s(e,t,x,n,g,v,m);if(!(1&n)){var S=_&&f.call(e,"__wrapped__"),P=k&&f.call(t,"__wrapped__");if(S||P){var C=S?e.value():e,I=P?t.value():t;return m||(m=new r),v(C,I,n,g,m)}}return!!j&&(m||(m=new r),a(e,t,n,g,v,m))}},7167:(e,t,n)=>{var r=n(4901),o=n(7301),s=n(6009),a=s&&s.isTypedArray,i=a?o(a):r;e.exports=i},7197:e=>{e.exports=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},7217:(e,t,n)=>{var r=n(79),o=n(1420),s=n(938),a=n(3605),i=n(9817),c=n(945);function l(e){var t=this.__data__=new r(e);this.size=t.size}l.prototype.clear=o,l.prototype.delete=s,l.prototype.get=a,l.prototype.has=i,l.prototype.set=c,e.exports=l},7237:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},7241:(e,t,n)=>{var r=n(695),o=n(2903),s=n(4894);e.exports=function(e){return s(e)?r(e,!0):o(e)}},7255:(e,t,n)=>{var r=n(7422);e.exports=function(e){return function(t){return r(t,e)}}},7296:(e,t,n)=>{var r,o=n(5481),s=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!s&&s in e}},7301:e=>{e.exports=function(e){return function(t){return e(t)}}},7309:(e,t,n)=>{var r=n(2006)(n(4713));e.exports=r},7334:e=>{e.exports=function(e){return function(){return e}}},7400:(e,t,n)=>{var r=n(9374),o=1/0;e.exports=function(e){return e?(e=r(e))===o||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},7422:(e,t,n)=>{var r=n(1769),o=n(7797);e.exports=function(e,t){for(var n=0,s=(t=r(t,e)).length;null!=e&&n<s;)e=e[o(t[n++])];return n&&n==s?e:void 0}},7473:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},7534:(e,t,n)=>{var r=n(2552),o=n(346);e.exports=function(e){return o(e)&&"[object Arguments]"==r(e)}},7556:(e,t,n)=>{var r=n(1873),o=n(4932),s=n(6449),a=n(4394),i=r?r.prototype:void 0,c=i?i.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(s(t))return o(t,e)+"";if(a(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},7564:(e,t,n)=>{"use strict";n(4912)},7612:(e,t,n)=>{var r=n(9770),o=n(6574),s=n(5389),a=n(6449);e.exports=function(e,t){return(a(e)?r:o)(e,s(t,3))}},7670:(e,t,n)=>{var r=n(2651);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},7797:(e,t,n)=>{var r=n(4394);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},7805:(e,t,n)=>{var r=n(3360),o=n(5288);e.exports=function(e,t,n){(void 0!==n&&!o(e[t],n)||void 0===n&&!(t in e))&&r(e,t,n)}},7828:(e,t,n)=>{var r=n(9325).Uint8Array;e.exports=r},7978:(e,t,n)=>{var r=n(270),o=n(8156),s=n(631),a=n(8586),i=n(756),c=n(7197),l=n(7797);e.exports=function(e,t){return a(e)&&i(t)?c(l(e),t):function(n){var a=o(n,e);return void 0===a&&a===t?s(n,e):r(t,a,3)}}},8077:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},8096:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},8156:(e,t,n)=>{var r=n(7422);e.exports=function(e,t,n){var o=null==e?void 0:r(e,t);return void 0===o?n:o}},8221:(e,t,n)=>{var r=n(3805),o=n(124),s=n(9374),a=Math.max,i=Math.min;e.exports=function(e,t,n){var c,l,u,p,d,h,f=0,g=!1,v=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function w(t){var n=c,r=l;return c=l=void 0,f=t,p=e.apply(r,n)}function y(e){var n=e-h;return void 0===h||n>=t||n<0||v&&e-f>=u}function x(){var e=o();if(y(e))return b(e);d=setTimeout(x,function(e){var n=t-(e-h);return v?i(n,u-(e-f)):n}(e))}function b(e){return d=void 0,m&&c?w(e):(c=l=void 0,p)}function _(){var e=o(),n=y(e);if(c=arguments,l=this,h=e,n){if(void 0===d)return function(e){return f=e,d=setTimeout(x,t),g?w(e):p}(h);if(v)return clearTimeout(d),d=setTimeout(x,t),w(h)}return void 0===d&&(d=setTimeout(x,t)),p}return t=s(t)||0,r(n)&&(g=!!n.leading,u=(v="maxWait"in n)?a(s(n.maxWait)||0,t):u,m="trailing"in n?!!n.trailing:m),_.cancel=function(){void 0!==d&&clearTimeout(d),f=0,c=h=l=d=void 0},_.flush=function(){return void 0===d?p:b(o())},_}},8223:(e,t,n)=>{var r=n(6110)(n(9325),"Map");e.exports=r},8303:(e,t,n)=>{var r=n(6110)(n(9325),"WeakMap");e.exports=r},8329:(e,t,n)=>{var r=n(4894);e.exports=function(e,t){return function(n,o){if(null==n)return n;if(!r(n))return e(n,o);for(var s=n.length,a=t?s:-1,i=Object(n);(t?a--:++a<s)&&!1!==o(i[a],a,i););return n}}},8505:(e,t,n)=>{var r=n(9375);e.exports=function e(t,n,o){return r(n)||(o=n||o,n=[]),o=o||{},t instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return d(e,t)}(t,n):r(t)?function(t,n,r){for(var o=[],s=0;s<t.length;s++)o.push(e(t[s],n,r).source);return d(new RegExp("(?:"+o.join("|")+")",h(r)),n)}(t,n,o):function(e,t,n){return f(s(e,n),t,n)}(t,n,o)},e.exports.parse=s,e.exports.compile=function(e,t){return l(s(e,t),t)},e.exports.tokensToFunction=l,e.exports.tokensToRegExp=f;var o=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function s(e,t){for(var n,r=[],s=0,i=0,c="",l=t&&t.delimiter||"/";null!=(n=o.exec(e));){var u=n[0],d=n[1],h=n.index;if(c+=e.slice(i,h),i=h+u.length,d)c+=d[1];else{var f=e[i],g=n[2],v=n[3],m=n[4],w=n[5],y=n[6],x=n[7];c&&(r.push(c),c="");var b=null!=g&&null!=f&&f!==g,_="+"===y||"*"===y,k="?"===y||"*"===y,j=g||l,S=m||w,P=g||("string"==typeof r[r.length-1]?r[r.length-1]:"");r.push({name:v||s++,prefix:g||"",delimiter:j,optional:k,repeat:_,partial:b,asterisk:!!x,pattern:S?p(S):x?".*":a(j,P)})}}return i<e.length&&(c+=e.substr(i)),c&&r.push(c),r}function a(e,t){return!t||t.indexOf(e)>-1?"[^"+u(e)+"]+?":u(t)+"|(?:(?!"+u(t)+")[^"+u(e)+"])+?"}function i(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function c(e){return encodeURI(e).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function l(e,t){for(var n=new Array(e.length),o=0;o<e.length;o++)"object"==typeof e[o]&&(n[o]=new RegExp("^(?:"+e[o].pattern+")$",h(t)));return function(t,o){for(var s="",a=t||{},l=(o||{}).pretty?i:encodeURIComponent,u=0;u<e.length;u++){var p=e[u];if("string"!=typeof p){var d,h=a[p.name];if(null==h){if(p.optional){p.partial&&(s+=p.prefix);continue}throw new TypeError('Expected "'+p.name+'" to be defined')}if(r(h)){if(!p.repeat)throw new TypeError('Expected "'+p.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(p.optional)continue;throw new TypeError('Expected "'+p.name+'" to not be empty')}for(var f=0;f<h.length;f++){if(d=l(h[f]),!n[u].test(d))throw new TypeError('Expected all "'+p.name+'" to match "'+p.pattern+'", but received `'+JSON.stringify(d)+"`");s+=(0===f?p.prefix:p.delimiter)+d}}else{if(d=p.asterisk?c(h):l(h),!n[u].test(d))throw new TypeError('Expected "'+p.name+'" to match "'+p.pattern+'", but received "'+d+'"');s+=p.prefix+d}}else s+=p}return s}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function p(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function d(e,t){return e.keys=t,e}function h(e){return e&&e.sensitive?"":"i"}function f(e,t,n){r(t)||(n=t||n,t=[]);for(var o=(n=n||{}).strict,s=!1!==n.end,a="",i=0;i<e.length;i++){var c=e[i];if("string"==typeof c)a+=u(c);else{var l=u(c.prefix),p="(?:"+c.pattern+")";t.push(c),c.repeat&&(p+="(?:"+l+p+")*"),a+=p=c.optional?c.partial?l+"("+p+")?":"(?:"+l+"("+p+"))?":l+"("+p+")"}}var f=u(n.delimiter||"/"),g=a.slice(-f.length)===f;return o||(a=(g?a.slice(0,-f.length):a)+"(?:"+f+"(?=$))?"),a+=s?"$":o&&g?"":"(?="+f+"|$)",d(new RegExp("^"+a,h(n)),t)}},8586:(e,t,n)=>{var r=n(6449),o=n(4394),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!o(e))||a.test(e)||!s.test(e)||null!=t&&e in Object(t)}},8655:(e,t,n)=>{var r=n(6025);e.exports=function(e){return r(this.__data__,e)>-1}},8859:(e,t,n)=>{var r=n(3661),o=n(1380),s=n(1459);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=o,a.prototype.has=s,e.exports=a},8879:(e,t,n)=>{var r=n(4335)(Object.getPrototypeOf,Object);e.exports=r},8984:(e,t,n)=>{var r=n(5527),o=n(3650),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}},9219:e=>{e.exports=function(e,t){return e.has(t)}},9302:(e,t,n)=>{var r=n(3488),o=n(6757),s=n(2865);e.exports=function(e,t){return s(o(e,t,r),e+"")}},9325:(e,t,n)=>{var r=n(4840),o="object"==typeof self&&self&&self.Object===Object&&self,s=r||o||Function("return this")();e.exports=s},9326:(e,t,n)=>{var r=n(1769),o=n(2428),s=n(6449),a=n(361),i=n(294),c=n(7797);e.exports=function(e,t,n){for(var l=-1,u=(t=r(t,e)).length,p=!1;++l<u;){var d=c(t[l]);if(!(p=null!=e&&n(e,d)))break;e=e[d]}return p||++l!=u?p:!!(u=null==e?0:e.length)&&i(u)&&a(d,u)&&(s(e)||o(e))}},9344:(e,t,n)=>{var r=n(3805),o=Object.create,s=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=s},9350:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},9374:(e,t,n)=>{var r=n(4128),o=n(3805),s=n(4394),a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(s(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=i.test(e);return n||c.test(e)?l(e.slice(2),n?2:8):a.test(e)?NaN:+e}},9375:e=>{e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},9570:(e,t,n)=>{var r=n(7334),o=n(3243),s=n(3488),a=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:s;e.exports=a},9653:(e,t,n)=>{var r=n(7828);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},9770:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,s=[];++n<r;){var a=e[n];t(a,n,e)&&(s[o++]=a)}return s}},9817:e=>{e.exports=function(e){return this.__data__.has(e)}},9884:(e,t,n)=>{var r=n(1791),o=n(7241);e.exports=function(e){return r(e,o(e))}},9935:e=>{e.exports=function(){return!1}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={id:r,loaded:!1,exports:{}};return e[r](s,s.exports,n),s.loaded=!0,s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e={};n.r(e),n.d(e,{BrowserRouter:()=>ot,HashRouter:()=>st,Link:()=>pt,MemoryRouter:()=>ge,NavLink:()=>ft,Prompt:()=>me,Redirect:()=>_e,Route:()=>Ce,Router:()=>fe,StaticRouter:()=>Ne,Switch:()=>Le,generatePath:()=>be,matchPath:()=>Pe,useHistory:()=>Be,useLocation:()=>ze,useParams:()=>Fe,useRouteMatch:()=>De,withRouter:()=>Me});const t=window.lodash,r=window.wp.blocks,o=window.wp.i18n,s=window.wp.data,a=window.wp.compose,i=window.wp.components,c=window.wp.blockEditor,l=window.wp.element,u=window.ReactJSXRuntime,p=window.wp.primitives;var d=(0,u.jsx)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,u.jsx)(p.Path,{d:"M16.5 7.5 10 13.9l-2.5-2.4-1 1 3.5 3.6 7.5-7.6z"})}),h=(0,l.forwardRef)(({icon:e,size:t=24,...n},r)=>(0,l.cloneElement)(e,{width:t,height:t,...n,ref:r})),f=(0,u.jsxs)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,u.jsx)(p.Path,{d:"M14.5 5.5h-7V7h7V5.5ZM7.5 9h7v1.5h-7V9Zm7 3.5h-7V14h7v-1.5Z"}),(0,u.jsx)(p.Path,{d:"M16 2H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2ZM6 3.5h10a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5H6a.5.5 0 0 1-.5-.5V4a.5.5 0 0 1 .5-.5Z"}),(0,u.jsx)(p.Path,{d:"M20 8v11c0 .69-.31 1-.999 1H6v1.5h13.001c1.52 0 2.499-.982 2.499-2.5V8H20Z"})]});const g="newspack-newsletters/posts-inserter",v="newspack-newsletters/posts-inserter-block",m={postIdsByBlocks:{},existingBlockIdsInOrder:[],insertedPostIds:[]},w=e=>(0,t.flatMap)(e,e=>[...e.name===g?[e.clientId]:[],...w(e.innerBlocks)]);(0,s.registerStore)(v,{reducer(e=m,n){switch(n.type){case"SET_HANDLED_POST_IDS":const{clientId:r,existingBlocks:o}=n.props,s=w(o);return{...e,existingBlockIdsInOrder:s,postIdsByBlocks:(0,t.pick)({...e.postIdsByBlocks,[r]:n.handledPostIds},s)};case"SET_INSERTED_POST_IDS":return{...e,insertedPostIds:(0,t.uniq)([...e.insertedPostIds,...n.insertedPostIds])};case"REMOVE_BLOCK":return{...e,existingBlockIdsInOrder:(0,t.without)(e.existingBlockIdsInOrder,n.clientId),postIdsByBlocks:(0,t.omit)(e.postIdsByBlocks,[n.clientId])}}return e},actions:{setHandledPostsIds:(e,t)=>({type:"SET_HANDLED_POST_IDS",handledPostIds:e,props:t}),setInsertedPostsIds:e=>({type:"SET_INSERTED_POST_IDS",insertedPostIds:e}),removeBlock:e=>({type:"REMOVE_BLOCK",clientId:e})},selectors:{getHandledPostIds({postIdsByBlocks:e,existingBlockIdsInOrder:n,insertedPostIds:r},o){const s=n.indexOf(o),a=(0,t.slice)(n,0,s);return[...(0,t.uniq)((0,t.flatten)((0,t.values)((0,t.pick)(e,a)))),...r]}}});const y=JSON.parse('{"name":"newspack-newsletters/posts-inserter","category":"newspack","supports":["align"],"attributes":{"areBlocksInserted":{"type":"boolean","default":false},"postsToShow":{"type":"number","default":3},"preventDeduplication":{"type":"boolean","default":false},"displayPostSubtitle":{"type":"boolean","default":false},"displayAuthor":{"type":"boolean","default":false},"displayPostExcerpt":{"type":"boolean","default":true},"excerptLength":{"type":"number","default":15},"displayPostDate":{"type":"boolean","default":false},"displayFeaturedImage":{"type":"boolean","default":true},"displayContinueReading":{"type":"boolean","default":false},"displaySponsoredPosts":{"type":"boolean","default":true},"innerBlocksToInsert":{"type":"array","default":[]},"featuredImageAlignment":{"type":"string","default":"left"},"featuredImageSize":{"type":"string","default":"large"},"isDisplayingSpecificPosts":{"type":"boolean","default":false},"specificPosts":{"type":"array","default":[]},"textFontSize":{"type":"string"},"headingFontSize":{"type":"string"},"subHeadingFontSize":{"type":"string"},"textColor":{"type":"string"},"headingColor":{"type":"string"},"subHeadingColor":{"type":"string"},"postType":{"type":"string","default":"post"},"tags":{"type":"array","default":[]},"tagExclusions":{"type":"array","default":[]},"categories":{"type":"array","default":[]},"categoryExclusions":{"type":"array","default":[]}}}'),x=window.wp.date,b=(e,t)=>("number"==typeof e&&(e+="px"),t.style={...t.style||{},typography:{fontSize:e}},t),_=(e,t)=>{const n=[];let r=t.displayAuthor;const s=e.newspack_sponsors_info&&0<e.newspack_sponsors_info.length;if(s&&("native"===e.meta.newspack_sponsor_sponsorship_scope||e.newspack_sponsors_info.reduce((e,t)=>"native"===t.sponsor_scope||e,!1))){const r=e.newspack_sponsors_info[0].sponsor_flag;n.push(((e,{textFontSize:t})=>["core/heading",b(t,{className:"newspack-sponsors-flag",content:`<span style="background-color:${newspack_email_editor_data.sponsors_flag_hex};color:${newspack_email_editor_data.sponsors_flag_text_color};font-weight:700;padding:2px 4px;text-transform:uppercase">${e}</span>`,level:6,fontSize:"small"})])(r,t))}n.push(((e,{headingFontSize:t,headingColor:n})=>["core/heading",b(t,{style:{color:{text:n}},content:`<a href="${e.link}">${e.title.rendered}</a>`,level:3})])(e,t)),t.displayPostSubtitle&&e.meta?.newspack_post_subtitle&&n.push(((e,{subHeadingFontSize:t,subHeadingColor:n})=>{const r={level:4,content:(e?.meta?.newspack_post_subtitle||"").trim(),style:{color:{text:n}}};return["core/heading",b(t,r)]})(e,t));const a=e.meta.newspack_sponsor_sponsorship_scope||((e.newspack_sponsors_info||[]).some(e=>"native"===e.sponsor_scope)?"native":"underwritten");if(s&&"underwritten"!==a){("sponsor"===e.meta.newspack_sponsor_native_byline_display||"inherit"===e.meta.newspack_sponsor_native_byline_display&&"underwritten"!==a)&&(r=!1);const o=((e,{textFontSize:t,textColor:n})=>{const r=e.filter(e=>"native"===e.sponsor_scope);if(!r.length)return[];const o=[];return r.forEach(e=>{const t=e.sponsor_url?`<a href="${e.sponsor_url}">${e.sponsor_name}</a>`:e.sponsor_name;o.push(t)}),["core/heading",b(t,{content:r[0].sponsor_byline+" "+o.join(", "),fontSize:"normal",level:6,style:{color:{text:n}}})]})(e.newspack_sponsors_info,t);o?.length&&n.push(o)}if(r){const r=((e,{textFontSize:t,textColor:n})=>{const{newspack_custom_byline:r,newspack_author_info:s}=e;if(r)return["core/heading",b(t,{content:r,fontSize:"normal",level:6,style:{color:{text:n}}})];if(Array.isArray(s)&&s.length){const e=s.reduce((e,t,n)=>{const{author_link:r,display_name:a}=t;if(r&&a){const t=s.length>2&&n<s.length-1?(0,o._x)(",","comma separator for multiple authors","newspack-newsletters"):"",i=s.length>1&&n===s.length-1?newspack_email_editor_data?.labels?.byline_connector_label:"";e.push(`${i}<a href="${r}">${a}</a>${t}`)}return e},[]);return["core/heading",b(t,{content:newspack_email_editor_data?.labels?.byline_prefix_label+e.join(" "),fontSize:"normal",level:6,style:{color:{text:n}}})]}return null})(e,t);r&&n.push(r)}t.displayPostDate&&e.date&&n.push(((e,{textFontSize:t,textColor:n})=>{const r=(0,x.__experimentalGetSettings)().formats.date;return["core/paragraph",b(t,{content:(0,x.dateI18n)(r,e.date),fontSize:"normal",style:{color:{text:n}}})]})(e,t)),t.displayPostExcerpt&&n.push(((e,{excerptLength:t,textFontSize:n,textColor:r})=>{let o=e.excerpt.rendered;const s=document.createElement("div");s.innerHTML=o,o=s.textContent||s.innerText||"";const a={content:(t<o.trim().split(" ").length?`${o.split(" ",t).join(" ")} [â€¦]`:o).trim(),style:{color:{text:r}}};return["core/paragraph",b(n,a)]})(e,t)),t.displayContinueReading&&n.push(((e,{textFontSize:t,textColor:n})=>{const r={content:`<a href="${e.link}">${newspack_email_editor_data?.labels?.continue_reading_label}</a>`,style:{color:{text:n}}};return["core/paragraph",b(t,r)]})(e,t));const i=e.featuredImageLargeURL||e.featuredImageMediumURL;if(t.displayFeaturedImage&&i){const r=e.featured_media,o=(t=!1)=>["core/image",{id:r,url:t?e.featuredImageLargeURL:e.featuredImageMediumURL,href:e.link,...t?{align:"center"}:{}}];let s="50%",a="50%";if(t.featuredImageSize)switch(t.featuredImageSize){case"small":s="25%",a="75%";break;case"medium":s="33.33%",a="66.66%"}const i=["core/column",{width:s},[o()]],c=["core/column",{width:a},n];switch(t.featuredImageAlignment){case"left":return[["core/columns",{},[i,c]]];case"right":return[["core/columns",{},[c,i]]];case"top":return[o(!0),...n]}}return n},k=([e,t,n=[]])=>(0,r.createBlock)(e,t,n.map(k)),j=e=>({attrs:(0,t.omit)(e.attributes,"content"),blockName:e.name,innerHTML:(0,r.getBlockContent)(e),innerBlocks:e.innerBlocks.map(j)});var S=n(6942),P=n.n(S),C=(0,u.jsx)(p.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,u.jsx)(p.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"})}),I=(0,u.jsx)(p.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,u.jsx)(p.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})}),O=(0,u.jsx)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,u.jsx)(p.Path,{d:"M8 7h2V5H8v2zm0 6h2v-2H8v2zm0 6h2v-2H8v2zm6-14v2h2V5h-2zm0 8h2v-2h-2v2zm0 6h2v-2h-2v2z"})});const A=({badge:e,badgeLevel:t="info",className:n,checkbox:r,children:s,collapse:a,disabled:c,title:p,description:f,handoff:g,editLink:v,href:m,notification:w,notificationLevel:y,notificationHTML:x,actionContent:b,actionText:_,secondaryActionText:k,secondaryDestructive:j,id:S,image:A,imageLink:E,indent:T,isSmall:N,isMedium:L,simple:M,onClick:R,onSecondaryActionClick:B,isWaiting:z,titleLink:F,toggleChecked:D=!1,toggleOnChange:$,hasGreyHeader:H,hasWhiteHeader:V,noBorder:U,isPending:W,expandable:q=!1,isButtonEnabled:G=!1,draggable:Z=!1,dragIndex:Q,dragWrapperRef:J,onDragCallback:K})=>{const[Y,X]=(0,l.useState)(!1),[ee,te]=(0,l.useState)(!1),[ne,re]=(0,l.useState)(null),[oe,se]=(0,l.useState)(null);(0,l.useEffect)(()=>{J&&!oe&&se(J)},[J?.current]),(0,l.useEffect)(()=>{a&&Y&&X(!1)},[a]);const ae=w||s,ie=P()("newspack-action-card",M&&"newspack-card--is-clickable",H&&"newspack-card--has-grey-header",V&&"newspack-card--has-white-header",ae&&"newspack-card--has-children",T&&"newspack-card--indent",N&&"is-small",L&&"is-medium",r&&"has-checkbox",q&&"is-expandable",Z&&"is-draggable",b&&"has-action-content",n),ce=!$||F||c?{}:{onClick:()=>$(!D),tabIndex:"0"},le=m&&0!==m.indexOf("http"),ue=k&&B,pe=!Array.isArray(e)&&e?[e]:e,de=()=>{return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"newspack-action-card__region newspack-action-card__region-top",children:[$&&(0,u.jsx)(i.ToggleControl,{checked:D,onChange:$,disabled:c}),A&&!$&&(0,u.jsx)("div",{className:"newspack-action-card__region newspack-action-card__region-left",children:(0,u.jsx)("a",{href:E,children:(0,u.jsx)("div",{className:"newspack-action-card__image",style:(e=A,e?{backgroundImage:`url(${e})`}:{})})})}),r&&!$&&(0,u.jsx)("div",{className:"newspack-action-card__region newspack-action-card__region-left",children:(0,u.jsx)("span",{className:P()("newspack-checkbox-icon","is-primary","checked"===r&&"newspack-checkbox-icon--checked",W&&"newspack-checkbox-icon--pending"),children:"checked"===r&&(0,u.jsx)(h,{icon:d})})}),(0,u.jsx)("div",{className:"newspack-action-card__region newspack-action-card__region-center",children:(0,u.jsxs)(vn,{columns:1,gutter:8,noMargin:!0,children:[(0,u.jsxs)("h2",{children:[(0,u.jsxs)("span",{className:"newspack-action-card__title",...ce,children:[F&&(0,u.jsx)("a",{href:F,children:p}),!F&&q&&(0,u.jsx)(mt,{isLink:!0,onClick:()=>X(!Y),children:p}),!F&&!q&&p]}),pe?.length&&pe.map((e,n)=>(0,u.jsx)("span",{className:`newspack-action-card__badge newspack-action-card__badge-level-${t}`,children:e},`badge-${n}`))]}),f&&(0,u.jsxs)("p",{children:["string"==typeof f&&f,"function"==typeof f&&f()]})]})}),!q&&(_||ue||b)&&(0,u.jsxs)("div",{className:"newspack-action-card__region newspack-action-card__region-right",children:[b&&b,_&&(g?(0,u.jsx)(dn,{plugin:g,editLink:v,compact:!0,isLink:!0,children:_}):R||le?(0,u.jsx)(mt,{disabled:c&&!G,isLink:!0,href:m,onClick:R,className:"newspack-action-card__primary_button",children:_}):m?(0,u.jsx)(i.ExternalLink,{href:m,className:"newspack-action-card__primary_button",children:_}):(0,u.jsxs)("div",{className:"newspack-action-card__container",children:[_,z&&(0,u.jsx)(Gn,{isRight:!0})]})),ue&&(0,u.jsx)(mt,{isLink:!0,onClick:B,className:"newspack-action-card__secondary_button",isDestructive:j,children:k})]}),q&&(0,u.jsx)(mt,{onClick:()=>X(!Y),children:(0,u.jsx)(h,{icon:Y?C:I,height:24,width:24})})]}),w&&(0,u.jsxs)("div",{className:"newspack-action-card__notification newspack-action-card__region-children",children:["error"===y&&(0,u.jsx)(jn,{noticeText:w,isError:!0,rawHTML:x}),"info"===y&&(0,u.jsx)(jn,{noticeText:w,rawHTML:x}),"success"===y&&(0,u.jsx)(jn,{noticeText:w,isSuccess:!0,rawHTML:x}),"warning"===y&&(0,u.jsx)(jn,{noticeText:w,isWarning:!0,rawHTML:x})]}),s&&(q&&Y||!q)&&(0,u.jsx)("div",{className:"newspack-action-card__region-children",children:s})]});var e};if(Z&&oe?.current&&"number"==typeof Q&&K&&S){let e=oe.current.getBoundingClientRect(),t=Array.prototype.slice.call(oe.current.querySelectorAll(".newspack-action-card__draggable-wrapper"));const n=0===Q,r=Q===t.length-1,s=()=>{t=Array.prototype.slice.call(oe.current.querySelectorAll(".newspack-action-card__draggable-wrapper")),e=oe.current.getBoundingClientRect(),ee||(re(Q),te(!0))},a=()=>{null!==ne&&ne!==Q&&K(ne),re(null),te(!1)},c=n=>{const r=n.pageY<=e.top+window.scrollY,o=n.pageY>=e.bottom+window.scrollY,s=n.target.closest(".newspack-action-card__draggable-wrapper");(r||o||s)&&(re(t.indexOf(s)),(0>ne||ne===Q+1)&&re(Q),r&&re(0),o&&re(t.length))};return(0,u.jsx)("div",{className:"newspack-action-card__draggable-wrapper"+(ee?" is-dragging":""),id:`draggable-card-${S}`,children:(0,u.jsx)(i.Draggable,{elementId:`draggable-card-${S}`,transferData:{},onDragStart:s,onDragEnd:a,onDragOver:c,children:({onDraggableStart:e,onDraggableEnd:t})=>(0,u.jsxs)(yt,{className:ie,onClick:M&&R,id:null!=S?S:null,noBorder:U,children:[(0,u.jsxs)("div",{className:"newspack-action-card__draggable-controls",children:[(0,u.jsx)("div",{className:"drag-handle",draggable:!0,onDragStart:e,onDragEnd:t,children:(0,u.jsx)(h,{icon:O,height:18,width:18})}),(0,u.jsxs)("div",{className:"movers",children:[(0,u.jsx)(mt,{icon:C,onClick:()=>K(Q-1),disabled:n,label:(0,o.__)("Move one position up","newspack-plugin")}),(0,u.jsx)(mt,{icon:I,onClick:()=>K(Q+1),disabled:r,label:(0,o.__)("Move one position down","newspack-plugin")})]})]}),(0,u.jsx)(de,{})]})})})}return(0,u.jsx)(yt,{className:ie,onClick:M&&R,id:null!=S?S:null,noBorder:U,children:(0,u.jsx)(de,{})})};var E=n(8221),T=n.n(E);class N extends l.Component{constructor(e){super(e),this.state={suggestions:[],validValues:{},loading:this.isFetchingInfoOnLoad()},this.debouncedUpdateSuggestions=T()(this.updateSuggestions,500)}isFetchingInfoOnLoad=()=>{const{tokens:e,fetchSavedInfo:t}=this.props;return Boolean(e.length&&t)};componentDidMount(){if(this.isFetchingInfoOnLoad()){const{tokens:e,fetchSavedInfo:t}=this.props;t(e).then(e=>{const{validValues:t}=this.state;e.forEach(e=>{t[e.value]=e.label}),this.setState({validValues:t,loading:!1})})}}componentDidUpdate(e){const{tokens:t,fetchSavedInfo:n}=this.props;t!==e.tokens&&this.isFetchingInfoOnLoad()&&n(t).then(e=>{const{validValues:t}=this.state;e.forEach(e=>{t[e.value]=e.label}),this.setState({validValues:t,loading:!1})})}componentWillUnmount(){delete this.suggestionsRequest,this.debouncedUpdateSuggestions.cancel()}getLabelsForValues(e){const{validValues:t}=this.state;return e.reduce((e,n)=>n?n.label?[...e,n.label]:t[n]?[...e,t[n]]:e:e,[])}getValuesForLabels(e){const{returnFullObjects:t}=this.props,{validValues:n}=this.state;return t?e.reduce((e,t)=>(Object.keys(n).forEach(r=>{if(n[r]===t){const n=isNaN(parseInt(r))?r.toString():parseInt(r);e.push({value:n,label:t})}}),e),[]):e.map(e=>Object.keys(n).map(e=>isNaN(parseInt(e))?e.toString():parseInt(e)).find(t=>n[t]===e))}updateSuggestions(e){const{fetchSuggestions:t}=this.props;t&&this.setState({loading:!0},()=>{const n=t(e);n.then(e=>{if(this.suggestionsRequest!==n)return;const{validValues:t}=this.state,r=[...e];e.forEach(e=>{t[e.value]=e.label}),this.setState({suggestions:r,validValues:t,loading:!1})}).catch(()=>{this.suggestionsRequest===n&&this.setState({loading:!1})}),this.suggestionsRequest=n})}handleOnChange(e){const{onChange:t}=this.props;t(this.getValuesForLabels(e))}getTokens(){const{tokens:e}=this.props;return this.getLabelsForValues(e)}render(){const{help:e,label:t="",placeholder:n="",maxLength:r,style:o,__next40pxDefaultSize:s}=this.props,{suggestions:a,loading:c}=this.state,l=["newspack-autocomplete-tokenfield__input-container"];return t&&l.push("has-label"),(0,u.jsxs)("div",{className:"newspack-autocomplete-tokenfield",style:o,children:[(0,u.jsxs)("div",{className:l.join(" "),children:[(0,u.jsx)(i.FormTokenField,{value:this.getTokens(),suggestions:a.map(e=>e.label),onChange:e=>this.handleOnChange(e),onInputChange:e=>this.debouncedUpdateSuggestions(e),label:t,maxLength:r,placeholder:n,__next40pxDefaultSize:s}),c&&(0,u.jsx)(i.Spinner,{})]}),e&&(0,u.jsx)("p",{className:"newspack-autocomplete-tokenfield__help",children:e})]})}}const L=N,M=window.wp.apiFetch;var R=n.n(M);const B=window.wp.htmlEntities,z=window.wp.url;function F(e,t){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},F(e,t)}function D(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,F(e,t)}const $=window.React;var H=n.n($),V=n(5556),U=n.n(V);function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(null,arguments)}function q(e){return"/"===e.charAt(0)}function G(e,t){for(var n=t,r=n+1,o=e.length;r<o;n+=1,r+=1)e[n]=e[r];e.pop()}const Z=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],o=t&&t.split("/")||[],s=e&&q(e),a=t&&q(t),i=s||a;if(e&&q(e)?o=r:r.length&&(o.pop(),o=o.concat(r)),!o.length)return"/";if(o.length){var c=o[o.length-1];n="."===c||".."===c||""===c}else n=!1;for(var l=0,u=o.length;u>=0;u--){var p=o[u];"."===p?G(o,u):".."===p?(G(o,u),l++):l&&(G(o,u),l--)}if(!i)for(;l--;l)o.unshift("..");!i||""===o[0]||o[0]&&q(o[0])||o.unshift("");var d=o.join("/");return n&&"/"!==d.substr(-1)&&(d+="/"),d};function Q(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}const J=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every(function(t,r){return e(t,n[r])});if("object"==typeof t||"object"==typeof n){var r=Q(t),o=Q(n);return r!==t||o!==n?e(r,o):Object.keys(Object.assign({},t,n)).every(function(r){return e(t[r],n[r])})}return!1};function K(e){var t=e.pathname,n=e.search,r=e.hash,o=t||"/";return n&&"?"!==n&&(o+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(o+="#"===r.charAt(0)?r:"#"+r),o}function Y(e,t,n,r){var o;"string"==typeof e?(o=function(e){var t=e||"/",n="",r="",o=t.indexOf("#");-1!==o&&(r=t.substr(o),t=t.substr(0,o));var s=t.indexOf("?");return-1!==s&&(n=t.substr(s),t=t.substr(0,s)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),o.state=t):(void 0===(o=W({},e)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==t&&void 0===o.state&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(o.key=n),r?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=Z(o.pathname,r.pathname)):o.pathname=r.pathname:o.pathname||(o.pathname="/"),o}function X(e,t,n){return Math.min(Math.max(e,t),n)}"undefined"==typeof window||!window.document||window.document.createElement;var ee=!0,te="Invariant failed";function ne(e,t){if(!e){if(ee)throw new Error(te);var n="function"==typeof t?t():t,r=n?"".concat(te,": ").concat(n):te;throw new Error(r)}}var re=n(8505),oe=n.n(re);function se(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}n(7564);var ae=n(4146),ie=n.n(ae),ce=1073741823,le="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:{},ue=H().createContext||function(e,t){var n,r,o,s="__create-react-context-"+((le[o="__global_unique_id__"]=(le[o]||0)+1)+"__"),a=function(e){function n(){for(var t,n,r,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s))||this).emitter=(n=t.props.value,r=[],{on:function(e){r.push(e)},off:function(e){r=r.filter(function(t){return t!==e})},get:function(){return n},set:function(e,t){n=e,r.forEach(function(e){return e(n,t)})}}),t}D(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[s]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,o=e.value;!function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(r,o)?(n="function"==typeof t?t(r,o):ce,0!=(n|=0)&&this.emitter.set(e.value,n)):n=0}},r.render=function(){return this.props.children},n}(H().Component);a.childContextTypes=((n={})[s]=U().object.isRequired,n);var i=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).observedBits=void 0,e.state={value:e.getValue()},e.onUpdate=function(t,n){(0|e.observedBits)&n&&e.setState({value:e.getValue()})},e}D(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?ce:t},r.componentDidMount=function(){this.context[s]&&this.context[s].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?ce:e},r.componentWillUnmount=function(){this.context[s]&&this.context[s].off(this.onUpdate)},r.getValue=function(){return this.context[s]?this.context[s].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(H().Component);return i.contextTypes=((r={})[s]=U().object,r),{Provider:a,Consumer:i}},pe=function(e){var t=ue();return t.displayName=e,t},de=pe("Router-History"),he=pe("Router"),fe=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen(function(e){n._pendingLocation=e})),n}D(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen(function(t){e._isMounted&&e.setState({location:t})})),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return H().createElement(he.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},H().createElement(de.Provider,{children:this.props.children||null,value:this.props.history}))},t}(H().Component),ge=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).history=function(e){void 0===e&&(e={});var t,n,r=e,o=r.getUserConfirmation,s=r.initialEntries,a=void 0===s?["/"]:s,i=r.initialIndex,c=void 0===i?0:i,l=r.keyLength,u=void 0===l?6:l,p=(t=null,n=[],{setPrompt:function(e){return t=e,function(){t===e&&(t=null)}},confirmTransitionTo:function(e,n,r,o){if(null!=t){var s="function"==typeof t?t(e,n):t;"string"==typeof s?"function"==typeof r?r(s,o):o(!0):o(!1!==s)}else o(!0)},appendListener:function(e){var t=!0;function r(){t&&e.apply(void 0,arguments)}return n.push(r),function(){t=!1,n=n.filter(function(e){return e!==r})}},notifyListeners:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.forEach(function(e){return e.apply(void 0,t)})}});function d(e){W(w,e),w.length=w.entries.length,p.notifyListeners(w.location,w.action)}function h(){return Math.random().toString(36).substr(2,u)}var f=X(c,0,a.length-1),g=a.map(function(e){return Y(e,void 0,"string"==typeof e?h():e.key||h())}),v=K;function m(e){var t=X(w.index+e,0,w.entries.length-1),n=w.entries[t];p.confirmTransitionTo(n,"POP",o,function(e){e?d({action:"POP",location:n,index:t}):d()})}var w={length:g.length,action:"POP",location:g[f],index:f,entries:g,createHref:v,push:function(e,t){var n="PUSH",r=Y(e,t,h(),w.location);p.confirmTransitionTo(r,n,o,function(e){if(e){var t=w.index+1,o=w.entries.slice(0);o.length>t?o.splice(t,o.length-t,r):o.push(r),d({action:n,location:r,index:t,entries:o})}})},replace:function(e,t){var n="REPLACE",r=Y(e,t,h(),w.location);p.confirmTransitionTo(r,n,o,function(e){e&&(w.entries[w.index]=r,d({action:n,location:r}))})},go:m,goBack:function(){m(-1)},goForward:function(){m(1)},canGo:function(e){var t=w.index+e;return t>=0&&t<w.entries.length},block:function(e){return void 0===e&&(e=!1),p.setPrompt(e)},listen:function(e){return p.appendListener(e)}};return w}(t.props),t}return D(t,e),t.prototype.render=function(){return H().createElement(fe,{history:this.history,children:this.props.children})},t}(H().Component),ve=function(e){function t(){return e.apply(this,arguments)||this}D(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(H().Component);function me(e){var t=e.message,n=e.when,r=void 0===n||n;return H().createElement(he.Consumer,null,function(e){if(e||ne(!1),!r||e.staticContext)return null;var n=e.history.block;return H().createElement(ve,{onMount:function(e){e.release=n(t)},onUpdate:function(e,r){r.message!==t&&(e.release(),e.release=n(t))},onUnmount:function(e){e.release()},message:t})})}var we={},ye=1e4,xe=0;function be(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(we[e])return we[e];var t=oe().compile(e);return xe<ye&&(we[e]=t,xe++),t}(e)(t,{pretty:!0})}function _e(e){var t=e.computedMatch,n=e.to,r=e.push,o=void 0!==r&&r;return H().createElement(he.Consumer,null,function(e){e||ne(!1);var r=e.history,s=e.staticContext,a=o?r.push:r.replace,i=Y(t?"string"==typeof n?be(n,t.params):W({},n,{pathname:be(n.pathname,t.params)}):n);return s?(a(i),null):H().createElement(ve,{onMount:function(){a(i)},onUpdate:function(e,t){var n=Y(t.to);(function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&J(e.state,t.state)})(n,W({},i,{key:n.key}))||a(i)},to:n})})}var ke={},je=1e4,Se=0;function Pe(e,t){void 0===t&&(t={}),("string"==typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,o=n.exact,s=void 0!==o&&o,a=n.strict,i=void 0!==a&&a,c=n.sensitive,l=void 0!==c&&c;return[].concat(r).reduce(function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=ke[n]||(ke[n]={});if(r[e])return r[e];var o=[],s={regexp:oe()(e,o,t),keys:o};return Se<je&&(r[e]=s,Se++),s}(n,{end:s,strict:i,sensitive:l}),o=r.regexp,a=r.keys,c=o.exec(e);if(!c)return null;var u=c[0],p=c.slice(1),d=e===u;return s&&!d?null:{path:n,url:"/"===n&&""===u?"/":u,isExact:d,params:a.reduce(function(e,t,n){return e[t.name]=p[n],e},{})}},null)}var Ce=function(e){function t(){return e.apply(this,arguments)||this}return D(t,e),t.prototype.render=function(){var e=this;return H().createElement(he.Consumer,null,function(t){t||ne(!1);var n=e.props.location||t.location,r=W({},t,{location:n,match:e.props.computedMatch?e.props.computedMatch:e.props.path?Pe(n.pathname,e.props):t.match}),o=e.props,s=o.children,a=o.component,i=o.render;return Array.isArray(s)&&function(e){return 0===H().Children.count(e)}(s)&&(s=null),H().createElement(he.Provider,{value:r},r.match?s?"function"==typeof s?s(r):s:a?H().createElement(a,r):i?i(r):null:"function"==typeof s?s(r):null)})},t}(H().Component);function Ie(e){return"/"===e.charAt(0)?e:"/"+e}function Oe(e,t){if(!e)return t;var n=Ie(e);return 0!==t.pathname.indexOf(n)?t:W({},t,{pathname:t.pathname.substr(n.length)})}function Ae(e){return"string"==typeof e?e:K(e)}function Ee(e){return function(){ne(!1)}}function Te(){}var Ne=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).handlePush=function(e){return t.navigateTo(e,"PUSH")},t.handleReplace=function(e){return t.navigateTo(e,"REPLACE")},t.handleListen=function(){return Te},t.handleBlock=function(){return Te},t}D(t,e);var n=t.prototype;return n.navigateTo=function(e,t){var n=this.props,r=n.basename,o=void 0===r?"":r,s=n.context,a=void 0===s?{}:s;a.action=t,a.location=function(e,t){return e?W({},t,{pathname:Ie(e)+t.pathname}):t}(o,Y(e)),a.url=Ae(a.location)},n.render=function(){var e=this.props,t=e.basename,n=void 0===t?"":t,r=e.context,o=void 0===r?{}:r,s=e.location,a=void 0===s?"/":s,i=se(e,["basename","context","location"]),c={createHref:function(e){return Ie(n+Ae(e))},action:"POP",location:Oe(n,Y(a)),push:this.handlePush,replace:this.handleReplace,go:Ee(),goBack:Ee(),goForward:Ee(),listen:this.handleListen,block:this.handleBlock};return H().createElement(fe,W({},i,{history:c,staticContext:o}))},t}(H().Component),Le=function(e){function t(){return e.apply(this,arguments)||this}return D(t,e),t.prototype.render=function(){var e=this;return H().createElement(he.Consumer,null,function(t){t||ne(!1);var n,r,o=e.props.location||t.location;return H().Children.forEach(e.props.children,function(e){if(null==r&&H().isValidElement(e)){n=e;var s=e.props.path||e.props.from;r=s?Pe(o.pathname,W({},e.props,{path:s})):t.match}}),r?H().cloneElement(n,{location:o,computedMatch:r}):null})},t}(H().Component);function Me(e){var t="withRouter("+(e.displayName||e.name)+")",n=function(t){var n=t.wrappedComponentRef,r=se(t,["wrappedComponentRef"]);return H().createElement(he.Consumer,null,function(t){return t||ne(!1),H().createElement(e,W({},r,t,{ref:n}))})};return n.displayName=t,n.WrappedComponent=e,ie()(n,e)}var Re=H().useContext;function Be(){return Re(de)}function ze(){return Re(he).location}function Fe(){var e=Re(he).match;return e?e.params:{}}function De(e){var t=ze(),n=Re(he).match;return e?Pe(t.pathname,e):n}function $e(e){return"/"===e.charAt(0)?e:"/"+e}function He(e){return"/"===e.charAt(0)?e.substr(1):e}function Ve(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function Ue(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function We(e){var t=e.pathname,n=e.search,r=e.hash,o=t||"/";return n&&"?"!==n&&(o+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(o+="#"===r.charAt(0)?r:"#"+r),o}function qe(e,t,n,r){var o;"string"==typeof e?(o=function(e){var t=e||"/",n="",r="",o=t.indexOf("#");-1!==o&&(r=t.substr(o),t=t.substr(0,o));var s=t.indexOf("?");return-1!==s&&(n=t.substr(s),t=t.substr(0,s)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),o.state=t):(void 0===(o=W({},e)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==t&&void 0===o.state&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(o.key=n),r?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=Z(o.pathname,r.pathname)):o.pathname=r.pathname:o.pathname||(o.pathname="/"),o}function Ge(){var e=null,t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,o){if(null!=e){var s="function"==typeof e?e(t,n):e;"string"==typeof s?"function"==typeof r?r(s,o):o(!0):o(!1!==s)}else o(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter(function(e){return e!==r})}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach(function(e){return e.apply(void 0,n)})}}}var Ze=!("undefined"==typeof window||!window.document||!window.document.createElement);function Qe(e,t){t(window.confirm(e))}var Je="popstate",Ke="hashchange";function Ye(){try{return window.history.state||{}}catch(e){return{}}}var Xe="hashchange",et={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+He(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:He,decodePath:$e},slash:{encodePath:$e,decodePath:$e}};function tt(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function nt(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function rt(e){window.location.replace(tt(window.location.href)+"#"+e)}var ot=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).history=function(e){void 0===e&&(e={}),Ze||ne(!1);var t,n=window.history,r=(-1===(t=window.navigator.userAgent).indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,o=!(-1===window.navigator.userAgent.indexOf("Trident")),s=e,a=s.forceRefresh,i=void 0!==a&&a,c=s.getUserConfirmation,l=void 0===c?Qe:c,u=s.keyLength,p=void 0===u?6:u,d=e.basename?Ue($e(e.basename)):"";function h(e){var t=e||{},n=t.key,r=t.state,o=window.location,s=o.pathname+o.search+o.hash;return d&&(s=Ve(s,d)),qe(s,r,n)}function f(){return Math.random().toString(36).substr(2,p)}var g=Ge();function v(e){W(I,e),I.length=n.length,g.notifyListeners(I.location,I.action)}function m(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||x(h(e.state))}function w(){x(h(Ye()))}var y=!1;function x(e){y?(y=!1,v()):g.confirmTransitionTo(e,"POP",l,function(t){t?v({action:"POP",location:e}):function(e){var t=I.location,n=_.indexOf(t.key);-1===n&&(n=0);var r=_.indexOf(e.key);-1===r&&(r=0);var o=n-r;o&&(y=!0,j(o))}(e)})}var b=h(Ye()),_=[b.key];function k(e){return d+We(e)}function j(e){n.go(e)}var S=0;function P(e){1===(S+=e)&&1===e?(window.addEventListener(Je,m),o&&window.addEventListener(Ke,w)):0===S&&(window.removeEventListener(Je,m),o&&window.removeEventListener(Ke,w))}var C=!1,I={length:n.length,action:"POP",location:b,createHref:k,push:function(e,t){var o="PUSH",s=qe(e,t,f(),I.location);g.confirmTransitionTo(s,o,l,function(e){if(e){var t=k(s),a=s.key,c=s.state;if(r)if(n.pushState({key:a,state:c},null,t),i)window.location.href=t;else{var l=_.indexOf(I.location.key),u=_.slice(0,l+1);u.push(s.key),_=u,v({action:o,location:s})}else window.location.href=t}})},replace:function(e,t){var o="REPLACE",s=qe(e,t,f(),I.location);g.confirmTransitionTo(s,o,l,function(e){if(e){var t=k(s),a=s.key,c=s.state;if(r)if(n.replaceState({key:a,state:c},null,t),i)window.location.replace(t);else{var l=_.indexOf(I.location.key);-1!==l&&(_[l]=s.key),v({action:o,location:s})}else window.location.replace(t)}})},go:j,goBack:function(){j(-1)},goForward:function(){j(1)},block:function(e){void 0===e&&(e=!1);var t=g.setPrompt(e);return C||(P(1),C=!0),function(){return C&&(C=!1,P(-1)),t()}},listen:function(e){var t=g.appendListener(e);return P(1),function(){P(-1),t()}}};return I}(t.props),t}return D(t,e),t.prototype.render=function(){return H().createElement(fe,{history:this.history,children:this.props.children})},t}(H().Component),st=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).history=function(e){void 0===e&&(e={}),Ze||ne(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,o=void 0===r?Qe:r,s=n.hashType,a=void 0===s?"slash":s,i=e.basename?Ue($e(e.basename)):"",c=et[a],l=c.encodePath,u=c.decodePath;function p(){var e=u(nt());return i&&(e=Ve(e,i)),qe(e)}var d=Ge();function h(e){W(S,e),S.length=t.length,d.notifyListeners(S.location,S.action)}var f=!1,g=null;function v(){var e=nt(),t=l(e);if(e!==t)rt(t);else{var n=p(),r=S.location;if(!f&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(r,n))return;if(g===We(n))return;g=null,function(e){f?(f=!1,h()):d.confirmTransitionTo(e,"POP",o,function(t){t?h({action:"POP",location:e}):function(e){var t=S.location,n=x.lastIndexOf(We(t));-1===n&&(n=0);var r=x.lastIndexOf(We(e));-1===r&&(r=0);var o=n-r;o&&(f=!0,b(o))}(e)})}(n)}}var m=nt(),w=l(m);m!==w&&rt(w);var y=p(),x=[We(y)];function b(e){t.go(e)}var _=0;function k(e){1===(_+=e)&&1===e?window.addEventListener(Xe,v):0===_&&window.removeEventListener(Xe,v)}var j=!1,S={length:t.length,action:"POP",location:y,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=tt(window.location.href)),n+"#"+l(i+We(e))},push:function(e,t){var n="PUSH",r=qe(e,void 0,void 0,S.location);d.confirmTransitionTo(r,n,o,function(e){if(e){var t=We(r),o=l(i+t);if(nt()!==o){g=t,function(e){window.location.hash=e}(o);var s=x.lastIndexOf(We(S.location)),a=x.slice(0,s+1);a.push(t),x=a,h({action:n,location:r})}else h()}})},replace:function(e,t){var n="REPLACE",r=qe(e,void 0,void 0,S.location);d.confirmTransitionTo(r,n,o,function(e){if(e){var t=We(r),o=l(i+t);nt()!==o&&(g=t,rt(o));var s=x.indexOf(We(S.location));-1!==s&&(x[s]=t),h({action:n,location:r})}})},go:b,goBack:function(){b(-1)},goForward:function(){b(1)},block:function(e){void 0===e&&(e=!1);var t=d.setPrompt(e);return j||(k(1),j=!0),function(){return j&&(j=!1,k(-1)),t()}},listen:function(e){var t=d.appendListener(e);return k(1),function(){k(-1),t()}}};return S}(t.props),t}return D(t,e),t.prototype.render=function(){return H().createElement(fe,{history:this.history,children:this.props.children})},t}(H().Component),at=function(e,t){return"function"==typeof e?e(t):e},it=function(e,t){return"string"==typeof e?qe(e,null,null,t):e},ct=function(e){return e},lt=H().forwardRef;void 0===lt&&(lt=ct);var ut=lt(function(e,t){var n=e.innerRef,r=e.navigate,o=e.onClick,s=se(e,["innerRef","navigate","onClick"]),a=s.target,i=W({},s,{onClick:function(e){try{o&&o(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||a&&"_self"!==a||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return i.ref=ct!==lt&&t||n,H().createElement("a",i)}),pt=lt(function(e,t){var n=e.component,r=void 0===n?ut:n,o=e.replace,s=e.to,a=e.innerRef,i=se(e,["component","replace","to","innerRef"]);return H().createElement(he.Consumer,null,function(e){e||ne(!1);var n=e.history,c=it(at(s,e.location),e.location),l=c?n.createHref(c):"",u=W({},i,{href:l,navigate:function(){var t=at(s,e.location),r=We(e.location)===We(it(t));(o||r?n.replace:n.push)(t)}});return ct!==lt?u.ref=t||a:u.innerRef=a,H().createElement(r,u)})}),dt=function(e){return e},ht=H().forwardRef;void 0===ht&&(ht=dt);var ft=ht(function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,o=e.activeClassName,s=void 0===o?"active":o,a=e.activeStyle,i=e.className,c=e.exact,l=e.isActive,u=e.location,p=e.sensitive,d=e.strict,h=e.style,f=e.to,g=e.innerRef,v=se(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return H().createElement(he.Consumer,null,function(e){e||ne(!1);var n=u||e.location,o=it(at(f,n),n),m=o.pathname,w=m&&m.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),y=w?Pe(n.pathname,{path:w,exact:c,sensitive:p,strict:d}):null,x=!!(l?l(y,n):y),b="function"==typeof i?i(x):i,_="function"==typeof h?h(x):h;x&&(b=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(function(e){return e}).join(" ")}(b,s),_=W({},_,a));var k=W({"aria-current":x&&r||null,className:b,style:_,to:o},v);return dt!==ht?k.ref=t||g:k.innerRef=g,H().createElement(pt,k)})});const gt=e,{useHistory:vt}=gt,mt=({href:e,onClick:t,...n})=>{const r=vt(),[o,s]=(0,l.useState)(!1);return e&&t?n.onClick=async()=>{s(!0),await t(),s(!1),r.push((e||"").replace("#",""))}:(n.href=e,n.onClick=t),o&&(n.disabled=!0),(0,u.jsx)(i.Button,{...n})};class wt extends l.Component{render(){const{buttonsCard:e,className:t,headerActions:n,isNarrow:r,isMedium:o,isSmall:s,isWhite:a,noBorder:i,...c}=this.props,l=P()("newspack-card",t,e&&"newspack-card__buttons-card",n&&"newspack-card__header-actions",o&&"newspack-card__is-medium",r&&"newspack-card__is-narrow",s&&"newspack-card__is-small",a&&"newspack-card__is-white",i&&"newspack-card__no-border");return(0,u.jsx)("div",{className:l,...c})}}const yt=wt;var xt=n(7309),bt=n.n(xt),_t=n(7612),kt=n.n(_t);class jt extends l.Component{state={suggestions:{},allCategories:{},isLoading:!1};constructor(e){super(e),this.debouncedUpdateSuggestions=T()(this.updateSuggestions,100)}componentDidMount(){this.setState({isLoading:!0}),R()({path:(0,z.addQueryArgs)(`/wp/v2/${this.props.taxonomy}`,{per_page:-1,_fields:"id,name"})}).then(e=>this.setState({allCategories:e})).finally(()=>this.setState({isLoading:!1}))}componentWillUnmount(){this.debouncedUpdateSuggestions.cancel()}updateSuggestions(e){this.setState({isLoading:!0}),R()({path:(0,z.addQueryArgs)(`/wp/v2/${this.props.taxonomy}`,{search:e,per_page:20,_fields:"id,name",orderby:"count",order:"desc"})}).then(e=>{this.setState({suggestions:e.reduce((e,t)=>({...e,[t.name]:t}),{})})}).finally(()=>this.setState({isLoading:!1}))}handleOnChange=e=>{const{onChange:t}=this.props,{suggestions:n}=this.state;t(e.filter(e=>void 0!==e).map(e=>"string"==typeof e?n[e]:e).filter(Boolean))};getAvailableSuggestions=()=>{const{value:e}=this.props,{suggestions:t}=this.state,n=e.reduce((e,t)=>(t?.id&&e.push(t.id),e),[]);return kt()(t,({id:e})=>-1===n.indexOf(e)).map(e=>e.name)};render(){const{className:e,disabled:t,description:n,hideHelpFromVision:r,hideLabelFromVision:o,label:s,value:a}=this.props,{allCategories:c,isLoading:l}=this.state,p=P()("newspack-category-autocomplete",e);return(0,u.jsxs)("div",{className:p,children:[(0,u.jsx)(an,{onInputChange:e=>this.debouncedUpdateSuggestions(e),value:a.reduce((e,t)=>{const n="number"==typeof t?bt()(c,["id",t]):t;return n&&e.push({id:n.term_id||n.id,value:n.value||n.name}),e},[]),suggestions:this.getAvailableSuggestions(),onChange:this.handleOnChange,label:s,disabled:t,description:n,hideHelpFromVision:r,hideLabelFromVision:o}),l?(0,u.jsx)("span",{className:"newspack-category-autocomplete__suggestions-spinner",children:(0,u.jsx)(i.Spinner,{})}):null]})}}jt.defaultProps={taxonomy:"categories"};var St={grad:.9,turn:360,rad:360/(2*Math.PI)},Pt=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},Ct=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},It=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e>t?e:t},Ot=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},At=function(e){return{r:It(e.r,0,255),g:It(e.g,0,255),b:It(e.b,0,255),a:It(e.a)}},Et=function(e){return{r:Ct(e.r),g:Ct(e.g),b:Ct(e.b),a:Ct(e.a,3)}},Tt=/^#([0-9a-f]{3,8})$/i,Nt=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},Lt=function(e){var t=e.r,n=e.g,r=e.b,o=e.a,s=Math.max(t,n,r),a=s-Math.min(t,n,r),i=a?s===t?(n-r)/a:s===n?2+(r-t)/a:4+(t-n)/a:0;return{h:60*(i<0?i+6:i),s:s?a/s*100:0,v:s/255*100,a:o}},Mt=function(e){var t=e.h,n=e.s,r=e.v,o=e.a;t=t/360*6,n/=100,r/=100;var s=Math.floor(t),a=r*(1-n),i=r*(1-(t-s)*n),c=r*(1-(1-t+s)*n),l=s%6;return{r:255*[r,i,a,a,c,r][l],g:255*[c,r,r,i,a,a][l],b:255*[a,a,c,r,r,i][l],a:o}},Rt=function(e){return{h:Ot(e.h),s:It(e.s,0,100),l:It(e.l,0,100),a:It(e.a)}},Bt=function(e){return{h:Ct(e.h),s:Ct(e.s),l:Ct(e.l),a:Ct(e.a,3)}},zt=function(e){return Mt((n=(t=e).s,{h:t.h,s:(n*=((r=t.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:t.a}));var t,n,r},Ft=function(e){return{h:(t=Lt(e)).h,s:(o=(200-(n=t.s))*(r=t.v)/100)>0&&o<200?n*r/100/(o<=100?o:200-o)*100:0,l:o/2,a:t.a};var t,n,r,o},Dt=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,$t=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ht=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Vt=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ut={string:[[function(e){var t=Tt.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?Ct(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?Ct(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=Ht.exec(e)||Vt.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:At({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=Dt.exec(e)||$t.exec(e);if(!t)return null;var n,r,o=Rt({h:(n=t[1],r=t[2],void 0===r&&(r="deg"),Number(n)*(St[r]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return zt(o)},"hsl"]],object:[[function(e){var t=e.r,n=e.g,r=e.b,o=e.a,s=void 0===o?1:o;return Pt(t)&&Pt(n)&&Pt(r)?At({r:Number(t),g:Number(n),b:Number(r),a:Number(s)}):null},"rgb"],[function(e){var t=e.h,n=e.s,r=e.l,o=e.a,s=void 0===o?1:o;if(!Pt(t)||!Pt(n)||!Pt(r))return null;var a=Rt({h:Number(t),s:Number(n),l:Number(r),a:Number(s)});return zt(a)},"hsl"],[function(e){var t=e.h,n=e.s,r=e.v,o=e.a,s=void 0===o?1:o;if(!Pt(t)||!Pt(n)||!Pt(r))return null;var a=function(e){return{h:Ot(e.h),s:It(e.s,0,100),v:It(e.v,0,100),a:It(e.a)}}({h:Number(t),s:Number(n),v:Number(r),a:Number(s)});return Mt(a)},"hsv"]]},Wt=function(e,t){for(var n=0;n<t.length;n++){var r=t[n][0](e);if(r)return[r,t[n][1]]}return[null,void 0]},qt=function(e,t){var n=Ft(e);return{h:n.h,s:It(n.s+100*t,0,100),l:n.l,a:n.a}},Gt=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},Zt=function(e,t){var n=Ft(e);return{h:n.h,s:n.s,l:It(n.l+100*t,0,100),a:n.a}},Qt=function(){function e(e){this.parsed=function(e){return"string"==typeof e?Wt(e.trim(),Ut.string):"object"==typeof e&&null!==e?Wt(e,Ut.object):[null,void 0]}(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return Ct(Gt(this.rgba),2)},e.prototype.isDark=function(){return Gt(this.rgba)<.5},e.prototype.isLight=function(){return Gt(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=Et(this.rgba)).r,n=e.g,r=e.b,s=(o=e.a)<1?Nt(Ct(255*o)):"","#"+Nt(t)+Nt(n)+Nt(r)+s;var e,t,n,r,o,s},e.prototype.toRgb=function(){return Et(this.rgba)},e.prototype.toRgbString=function(){return t=(e=Et(this.rgba)).r,n=e.g,r=e.b,(o=e.a)<1?"rgba("+t+", "+n+", "+r+", "+o+")":"rgb("+t+", "+n+", "+r+")";var e,t,n,r,o},e.prototype.toHsl=function(){return Bt(Ft(this.rgba))},e.prototype.toHslString=function(){return t=(e=Bt(Ft(this.rgba))).h,n=e.s,r=e.l,(o=e.a)<1?"hsla("+t+", "+n+"%, "+r+"%, "+o+")":"hsl("+t+", "+n+"%, "+r+"%)";var e,t,n,r,o},e.prototype.toHsv=function(){return e=Lt(this.rgba),{h:Ct(e.h),s:Ct(e.s),v:Ct(e.v),a:Ct(e.a,3)};var e},e.prototype.invert=function(){return Jt({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),Jt(qt(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),Jt(qt(this.rgba,-e))},e.prototype.grayscale=function(){return Jt(qt(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),Jt(Zt(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),Jt(Zt(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?Jt({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Ct(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=Ft(this.rgba);return"number"==typeof e?Jt({h:e,s:t.s,l:t.l,a:t.a}):Ct(t.h)},e.prototype.isEqual=function(e){return this.toHex()===Jt(e).toHex()},e}(),Jt=function(e){return e instanceof Qt?e:new Qt(e)},Kt=[],Yt=function(e){var t=e/255;return t<.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},Xt=function(e){return.2126*Yt(e.r)+.7152*Yt(e.g)+.0722*Yt(e.b)};const{useHistory:en}=gt;n(6449),n(6924);const tn=e=>(0,l.useRef)(`${e}-${Math.round(99999*Math.random())}`).current,nn=window.wp.keycodes,rn={InteractiveDiv:({style:e={},...t})=>(0,u.jsx)("div",{tabIndex:"0",role:"button",onKeyDown:e=>nn.ENTER===e.keyCode&&t.onClick(),style:{cursor:"pointer",...e},...t}),confirmAction:e=>!!confirm(e)};!function(e){e.forEach(function(e){Kt.indexOf(e)<0&&(e(Qt,Ut),Kt.push(e))})}([function(e){e.prototype.luminance=function(){return e=Xt(this.rgba),void 0===(t=2)&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n+0;var e,t,n},e.prototype.contrast=function(t){void 0===t&&(t="#FFF");var n,r,o,s,a,i,c,l=t instanceof e?t:new e(t);return s=this.rgba,a=l.toRgb(),n=(i=Xt(s))>(c=Xt(a))?(i+.05)/(c+.05):(c+.05)/(i+.05),void 0===(r=2)&&(r=0),void 0===o&&(o=Math.pow(10,r)),Math.floor(o*n)/o+0},e.prototype.isReadable=function(e,t){return void 0===e&&(e="#FFF"),void 0===t&&(t={}),this.contrast(e)>=(a=void 0===(s=(n=t).size)?"normal":s,"AAA"===(o=void 0===(r=n.level)?"AA":r)&&"normal"===a?7:"AA"===o&&"large"===a?3:4.5);var n,r,o,s,a}}]);const{InteractiveDiv:on}=rn;class sn extends l.Component{render(){const{className:e,description:t,hideHelpFromVision:n,hideLabelFromVision:r,...o}=this.props,s=P()("newspack-form-token-field__input-container",e);return(0,u.jsxs)("div",{className:P()({"newspack-form-token-field--label-hidden":r,"newspack-form-token-field--help-hidden":n},"newspack-form-token-field"),children:[(0,u.jsx)(i.FormTokenField,{className:s,...o}),t&&(0,u.jsx)("p",{className:"newspack-form-token-field__help",children:t})]})}}const an=sn,cn=({simple:e})=>{const{components_demo:t=!1,support:n=!1,setup_wizard:r=!1,reset_url:s=!1,plugin_version:a={label:"Newspack"},remove_starter_content:c=!1,support_email:l}=window.newspack_urls||{},p=[{label:a.label,url:"https://newspack.com/category/release-notes/",external:!0},{label:(0,o.__)("About","newspack-plugin"),url:"https://newspack.com/",external:!0},{label:(0,o.__)("Documentation","newspack-plugin"),url:n,external:!0}];return t&&p.push({label:(0,o.__)("Components Demo","newspack-plugin"),url:t}),r&&p.push({label:(0,o.__)("Setup Wizard","newspack-plugin"),url:r}),s&&p.push({label:(0,o.__)("Reset Newspack","newspack-plugin"),url:s}),c&&p.push({label:(0,o.__)("Remove Starter Content","newspack-plugin"),url:c}),l&&p.push({label:(0,o.__)("Contact Support","newspack-plugin"),url:`mailto:${l}`}),(0,u.jsx)("div",{className:"newspack-footer",children:!e&&(0,u.jsx)("ul",{children:p.map(({url:e,label:t,external:n},r)=>(0,u.jsx)("li",{children:n?(0,u.jsx)(i.ExternalLink,{href:e,children:t}):(0,u.jsx)("a",{href:e,children:t})},r))})})};var ln=n(6139),un=n.n(ln);class pn extends l.Component{constructor(){super(...arguments),this.state={pluginInfo:[],showModal:!1}}componentDidMount=()=>{this._isMounted=!0;const{plugin:e}=this.props;this.retrievePluginInfo(e)};componentWillUnmount=()=>{this._isMounted=!1};retrievePluginInfo=e=>{const{onReady:t}=this.props;R()({path:"/newspack/v1/plugins/"+e}).then(e=>{this._isMounted&&(t(e),this.setState({pluginInfo:e}))})};textForPlugin=e=>{const t={modalBody:null,modalTitle:e.Name&&`${(0,o.__)("Manage","newspack-plugin")} ${e.Name}`,primaryButton:e.Name&&`${(0,o.__)("Manage","newspack-plugin")} ${e.Name}`,primaryModalButton:(0,o.__)("Manage","newspack-plugin"),dismissModalButton:(0,o.__)("Dismiss","newspack-plugin")};return un()(t,this.props)};goToPlugin=e=>{const{editLink:t,showOnBlockEditor:n}=this.props;R()({path:"/newspack/v1/plugins/"+e+"/handoff",method:"POST",data:{editLink:t,handoffReturnUrl:window&&window.location.href,showOnBlockEditor:!!n}}).then(e=>{window.location.href=e.HandoffLink})};render(){const{className:e,children:t,compact:n,useModal:r,modalTitle:s,modalBody:a,onReady:i,editLink:c,...p}=this.props,{pluginInfo:d,showModal:h}=this.state,{modalBody:f,modalTitle:g,primaryButton:v,primaryModalButton:m,dismissModalButton:w}=this.textForPlugin(d),{Configured:y,Name:x,Slug:b,Status:_}=d,k=P()(y&&"is-configured",e);return(0,u.jsxs)(l.Fragment,{children:[x&&"active"===_&&(0,u.jsx)(mt,{className:k,isSecondary:!p.isPrimary&&!p.isTertiary&&!p.isLink,...p,onClick:()=>r?this.setState({showModal:!0}):this.goToPlugin(b),children:t||v}),x&&"active"!==_&&(0,u.jsx)(mt,{className:k,variant:"secondary",disabled:!0,...p,children:x+(0,o.__)(" not installed","newspack-plugin")}),!x&&(0,u.jsx)(mt,{className:k,isSecondary:!p.isPrimary&&!p.isTertiary&&!p.isLink,...p,children:(0,u.jsxs)(l.Fragment,{children:[!n&&(0,u.jsx)(Gn,{isLeft:!0}),(0,o.__)("Retrieving Plugin Info","newspack-plugin")]})}),h&&(0,u.jsxs)(mn,{title:g,onRequestClose:()=>this.setState({showModal:!1}),children:[(0,u.jsx)("p",{children:f}),(0,u.jsxs)(yt,{buttonsCard:!0,noBorder:!0,className:"justify-end",children:[(0,u.jsx)(mt,{variant:"secondary",onClick:()=>this.setState({showModal:!1}),children:w}),(0,u.jsx)(mt,{variant:"primary",onClick:()=>this.goToPlugin(b),children:m})]})]})]})}}pn.defaultProps={onReady:()=>{}};const dn=pn,hn="newspack_wizard_handoff_message";function fn(){const[e,t]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{setTimeout(()=>{const e=JSON.parse(localStorage.getItem(hn));t(!!e?.message&&e.message),e?.url&&-1===window.location.href.indexOf(e.url)&&(window.localStorage.removeItem(hn),t(!1))},100)},[]),e?(0,u.jsx)(jn,{isHandoff:!0,isDismissible:!1,rawHTML:!0,noticeText:e}):null}var gn=(0,u.jsx)(p.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,u.jsx)(p.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 12a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm.75 4v1.5h-1.5V8h1.5Zm0 8v-5h-1.5v5h1.5Z"})});l.Component,l.Component;const vn=({className:e="",columns:t=2,gutter:n=32,noMargin:r=!1,rowGap:o=0,...s})=>{const a=P()("newspack-grid",r&&"newspack-grid--no-margin",t&&"newspack-grid__columns-"+t,n&&"newspack-grid__gutter-"+n,o&&"newspack-grid__row-gap-"+o,e);return(0,u.jsx)("div",{className:a,...s})},mn=(0,l.forwardRef)(function({className:e,isWide:t,isNarrow:n,hideTitle:r,...o},s){const a=P()("newspack-modal",t&&"newspack-modal--wide",n&&"newspack-modal--narrow",r&&"newspack-modal--hide-title",e);return(0,u.jsx)(i.Modal,{className:a,...o,ref:s})});class wn extends l.Component{render(){const{className:e,simple:t,size:n,white:r}=this.props,o=P()("newspack-icon",t&&"newspack-icon--simple",r&&"newspack-icon--white",e);return(0,u.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",height:n,width:n,viewBox:"0 0 24 24",className:o,children:(0,u.jsx)(i.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M24 12C24 18.6271 18.6271 24 12 24C5.37213 24 0 18.6271 0 12C0 5.3729 5.3729 0 12 0C18.6271 0 24 5.3729 24 12ZM17.4545 17.4546L6.54545 6.54545V17.4545H8.72727V11.8182L14.3636 17.4546H17.4545ZM11.2727 8.18182H17.4545V6.54545H9.63636L11.2727 8.18182ZM17.4545 11.2727H14.3636L12.7273 9.63636H17.4545V11.2727ZM17.4545 12.7273V14.3636L15.8182 12.7273H17.4545Z"})})}}wn.defaultProps={size:32};const yn=wn;var xn=(0,u.jsx)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,u.jsx)(p.Path,{d:"M12 4a8 8 0 1 1 .001 16.001A8 8 0 0 1 12 4Zm0 1.5a6.5 6.5 0 1 0-.001 13.001A6.5 6.5 0 0 0 12 5.5Zm.75 11h-1.5V15h1.5v1.5Zm-.445-9.234a3 3 0 0 1 .445 5.89V14h-1.5v-1.25c0-.57.452-.958.917-1.01A1.5 1.5 0 0 0 12 8.75a1.5 1.5 0 0 0-1.5 1.5H9a3 3 0 0 1 3.305-2.984Z"})}),bn=(0,u.jsx)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,u.jsx)(p.Path,{d:"M6.13 5.5l1.926 1.927A4.975 4.975 0 007.025 10H5v1.5h2V13H5v1.5h2.1a5.002 5.002 0 009.8 0H19V13h-2v-1.5h2V10h-2.025a4.979 4.979 0 00-1.167-2.74l1.76-1.76-1.061-1.06-1.834 1.834A4.977 4.977 0 0012 5.5c-1.062 0-2.046.33-2.855.895L7.19 4.44 6.13 5.5zm2.37 5v3a3.5 3.5 0 107 0v-3a3.5 3.5 0 10-7 0z",fillRule:"evenodd",clipRule:"evenodd"})});class kn extends l.Component{render(){const{className:e,debugMode:t,isError:n,isHandoff:r,isHelp:o,isSuccess:s,isWarning:a,noticeText:i,rawHTML:c,style:p={},children:f=null}=this.props,g=P()("newspack-notice",e,t&&"newspack-notice__is-debug",n&&"newspack-notice__is-error",r&&"newspack-notice__is-handoff",o&&"newspack-notice__is-help",s&&"newspack-notice__is-success",a&&"newspack-notice__is-warning");let v;return v=o?xn:s?d:t?bn:gn,(0,u.jsxs)("div",{className:g,style:p,children:[(0,u.jsx)(h,{icon:v}),(0,u.jsxs)("div",{className:"newspack-notice__content",children:[c?(0,u.jsx)(l.RawHTML,{children:i}):i,f||null]})]})}}const jn=kn;class Sn extends l.Component{constructor(){super(...arguments),this.state={pluginInfo:{},installationInitialized:!1}}componentDidMount=()=>{const{plugins:e}=this.props;this.retrievePluginInfo(e).then(()=>{this.props.autoInstall&&this.installAllPlugins()})};componentDidUpdate=e=>{const{autoInstall:t,plugins:n}=this.props,{installationInitialized:r}=this.state;n!==e.plugins&&this.retrievePluginInfo(n),t&&!r&&this.installAllPlugins()};retrievePluginInfo=e=>new Promise(t=>{R()({path:"/newspack/v1/plugins/"}).then(n=>{const r=Object.keys(n).reduce((t,r)=>(-1===e.indexOf(r)||(t[r]={...n[r],installationStatus:"active"===n[r].Status?1:0}),t),{});this.updatePluginInfo(r).then(()=>t())})});installAllPlugins=()=>{const{pluginInfo:e}=this.state;this.setState({installationInitialized:!0}),Object.keys(e).filter(t=>"active"!==e[t].Status).map(e=>()=>this.installPlugin(e)).reduce((e,t)=>e.then(e=>t().then(Array.prototype.concat.bind(e))),Promise.resolve([]))};installPlugin=e=>{this.setInstallationStatus(e,2);const t={path:`/newspack/v1/plugins/${e}/configure/`,method:"post"};return R()(t).then(t=>{const{pluginInfo:n}=this.state;this.props.onInstalled(e),this.updatePluginInfo({...n,[e]:{...t,installationStatus:1}})}).catch(t=>{this.setInstallationStatus(e,3,t.message)})};setChecked=(e,t)=>{const{pluginInfo:n}=this.state;this.updatePluginInfo({...n,[e]:{...n[e],checked:t}})};setInstallationStatus=(e,t,n=null)=>{const{pluginInfo:r}=this.state;this.updatePluginInfo({...r,[e]:{...r[e],installationStatus:t,notification:n}})};updatePluginInfo=e=>new Promise(t=>{const{onStatus:n}=this.props;this.setState({pluginInfo:e},()=>{const r=Object.values(e).every(e=>"active"===e.Status);n({complete:r,pluginInfo:e}),t()})});classForInstallationStatus=e=>{switch(e){case 1:return"newspack-plugin-installer__status-active";case 2:return"newspack-plugin-installer__status-installing";case 3:return"newspack-plugin-installer__status-error";default:return"newspack-plugin-installer__status-none"}};render(){const{autoInstall:e,isSmall:t,withoutFooterButton:n}=this.props,{pluginInfo:r}=this.state,{is_managed:s}=window.newspack_aux_data||{},a=Object.keys(r),i=[];a.forEach(e=>{const t=r[e];i.push(t.Status)});const c=e=>"active"===e||"inactive"===e,l=i.every(c)?(0,o.__)("Activate","newspack-plugin"):(0,o.__)("Install","newspack-plugin"),p=a.some(e=>{const t=r[e];return"active"!==t.Status&&0===t.installationStatus});return(0,u.jsxs)(u.Fragment,{children:[(!r||!Object.keys(r).length)&&(0,u.jsxs)("div",{className:"newspack-plugin-installer_is-waiting",children:[(0,u.jsx)(Gn,{isLeft:!0}),(0,o.__)("Retrieving plugin informationâ€¦","newspack-plugin")]}),r&&a.length>0&&a.map(e=>{const n=r[e],{Name:a,Description:i,Download:l,Status:p,installationStatus:f,notification:g}=n,v=2===f,m=!v&&"active"!==p,w=l||c(p);let y;2===f?y="inactive"===p?(0,o.__)("Activatingâ€¦"):(0,o.__)("Installingâ€¦"):w?"uninstalled"===p?y=(0,u.jsxs)("span",{className:"newspack-plugin-installer__status",children:[(0,o.__)("Install","newspack"),(0,u.jsx)("span",{className:"newspack-checkbox-icon"})]}):"inactive"===p?y=(0,u.jsxs)("span",{className:"newspack-plugin-installer__status",children:[(0,o.__)("Activate","newspack-plugin"),(0,u.jsx)("span",{className:"newspack-checkbox-icon"})]}):"active"===p&&(y=(0,u.jsxs)("span",{className:"newspack-plugin-installer__status",children:[(0,o.__)("Installed","newspack-plugin"),(0,u.jsx)("span",{className:"newspack-checkbox-icon newspack-checkbox-icon--checked",children:(0,u.jsx)(h,{icon:d})})]})):y=(0,u.jsxs)("span",{className:"newspack-plugin-installer__status",children:[s?(0,o.__)("Contact Newspack support to install","newspack-plugin"):(0,o.__)("Plugin must be installed manually","newspack-plugin"),(0,u.jsx)("span",{className:"newspack-checkbox-icon"})]});const x=P()("newspack-action-card__plugin-installer",this.classForInstallationStatus(f)),b=m?()=>this.installPlugin(e):null;return(0,u.jsx)(A,{title:a,description:i,disabled:!w,actionText:y,isSmall:t,isWaiting:v,onClick:b,notification:g,notificationLevel:"error",notificationHTML:!0,className:x},e)}),!n&&!e&&r&&a.length>0&&(0,u.jsx)("div",{className:"newspack-buttons-card",children:(0,u.jsx)(mt,{disabled:!p,isPrimary:!0,onClick:this.installAllPlugins,children:l})})]})}}Sn.defaultProps={onStatus:()=>{},onInstalled:()=>{}};const Pn=Sn,Cn=window.wp.hooks,In=e=>Array.isArray(e.options)&&e.options.length,On=e=>{switch(e.type){case"int":case"integer":case"float":case"number":return"number";case"string":case"text":return"text";case"password":return"password";case"boolean":case"checkbox":return"checkbox";default:return null}},An=e=>{var t;const[n,r]=(0,l.useState)(!0),{error:s,sectionKey:a,active:c,title:p,description:d,fields:h,disabled:f,onChange:g,onUpdate:v}=e,m=e=>({disabled:f,name:`${e.section}_${e.key}`,type:On(e),label:e.description,help:e.help||null,options:e.options?.map(e=>({value:e.value,label:e.name||e.label}))||null,value:e.value,multiple:!(!In(e)||!e.multiple)||null,checked:"boolean"===e.type?!!e.value:null,onChange:t=>{g(e.key,t),r(!1)}}),w=(t,n=null)=>(0,Cn.applyFilters)(`newspack.settingSection.${a}.${t}`,n,e);let y=2;return h.length%3==0?y=3:1===h.length&&(y=1),(0,u.jsx)(A,{id:null!==(t=e.id)&&void 0!==t?t:null,isMedium:!0,disabled:f,title:p,description:d,toggleChecked:c,hasGreyHeader:c||null===c,toggleOnChange:null!==c?e=>v({active:e}):null,actionContent:(c||null===c)&&w("buttons",(0,u.jsx)(mt,{variant:"primary",disabled:f||n,onClick:()=>{v(),r(!0)},children:(0,o.__)("Save Settings","newspack")})),children:(c||null===c)&&(0,u.jsxs)(l.Fragment,{children:[s?.message&&(0,u.jsx)(jn,{noticeText:s.message,isError:!0}),w("beforeControls"),(0,u.jsx)(vn,{columns:y,gutter:32,children:h.map(e=>{const t=(e=>{if(In(e))return Fn;switch(e.type){case"checkbox":case"boolean":return i.CheckboxControl;default:return Wn}})(e);return(0,Cn.applyFilters)(`newspack.settingsSection.${a}.control`,(0,u.jsx)(t,{...m(e)},e.key),{sectionKey:a,setting:e,onChange:g})})})]})})};class En extends l.Component{constructor(){super(...arguments),this.state={inFlight:!1,settings:{},error:null}}fetchSettings=()=>{const{afterFetch:e,pluginSlug:t,isWizard:n}=this.props;this.setState({inFlight:!0}),R()({path:n?`/newspack/v1/wizard/${t}/settings`:`/${t}/v1/settings`}).then(t=>{this.setState({settings:t,error:null}),"function"==typeof e&&e(t)}).catch(e=>{this.setState({error:e})}).finally(()=>{this.setState({inFlight:!1})})};componentDidMount(){this.fetchSettings()}getSettingsValues=e=>this.state.settings[e]?.reduce((e,t)=>(e[t.key]=t.value,e),{})||{};handleSettingChange=e=>(t,n)=>{const r=[...this.state.settings[e]];r.forEach(e=>{e.key===t&&(e.value=n)}),this.setState({settings:{...this.state.settings,[e]:r}})};handleSectionUpdate=e=>t=>{const{afterUpdate:n,pluginSlug:r,isWizard:o}=this.props;this.setState({inFlight:!0}),R()({path:o?`/newspack/v1/wizard/${r}/settings`:`/${r}/v1/settings`,method:"POST",data:{section:e,settings:t||this.getSettingsValues(e)}}).then(t=>{this.setState({settings:{...this.state.settings,[e]:t[e]},error:null}),"function"==typeof n&&n(t)}).catch(e=>{this.setState({error:e})}).finally(()=>{this.setState({inFlight:!1})})};getSectionInfo=e=>this.state.settings[e]?.find(e=>!e.key||"active"===e.key);getSectionTitle=e=>this.getSectionInfo(e)?.description;getSectionDescription=e=>this.getSectionInfo(e)?.help;isSectionActive=e=>{const{settings:t}=this.state,n=t[e]?.find(e=>"active"===e.key);return n?n.value:null};getSectionFields=e=>this.state.settings[e]?.filter(e=>e.key&&"active"!==e.key);render(){const{title:e,description:t,hasGreyHeader:n,children:r,titleLevel:o=1}=this.props,{settings:s,inFlight:a,error:i}=this.state;return(0,u.jsxs)(l.Fragment,{children:[e&&(0,u.jsx)(Nn,{title:e,heading:o,description:t}),i&&(0,u.jsx)(jn,{isError:!0,noticeText:i.message}),(0,u.jsxs)("div",{className:P()("newspack-plugin-settings",{"newspack-wizard-section__is-loading":a&&!Object.keys(s).length}),children:[Object.keys(s).map(e=>(0,u.jsx)(An,{disabled:a,id:`plugin-settings-${e}`,sectionKey:e,title:this.getSectionTitle(e),description:this.getSectionDescription(e),active:this.isSectionActive(e),fields:this.getSectionFields(e),onChange:this.handleSettingChange(e),onUpdate:this.handleSectionUpdate(e),hasGreyHeader:n},e)),r]})]})}}En.defaultProps={title:(0,o.__)("General Settings","newspack-plugin")},En.Section=An;class Tn extends l.Component{render(){const{className:e,padding:t,...n}=this.props,r=P()("newspack-popover",t&&"newspack-popover__padding-"+t,e);return(0,u.jsx)(i.Popover,{className:r,...n})}}Tn.defaultProps={padding:!1};const Nn=({centered:e=!1,className:t=null,description:n="",heading:r=2,isWhite:o=!1,noMargin:s=!1,title:a,id:i=null})=>{const c=(0,l.useRef)();(0,l.useEffect)(()=>{const e=new Proxy(new URLSearchParams(window.location.search),{get:(e,t)=>e.get(t)}).scrollTo;e&&e===i&&window.setTimeout(()=>c.current.scrollIntoView({behavior:"smooth"}),250)},[]);const p=P()("newspack-section-header",e&&"newspack-section-header--is-centered",o&&"newspack-section-header--is-white",s&&"newspack-section-header--no-margin",t),d=`h${r}`;return(0,u.jsx)("div",{id:i,className:"newspack-section-header__container",ref:c,children:(0,u.jsxs)(vn,{columns:1,gutter:8,className:p,children:["string"==typeof a&&(0,u.jsx)(d,{children:a}),"function"==typeof a&&(0,u.jsx)(d,{children:a()}),n&&"string"==typeof n&&(0,u.jsx)("p",{children:n}),"function"==typeof n&&(0,u.jsx)("p",{children:n()}),n&&"string"!=typeof n&&"function"!=typeof n&&(0,u.jsx)("p",{children:n})]})})};var Ln=n(2426),Mn=n.n(Ln);function Rn({help:e,label:t,onChange:n,optgroups:r=[],className:s,hideLabelFromVision:a,...c}){const l=tn("group-select");return(0,u.jsx)(i.BaseControl,{label:t,hideLabelFromVision:a,id:l,help:e,className:P()(s,"components-select-control"),children:(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsxs)("select",{id:l,className:"components-select-control__input",onChange:e=>{const{value:t}=e.target,o=bt()(r,e=>Mn()(e.options,["value",t]));n(t,o)},"aria-describedby":e?`${l}__help`:void 0,...c,children:[(0,u.jsx)("option",{value:"",children:(0,o.__)("-- Select --","newspack-plugin")}),r.map(({label:e,options:t},n)=>(0,u.jsx)("optgroup",{label:e,children:t.map((e,t)=>(0,u.jsx)("option",{value:e.value,disabled:e.disabled,children:e.label},`${e.label}-${e.value}-${t}`))},n))]}),(0,u.jsx)("div",{className:"components-select-control__arrow-wrapper",children:(0,u.jsx)(h,{icon:I,size:18})})]})})}const Bn=({buttonOptions:e,buttonSmall:t,className:n,help:r,hideLabelFromVision:o,label:s,onChange:a,value:c})=>{const l=tn("button-group");return(0,u.jsx)(i.BaseControl,{label:s,help:r,hideLabelFromVision:o,id:l.current,className:P()(n,"components-select-control"),children:(0,u.jsx)(i.ButtonGroup,{children:e.map(e=>{const n=c===e.value;let r=()=>e.label;return e.icon&&(r=()=>(0,u.jsx)(h,{icon:e.icon})),(0,u.jsx)(i.Button,{variant:n?"primary":null,isPressed:n,onClick:()=>a(e.value),isSmall:t,children:(0,u.jsx)(r,{})},e.value)})})})};class zn extends l.Component{render(){const{className:e,optgroups:t,buttonOptions:n,buttonSmall:r,...o}=this.props,s=P()("newspack-select-control",t&&"newspack-grouped-select-control",n&&"newspack-buttons-select-control",e);return(0,u.jsx)("div",{className:s,children:t?(0,u.jsx)(Rn,{optgroups:t,...o}):n?(0,u.jsx)(Bn,{buttonOptions:n,buttonSmall:r,...o}):(0,u.jsx)(i.SelectControl,{...o})})}}const Fn=zn;var Dn=n(4713),$n=n.n(Dn);const{NavLink:Hn,useHistory:Vn}=gt,Un=({items:e,className:t,disableUpcoming:n,children:r=null})=>{const o=e.filter(e=>!e.isHiddenInTabbedNavigation),{location:s}=Vn(),a=$n()(o,["path",s.pathname]);return(0,u.jsxs)("div",{className:P()("newspack-tabbed-navigation",t),children:[(0,u.jsx)("ul",{children:o.map((e,t)=>(0,u.jsx)("li",{children:(0,u.jsx)(Hn,{to:e.path,isActive:(t,{pathname:n})=>function(e,t,n){return e.path===n||(Array.isArray(e?.activeTabPaths)?e.activeTabPaths.some(t=>{if(t.endsWith("*")){const e=t.slice(0,-1);return n.startsWith(e)}return e.activeTabPaths.includes(n)}):t)}(e,t,n),exact:!e.hasOwnProperty("exact")||e.exact,activeClassName:"selected",className:P()({disabled:n&&t>a}),children:e.label})},t))}),r]})},Wn=({className:e="",required:t=!1,isWide:n=!1,withMargin:r=!0,...s})=>{const a=(0,l.useRef)(null);(0,l.useEffect)(()=>{if(null===a.current)return;const e=a.current.querySelector("label");e&&e.setAttribute("data-required-text",(0,o.__)("(required)","newspack-plugin"))},[a.current]);const c=P()("newspack-text-control",{"newspack-text-control--wide":n,"newspack-text-control--with-margin":r},e);return t?(0,u.jsx)("div",{ref:a,className:"newspack-text-control--required",children:(0,u.jsx)(i.TextControl,{className:c,required:t,...s})}):(0,u.jsx)(i.TextControl,{className:c,...s})};class qn extends l.Component{render(){const{className:e,isRight:t,isLeft:n,isCenter:r,...o}=this.props,s=P()("newspack-waiting",e,{"is-right":t,"is-left":n,"is-center":r});return(0,u.jsx)(i.Spinner,{className:s,...o})}}const Gn=qn;var Zn=(0,u.jsx)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,u.jsx)(p.Path,{d:"M20.5 16h-.7V8c0-1.1-.9-2-2-2H6.2c-1.1 0-2 .9-2 2v8h-.7c-.8 0-1.5.7-1.5 1.5h20c0-.8-.7-1.5-1.5-1.5zM5.7 8c0-.3.2-.5.5-.5h11.6c.3 0 .5.2.5.5v7.6H5.7V8z"})}),Qn=(0,u.jsx)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,u.jsx)(p.Path,{d:"M17 4H7c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H7c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h10c.3 0 .5.2.5.5v12zm-7.5-.5h4V16h-4v1.5z"})}),Jn=(0,u.jsx)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,u.jsx)(p.Path,{d:"M15 4H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H9c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h6c.3 0 .5.2.5.5v12zm-4.5-.5h2V16h-2v1.5z"})}),Kn=(0,u.jsx)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,u.jsx)(p.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})});const Yn="newspack-components-web-preview-wrapper";class Xn extends l.Component{state={device:"desktop",loaded:!1,isPreviewVisible:!1};constructor(e){super(e),this.iframeRef=(0,l.createRef)()}componentDidMount(){const e=document.getElementById(Yn);this.modalDOMElement=e||document.createElement("div"),e||(this.modalDOMElement.id=Yn,document.body.appendChild(this.modalDOMElement))}componentDidUpdate(){!0===this.state.isPreviewVisible?document.body.classList.add("newspack-web-preview--open"):document.body.classList.remove("newspack-web-preview--open")}getWebPreviewModal=()=>{const{beforeLoad:e=()=>{},onClose:t=()=>{},url:n}=this.props,{device:r,loaded:s,isPreviewVisible:a}=this.state;if(!this.modalDOMElement||!a)return null;const c=P()("newspack-web-preview",r,s&&"is-loaded");return e(),(0,l.createPortal)((0,u.jsx)("div",{className:c,children:(0,u.jsxs)("div",{className:"newspack-web-preview__interior",children:[(0,u.jsxs)("div",{className:"newspack-web-preview__toolbar",children:[(0,u.jsx)("div",{className:"newspack-web-preview__toolbar-left",children:(0,u.jsxs)(i.ButtonGroup,{children:[(0,u.jsx)(i.Button,{onClick:()=>this.setState({device:"desktop"}),variant:"desktop"===r&&"primary",icon:Zn,label:(0,o.__)("Preview Desktop Size","newspack-plugin")}),(0,u.jsx)(i.Button,{onClick:()=>this.setState({device:"tablet"}),variant:"tablet"===r&&"primary",icon:Qn,label:(0,o.__)("Preview Tablet Size","newspack-plugin")}),(0,u.jsx)(i.Button,{onClick:()=>this.setState({device:"phone"}),variant:"phone"===r&&"primary",icon:Jn,label:(0,o.__)("Preview Phone Size","newspack-plugin")})]})}),(0,u.jsx)("div",{className:"newspack-web-preview__toolbar-right",children:(0,u.jsx)(i.Button,{onClick:()=>{t(),this.setState({isPreviewVisible:!1,loaded:!1})},icon:Kn,label:(0,o.__)("Close Preview","newspack-plugin")})})]}),(0,u.jsxs)("div",{className:"newspack-web-preview__content",children:[!s&&(0,u.jsxs)("div",{className:"newspack-web-preview__is-waiting",children:[(0,u.jsx)(Gn,{isLeft:!0}),(0,o.__)("Loadingâ€¦","newspack-plugin")]}),(0,u.jsx)("iframe",{ref:this.iframeRef,title:"web-preview",src:n,onLoad:()=>{this.setState({loaded:!0}),this.props.onLoad(this.iframeRef.current)}})]})]})}),this.modalDOMElement)};showPreview=()=>{this.setState({isPreviewVisible:!0})};render(){const{label:e,variant:t,renderButton:n}=this.props;return(0,u.jsxs)(l.Fragment,{children:[n?n({showPreview:this.showPreview}):(0,u.jsx)(i.Button,{variant:t,onClick:this.showPreview,tabIndex:"0",children:e}),this.getWebPreviewModal()]})}}Xn.defaultProps={url:"//newspack.com",label:(0,o.__)("Preview","newspack-plugin"),onLoad:()=>{}};var er=(0,u.jsx)(p.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,u.jsx)(p.Path,{d:"M6 5.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM4 6a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2H6a2 2 0 01-2-2V6zm11-.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5h-3a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM13 6a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2h-3a2 2 0 01-2-2V6zm5 8.5h-3a.5.5 0 00-.5.5v3a.5.5 0 00.5.5h3a.5.5 0 00.5-.5v-3a.5.5 0 00-.5-.5zM15 13a2 2 0 00-2 2v3a2 2 0 002 2h3a2 2 0 002-2v-3a2 2 0 00-2-2h-3zm-9 1.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5v-3a.5.5 0 01.5-.5zM4 15a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2H6a2 2 0 01-2-2v-3z",fillRule:"evenodd",clipRule:"evenodd"})}),tr=n(3560),nr=n.n(tr),rr=n(8156),or=n.n(rr),sr=n(2193),ar=n.n(sr);const ir=e=>t=>({type:e,payload:t}),cr="newspack/wizards",lr={isLoading:!1,isQuietLoading:!1,apiData:{},error:null},ur=e=>JSON.parse(JSON.stringify(e)),pr={startLoadingData:ir("START_LOADING_DATA"),finishLoadingData:ir("FINISH_LOADING_DATA"),fetchFromAPI:ir("FETCH_FROM_API"),setAPIDataForWizard:ir("SET_API_DATA"),updateWizardSettings:ir("UPDATE_WIZARD_SETTINGS"),setError:ir("SET_ERROR"),*saveWizardSettings({slug:e,section:t="",payloadPath:n=!1,auxData:r={},updatePayload:o=null}){o&&(yield pr.updateWizardSettings({slug:e,...o}));const a=(0,s.select)(cr).getWizardAPIData(e),i=n?or()(a,n):a,c=yield pr.fetchFromAPI({path:`/newspack/v1/wizard/${e}/${t}`,method:"POST",data:{...i,...r},isQuietFetch:!0});if(!ar()(c)&&!c.error)return pr.setAPIDataForWizard({slug:e,data:c})},*wizardApiFetch(e){return yield pr.fetchFromAPI(e)}},dr=(0,s.createReduxStore)(cr,{reducer:(e=lr,{type:t,payload:n={}})=>{switch(t){case"START_LOADING_DATA":return n.isQuietLoading?{...e,isQuietLoading:!0}:{...e,isLoading:!0};case"FINISH_LOADING_DATA":return{...e,isLoading:!1,isQuietLoading:!1};case"SET_API_DATA":return nr()(ur(e),["apiData",n.slug],n.data);case"UPDATE_WIZARD_SETTINGS":return nr()(ur(e),["apiData",n.slug,...n.path],n.value);case"SET_ERROR":return{...e,error:n};default:return e}},actions:pr,selectors:{isLoading:e=>e.isLoading,isQuietLoading:e=>e.isQuietLoading,getWizardAPIData:(e,t)=>e.apiData[t]||{},getWizardData:(e,t)=>{var n;return null!==(n=e.apiData[t])&&void 0!==n?n:{}},getError:e=>e.error},controls:{FETCH_FROM_API:e=>{const{isLocalError:t=!1,isQuietFetch:n=!1}=e.payload;return(0,s.dispatch)(cr).startLoadingData({isQuietLoading:Boolean(n)}),R()(e.payload).then(e=>((0,s.dispatch)(cr).setError(null),e)).catch(e=>{if(t)throw e;(0,s.dispatch)(cr).setError(e)}).finally(e=>((0,s.dispatch)(cr).finishLoadingData(),e))}},resolvers:{*getWizardAPIData(e){if(e){const t=yield pr.fetchFromAPI({path:`/newspack/v1/wizard/${e}`});return pr.setAPIDataForWizard({slug:e,data:t})}return pr.finishLoadingData()}}}),hr=()=>{const e=(0,s.useSelect)(e=>e(cr).getError());if(!e)return null;const{level:t,message:n}=(({data:e,message:t,code:n})=>{let r="fatal";return e&&"level"in e?r=e.level:"rest_invalid_param"===n&&(r="notice"),{message:t,level:r}})(e);if("fatal"===t){const e="undefined"!=typeof newspack_urls&&newspack_urls.dashboard;return(0,u.jsxs)(mn,{title:(0,o.__)("Unrecoverable error"),onRequestClose:e?()=>window.location=e:void 0,children:[(0,u.jsx)(jn,{noticeText:n,isError:!0,rawHTML:!0}),e&&(0,u.jsx)(yt,{buttonsCard:!0,noBorder:!0,className:"justify-end",children:(0,u.jsx)(mt,{isPrimary:!0,href:e,children:(0,o.__)("Return to Dashboard","newspack-plugin")})})]})}return(0,u.jsx)(jn,{isError:!0,className:"newspack-wizard__above-header",noticeText:n,rawHTML:!0})};(0,s.register)(dr);const{HashRouter:fr,Redirect:gr,Route:vr,Switch:mr}=gt,{Redirect:wr,Route:yr}=((0,l.forwardRef)(({sections:e=[],headerText:t,apiSlug:n,subHeaderText:r,hasSimpleFooter:a,className:i,renderAboveSections:c,requiredPlugins:p=[],isInitialFetchTriggered:d=!0},h)=>{const f=(0,s.useSelect)(e=>e(cr).isLoading()),g=(0,s.useSelect)(e=>e(cr).isQuietLoading());(0,s.useSelect)(e=>d&&e(cr).getWizardAPIData(n));let v=e.filter(e=>!e.isHidden);const[m,w]=(0,l.useState)(0===p.length);m||(t=p.length>1?(0,o.__)("Required plugins","newspack-plugin"):(0,o.__)("Required plugin","newspack-plugin"),v=[{path:"/",render:()=>(0,u.jsx)(Pn,{plugins:p,onStatus:({complete:e})=>w(e)})}]);const y=window.location.href.split("#")[0];return(0,u.jsxs)("div",{ref:h,children:[(0,u.jsx)("div",{className:P()(f?"newspack-wizard__is-loading":"newspack-wizard__is-loaded",{"newspack-wizard__is-loading-quiet":g}),children:(0,u.jsxs)(fr,{hashType:"slash",children:[newspack_aux_data.is_debug_mode&&(0,u.jsx)(jn,{debugMode:!0}),(0,u.jsx)("div",{className:"bg-white",children:(0,u.jsx)("div",{className:"newspack-wizard__header__inner",children:(0,u.jsxs)("div",{className:"newspack-wizard__title",children:[newspack_urls.dashboard!==y?(0,u.jsx)(mt,{isLink:!0,href:newspack_urls.dashboard,label:(0,o.__)("Return to Dashboard","newspack-plugin"),showTooltip:!0,icon:er,iconSize:36,children:(0,u.jsx)(yn,{size:36})}):(0,u.jsx)(yn,{size:36}),(0,u.jsxs)("div",{children:[t&&(0,u.jsx)("h2",{children:t}),r&&(0,u.jsx)("span",{children:r})]})]})})}),v.length>1&&(0,u.jsx)(Un,{items:v,children:(0,u.jsx)(hr,{})}),(0,u.jsx)(fn,{}),(0,u.jsxs)(mr,{children:[v.map((e,t)=>{var n;const r=e.render;return(0,u.jsx)(vr,{exact:null!==(n=e.exact)&&void 0!==n&&n,path:e.path,children:(0,u.jsxs)("div",{className:P()("newspack-wizard__content",i),children:["function"==typeof c?c():null,(0,u.jsx)(r,{})]})},t)}),(0,u.jsx)(gr,{to:v[0].path})]})]})}),!f&&(0,u.jsx)(cn,{simple:a})]})}),gt);n(1882),n(3805),n(5015);const xr=e=>e.map(e=>[e.id,e.title].join("--")),br=e=>{const t=e.match(new RegExp("^([\\d]*)--(.*)"));return t?[t[1],t[2]]:e},_r=({attributes:e,setAttributes:n})=>{const[r,s]=(0,l.useState)([]),[a,c]=(0,l.useState)([{value:"post",label:"Posts"}]),[p,d]=(0,l.useState)(!1),{categoryExclusions:h,tags:f,tagExclusions:g}=e;(0,l.useEffect)(()=>{R()({path:(0,z.addQueryArgs)("/wp/v2/categories",{per_page:-1})}).then(s),b().then(c)},[]);const v=r.reduce((e,t)=>({...e,[t.name]:t}),{}),[m,w]=(0,l.useState)(!1),[y,x]=(0,l.useState)([]),b=()=>R()({path:(0,z.addQueryArgs)("/wp/v2/types",{context:"edit"})}).then(e=>Object.values(e).filter(e=>!0===e.viewable&&!0===e.visibility?.show_ui).map(e=>({value:e.slug,label:(0,B.decodeEntities)(e.name)||(0,o.__)("(no title)","newspack-newsletters")}))),_=e=>R()({path:(0,z.addQueryArgs)("/wp/v2/tags",{search:e,per_page:20,_fields:"id,name",orderby:"count",order:"desc"})}).then(e=>e.map(e=>({value:e.id,label:(0,B.decodeEntities)(e.name)||(0,o.__)("(no title)","newspack-newsletters")}))),k=e=>R()({path:(0,z.addQueryArgs)("/wp/v2/tags",{per_page:100,_fields:"id,name",include:e.join(",")})}).then(e=>e.map(e=>({value:e.id,label:(0,B.decodeEntities)(e.name)||(0,o.__)("(no title)","newspack-newsletters")})));return(0,u.jsxs)("div",{className:"newspack-newsletters-query-controls",children:[(0,u.jsx)(i.SelectControl,{label:(0,o.__)("Post type","newspack-newsletters"),options:a,value:e.postType,onChange:e=>n({postType:e})}),(0,u.jsx)(i.ToggleControl,{label:(0,o.__)("Display specific posts","newspack-newsletters"),checked:e.isDisplayingSpecificPosts,onChange:e=>n({isDisplayingSpecificPosts:e})}),!e.isDisplayingSpecificPosts&&(0,u.jsx)(i.ToggleControl,{label:(0,o.__)("Display sponsored posts","newspack-newsletters"),checked:e.displaySponsoredPosts,onChange:e=>n({displaySponsoredPosts:e})}),e.isDisplayingSpecificPosts?(0,u.jsx)(i.FormTokenField,{label:(0,u.jsxs)("div",{children:[(0,o.__)("Add posts","newspack-newsletters"),m&&(0,u.jsx)(i.Spinner,{})]}),onChange:e=>{n({specificPosts:e.map(e=>{const[t,n]=br(e);return{id:parseInt(t),title:n}})})},value:xr(e.specificPosts),suggestions:xr(y),displayTransform:e=>{const[t,n]=br(e);return n||t||""},onInputChange:(0,t.debounce)(t=>{var n;m||0===t.length||(w(!0),(n=e.postType,e=>R()({path:(0,z.addQueryArgs)("/wp/v2/search",{search:e,per_page:20,_fields:"id,title",subtype:n})}).then(e=>e.map(e=>({id:e.id,title:(0,B.decodeEntities)(e.title)||(0,o.__)("(no title)","newspack-newsletters")}))))(t).then(e=>{w(!1),x(e)}))},400)}):(0,u.jsxs)(l.Fragment,{children:[(0,u.jsx)(i.QueryControls,{numberOfItems:e.postsToShow,onNumberOfItemsChange:e=>n({postsToShow:e}),categorySuggestions:v,onCategoryChange:e=>{if(e.some(e=>"string"==typeof e&&!v[e]))return;const r=e.map(e=>"string"==typeof e?v[e]:e);if((0,t.includes)(r,null))return!1;n({categories:r})},selectedCategories:e.categories,minItems:1,maxItems:20}),(0,u.jsx)("p",{children:(0,u.jsx)(i.Button,{isLink:!0,onClick:()=>d(!p),children:p?(0,o.__)("Hide Advanced Filters","newspack-newsletters"):(0,o.__)("Show Advanced Filters","newspack-newsletters")})},"toggle-advanced-filters"),p&&(0,u.jsxs)(l.Fragment,{children:[(0,u.jsx)(L,{tokens:f,onChange:e=>{const t=e.filter(e=>!!e);n({tags:t})},fetchSuggestions:_,fetchSavedInfo:k,label:(0,o.__)("Tags","newspack-newsletters")},"tags"),(0,u.jsx)(L,{tokens:h,onChange:e=>{const t=e.filter(e=>!!e);n({categoryExclusions:t})},fetchSuggestions:e=>R()({path:(0,z.addQueryArgs)("/wp/v2/categories",{search:e,per_page:20,_fields:"id,name",orderby:"count",order:"desc"})}).then(e=>e.map(e=>({value:e.id,label:(0,B.decodeEntities)(e.name)||(0,o.__)("(no title)","newspack-newsletters")}))),fetchSavedInfo:e=>R()({path:(0,z.addQueryArgs)("/wp/v2/categories",{per_page:100,_fields:"id,name",include:e.join(",")})}).then(e=>e.map(e=>({value:e.id,label:(0,B.decodeEntities)(e.name)||(0,o.__)("(no title)","newspack-newsletters")}))),label:(0,o.__)("Excluded Categories","newspack-newsletters")},"category-exclusion"),(0,u.jsx)(L,{tokens:g,onChange:e=>{const t=e.filter(e=>!!e);n({tagExclusions:t})},fetchSuggestions:_,fetchSavedInfo:k,label:(0,o.__)("Excluded Tags","newspack-newsletters")},"tag-exclusion"),(0,u.jsx)(i.SelectControl,{label:(0,o.__)("Order by","newspack-newsletters"),value:`${e.orderBy}/${e.order}`,options:[{label:(0,o.__)("Newest to oldest","newspack-newsletters"),value:"date/desc"},{label:(0,o.__)("Oldest to newest","newspack-newsletters"),value:"date/asc"},{
/* translators: label for ordering posts by title in ascending order */
label:(0,o.__)("A â†’ Z","newspack-newsletters"),value:"title/asc"},{
/* translators: label for ordering posts by title in descending order */
label:(0,o.__)("Z â†’ A","newspack-newsletters"),value:"title/desc"}],onChange:t=>{const[r,o]=t.split("/");o!==e.order&&n({order:o}),r!==e.orderBy&&n({orderBy:r})}},"query-controls-order-select")]})]})]})};function kr({help:e,label:n,multiple:r=!1,onChange:s,optgroups:c=[],className:l,hideLabelFromVision:p,deselectedOptionLabel:d="",deselectedOptionValue:h="",...f}){const g=`inspector-select-control-${(0,a.useInstanceId)(kr)}`;return(0,t.isEmpty)(c)?null:(0,u.jsx)(i.BaseControl,{label:n,hideLabelFromVision:p,id:g,help:e,className:l,children:(0,u.jsxs)("select",{id:g,className:"components-select-control__input",onChange:e=>{if(r){const t=[...e.target.options].filter(({selected:e})=>e).map(({value:e})=>e);return void s(t)}s(e.target.value)},"aria-describedby":e?`${g}__help`:void 0,multiple:r,...f,children:[(d||h)&&(0,u.jsx)("option",{value:h,children:d||(0,o.__)("-- Select --","newspack-newsletters")}),c.map(({label:e,options:t},n)=>(0,u.jsx)("optgroup",{label:e,children:t.map((e,t)=>(0,u.jsx)("option",{value:e.value,disabled:e.disabled,children:e.label},`${e.label}-${e.value}-${t}`))},n))]})})}const jr=[{label:(0,o.__)("Sans Serif","newspack-newsletters"),options:[{value:"Arial, Helvetica, sans-serif",label:(0,o.__)("Arial","newspack-newsletters")},{value:"Tahoma, sans-serif",label:(0,o.__)("Tahoma","newspack-newsletters")},{value:"Trebuchet MS, sans-serif",label:(0,o.__)("Trebuchet","newspack-newsletters")},{value:"Verdana, sans-serif",label:(0,o.__)("Verdana","newspack-newsletters")}]},{label:(0,o.__)("Serif","newspack-newsletters"),options:[{value:"Georgia, serif",label:(0,o.__)("Georgia","newspack-newsletters")},{value:"Palatino, serif",label:(0,o.__)("Palatino","newspack-newsletters")},{value:"Times New Roman, serif",label:(0,o.__)("Times New Roman","newspack-newsletters")}]},{label:(0,o.__)("Monospace","newspack-newsletters"),options:[{value:"Courier, monospace",label:(0,o.__)("Courier","newspack-newsletters")}]}],Sr=e=>{const{getEditedPostAttribute:t}=e("core/editor"),n=t("meta");return{fontBody:n.font_body||jr[1].options[0].value,fontHeader:n.font_header||jr[0].options[0].value,backgroundColor:n.background_color||"#ffffff",textColor:n.text_color||"#000000",customCss:n.custom_css||""}},Pr=document.implementation.createHTMLDocument("Temp"),Cr=()=>{const e=(0,l.useRef)(),{fontBody:t,fontHeader:n}=(0,s.useSelect)(Sr);return(0,l.useEffect)(()=>{const r=e.current,o=()=>{const e=r.querySelector('iframe[title="Editor canvas"]');if(e){const r=()=>{const r=e.contentDocument?.documentElement;r&&(r.style.setProperty("--newspack-body-font",t),r.style.setProperty("--newspack-header-font",n),r.querySelector("body").style.setProperty("background","none"))};return r(),e.addEventListener("load",r),()=>{e.removeEventListener("load",r)}}};o();const s=new MutationObserver(o);return s.observe(r,{childList:!0}),()=>{s.disconnect()}},[t,n]),e},Ir=((0,s.withSelect)(Sr)(({fontBody:e,fontHeader:t,backgroundColor:n,textColor:r,customCss:o})=>((0,l.useEffect)(()=>{document.documentElement.style.setProperty("--newspack-body-font",e)},[e]),(0,l.useEffect)(()=>{document.documentElement.style.setProperty("--newspack-header-font",t)},[t]),(0,l.useEffect)(()=>{const e=document.querySelector(".editor-styles-wrapper");e&&(e.style.backgroundColor=n,e.style.color=r)},[n,r]),(0,l.useEffect)(()=>{if(document.querySelector(".edit-post-visual-editor")){let e=document.getElementById("newspack-newsletters__custom-styles");e||(e=document.createElement("style"),e.setAttribute("type","text/css"),e.setAttribute("id","newspack-newsletters__custom-styles"),document.head.appendChild(e));const t=((e,t)=>{const n=Pr.querySelector("style")||document.createElement("style");return n.textContent=t,Pr.head.appendChild(n),[...n.sheet.cssRules].map(e=>(e.selectorText=e.selectorText.split(",").map(e=>`.edit-post-visual-editor ${e}`).join(", "),e.cssText)).join("\n")})(0,o);e.textContent=t}},[o]),null)),(0,a.compose)([(0,s.withDispatch)(e=>{const{editPost:t}=e("core/editor");return{editPost:t}}),(0,s.withSelect)(Sr)])(({editPost:e,fontBody:t,fontHeader:n,customCss:r,backgroundColor:s,textColor:l})=>{const p=(t,n)=>{e({meta:{[t]:n}})},d=(0,a.useInstanceId)(kr),h=`inspector-select-control-${d}`;return(0,u.jsxs)(i.Panel,{children:[(0,u.jsxs)(i.PanelBody,{name:"newsletters-typography-panel",title:(0,o.__)("Typography","newspack-newsletters"),children:[(0,u.jsx)(i.PanelRow,{children:(0,u.jsx)(kr,{label:(0,o.__)("Headings font","newspack-newsletters"),value:n,optgroups:jr,onChange:e=>p("font_header",e)})}),(0,u.jsx)(i.PanelRow,{children:(0,u.jsx)(kr,{label:(0,o.__)("Body font","newspack-newsletters"),value:t,optgroups:jr,onChange:e=>p("font_body",e)})})]}),(0,u.jsxs)(i.PanelBody,{name:"newsletters-color-panel",title:(0,o.__)("Color","newspack-newsletters"),children:[(0,u.jsx)(i.PanelRow,{className:"newspack-newsletters__color-panel",children:(0,u.jsx)(i.BaseControl,{label:(0,o.__)("Background color","newspack-newsletters"),id:`${h}-bg`,children:(0,u.jsx)(i.ColorPicker,{id:`${h}-bg`,color:s,onChangeComplete:e=>p("background_color",e.hex),disableAlpha:!0})})}),(0,u.jsx)(i.PanelRow,{className:"newspack-newsletters__color-panel",children:(0,u.jsx)(i.BaseControl,{label:(0,o.__)("Text color","newspack-newsletters"),id:`${h}-text`,children:(0,u.jsx)(i.ColorPicker,{id:`${h}-text`,color:l,onChangeComplete:e=>p("text_color",e.hex),disableAlpha:!0})})})]}),(0,u.jsx)(i.PanelBody,{name:"newsletters-css-panel",title:(0,o.__)("Custom CSS","newspack-newsletters"),initialOpen:!1,children:(0,u.jsx)(i.PanelRow,{className:"newspack-newsletters__css-panel",children:(0,u.jsx)(i.BaseControl,{id:`inspector-custom-css-control-${d}`,label:(0,o.__)("Custom CSS","newspack-newsletters"),help:(0,o.__)("This is an advanced feature and may result in unpredictable behavior. Custom CSS will be appended to default styles in sent emails only.","newspack-newsletters"),hideLabelFromVision:!0,children:(0,u.jsx)(c.PlainText,{className:"components-textarea-control__input",value:r,onChange:t=>e({meta:{custom_css:t}}),"aria-label":(0,o.__)("Custom CSS","newspack-newsletters"),placeholder:(0,o.__)("Write custom CSSâ€¦","newspack-newsletters")})})})})]})}),(0,l.forwardRef)(({isReady:e,blocks:t,className:n,viewportWidth:r},o)=>{const s=(0,a.useRefEffect)(e=>{const t=new MutationObserver(()=>{const n=e.querySelector('iframe[title="Editor canvas"]');if(n){const e=()=>{n.style.border=0,t.disconnect()};e(),n.addEventListener("load",e)}});return t.observe(e,{childList:!0}),()=>{t.disconnect()}},[]),l=(0,a.useRefEffect)(e=>{const t=document.getElementById("newspack-newsletters__layout-css");if(!t)return;const n=t.cloneNode(!0),r=new MutationObserver(()=>{const o=e.querySelector('iframe[title="Editor canvas"]');if(o){const e=o.contentDocument,s=()=>{e.body.id=t.dataset.previewid,e.contains(n)||e.head.appendChild(n),r.disconnect()};s(),o.addEventListener("load",s)}});return r.observe(e,{childList:!0}),()=>{r.disconnect()}},[]);return(0,u.jsx)("div",{className:P()("newspack-posts-inserter__preview",n),ref:(0,a.useMergeRefs)([o,s,l,Cr()]),children:e?(0,u.jsx)(c.BlockPreview,{blocks:t,viewportWidth:r}):(0,u.jsx)(i.Spinner,{})})})),Or=(0,a.compose)([(0,s.withSelect)((e,n)=>{const{postsToShow:r,order:o,orderBy:s,postType:a,categories:i,isDisplayingSpecificPosts:c,specificPosts:l,preventDeduplication:u,tags:p,tagExclusions:d,categoryExclusions:h,excerptLength:f,displaySponsoredPosts:g}=n.attributes,{getEntityRecords:m,getMedia:w}=e("core"),{getSelectedBlock:y,getBlocks:x,getSettings:b}=e("core/block-editor"),_=i&&i.length>0?i.map(e=>e.id):[],{getHandledPostIds:k}=e(v),j=k(n.clientId);let S=[];const P=c&&l.length>0,C={categories:_,tags:p,order:o,orderby:s,per_page:r,exclude:u?[]:j,categories_exclude:h,tags_exclude:d,excerpt_length:f,exclude_sponsors:g?0:1};if(!c||P){const e=c?{include:l.map(e=>e.id)}:(0,t.pickBy)(C,e=>!(0,t.isUndefined)(e));S=m("postType",a,e)||[]}return P&&(S=l.reduce((e,{id:n})=>{const r=(0,t.find)(S,["id",n]);return r?[...e,r]:e},[])),{existingBlocks:x(),blockEditorSettings:b(),selectedBlock:y(),postList:S.map(e=>{if(e.featured_media){const n=w(e.featured_media),r=(0,t.get)(n,"source_url",null),o=(0,t.get)(n,["media_details","sizes","medium","source_url"],null)||r,s=(0,t.get)(n,["media_details","sizes","large","source_url"],null)||r;return{...e,featuredImageMediumURL:o,featuredImageLargeURL:s}}return e})}}),(0,s.withDispatch)((e,t)=>{const{replaceBlocks:n}=e("core/block-editor"),{setHandledPostsIds:r,setInsertedPostsIds:o,removeBlock:s}=e(v);return{replaceBlocks:e=>{n(t.selectedBlock.clientId,e)},setHandledPostsIds:e=>r(e,t),setInsertedPostsIds:o,removeBlock:()=>s(t.clientId)}})])(({setAttributes:e,attributes:t,postList:n,replaceBlocks:r,setHandledPostsIds:s,setInsertedPostsIds:a,removeBlock:p,blockEditorSettings:g})=>{const[v,m]=(0,l.useState)(!t.displayFeaturedImage),w=JSON.stringify(n),y=(0,l.useMemo)(()=>((e,t)=>((e,t)=>e.reduce((e,n)=>[...e,..._(n,t)],[]))(e,t).map(k))(n,t),[w,t]),x=JSON.stringify(y);(0,l.useEffect)(()=>{const{isDisplayingSpecificPosts:e,specificPosts:r}=t;if(!t.displayFeaturedImage)return m(!0);if(e&&0===r.length)return m(!0);if(m(!1),0<n.length){const e=[];if(n.map(t=>t.featured_media&&e.push(t.featured_media)),0===e.length)return m(!0);(x.match(/\"name\":\"core\/image\"/g)||[]).length===e.length&&m(!0)}},[w,x]);const b=y.map(j);(0,l.useEffect)(()=>{e({innerBlocksToInsert:b})},[JSON.stringify(b)]);const S=n.map(e=>e.id);(0,l.useEffect)(()=>{t.areBlocksInserted&&(r(y),a(S))},[t.areBlocksInserted]),(0,l.useEffect)(()=>{if(!t.preventDeduplication)return s(S),p},[S.join()]);const P=[{icon:"align-none",title:(0,o.__)("Show image on top","newspack-newsletters"),isActive:"top"===t.featuredImageAlignment,onClick:()=>e({featuredImageAlignment:"top"})},{icon:"align-pull-left",title:(0,o.__)("Show image on left","newspack-newsletters"),isActive:"left"===t.featuredImageAlignment,onClick:()=>e({featuredImageAlignment:"left"})},{icon:"align-pull-right",title:(0,o.__)("Show image on right","newspack-newsletters"),isActive:"right"===t.featuredImageAlignment,onClick:()=>e({featuredImageAlignment:"right"})}],C=[{value:"small",name:(0,o.__)("Small","newspack-newsletters")},{value:"medium",name:(0,o.__)("Medium","newspack-newsletters")},{value:"large",name:(0,o.__)("Large","newspack-newsletters")}];return t.areBlocksInserted?null:(0,u.jsxs)(l.Fragment,{children:[(0,u.jsxs)(c.InspectorControls,{children:[(0,u.jsxs)(i.PanelBody,{title:(0,o.__)("Post content settings","newspack-newsletters"),children:[(0,u.jsx)(i.ToggleControl,{label:(0,o.__)("Post subtitle","newspack-newsletters"),checked:t.displayPostSubtitle,onChange:t=>e({displayPostSubtitle:t})}),(0,u.jsx)(i.ToggleControl,{label:(0,o.__)("Post excerpt","newspack-newsletters"),checked:t.displayPostExcerpt,onChange:t=>e({displayPostExcerpt:t})}),t.displayPostExcerpt&&(0,u.jsx)(i.RangeControl,{label:(0,o.__)("Max number of words in excerpt","newspack-newsletters"),value:t.excerptLength,onChange:t=>e({excerptLength:t}),min:10,max:100}),(0,u.jsx)(i.ToggleControl,{label:(0,o.__)("Date","newspack-newsletters"),checked:t.displayPostDate,onChange:t=>e({displayPostDate:t})}),(0,u.jsx)(i.ToggleControl,{label:(0,o.__)("Featured image","newspack-newsletters"),checked:t.displayFeaturedImage,onChange:t=>e({displayFeaturedImage:t})}),(0,u.jsx)(i.ToggleControl,{label:(0,o.__)("Author's name","newspack-newsletters"),checked:t.displayAuthor,onChange:t=>e({displayAuthor:t})}),(0,u.jsx)(i.ToggleControl,{label:(0,o.__)('"Continue readingâ€¦" link',"newspack-newsletters"),checked:t.displayContinueReading,onChange:t=>e({displayContinueReading:t})})]}),(0,u.jsx)(i.PanelBody,{title:(0,o.__)("Sorting and filtering","newspack-newsletters"),children:(0,u.jsx)(_r,{attributes:t,setAttributes:e})}),(0,u.jsxs)(i.PanelBody,{title:(0,o.__)("Text style","newspack-newsletters"),children:[(0,u.jsx)(i.FontSizePicker,{fontSizes:g.fontSizes,value:t.textFontSize,onChange:t=>e({textFontSize:t})}),(0,u.jsx)(i.ColorPicker,{color:t.textColor||"",onChangeComplete:t=>e({textColor:t.hex}),disableAlpha:!0})]}),(0,u.jsxs)(i.PanelBody,{title:(0,o.__)("Heading style","newspack-newsletters"),children:[(0,u.jsx)(i.FontSizePicker,{fontSizes:g.fontSizes,value:t.headingFontSize,onChange:t=>e({headingFontSize:t})}),(0,u.jsx)(i.ColorPicker,{color:t.headingColor||"",onChangeComplete:t=>e({headingColor:t.hex}),disableAlpha:!0})]}),(0,u.jsxs)(i.PanelBody,{title:(0,o.__)("Subtitle style","newspack-newsletters"),children:[(0,u.jsx)(i.FontSizePicker,{fontSizes:g.fontSizes,value:t.subHeadingFontSize,onChange:t=>e({subHeadingFontSize:t})}),(0,u.jsx)(i.ColorPicker,{color:t.subHeadingColor||"",onChangeComplete:t=>e({subHeadingColor:t.hex}),disableAlpha:!0})]})]}),(0,u.jsx)(c.BlockControls,{children:t.displayFeaturedImage&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i.Toolbar,{controls:P}),("left"===t.featuredImageAlignment||"right"===t.featuredImageAlignment)&&(0,u.jsx)(i.Toolbar,{children:(0,u.jsx)(i.ToolbarDropdownMenu,{text:(0,o.__)("Image Size","newspack-newsletters"),icon:null,children:({onClose:n})=>(0,u.jsx)(i.MenuGroup,{children:C.map(r=>(0,u.jsx)(i.MenuItem,{icon:(t.featuredImageSize===r.value||!t.featuredImageSize&&"large"===r.value)&&d,isSelected:t.featuredImageSize===r.value,onClick:()=>{e({featuredImageSize:r.value})},onClose:n,role:"menuitemradio",children:r.name},r.value))})})})]})}),(0,u.jsxs)("div",{className:"newspack-posts-inserter "+(v?"":"newspack-posts-inserter--loading"),children:[(0,u.jsxs)("div",{className:"newspack-posts-inserter__header",children:[(0,u.jsx)(h,{icon:f}),(0,u.jsx)("span",{children:(0,o.__)("Posts Inserter","newspack-newsletters")})]}),(0,u.jsx)(Ir,{isReady:v,blocks:y,viewportWidth:"top"!==t.featuredImageAlignment&&t.displayFeaturedImage?1148:574,className:t.displayFeaturedImage?"image-"+t.featuredImageAlignment:null}),(0,u.jsx)("div",{className:"newspack-posts-inserter__footer",children:(0,u.jsx)(i.Button,{isPrimary:!0,onClick:()=>e({areBlocksInserted:!0}),children:(0,o.__)("Insert posts","newspack-newsletters")})})]})]})});(0,r.registerBlockType)(g,{...y,title:"Posts Inserter",icon:(0,u.jsx)(h,{icon:f}),edit:Or,save:()=>(0,u.jsx)(c.InnerBlocks.Content,{})})})()})();