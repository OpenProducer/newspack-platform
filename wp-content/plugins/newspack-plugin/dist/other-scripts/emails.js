(()=>{"use strict";var e,t={4444:(e,t,n)=>{var i=n(6087),s=n(7723),o=n(7143);const r=window.wp.compose;var a=n(6427),l=n(1455),c=n.n(l);const p=window.wp.editPost,d=window.wp.plugins;var w=n(1727),u=n(790);const m=(0,r.compose)([(0,o.withSelect)((e=>{const{getEditedPostAttribute:t,getCurrentPostId:n}=e("core/editor"),i=t("meta");return{title:t("title"),postId:n(),postMeta:i}})),(0,o.withDispatch)((e=>{const{savePost:t,editPost:n}=e("core/editor"),{createNotice:i}=e("core/notices");return{savePost:t,createNotice:i,updatePostMeta:e=>t=>n({meta:{[e]:t}}),updatePostTitle:e=>n({title:e})}}))])((({postId:e,savePost:t,title:n,postMeta:o,updatePostTitle:r,createNotice:l})=>{const[d,m]=(0,i.useState)(!1),[g,h]=w.JL.useObjectState({testRecipient:newspack_emails.current_user_email}),_=o[newspack_emails.email_config_name_meta],f=newspack_emails.configs[_];return(0,i.useEffect)((()=>{f?.editor_notice&&l("info",f.editor_notice,{isDismissible:!1}),l("info",(0,s.sprintf)(/* translators: 1: "From" email address 2: "From" email name */ /* translators: 1: "From" email address 2: "From" email name */
(0,s.__)("This email will be sent from %1$s <%2$s>.","newspack-plugin"),f.from_name||newspack_emails.from_name,f.from_email||newspack_emails.from_email),{isDismissible:!1})}),[]),(0,u.jsxs)(u.Fragment,{children:[f.available_placeholders?.length&&(0,u.jsxs)(p.PluginDocumentSettingPanel,{name:"email-instructions-panel",title:(0,s.__)("Instructions","newspack-plugin"),children:[(0,s.__)("Use the following placeholders to insert dynamic content in the email:","newspack-plugin"),(0,u.jsx)("ul",{children:f.available_placeholders.map(((e,t)=>(0,u.jsxs)("li",{children:["– ",(0,u.jsx)("code",{children:e.template}),": ",e.label]},t)))})]}),(0,u.jsx)(p.PluginDocumentSettingPanel,{name:"email-settings-panel",title:(0,s.__)("Settings","newspack-plugin"),children:(0,u.jsx)(a.TextControl,{label:(0,s.__)("Subject","newspack-plugin"),value:n,onChange:r})}),(0,u.jsxs)(p.PluginDocumentSettingPanel,{name:"email-testing-panel",title:(0,s.__)("Testing","newspack-plugin"),children:[(0,u.jsx)(a.TextControl,{label:(0,s.__)("Send to","newspack-plugin"),value:g.testRecipient,type:"email",onChange:h("testRecipient")}),(0,u.jsxs)("div",{className:"newspack__testing-controls",children:[(0,u.jsx)(a.Button,{isPrimary:!0,onClick:async()=>{m(!0),await t(),c()({path:"/newspack/v1/newspack-emails/test",method:"POST",data:{recipient:g.testRecipient,post_id:e}}).then((()=>{l("success",(0,s.__)("Test email sent!","newspack-plugin"))})).catch((()=>{l("error",(0,s.__)("Test email was not sent.","newspack-plugin"))})).finally((()=>{m(!1)}))},disabled:d,children:d?(0,s.__)("Sending…","newspack-plugin"):(0,s.__)("Send","newspack-plugin")}),d&&(0,u.jsx)(a.Spinner,{})]})]})]})}));(0,d.registerPlugin)("newspack-emails-sidebar",{render:m,icon:null})},1609:e=>{e.exports=window.React},790:e=>{e.exports=window.ReactJSXRuntime},6154:e=>{e.exports=window.moment},1455:e=>{e.exports=window.wp.apiFetch},6427:e=>{e.exports=window.wp.components},7143:e=>{e.exports=window.wp.data},6087:e=>{e.exports=window.wp.element},2619:e=>{e.exports=window.wp.hooks},8537:e=>{e.exports=window.wp.htmlEntities},7723:e=>{e.exports=window.wp.i18n},8558:e=>{e.exports=window.wp.keycodes},5573:e=>{e.exports=window.wp.primitives},3832:e=>{e.exports=window.wp.url}},n={};function i(e){var s=n[e];if(void 0!==s)return s.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.m=t,e=[],i.O=(t,n,s,o)=>{if(!n){var r=1/0;for(p=0;p<e.length;p++){for(var[n,s,o]=e[p],a=!0,l=0;l<n.length;l++)(!1&o||r>=o)&&Object.keys(i.O).every((e=>i.O[e](n[l])))?n.splice(l--,1):(a=!1,o<r&&(r=o));if(a){e.splice(p--,1);var c=s();void 0!==c&&(t=c)}}return t}o=o||0;for(var p=e.length;p>0&&e[p-1][2]>o;p--)e[p]=e[p-1];e[p]=[n,s,o]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),i.j=84,(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var s=n.length-1;s>-1&&(!e||!/^http(s?):/.test(e));)e=n[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e+"../"})(),(()=>{var e={84:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var s,o,[r,a,l]=n,c=0;if(r.some((t=>0!==e[t]))){for(s in a)i.o(a,s)&&(i.m[s]=a[s]);if(l)var p=l(i)}for(t&&t(n);c<r.length;c++)o=r[c],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(p)},n=globalThis.webpackChunknewspack=globalThis.webpackChunknewspack||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var s=i.O(void 0,[223],(()=>i(4444)));s=i.O(s)})();