(()=>{"use strict";var e,n={790:e=>{e.exports=window.ReactJSXRuntime},6087:e=>{e.exports=window.wp.element},6427:e=>{e.exports=window.wp.components},7143:e=>{e.exports=window.wp.data},7629:(e,n,t)=>{var a=t(7723),l=t(7143),i=t(6087),r=t(6427);const s=window.wp.editPost,o=window.wp.plugins;var p=t(790);const c=function(){const{meta:e}=(0,l.useSelect)(e=>{const{getEditedPostAttribute:n}=e("core/editor");return{meta:n("meta")}}),{editPost:n}=(0,l.useDispatch)("core/editor");return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(r.CheckboxControl,{label:(0,a.__)("Enable metering","newspack-plugin"),checked:e.metering,onChange:e=>n({meta:{metering:e}}),help:(0,a.__)("Implement metering to configure access to restricted content before showing the gate.","newspack-plugin")}),e.metering&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(r.TextControl,{type:"number",min:"0",value:e.metering_anonymous_count,label:(0,a.__)("Available views for anonymous readers","newspack-plugin"),onChange:e=>n({meta:{metering_anonymous_count:e}}),help:(0,a.__)("Number of times an anonymous reader can view gated content. If set to 0, anonymous readers will always render the gate.","newspack-plugin")}),(0,p.jsx)(r.TextControl,{type:"number",min:"0",value:e.metering_registered_count,label:(0,a.__)("Available views for registered readers","newspack-plugin"),onChange:e=>n({meta:{metering_registered_count:e}}),help:(0,a.__)("Number of times a registered reader can view gated content. If set to 0, registered readers without membership plan will always render the gate.","newspack-plugin")}),(0,p.jsx)(r.SelectControl,{label:(0,a.__)("Time period","newspack-plugin"),value:e.metering_period,options:[{value:"day",label:(0,a.__)("Day","newspack-plugin")},{value:"week",label:(0,a.__)("Week","newspack-plugin")},{value:"month",label:(0,a.__)("Month","newspack-plugin")}],onChange:e=>n({meta:{metering_period:e}}),help:(0,a.__)("The time period during which the metering views will be counted. For example, if the metering period is set to a week, the metering views will be reset every week.","newspack-plugin")})]})]})};var u=t(6942),g=t.n(u);function _({allowedPositions:e,value:n,label:t,help:l,onChange:i,size:s,...o}){const c="full-width"===s?[{value:"top",
/* translators: Overlay Position */
label:(0,a.__)("Top","newspack-plugin")},{value:"center",
/* translators: Overlay Position */
label:(0,a.__)("Center","newspack-plugin")},{value:"bottom",
/* translators: Overlay Position */
label:(0,a.__)("Bottom","newspack-plugin")}]:[{value:"top_left",
/* translators: Overlay Position */
label:(0,a.__)("Top Left","newspack-plugin")},{value:"top",
/* translators: Overlay Position */
label:(0,a.__)("Top Center","newspack-plugin")},{value:"top_right",
/* translators: Overlay Position */
label:(0,a.__)("Top Right","newspack-plugin")},{value:"center_left",
/* translators: Overlay Position */
label:(0,a.__)("Center Left","newspack-plugin")},{value:"center",
/* translators: Overlay Position */
label:(0,a.__)("Center","newspack-plugin")},{value:"center_right",
/* translators: Overlay Position */
label:(0,a.__)("Center Right","newspack-plugin")},{value:"bottom_left",
/* translators: Overlay Position */
label:(0,a.__)("Bottom Left","newspack-plugin")},{value:"bottom",
/* translators: Overlay Position */
label:(0,a.__)("Bottom Center","newspack-plugin")},{value:"bottom_right",
/* translators: Overlay Position */
label:(0,a.__)("Bottom Right","newspack-plugin")}];return(0,p.jsxs)("div",{className:g()("newspack-position-placement-control","size-"+s),children:[(0,p.jsx)("p",{className:"components-base-control__label",children:t}),(0,p.jsx)(r.ButtonGroup,{"aria-label":(0,a.__)("Select Position","newspack-plugin"),...o,children:c.map((t,a)=>(0,p.jsx)("div",{className:t.value===n?"is-selected":null,children:(0,p.jsx)(r.Button,{isSmall:!0,title:t.label,"aria-label":t.label,isPrimary:t.value===n,onClick:()=>{i(t.value)},disabled:e?.length&&!e.includes(t.value)})},`newspack-position-placement-item-${a}`))}),(0,p.jsx)("p",{className:"components-base-control__help",children:l})]})}const d=[{value:"inline",label:(0,a.__)("Inline","newspack-plugin")},{value:"overlay",label:(0,a.__)("Overlay","newspack-plugin")}],h={center:(0,a.__)("center","newspack-plugin"),bottom:(0,a.__)("bottom","newspack-plugin")},m=[{value:"x-small",label:(0,a.__)("Extra Small","newspack-plugin")},{value:"small",label:(0,a.__)("Small","newspack-plugin")},{value:"medium",label:(0,a.__)("Medium","newspack-plugin")},{value:"large",label:(0,a.__)("Large","newspack-plugin")},{value:"full-width",label:(0,a.__)("Full Width","newspack-plugin")}];(0,o.registerPlugin)("newspack-content-gate",{render:function(){const e=window.newspack_memberships_gate||{},{meta:n}=(0,l.useSelect)(e=>{const{getEditedPostAttribute:n}=e("core/editor");return{meta:n("meta")}}),{editPost:t}=(0,l.useDispatch)("core/editor");(0,i.useEffect)(()=>{const e=document.querySelector(".editor-styles-wrapper");e&&("overlay"===n.style?e.setAttribute("data-overlay-size",n.overlay_size):e.removeAttribute("data-overlay-size"))},[n.style,n.overlay_size]);const{createNotice:o}=(0,l.useDispatch)("core/notices");return(0,i.useEffect)(()=>{e?.gate_plans&&Object.keys(e.gate_plans).length&&o("info",(0,a.sprintf)(
// translators: %s is the list of plans.
// translators: %s is the list of plans.
(0,a.__)("You're currently editing a gate for content restricted by: %s","newspack-plugin"),Object.values(e?.gate_plans).join(", ")))},[]),(0,p.jsxs)(i.Fragment,{children:[newspack_content_gate.has_campaigns&&(0,p.jsx)(s.PluginPostStatusInfo,{children:(0,p.jsx)("p",{children:(0,a.__)("Newspack Campaign prompts won't be displayed when rendering gated content.","newspack-plugin")})}),e?.plans?.length>1&&(0,p.jsxs)(s.PluginDocumentSettingPanel,{name:"content-gate-plans",title:(0,a.__)("WooCommerce Memberships","newspack-plugin"),children:[Object.keys(e?.gate_plans).length?(0,p.jsxs)(i.Fragment,{children:[(0,p.jsx)("p",{children:(0,a.sprintf)(
// translators: %s is the list of plans.
// translators: %s is the list of plans.
(0,a.__)("This gate will be rendered for the following membership plans: %s","newspack-plugin"),Object.values(e.gate_plans).join(", "))}),(0,p.jsx)("hr",{}),(0,p.jsx)("p",{dangerouslySetInnerHTML:{__html:(0,a.sprintf)(
// translators: %s is the link to the primary gate.
// translators: %s is the link to the primary gate.
(0,a.__)('Edit the <a href="%s">primary gate</a>, or:',"newspack-plugin"),e.edit_gate_url)}})]}):(0,p.jsx)(i.Fragment,{children:(0,p.jsx)("p",{children:(0,a.__)("This gate will be rendered for all membership plans. Manage custom gates for when the content is locked behind a specific plan:","newspack-plugin")})}),(0,p.jsx)("ul",{children:(()=>{if(!e)return[];const n=Object.keys(e?.gate_plans)||[],t=e?.plans.filter(e=>!n.includes(e.id.toString()));return t})().map(n=>(0,p.jsxs)("li",{children:[n.name," (",!1!==n.gate_id&&(0,p.jsxs)(i.Fragment,{children:[(0,p.jsx)("strong",{children:"publish"===n.gate_status?(0,a.__)("published","newspack-plugin"):(0,a.__)("draft","newspack-plugin")})," ","-"," "]}),(0,p.jsx)("a",{href:e.edit_plan_gate_url+"&plan_id="+n.id,children:n.gate_id?(0,a.__)("edit gate","newspack-plugin"):(0,a.__)("create gate","newspack-plugin")}),")"]},n.id))})]}),(0,p.jsxs)(s.PluginDocumentSettingPanel,{name:"content-gate-styles-panel",title:(0,a.__)("Styles","newspack-plugin"),children:[(0,p.jsx)("div",{className:"newspack-content-gate-style-selector",children:d.map(e=>(0,p.jsx)(r.Button,{variant:n.style===e.value?"primary":"secondary",isPressed:n.style===e.value,onClick:()=>t({meta:{style:e.value}}),"aria-current":n.style===e.value,children:e.label},e.value))}),"inline"===n.style&&(0,p.jsx)(r.CheckboxControl,{label:(0,a.__)("Apply fade to last paragraph","newspack-plugin"),checked:n.inline_fade,onChange:e=>t({meta:{inline_fade:e}}),help:(0,a.__)("Whether to apply a gradient fade effect before rendering the gate.","newspack-plugin")}),"overlay"===n.style&&(0,p.jsxs)(i.Fragment,{children:[(0,p.jsx)(r.SelectControl,{label:(0,a.__)("Size","newspack-plugin"),value:n.overlay_size,options:m,onChange:e=>t({meta:{overlay_size:e}})}),(0,p.jsx)(_,{label:(0,a.__)("Position","newspack-plugin"),value:n.overlay_position,size:n.overlay_size,allowedPositions:["bottom","center"],onChange:e=>t({meta:{overlay_position:e}}),help:(0,a.sprintf)(
// translators: %s is the placement of the gate.
// translators: %s is the placement of the gate.
(0,a.__)("The gate will be displayed at the %s of the screen.","newspack-plugin"),h[n.overlay_position])})]})]}),(0,p.jsxs)(s.PluginDocumentSettingPanel,{name:"content-gate-settings-panel",title:(0,a.__)("Settings","newspack-plugin"),children:[(0,p.jsx)(r.TextControl,{type:"number",min:"0",value:n.visible_paragraphs,label:(0,a.__)("Default paragraph count","newspack-plugin"),onChange:e=>t({meta:{visible_paragraphs:e}}),help:(0,a.__)("Number of paragraphs that readers can see above the content gate.","newspack-plugin")}),(0,p.jsx)("hr",{}),(0,p.jsx)(r.CheckboxControl,{label:(0,a.__)("Use “More” tag to manually place content gate","newspack-plugin"),checked:n.use_more_tag,onChange:e=>t({meta:{use_more_tag:e}}),help:(0,a.__)("Override the default paragraph count on pages where a “More” block has been placed.","newspack-plugin")})]}),(0,p.jsx)(s.PluginDocumentSettingPanel,{name:"content-gate-metering-panel",title:(0,a.__)("Metering","newspack-plugin"),children:(0,p.jsx)(c,{})})]})},icon:null})},7723:e=>{e.exports=window.wp.i18n}},t={};function a(e){var l=t[e];if(void 0!==l)return l.exports;var i=t[e]={id:e,loaded:!1,exports:{}};return n[e](i,i.exports,a),i.loaded=!0,i.exports}a.m=n,e=[],a.O=(n,t,l,i)=>{if(!t){var r=1/0;for(c=0;c<e.length;c++){for(var[t,l,i]=e[c],s=!0,o=0;o<t.length;o++)(!1&i||r>=i)&&Object.keys(a.O).every(e=>a.O[e](t[o]))?t.splice(o--,1):(s=!1,i<r&&(r=i));if(s){e.splice(c--,1);var p=l();void 0!==p&&(n=p)}}return n}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[t,l,i]},a.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return a.d(n,{a:n}),n},a.d=(e,n)=>{for(var t in n)a.o(n,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),a.j=528,(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var n=a.g.document;if(!e&&n&&(n.currentScript&&"SCRIPT"===n.currentScript.tagName.toUpperCase()&&(e=n.currentScript.src),!e)){var t=n.getElementsByTagName("script");if(t.length)for(var l=t.length-1;l>-1&&(!e||!/^http(s?):/.test(e));)e=t[l--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={528:0};a.O.j=n=>0===e[n];var n=(n,t)=>{var l,i,[r,s,o]=t,p=0;if(r.some(n=>0!==e[n])){for(l in s)a.o(s,l)&&(a.m[l]=s[l]);if(o)var c=o(a)}for(n&&n(t);p<r.length;p++)i=r[p],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(c)},t=globalThis.webpackChunknewspack=globalThis.webpackChunknewspack||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})();var l=a.O(void 0,[223],()=>a(7629));l=a.O(l)})();