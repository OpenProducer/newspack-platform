(()=>{"use strict";var e,t={2307:(e,t,a)=>{a(8209);var n=a(6087),s=a(7723),r=a(1727),i=a(216),o=a(790);class c extends n.Component{render(){return(0,o.jsx)(n.Fragment,{children:(0,o.jsx)(r.Lz,{title:(0,s.__)("Google Analytics","newspack-plugin"),description:(0,s.__)("Configure and view site analytics","newspack-plugin"),actionText:(0,s.__)("View","newspack-plugin"),handoff:"google-site-kit",editLink:newspack_analytics_wizard_data.analyticsConnectionError?void 0:"admin.php?page=googlesitekit-module-analytics"})})}}const l=(0,r.c_)(c);class d extends n.Component{state={ga4Credendials:newspack_analytics_wizard_data.ga4_credentials,error:!1};handleAPIError=({message:e})=>this.setState({error:e});updateGa4Credentials=()=>{const{wizardApiFetch:e}=this.props;e({path:"/newspack/v1/wizard/analytics/ga4-credentials",method:"POST",quiet:!0,data:{measurement_id:this.state.ga4Credendials.measurement_id,measurement_protocol_secret:this.state.ga4Credendials.measurement_protocol_secret}}).then((e=>this.setState({ga4Credendials:e,error:!1}))).catch(this.handleAPIError)};render(){const{error:e,ga4Credendials:t}=this.state,{isLoading:a}=this.props;return(0,o.jsxs)("div",{className:"newspack__analytics-configuration",children:[(0,o.jsxs)("div",{className:"newspack__analytics-configuration__header",children:[(0,o.jsx)(r.X3,{title:(0,s.__)("Activate Newspack Custom Events","newspack-plugin"),description:(0,s.__)("Allows Newspack to send enhanced custom event data to your Google Analytics.","newspack-plugin"),noMargin:!0}),(0,o.jsx)("p",{children:(0,s.__)("Newspack already sends some custom event data to your GA account, but adding the credentials below enables enhanced events that are fired from your site's backend. For example, when a donation is confirmed or when a user successfully subscribes to a newsletter.","newspack-plugin")})]}),e&&(0,o.jsx)(r.$T,{isError:!0,noticeText:e}),(0,o.jsxs)(r.xA,{noMargin:!0,rowGap:16,children:[(0,o.jsx)(r.xt,{value:t?.measurement_id,label:(0,s.__)("Measurement ID","newspack-plugin"),help:(0,s.__)("You can find this in Site Kit Settings, or in Google Analytics > Admin > Data Streams and clickng the data stream. Example: G-ABCD1234","newspack-plugin"),onChange:e=>this.setState({...this.state,ga4Credendials:{...t,measurement_id:e}}),disabled:a,autoComplete:"off"}),(0,o.jsx)(r.xt,{type:"password",value:t?.measurement_protocol_secret,label:(0,s.__)("Measurement Protocol API Secret","newspack-plugin"),help:(0,s.__)('Generate an API secret from your GA dashboard in Admin > Data Streams and opening your data stream. Select "Measurement Protocol API secrets" under the Events section. Create a new secret.',"newspack-plugin"),onChange:e=>this.setState({...this.state,ga4Credendials:{...t,measurement_protocol_secret:e}}),disabled:a,autoComplete:"off"})]}),(0,o.jsx)(r.$n,{className:"newspack__analytics-newspack-custom-events__save-button",variant:"primary",disabled:a,onClick:this.updateGa4Credentials,children:(0,s.__)("Save","newspack-plugin")})]})}}const p=(0,r.c_)(d),{HashRouter:u,Redirect:w,Route:h,Switch:g}=i.A,m=[{label:(0,s.__)("Plugins","newspack-plugin"),path:"/",exact:!0},{label:(0,s.__)("Newspack Custom Events","newspack-plugin"),path:"/newspack-custom-events"}];class _ extends n.Component{render(){const{pluginRequirements:e,wizardApiFetch:t,isLoading:a}=this.props,r={headerText:(0,s.__)("Analytics","newspack-plugin"),subHeaderText:(0,s.__)("Manage Google Analytics Configuration","newspack-plugin"),tabbedNavigation:m,wizardApiFetch:t,isLoading:a};return(0,o.jsx)(n.Fragment,{children:(0,o.jsx)(u,{hashType:"slash",children:(0,o.jsxs)(g,{children:[e,(0,o.jsx)(h,{path:"/newspack-custom-events",exact:!0,render:()=>(0,o.jsx)(p,{...r})}),(0,o.jsx)(h,{path:"/",exact:!0,render:()=>(0,o.jsx)(l,{...r})}),(0,o.jsx)(w,{to:"/"})]})})})}}(0,n.render)((0,n.createElement)((0,r.Aq)(_,["google-site-kit"])),document.getElementById("newspack-analytics-wizard"))},1609:e=>{e.exports=window.React},790:e=>{e.exports=window.ReactJSXRuntime},6154:e=>{e.exports=window.moment},1455:e=>{e.exports=window.wp.apiFetch},6427:e=>{e.exports=window.wp.components},7143:e=>{e.exports=window.wp.data},6087:e=>{e.exports=window.wp.element},2619:e=>{e.exports=window.wp.hooks},8537:e=>{e.exports=window.wp.htmlEntities},7723:e=>{e.exports=window.wp.i18n},8558:e=>{e.exports=window.wp.keycodes},5573:e=>{e.exports=window.wp.primitives},3832:e=>{e.exports=window.wp.url}},a={};function n(e){var s=a[e];if(void 0!==s)return s.exports;var r=a[e]={id:e,loaded:!1,exports:{}};return t[e].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=t,e=[],n.O=(t,a,s,r)=>{if(!a){var i=1/0;for(d=0;d<e.length;d++){for(var[a,s,r]=e[d],o=!0,c=0;c<a.length;c++)(!1&r||i>=r)&&Object.keys(n.O).every((e=>n.O[e](a[c])))?a.splice(c--,1):(o=!1,r<i&&(i=r));if(o){e.splice(d--,1);var l=s();void 0!==l&&(t=l)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[a,s,r]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.j=153,(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");if(a.length)for(var s=a.length-1;s>-1&&(!e||!/^http(s?):/.test(e));)e=a[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e={153:0};n.O.j=t=>0===e[t];var t=(t,a)=>{var s,r,[i,o,c]=a,l=0;if(i.some((t=>0!==e[t]))){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(c)var d=c(n)}for(t&&t(a);l<i.length;l++)r=i[l],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(d)},a=globalThis.webpackChunknewspack=globalThis.webpackChunknewspack||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var s=n.O(void 0,[223],(()=>n(2307)));s=n.O(s)})();