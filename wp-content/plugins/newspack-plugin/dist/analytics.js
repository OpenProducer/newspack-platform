!function(){"use strict";var e,t={8598:function(e,t,n){n.r(t),n(5674);var a=n(9307),r=n(5736),o=n(264),s=n(9674);const i=r.__;class c extends a.Component{render(){return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(o.fM,{title:i("Google Analytics"),description:i("Configure and view site analytics"),actionText:i("View"),handoff:"google-site-kit",editLink:newspack_analytics_wizard_data.analyticsConnectionError?void 0:"admin.php?page=googlesitekit-module-analytics"}))}}var l=(0,o.a4)(c),d=n(4942);const u=r.__;class p extends a.Component{constructor(){super(...arguments),(0,d.Z)(this,"state",{ga4Credendials:newspack_analytics_wizard_data.ga4_credentials,error:!1}),(0,d.Z)(this,"handleAPIError",(e=>{let{message:t}=e;return this.setState({error:t})})),(0,d.Z)(this,"updateGa4Credentials",(()=>{const{wizardApiFetch:e}=this.props;e({path:"/newspack/v1/wizard/analytics/ga4-credentials",method:"POST",quiet:!0,data:{measurement_id:this.state.ga4Credendials.measurement_id,measurement_protocol_secret:this.state.ga4Credendials.measurement_protocol_secret}}).then((e=>this.setState({ga4Credendials:e,error:!1}))).catch(this.handleAPIError)}))}render(){const{error:e,ga4Credendials:t}=this.state,{isLoading:n}=this.props;return(0,a.createElement)("div",{className:"newspack__analytics-configuration"},(0,a.createElement)("div",{className:"newspack__analytics-configuration__header"},(0,a.createElement)(o.M$,{title:u("Activate Newspack Custom Events","newspack"),description:u("Allows Newspack to send enhanced custom event data to your Google Analytics.","newspack"),noMargin:!0}),(0,a.createElement)("p",null,u("Newspack already sends some custom event data to your GA account, but adding the credentials below enables enhanced events that are fired from your site's backend. For example, when a donation is confirmed or when a user successfully subscribes to a newsletter.","newspack"))),e&&(0,a.createElement)(o.qX,{isError:!0,noticeText:e}),(0,a.createElement)(o.rj,{noMargin:!0,rowGap:16},(0,a.createElement)(o.w4,{value:t?.measurement_id,label:u("Measurement ID","newspack"),help:u("You can find this in Site Kit Settings, or in Google Analytics > Admin > Data Streams and clickng the data stream. Example: G-ABCD1234","newspack"),onChange:e=>this.setState({...this.state,ga4Credendials:{...t,measurement_id:e}}),disabled:n,autoComplete:"off"}),(0,a.createElement)(o.w4,{type:"password",value:t?.measurement_protocol_secret,label:u("Measurement Protocol API Secret","newspack"),help:u('Generate an API secret from your GA dashboard in Admin > Data Streams and opening your data stream. Select "Measurement Protocol API secrets" under the Events section. Create a new secret.',"newspack"),onChange:e=>this.setState({...this.state,ga4Credendials:{...t,measurement_protocol_secret:e}}),disabled:n,autoComplete:"off"})),(0,a.createElement)(o.zx,{className:"newspack__analytics-newspack-custom-events__save-button",variant:"primary",disabled:n,onClick:this.updateGa4Credentials},u("Save","newspack")))}}var m=(0,o.a4)(p);const w=r.__,{HashRouter:h,Redirect:f,Route:g,Switch:v}=s.Z,y=[{label:w("Plugins","newspack"),path:"/",exact:!0},{label:w("Newspack Custom Events","newspack"),path:"/newspack-custom-events"}];class _ extends a.Component{render(){const{pluginRequirements:e,wizardApiFetch:t,isLoading:n}=this.props,r={headerText:w("Analytics","newspack"),subHeaderText:w("Manage Google Analytics Configuration","newspack"),tabbedNavigation:y,wizardApiFetch:t,isLoading:n};return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(h,{hashType:"slash"},(0,a.createElement)(v,null,e,(0,a.createElement)(g,{path:"/newspack-custom-events",exact:!0,render:()=>(0,a.createElement)(m,r)}),(0,a.createElement)(g,{path:"/",exact:!0,render:()=>(0,a.createElement)(l,r)}),(0,a.createElement)(f,{to:"/"}))))}}(0,a.render)((0,a.createElement)((0,o.uF)(_,["google-site-kit"])),document.getElementById("newspack-analytics-wizard"))},9196:function(e){e.exports=window.React},6292:function(e){e.exports=window.moment},6989:function(e){e.exports=window.wp.apiFetch},5609:function(e){e.exports=window.wp.components},9818:function(e){e.exports=window.wp.data},9307:function(e){e.exports=window.wp.element},2694:function(e){e.exports=window.wp.hooks},2629:function(e){e.exports=window.wp.htmlEntities},5736:function(e){e.exports=window.wp.i18n},9630:function(e){e.exports=window.wp.keycodes},444:function(e){e.exports=window.wp.primitives},6483:function(e){e.exports=window.wp.url}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}a.m=t,e=[],a.O=function(t,n,r,o){if(!n){var s=1/0;for(d=0;d<e.length;d++){n=e[d][0],r=e[d][1],o=e[d][2];for(var i=!0,c=0;c<n.length;c++)(!1&o||s>=o)&&Object.keys(a.O).every((function(e){return a.O[e](n[c])}))?n.splice(c--,1):(i=!1,o<s&&(s=o));if(i){e.splice(d--,1);var l=r();void 0!==l&&(t=l)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,r,o]},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},a.j=142,function(){var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e}(),function(){var e={142:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,o,s=n[0],i=n[1],c=n[2],l=0;if(s.some((function(t){return 0!==e[t]}))){for(r in i)a.o(i,r)&&(a.m[r]=i[r]);if(c)var d=c(a)}for(t&&t(n);l<s.length;l++)o=s[l],a.o(e,o)&&e[o]&&e[o][0](),e[s[l]]=0;return a.O(d)},n=self.webpackChunkwebpack=self.webpackChunkwebpack||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var r=a.O(void 0,[351],(function(){return a(8598)}));r=a.O(r);var o=window;for(var s in r)o[s]=r[s];r.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})}();