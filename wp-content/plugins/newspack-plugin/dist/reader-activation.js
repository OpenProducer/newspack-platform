(()=>{"use strict";var e,t={5920:(e,t,n)=>{n.d(t,{AU:()=>l,Ic:()=>c,on:()=>s,qY:()=>o});const r="newspack-ras",o={reader:"reader",data:"data",activity:"activity",overlay:"overlay"},a=Object.values(o);function i(e){return a.includes(e)?`${r}-${e}`:""}function c(e,t){if(!(e=i(e)))throw new Error("Invalid event");window.dispatchEvent(new CustomEvent(e,{detail:t}))}function s(e,t){if(!(e=i(e)))throw new Error("Invalid event");window.addEventListener(e,t)}function l(e,t){if(!(e=i(e)))throw new Error("Invalid event");window.removeEventListener(e,t)}},8621:(e,t,n)=>{n.d(t,{M_:()=>l,OO:()=>w});var r=n(4916),o=n(5325),a=n(5920),i=n(2952),c=n(6500),s=n(3497);window.newspack_ras_config=window.newspack_ras_config||{};const l=(0,r.A)();function u(e,t,n=0){const r={action:e,data:t,timestamp:n||Date.now()};return l.add("activity",r),(0,a.Ic)(a.qY.activity,r),r}function d(e){const t=l.get("activity")||[];return e?t.filter((t=>t.action===e)):t}function p(e){if(!e)return;const t=w();t.email=e,l.set("reader",t,!1),(0,a.Ic)(a.qY.reader,t)}function f(e=!0){const t=l.get("reader")||{};if(!t.email)throw new Error("Reader email not set");t.authenticated=Boolean(e),l.set("reader",t,!1),(0,a.Ic)(a.qY.reader,t)}function w(){return l.get("reader")||{}}const h=["pwd","link"];function g(){return(0,i.Ri)("np_otp_hash")}const m="newspack_otp_timer";function _(){localStorage.removeItem(m)}const v={store:l,overlays:c.A,on:a.on,off:a.AU,dispatchActivity:u,getActivities:d,getUniqueActivitiesBy:function(e,t){const n=d(e),r=[],o={};for(const e of n){const n="function"==typeof t?t(e):e.data[t];o[n]||(r.push(e),o[n]=!0)}return r},setReaderEmail:p,setAuthenticated:f,refreshAuthentication:function(){const e=(0,i.Ri)("np_auth_reader");e?(p(e),f(!0)):p((0,i.Ri)("np_auth_intention"))},getReader:w,openNewslettersSignupModal:function(e={}){e={onSuccess:null,onDismiss:null,onError:null,initialState:null,skipSuccess:!1,labels:{},content:null,closeOnSuccess:!0,...e},v?._openNewslettersSignupModal?v._openNewslettersSignupModal(e):(console.warn("Newsletters signup modal not available"),e?.onError&&"function"==typeof e.onError&&e.onError())},hasAuthLink:function(){const e=w(),t=(0,i.Ri)("np_otp_hash");return!(!e?.email||!t)},getOTPHash:g,setOTPTimer:function(){localStorage.setItem(m,Math.floor(Date.now()/1e3))},clearOTPTimer:_,getOTPTimeRemaining:function(){const e=localStorage.getItem(m);if(!e)return 0;const t=newspack_ras_config.otp_rate_interval-(Math.floor(Date.now()/1e3)-e);return t||_(),t>0?t:0},authenticateOTP:function(e){return new Promise(((t,n)=>{const r=g(),o=w()?.email;return r?o?e?void fetch("",{method:"POST",headers:{Accept:"application/json"},body:new URLSearchParams({action:newspack_ras_config.otp_auth_action,email:o,hash:r,code:e})}).then((e=>e.json())).then((({success:e,message:r,data:a})=>{const i={...a,email:o,authenticated:!!e,message:r};f(!!e),e?t(i):n(i)})):n({message:"Invalid code"}):n({message:"You must provide an email"}):n({message:"Code has expired",expired:!0})}))},setAuthStrategy:function(e){if(!h.includes(e))throw new Error("Invalid authentication strategy");return(0,i.TV)("np_auth_strategy",e),e},getAuthStrategy:function(){return g()?"otp":(0,i.Ri)("np_auth_strategy")},setPendingCheckout:o._,getPendingCheckout:o.m,...newspack_ras_config.is_ras_enabled&&{openAuthModal:function(e={}){e={onSuccess:null,onDismiss:null,onError:null,initialState:null,skipSuccess:!1,skipNewslettersSignup:!1,labels:{signin:{title:null},register:{title:null}},content:null,trigger:null,closeOnSuccess:!0,...e},newspack_ras_config.is_logged_in?e.onSuccess&&"function"==typeof e.onSuccess&&e.onSuccess():v._openAuthModal?v._openAuthModal(e):(console.warn("Authentication modal not available"),e.onError&&"function"==typeof e.onError&&e.onError())}}};function y(...e){e.forEach((e=>{Array.isArray(e)&&"string"==typeof e[0]?u(...e):"function"==typeof e?e(v):console.warn("Invalid newspackRAS.push argument",e)}))}window.newspackRASInitialized||function(){const e=newspack_ras_config,t=e?.authenticated_email||(0,i.Ri)("np_auth_intention"),n=!!e?.authenticated_email,r=w(),o={email:t||r?.email,authenticated:n};r?.email===o?.email&&r?.authenticated===o?.authenticated||l.set("reader",o,!1),(0,a.Ic)(a.qY.reader,o),function(){const e=newspack_ras_config.cid_cookie;(0,i.Ri)(e)||(0,i.TV)(e,(0,i.ni)(12))}(),(0,s.A)(v),function(){if((0,i.Ri)("np_auth_reader"))return;const e=setInterval((()=>{const t=w(),n=(0,i.Ri)("np_auth_intention");if(n&&t.email!==n)p(n);else{const t=(0,i.Ri)("np_auth_reader");t&&(p(t),f(!0),clearInterval(e))}}),1e3)}(),function(){const e=(e,t="submit")=>{const n="FORM"===e.tagName?e:e.querySelector("form");n&&n.addEventListener(t,(()=>{l.set("is_newsletter_subscriber",!0)}))};document.querySelectorAll([".mc4wp-form"].join(",")).forEach((t=>e(t))),document.querySelectorAll([".newspack-newsletters-subscribe",".newspack-subscribe-form"].join(",")).forEach((t=>e(t,"newspack-newsletters-subscribe-success")))}(),(newspack_reader_data?.reader_activity||[]).forEach((({action:e,data:t})=>u(e,t))),function(){const e=document.referrer?new URL(document.referrer).hostname:"";e&&e!==window.location.hostname&&l.set("referrer",e.replace("www.","").trim().toLowerCase())}(),window.newspackReaderActivation=v,window.newspackRAS=window.newspackRAS||[],window.newspackRAS.forEach((e=>y(e))),window.newspackRAS.push=y,window.newspackRASInitialized=!0}()}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.m=t,e=[],r.O=(t,n,o,a)=>{if(!n){var i=1/0;for(u=0;u<e.length;u++){for(var[n,o,a]=e[u],c=!0,s=0;s<n.length;s++)(!1&a||i>=a)&&Object.keys(r.O).every((e=>r.O[e](n[s])))?n.splice(s--,1):(c=!1,a<i&&(i=a));if(c){e.splice(u--,1);var l=o();void 0!==l&&(t=l)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,o,a]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r.j=619,(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=n[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{var e={619:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,a,[i,c,s]=n,l=0;if(i.some((t=>0!==e[t]))){for(o in c)r.o(c,o)&&(r.m[o]=c[o]);if(s)var u=s(r)}for(t&&t(n);l<i.length;l++)a=i[l],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(u)},n=globalThis.webpackChunknewspack=globalThis.webpackChunknewspack||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=r.O(void 0,[223],(()=>r(8621)));o=r.O(o)})();