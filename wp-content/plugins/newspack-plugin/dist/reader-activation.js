(()=>{"use strict";var e,t={5920:(e,t,n)=>{n.d(t,{AU:()=>l,Ic:()=>s,on:()=>c,qY:()=>r});const o="newspack-ras",r={reader:"reader",data:"data",activity:"activity",overlay:"overlay"},a=Object.values(r);function i(e){return a.includes(e)?`${o}-${e}`:""}function s(e,t){if(!(e=i(e)))throw new Error("Invalid event");window.dispatchEvent(new CustomEvent(e,{detail:t}))}function c(e,t){if(!(e=i(e)))throw new Error("Invalid event");window.addEventListener(e,t)}function l(e,t){if(!(e=i(e)))throw new Error("Invalid event");window.removeEventListener(e,t)}},8330:(e,t,n)=>{n.d(t,{eK:()=>a});var o=n(9430);const r=["signin_modal","register_modal"];function a(e={}){const t=window.newspackReaderActivation.getReader(),n=e.trigger;if(t?.authenticated)return void(e.onSuccess&&"function"==typeof e.onSuccess&&e.onSuccess());const a=document.querySelector(".newspack-reader-auth-modal .newspack-reader-auth");if(!a)return void(e.onSuccess&&"function"==typeof e.onSuccess&&e.onSuccess());const i=a.closest(".newspack-reader-auth-modal");if(!i)return void(e.onSuccess&&"function"==typeof e.onSuccess&&e.onSuccess());const s=e=>{"Escape"===e.key&&l()},c=e=>{e.preventDefault(),l()},l=(t=!0)=>{a.config={},i.setAttribute("data-state","closed"),document.body.classList.remove("newspack-signin"),document.body.style.overflow="auto",i.overlayId&&window.newspackReaderActivation?.overlays&&window.newspackReaderActivation.overlays.remove(i.overlayId);const o=a.querySelector(".opener-content");o&&o.remove(),n&&n.focus(),t&&e.onDismiss&&"function"==typeof e.onDismiss&&e.onDismiss(),document.removeEventListener("keydown",s),d.forEach(e=>{e.removeEventListener("click",c)})},d=i.querySelectorAll("button[data-close], .newspack-ui__modal__close");if(d?.length&&d.forEach(e=>{e.addEventListener("click",c)}),document.addEventListener("keydown",s),e.labels={...newspack_reader_activation_labels,...e?.labels},a.config=e,a.authCallback=(t,n)=>{e?.closeOnSuccess&&l(!1),e.onSuccess&&"function"==typeof e.onSuccess&&e.onSuccess(t,n)},a.formActionCallback=t=>{i.querySelector("h2").textContent="register"===t?e.labels.register.title:e.labels.signin.title,i.querySelectorAll("[data-action]").forEach(e=>{"none"!==e.style.display&&(e.prevDisplay=e.style.display),e.style.display="none"}),i.querySelectorAll('[data-action~="'+t+'"]').forEach(e=>{e.style.display=e.prevDisplay}),o.o(i)},e.content){const t=document.createElement("div");t.classList.add("opener-content"),t.innerHTML=e.content;const n=a.querySelector("form");n.insertBefore(t,n.firstChild)}const u=a.querySelector('input[name="npe"]');u&&(u.value=t?.email||"");let p="signin";window.newspackReaderActivation?.hasAuthLink()&&(p="otp");const w=window.location.hash.replace("#","");var f;r.includes(w)&&(p="register_modal"===w?"register":"signin"),e.initialState&&(p=e.initialState),f=()=>{a.setFormAction(p,!0),"otp"===p&&window?.newspackReaderActivation?.getOTPTimeRemaining()<=0&&a.setFormAction("signin")},document._newspackReaderAuthFormReady?f():document.addEventListener("newspack-reader-auth-form-ready",f),document.body.classList.add("newspack-signin"),document.body.style.overflow="hidden",i.setAttribute("data-state","open"),window.newspackReaderActivation?.overlays&&(i.overlayId=window.newspackReaderActivation.overlays.add("auth-modal"),o.o(i)),r.includes(window.location.hash.replace("#",""))&&history.pushState("",document.title,window.location.pathname+window.location.search)}},8621:(e,t,n)=>{n.d(t,{M_:()=>p,OO:()=>g});var o=n(4916),r=n(5325),a=n(5920),i=n(2952),s=n(6500),c=n(8905),l=n(3497),d=n(5547),u=n(8330);window.newspack_ras_config=window.newspack_ras_config||{};const p=(0,o.A)();function w(e,t,n=0){const o={action:e,data:t,timestamp:n||Date.now()};return p.add("activity",o),(0,a.Ic)(a.qY.activity,o),o}function f(e){const t=p.get("activity")||[];return e?t.filter(t=>t.action===e):t}function m(e){if(!e)return;const t=g();t.email=e,p.set("reader",t,!1),(0,a.Ic)(a.qY.reader,t)}function h(e=!0){const t=p.get("reader")||{};if(!t.email)throw new Error("Reader email not set");t.authenticated=Boolean(e),p.set("reader",t,!1),(0,a.Ic)(a.qY.reader,t)}function g(){return p.get("reader")||{}}const v=["pwd","link"];function y(){return(0,i.Ri)("np_otp_hash")}const _="newspack_otp_timer";function S(){localStorage.removeItem(_)}const k={store:p,overlays:s.A,on:a.on,off:a.AU,dispatchActivity:w,getActivities:f,getUniqueActivitiesBy:function(e,t){const n=f(e),o=[],r={};for(const e of n){const n="function"==typeof t?t(e):e.data[t];r[n]||(o.push(e),r[n]=!0)}return o},setReaderEmail:m,setAuthenticated:h,refreshAuthentication:function(){const e=(0,i.Ri)("np_auth_reader");e?(m(e),h(!0)):m((0,i.Ri)("np_auth_intention"))},getReader:g,openNewslettersSignupModal:function(e={}){e={onSuccess:null,onDismiss:null,onError:null,initialState:null,skipSuccess:!1,labels:{},content:null,closeOnSuccess:!0,...e},k?._openNewslettersSignupModal?k._openNewslettersSignupModal(e):(console.warn("Newsletters signup modal not available"),e?.onError&&"function"==typeof e.onError&&e.onError())},hasAuthLink:function(){const e=g(),t=(0,i.Ri)("np_otp_hash");return!(!e?.email||!t)},getOTPHash:y,setOTPTimer:function(){localStorage.setItem(_,Math.floor(Date.now()/1e3))},clearOTPTimer:S,getOTPTimeRemaining:function(){const e=localStorage.getItem(_);if(!e)return 0;const t=newspack_ras_config.otp_rate_interval-(Math.floor(Date.now()/1e3)-e);return t||S(),t>0?t:0},authenticateOTP:function(e){return new Promise((t,n)=>{const o=y(),r=g()?.email;return o?r?e?void fetch("",{method:"POST",headers:{Accept:"application/json"},body:new URLSearchParams({action:newspack_ras_config.otp_auth_action,email:r,hash:o,code:e})}).then(e=>e.json()).then(({success:e,message:o,data:a})=>{const i={...a,email:r,authenticated:!!e,message:o};h(!!e),e?t(i):n(i)}):n({message:"Invalid code"}):n({message:"You must provide an email"}):n({message:"Code has expired",expired:!0})})},setAuthStrategy:function(e){if(!v.includes(e))throw new Error("Invalid authentication strategy");return(0,i.TV)("np_auth_strategy",e),e},getAuthStrategy:function(){return y()?"otp":(0,i.Ri)("np_auth_strategy")},setPendingCheckout:r._,getPendingCheckout:r.m,debugLog:i.cY,...newspack_ras_config.is_ras_enabled&&{openAuthModal:function(e={}){e={onSuccess:null,onDismiss:null,onError:null,initialState:null,skipSuccess:!1,skipNewslettersSignup:!1,labels:{signin:{title:window.newspack_reader_activation_labels.signin.title},register:{title:window.newspack_reader_activation_labels.register.title}},content:null,trigger:null,closeOnSuccess:!0,...e},newspack_ras_config.is_logged_in?e.onSuccess&&"function"==typeof e.onSuccess&&e.onSuccess():(0,u.eK)(e)}}};function b(...e){e.forEach(e=>{Array.isArray(e)&&"string"==typeof e[0]?w(...e):"function"==typeof e?e(k):console.warn("Invalid newspackRAS.push argument",e)})}window.newspackRASInitialized||function(){const e=newspack_ras_config,t=e?.authenticated_email||(0,i.Ri)("np_auth_intention"),n=!!e?.authenticated_email,o=g(),r={email:t||o?.email,authenticated:n};o?.email===r?.email&&o?.authenticated===r?.authenticated||p.set("reader",r,!1),(0,a.Ic)(a.qY.reader,r),(0,c.Ay)(k),(0,d.A)(k),function(){const e=newspack_ras_config.cid_cookie;(0,i.Ri)(e)||(0,i.TV)(e,(0,i.ni)(12))}(),(0,l.A)(k),function(){if((0,i.Ri)("np_auth_reader"))return;const e=setInterval(()=>{const t=g(),n=(0,i.Ri)("np_auth_intention");if(n&&t.email!==n)m(n);else{const t=(0,i.Ri)("np_auth_reader");t&&(m(t),h(!0),clearInterval(e))}},1e3)}(),function(){const e=(e,t="submit")=>{const n="FORM"===e.tagName?e:e.querySelector("form");n&&n.addEventListener(t,()=>{p.set("is_newsletter_subscriber",!0)})},t=[];document.querySelectorAll([".mc4wp-form",".newspack-subscribe-form"].join(",")).forEach(n=>{n.id.startsWith("gform_")&&n.hasAttribute("data-formid")?t.push(parseInt(n.getAttribute("data-formid"))):e(n)}),document.querySelectorAll([".newspack-newsletters-subscribe"].join(",")).forEach(t=>e(t,"newspack-newsletters-subscribe-success")),document.addEventListener("gform/post_render",e=>{window.gform?.utils?.addAsyncFilter&&t.includes(e.detail?.formId)&&gform.utils.addAsyncFilter("gform/submission/pre_submission",async e=>(p.set("is_newsletter_subscriber",!0),e))})}(),(newspack_reader_data?.reader_activity||[]).forEach(({action:e,data:t})=>w(e,t)),function(){const e=document.referrer?new URL(document.referrer).hostname:"";e&&e!==window.location.hostname&&p.set("referrer",e.replace("www.","").trim().toLowerCase())}(),window.newspackReaderActivation=k,window.newspackRAS=window.newspackRAS||[],window.newspackRAS.forEach(e=>b(e)),window.newspackRAS.push=b,window.newspackRASInitialized=!0}()}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={id:e,loaded:!1,exports:{}};return t[e](a,a.exports,o),a.loaded=!0,a.exports}o.m=t,e=[],o.O=(t,n,r,a)=>{if(!n){var i=1/0;for(d=0;d<e.length;d++){for(var[n,r,a]=e[d],s=!0,c=0;c<n.length;c++)(!1&a||i>=a)&&Object.keys(o.O).every(e=>o.O[e](n[c]))?n.splice(c--,1):(s=!1,a<i&&(i=a));if(s){e.splice(d--,1);var l=r();void 0!==l&&(t=l)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,r,a]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),o.j=3619,(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{var e={3619:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[i,s,c]=n,l=0;if(i.some(t=>0!==e[t])){for(r in s)o.o(s,r)&&(o.m[r]=s[r]);if(c)var d=c(o)}for(t&&t(n);l<i.length;l++)a=i[l],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(d)},n=globalThis.webpackChunknewspack=globalThis.webpackChunknewspack||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=o.O(void 0,[4223],()=>o(8621));r=o.O(r)})();