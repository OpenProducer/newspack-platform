(()=>{"use strict";var e,n={9257:(e,n,t)=>{var a=t(7723),l=t(7143),s=t(6087),i=t(6427);const r=window.wp.editPost,o=window.wp.plugins;var p=t(6942),c=t.n(p),g=t(790);function u({allowedPositions:e,value:n,label:t,help:l,onChange:s,size:r,...o}){const p="full-width"===r?[{value:"top",
/* translators: Overlay Position */
label:(0,a.__)("Top","newspack-plugin")},{value:"center",
/* translators: Overlay Position */
label:(0,a.__)("Center","newspack-plugin")},{value:"bottom",
/* translators: Overlay Position */
label:(0,a.__)("Bottom","newspack-plugin")}]:[{value:"top_left",
/* translators: Overlay Position */
label:(0,a.__)("Top Left","newspack-plugin")},{value:"top",
/* translators: Overlay Position */
label:(0,a.__)("Top Center","newspack-plugin")},{value:"top_right",
/* translators: Overlay Position */
label:(0,a.__)("Top Right","newspack-plugin")},{value:"center_left",
/* translators: Overlay Position */
label:(0,a.__)("Center Left","newspack-plugin")},{value:"center",
/* translators: Overlay Position */
label:(0,a.__)("Center","newspack-plugin")},{value:"center_right",
/* translators: Overlay Position */
label:(0,a.__)("Center Right","newspack-plugin")},{value:"bottom_left",
/* translators: Overlay Position */
label:(0,a.__)("Bottom Left","newspack-plugin")},{value:"bottom",
/* translators: Overlay Position */
label:(0,a.__)("Bottom Center","newspack-plugin")},{value:"bottom_right",
/* translators: Overlay Position */
label:(0,a.__)("Bottom Right","newspack-plugin")}];return(0,g.jsxs)("div",{className:c()("newspack-position-placement-control","size-"+r),children:[(0,g.jsx)("p",{className:"components-base-control__label",children:t}),(0,g.jsx)(i.ButtonGroup,{"aria-label":(0,a.__)("Select Position","newspack-plugin"),...o,children:p.map(((t,a)=>(0,g.jsx)("div",{className:t.value===n?"is-selected":null,children:(0,g.jsx)(i.Button,{isSmall:!0,title:t.label,"aria-label":t.label,isPrimary:t.value===n,onClick:()=>{s(t.value)},disabled:e?.length&&!e.includes(t.value)})},`newspack-position-placement-item-${a}`)))}),(0,g.jsx)("p",{className:"components-base-control__help",children:l})]})}const _=[{value:"inline",label:(0,a.__)("Inline","newspack-plugin")},{value:"overlay",label:(0,a.__)("Overlay","newspack-plugin")}],m={center:(0,a.__)("center","newspack-plugin"),bottom:(0,a.__)("bottom","newspack-plugin")},h=[{value:"x-small",label:(0,a.__)("Extra Small","newspack-plugin")},{value:"small",label:(0,a.__)("Small","newspack-plugin")},{value:"medium",label:(0,a.__)("Medium","newspack-plugin")},{value:"large",label:(0,a.__)("Large","newspack-plugin")},{value:"full-width",label:(0,a.__)("Full Width","newspack-plugin")}];(0,o.registerPlugin)("newspack-memberships-gate",{render:function(){const{meta:e}=(0,l.useSelect)((e=>{const{getEditedPostAttribute:n}=e("core/editor");return{meta:n("meta")}})),{editPost:n}=(0,l.useDispatch)("core/editor");(0,s.useEffect)((()=>{const n=document.querySelector(".editor-styles-wrapper");n&&("overlay"===e.style?n.setAttribute("data-overlay-size",e.overlay_size):n.removeAttribute("data-overlay-size"))}),[e.style,e.overlay_size]);const{createNotice:t}=(0,l.useDispatch)("core/notices");return(0,s.useEffect)((()=>{Object.keys(newspack_memberships_gate.gate_plans).length&&t("info",(0,a.sprintf)(
// translators: %s is the list of plans.
// translators: %s is the list of plans.
(0,a.__)("You're currently editing a gate for content restricted by: %s","newspack-plugin"),Object.values(newspack_memberships_gate.gate_plans).join(", ")))}),[]),(0,g.jsxs)(s.Fragment,{children:[newspack_memberships_gate.has_campaigns&&(0,g.jsx)(r.PluginPostStatusInfo,{children:(0,g.jsx)("p",{children:(0,a.__)("Newspack Campaign prompts won't be displayed when rendering gated content.","newspack-plugin")})}),newspack_memberships_gate.plans.length>1&&(0,g.jsxs)(r.PluginDocumentSettingPanel,{name:"memberships-gate-plans",title:(0,a.__)("WooCommerce Memberships","newspack-plugin"),children:[Object.keys(newspack_memberships_gate.gate_plans).length?(0,g.jsxs)(s.Fragment,{children:[(0,g.jsx)("p",{children:(0,a.sprintf)(
// translators: %s is the list of plans.
// translators: %s is the list of plans.
(0,a.__)("This gate will be rendered for the following membership plans: %s","newspack-plugin"),Object.values(newspack_memberships_gate.gate_plans).join(", "))}),(0,g.jsx)("hr",{}),(0,g.jsx)("p",{dangerouslySetInnerHTML:{__html:(0,a.sprintf)(
// translators: %s is the link to the primary gate.
// translators: %s is the link to the primary gate.
(0,a.__)('Edit the <a href="%s">primary gate</a>, or:',"newspack-plugin"),newspack_memberships_gate.edit_gate_url)}})]}):(0,g.jsx)(s.Fragment,{children:(0,g.jsx)("p",{children:(0,a.__)("This gate will be rendered for all membership plans. Manage custom gates for when the content is locked behind a specific plan:","newspack-plugin")})}),(0,g.jsx)("ul",{children:(()=>{const e=Object.keys(newspack_memberships_gate.gate_plans)||[];return newspack_memberships_gate.plans.filter((n=>!e.includes(n.id.toString())))})().map((e=>(0,g.jsxs)("li",{children:[e.name," (",!1!==e.gate_id&&(0,g.jsxs)(s.Fragment,{children:[(0,g.jsx)("strong",{children:"publish"===e.gate_status?(0,a.__)("published","newspack-plugin"):(0,a.__)("draft","newspack-plugin")})," ","-"," "]}),(0,g.jsx)("a",{href:newspack_memberships_gate.edit_gate_url+"&plan_id="+e.id,children:e.gate_id?(0,a.__)("edit gate","newspack-plugin"):(0,a.__)("create gate","newspack-plugin")}),")"]},e.id)))})]}),(0,g.jsxs)(r.PluginDocumentSettingPanel,{name:"memberships-gate-styles-panel",title:(0,a.__)("Styles","newspack-plugin"),children:[(0,g.jsx)("div",{className:"newspack-memberships-gate-style-selector",children:_.map((t=>(0,g.jsx)(i.Button,{variant:e.style===t.value?"primary":"secondary",isPressed:e.style===t.value,onClick:()=>n({meta:{style:t.value}}),"aria-current":e.style===t.value,children:t.label},t.value)))}),"inline"===e.style&&(0,g.jsx)(i.CheckboxControl,{label:(0,a.__)("Apply fade to last paragraph","newspack-plugin"),checked:e.inline_fade,onChange:e=>n({meta:{inline_fade:e}}),help:(0,a.__)("Whether to apply a gradient fade effect before rendering the gate.","newspack-plugin")}),"overlay"===e.style&&(0,g.jsxs)(s.Fragment,{children:[(0,g.jsx)(i.SelectControl,{label:(0,a.__)("Size","newspack-plugin"),value:e.overlay_size,options:h,onChange:e=>n({meta:{overlay_size:e}})}),(0,g.jsx)(u,{label:(0,a.__)("Position","newspack-plugin"),value:e.overlay_position,size:e.overlay_size,allowedPositions:["bottom","center"],onChange:e=>n({meta:{overlay_position:e}}),help:(0,a.sprintf)(
// translators: %s is the placement of the gate.
// translators: %s is the placement of the gate.
(0,a.__)("The gate will be displayed at the %s of the screen.","newspack-plugin"),m[e.overlay_position])})]})]}),(0,g.jsxs)(r.PluginDocumentSettingPanel,{name:"memberships-gate-settings-panel",title:(0,a.__)("Settings","newspack-plugin"),children:[(0,g.jsx)(i.TextControl,{type:"number",min:"0",value:e.visible_paragraphs,label:(0,a.__)("Default paragraph count","newspack-plugin"),onChange:e=>n({meta:{visible_paragraphs:e}}),help:(0,a.__)("Number of paragraphs that readers can see above the content gate.","newspack-plugin")}),(0,g.jsx)("hr",{}),(0,g.jsx)(i.CheckboxControl,{label:(0,a.__)("Use “More” tag to manually place content gate","newspack-plugin"),checked:e.use_more_tag,onChange:e=>n({meta:{use_more_tag:e}}),help:(0,a.__)("Override the default paragraph count on pages where a “More” block has been placed.","newspack-plugin")})]}),(0,g.jsxs)(r.PluginDocumentSettingPanel,{name:"memberships-gate-metering-panel",title:(0,a.__)("Metering","newspack-plugin"),children:[(0,g.jsx)(i.CheckboxControl,{label:(0,a.__)("Enable metering","newspack-plugin"),checked:e.metering,onChange:e=>n({meta:{metering:e}}),help:(0,a.__)("Implement metering to configure access to restricted content before showing the gate.","newspack-plugin")}),e.metering&&(0,g.jsxs)(s.Fragment,{children:[(0,g.jsx)(i.TextControl,{type:"number",min:"0",value:e.metering_anonymous_count,label:(0,a.__)("Available views for anonymous readers","newspack-plugin"),onChange:e=>n({meta:{metering_anonymous_count:e}}),help:(0,a.__)("Number of times an anonymous reader can view gated content. If set to 0, anonymous readers will always render the gate.","newspack-plugin")}),(0,g.jsx)(i.TextControl,{type:"number",min:"0",value:e.metering_registered_count,label:(0,a.__)("Available views for registered readers","newspack-plugin"),onChange:e=>n({meta:{metering_registered_count:e}}),help:(0,a.__)("Number of times a registered reader can view gated content. If set to 0, registered readers without membership plan will always render the gate.","newspack-plugin")}),(0,g.jsx)(i.SelectControl,{label:(0,a.__)("Time period","newspack-plugin"),value:e.metering_period,options:[{value:"day",label:(0,a.__)("Day","newspack-plugin")},{value:"week",label:(0,a.__)("Week","newspack-plugin")},{value:"month",label:(0,a.__)("Month","newspack-plugin")}],onChange:e=>n({meta:{metering_period:e}}),help:(0,a.__)("The time period during which the metering views will be counted. For example, if the metering period is set to a week, the metering views will be reset every week.","newspack-plugin")})]})]})]})},icon:null})},790:e=>{e.exports=window.ReactJSXRuntime},6427:e=>{e.exports=window.wp.components},7143:e=>{e.exports=window.wp.data},6087:e=>{e.exports=window.wp.element},7723:e=>{e.exports=window.wp.i18n}},t={};function a(e){var l=t[e];if(void 0!==l)return l.exports;var s=t[e]={id:e,loaded:!1,exports:{}};return n[e].call(s.exports,s,s.exports,a),s.loaded=!0,s.exports}a.m=n,e=[],a.O=(n,t,l,s)=>{if(!t){var i=1/0;for(c=0;c<e.length;c++){for(var[t,l,s]=e[c],r=!0,o=0;o<t.length;o++)(!1&s||i>=s)&&Object.keys(a.O).every((e=>a.O[e](t[o])))?t.splice(o--,1):(r=!1,s<i&&(i=s));if(r){e.splice(c--,1);var p=l();void 0!==p&&(n=p)}}return n}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[t,l,s]},a.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return a.d(n,{a:n}),n},a.d=(e,n)=>{for(var t in n)a.o(n,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),a.j=172,(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var n=a.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var t=n.getElementsByTagName("script");if(t.length)for(var l=t.length-1;l>-1&&(!e||!/^http(s?):/.test(e));)e=t[l--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={172:0};a.O.j=n=>0===e[n];var n=(n,t)=>{var l,s,[i,r,o]=t,p=0;if(i.some((n=>0!==e[n]))){for(l in r)a.o(r,l)&&(a.m[l]=r[l]);if(o)var c=o(a)}for(n&&n(t);p<i.length;p++)s=i[p],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(c)},t=globalThis.webpackChunknewspack=globalThis.webpackChunknewspack||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})();var l=a.O(void 0,[223],(()=>a(9257)));l=a.O(l)})();