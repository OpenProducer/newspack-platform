(()=>{"use strict";var e,t={8516:(e,t,n)=>{n.r(t);var a=n(9307),l=n(5736),r=n(9818),i=n(5609);const s=window.wp.editPost,o=window.wp.plugins;var p=n(7462),c=n(3967),u=n.n(c);const g=l.__;function m({allowedPositions:e,value:t,label:n,help:l,onChange:r,size:s,...o}){const c="full-width"===s?[{value:"top",label:g("Top","newspack-plugin")},{value:"center",label:g("Center","newspack-plugin")},{value:"bottom",label:g("Bottom","newspack-plugin")}]:[{value:"top_left",label:g("Top Left","newspack-plugin")},{value:"top",label:g("Top Center","newspack-plugin")},{value:"top_right",label:g("Top Right","newspack-plugin")},{value:"center_left",label:g("Center Left","newspack-plugin")},{value:"center",label:g("Center","newspack-plugin")},{value:"center_right",label:g("Center Right","newspack-plugin")},{value:"bottom_left",label:g("Bottom Left","newspack-plugin")},{value:"bottom",label:g("Bottom Center","newspack-plugin")},{value:"bottom_right",label:g("Bottom Right","newspack-plugin")}];return(0,a.createElement)("div",{className:u()("newspack-position-placement-control","size-"+s)},(0,a.createElement)("p",{className:"components-base-control__label"},n),(0,a.createElement)(i.ButtonGroup,(0,p.Z)({"aria-label":g("Select Position","newspack-plugin")},o),c.map(((n,l)=>(0,a.createElement)("div",{key:`newspack-position-placement-item-${l}`,className:n.value===t?"is-selected":null},(0,a.createElement)(i.Button,{isSmall:!0,title:n.label,"aria-label":n.label,isPrimary:n.value===t,onClick:()=>{r(n.value)},disabled:e?.length&&!e.includes(n.value)}))))),(0,a.createElement)("p",{className:"components-base-control__help"},l))}const w=l.__,d=[{value:"inline",label:w("Inline","newspack-plugin")},{value:"overlay",label:w("Overlay","newspack-plugin")}],h={center:w("center","newspack-plugin"),bottom:w("bottom","newspack-plugin")},b=[{value:"x-small",label:w("Extra Small","newspack-plugin")},{value:"small",label:w("Small","newspack-plugin")},{value:"medium",label:w("Medium","newspack-plugin")},{value:"large",label:w("Large","newspack-plugin")},{value:"full-width",label:w("Full Width","newspack-plugin")}];(0,o.registerPlugin)("newspack-memberships-gate",{render:function(){const{meta:e}=(0,r.useSelect)((e=>{const{getEditedPostAttribute:t}=e("core/editor");return{meta:t("meta")}})),{editPost:t}=(0,r.useDispatch)("core/editor");(0,a.useEffect)((()=>{const t=document.querySelector(".editor-styles-wrapper");t&&("overlay"===e.style?t.setAttribute("data-overlay-size",e.overlay_size):t.removeAttribute("data-overlay-size"))}),[e.style,e.overlay_size]);const{createNotice:n}=(0,r.useDispatch)("core/notices");return(0,a.useEffect)((()=>{Object.keys(newspack_memberships_gate.gate_plans).length&&n("info",(0,l.sprintf)(w("You're currently editing a gate for content restricted by: %s","newspack-plugin"),Object.values(newspack_memberships_gate.gate_plans).join(", ")))}),[]),(0,a.createElement)(a.Fragment,null,newspack_memberships_gate.has_campaigns&&(0,a.createElement)(s.PluginPostStatusInfo,null,(0,a.createElement)("p",null,w("Newspack Campaign prompts won't be displayed when rendering gated content.","newspack-plugin"))),newspack_memberships_gate.plans.length>1&&(0,a.createElement)(s.PluginDocumentSettingPanel,{name:"memberships-gate-plans",title:w("WooCommerce Memberships","newspack-plugin")},Object.keys(newspack_memberships_gate.gate_plans).length?(0,a.createElement)(a.Fragment,null,(0,a.createElement)("p",null,(0,l.sprintf)(w("This gate will be rendered for the following membership plans: %s","newspack-plugin"),Object.values(newspack_memberships_gate.gate_plans).join(", "))),(0,a.createElement)("hr",null),(0,a.createElement)("p",{dangerouslySetInnerHTML:{__html:(0,l.sprintf)(w('Edit the <a href="%s">primary gate</a>, or:',"newspack-plugin"),newspack_memberships_gate.edit_gate_url)}})):(0,a.createElement)(a.Fragment,null,(0,a.createElement)("p",null,w("This gate will be rendered for all membership plans. Manage custom gates for when the content is locked behind a specific plan:","newspack-plugin"))),(0,a.createElement)("ul",null,(()=>{const e=Object.keys(newspack_memberships_gate.gate_plans)||[];return newspack_memberships_gate.plans.filter((t=>!e.includes(t.id.toString())))})().map((e=>(0,a.createElement)("li",{key:e.id},e.name," (",!1!==e.gate_id&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)("strong",null,"publish"===e.gate_status?w("published","newspack-plugin"):w("draft","newspack-plugin"))," ","-"," "),(0,a.createElement)("a",{href:newspack_memberships_gate.edit_gate_url+"&plan_id="+e.id},e.gate_id?w("edit gate","newspack-plugin"):w("create gate","newspack-plugin")),")"))))),(0,a.createElement)(s.PluginDocumentSettingPanel,{name:"memberships-gate-styles-panel",title:w("Styles","newspack-plugin")},(0,a.createElement)("div",{className:"newspack-memberships-gate-style-selector"},d.map((n=>(0,a.createElement)(i.Button,{key:n.value,variant:e.style===n.value?"primary":"secondary",isPressed:e.style===n.value,onClick:()=>t({meta:{style:n.value}}),"aria-current":e.style===n.value},n.label)))),"inline"===e.style&&(0,a.createElement)(i.CheckboxControl,{label:w("Apply fade to last paragraph","newspack-plugin"),checked:e.inline_fade,onChange:e=>t({meta:{inline_fade:e}}),help:w("Whether to apply a gradient fade effect before rendering the gate.","newspack-plugin")}),"overlay"===e.style&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(i.SelectControl,{label:w("Size","newspack-plugin"),value:e.overlay_size,options:b,onChange:e=>t({meta:{overlay_size:e}})}),(0,a.createElement)(m,{label:w("Position","newspack-plugin"),value:e.overlay_position,size:e.overlay_size,allowedPositions:["bottom","center"],onChange:e=>t({meta:{overlay_position:e}}),help:(0,l.sprintf)(w("The gate will be displayed at the %s of the screen.","newspack-plugin"),h[e.overlay_position])}))),(0,a.createElement)(s.PluginDocumentSettingPanel,{name:"memberships-gate-settings-panel",title:w("Settings","newspack-plugin")},(0,a.createElement)(i.TextControl,{type:"number",min:"0",value:e.visible_paragraphs,label:w("Default paragraph count","newspack-plugin"),onChange:e=>t({meta:{visible_paragraphs:e}}),help:w("Number of paragraphs that readers can see above the content gate.","newspack-plugin")}),(0,a.createElement)("hr",null),(0,a.createElement)(i.CheckboxControl,{label:w("Use “More” tag to manually place content gate","newspack-plugin"),checked:e.use_more_tag,onChange:e=>t({meta:{use_more_tag:e}}),help:w("Override the default paragraph count on pages where a “More” block has been placed.","newspack-plugin")})),(0,a.createElement)(s.PluginDocumentSettingPanel,{name:"memberships-gate-metering-panel",title:w("Metering","newspack-plugin")},(0,a.createElement)(i.CheckboxControl,{label:w("Enable metering","newspack-plugin"),checked:e.metering,onChange:e=>t({meta:{metering:e}}),help:w("Implement metering to configure access to restricted content before showing the gate.","newspack-plugin")}),e.metering&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(i.TextControl,{type:"number",min:"0",value:e.metering_anonymous_count,label:w("Available views for anonymous readers","newspack-plugin"),onChange:e=>t({meta:{metering_anonymous_count:e}}),help:w("Number of times an anonymous reader can view gated content. If set to 0, anonymous readers will always render the gate.","newspack-plugin")}),(0,a.createElement)(i.TextControl,{type:"number",min:"0",value:e.metering_registered_count,label:w("Available views for registered readers","newspack-plugin"),onChange:e=>t({meta:{metering_registered_count:e}}),help:w("Number of times a registered reader can view gated content. If set to 0, registered readers without membership plan will always render the gate.","newspack-plugin")}),(0,a.createElement)(i.SelectControl,{label:w("Time period","newspack-plugin"),value:e.metering_period,options:[{value:"day",label:w("Day","newspack-plugin")},{value:"week",label:w("Week","newspack-plugin")},{value:"month",label:w("Month","newspack-plugin")}],onChange:e=>t({meta:{metering_period:e}}),help:w("The time period during which the metering views will be counted. For example, if the metering period is set to a week, the metering views will be reset every week.","newspack-plugin")}))))},icon:null})},5609:e=>{e.exports=window.wp.components},9818:e=>{e.exports=window.wp.data},9307:e=>{e.exports=window.wp.element},5736:e=>{e.exports=window.wp.i18n}},n={};function a(e){var l=n[e];if(void 0!==l)return l.exports;var r=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=t,e=[],a.O=(t,n,l,r)=>{if(!n){var i=1/0;for(c=0;c<e.length;c++){for(var[n,l,r]=e[c],s=!0,o=0;o<n.length;o++)(!1&r||i>=r)&&Object.keys(a.O).every((e=>a.O[e](n[o])))?n.splice(o--,1):(s=!1,r<i&&(i=r));if(s){e.splice(c--,1);var p=l();void 0!==p&&(t=p)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,l,r]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),a.j=281,(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={281:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var l,r,[i,s,o]=n,p=0;if(i.some((t=>0!==e[t]))){for(l in s)a.o(s,l)&&(a.m[l]=s[l]);if(o)var c=o(a)}for(t&&t(n);p<i.length;p++)r=i[p],a.o(e,r)&&e[r]&&e[r][0](),e[i[p]]=0;return a.O(c)},n=globalThis.webpackChunkwebpack=globalThis.webpackChunkwebpack||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),a.O(void 0,[351],(()=>a(5666)));var l=a.O(void 0,[351],(()=>a(8516)));l=a.O(l);var r=window;for(var i in l)r[i]=l[i];l.__esModule&&Object.defineProperty(r,"__esModule",{value:!0})})();