(()=>{"use strict";var e,t={8516:(e,t,a)=>{a.r(t);var n=a(9307),l=a(5736),r=a(9818),o=a(5609);const s=window.wp.editPost,i=window.wp.plugins;var c=a(7462),p=a(4184),m=a.n(p);const u=l.__;function w(e){let{allowedPositions:t,value:a,label:l,help:r,onChange:s,size:i,...p}=e;const w="full-width"===i?[{value:"top",label:u("Top","newspack")},{value:"center",label:u("Center","newspack")},{value:"bottom",label:u("Bottom","newspack")}]:[{value:"top_left",label:u("Top Left","newspack")},{value:"top",label:u("Top Center","newspack")},{value:"top_right",label:u("Top Right","newspack")},{value:"center_left",label:u("Center Left","newspack")},{value:"center",label:u("Center","newspack")},{value:"center_right",label:u("Center Right","newspack")},{value:"bottom_left",label:u("Bottom Left","newspack")},{value:"bottom",label:u("Bottom Center","newspack")},{value:"bottom_right",label:u("Bottom Right","newspack")}];return(0,n.createElement)("div",{className:m()("newspack-position-placement-control","size-"+i)},(0,n.createElement)("p",{className:"components-base-control__label"},l),(0,n.createElement)(o.ButtonGroup,(0,c.Z)({"aria-label":u("Select Position","newspack")},p),w.map(((e,l)=>(0,n.createElement)("div",{key:`newspack-position-placement-item-${l}`,className:e.value===a?"is-selected":null},(0,n.createElement)(o.Button,{isSmall:!0,title:e.label,"aria-label":e.label,isPrimary:e.value===a,onClick:()=>{s(e.value)},disabled:t?.length&&!t.includes(e.value)}))))),(0,n.createElement)("p",{className:"components-base-control__help"},r))}const g=l.__,b=[{value:"inline",label:g("Inline","newspack")},{value:"overlay",label:g("Overlay","newspack")}],d={center:g("center","newspack"),bottom:g("bottom","newspack")},h=[{value:"x-small",label:g("Extra Small","newspack")},{value:"small",label:g("Small","newspack")},{value:"medium",label:g("Medium","newspack")},{value:"large",label:g("Large","newspack")},{value:"full-width",label:g("Full Width","newspack")}];(0,i.registerPlugin)("newspack-memberships-gate",{render:function(){const{meta:e}=(0,r.useSelect)((e=>{const{getEditedPostAttribute:t}=e("core/editor");return{meta:t("meta")}})),{editPost:t}=(0,r.useDispatch)("core/editor");return(0,n.useEffect)((()=>{const t=document.querySelector(".editor-styles-wrapper");t&&("overlay"===e.style?t.setAttribute("data-overlay-size",e.overlay_size):t.removeAttribute("data-overlay-size"))}),[e.style,e.overlay_size]),(0,n.createElement)(n.Fragment,null,newspack_memberships_gate.has_campaigns&&(0,n.createElement)(s.PluginPostStatusInfo,null,(0,n.createElement)("p",null,g("Newspack Campaign prompts won't be displayed when rendering gated content.","newspack"))),(0,n.createElement)(s.PluginDocumentSettingPanel,{name:"memberships-gate-styles-panel",title:g("Styles","newspack")},(0,n.createElement)("div",{className:"newspack-memberships-gate-style-selector"},b.map((a=>(0,n.createElement)(o.Button,{key:a.value,variant:e.style===a.value?"primary":"secondary",isPressed:e.style===a.value,onClick:()=>t({meta:{style:a.value}}),"aria-current":e.style===a.value},a.label)))),"inline"===e.style&&(0,n.createElement)(o.CheckboxControl,{label:g("Apply fade to last paragraph","newspack"),checked:e.inline_fade,onChange:e=>t({meta:{inline_fade:e}}),help:g("Whether to apply a gradient fade effect before rendering the gate.","newspack")}),"overlay"===e.style&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)(o.SelectControl,{label:g("Size","newspack"),value:e.overlay_size,options:h,onChange:e=>t({meta:{overlay_size:e}})}),(0,n.createElement)(w,{label:g("Position","newspack"),value:e.overlay_position,size:e.overlay_size,allowedPositions:["bottom","center"],onChange:e=>t({meta:{overlay_position:e}}),help:(0,l.sprintf)(g("The gate will be displayed at the %s of the screen.","newspack"),d[e.overlay_position])}))),(0,n.createElement)(s.PluginDocumentSettingPanel,{name:"memberships-gate-settings-panel",title:g("Settings","newspack")},(0,n.createElement)(o.TextControl,{type:"number",min:"0",value:e.visible_paragraphs,label:g("Default paragraph count","newspack"),onChange:e=>t({meta:{visible_paragraphs:e}}),help:g("Number of paragraphs that readers can see above the content gate.","newspack")}),(0,n.createElement)("hr",null),(0,n.createElement)(o.CheckboxControl,{label:g("Use “More” tag to manually place content gate","newspack"),checked:e.use_more_tag,onChange:e=>t({meta:{use_more_tag:e}}),help:g("Override the default paragraph count on pages where a “More” block has been placed.","newspack")})),(0,n.createElement)(s.PluginDocumentSettingPanel,{name:"memberships-gate-metering-panel",title:g("Metering","newspack")},(0,n.createElement)(o.CheckboxControl,{label:g("Enable metering","newspack"),checked:e.metering,onChange:e=>t({meta:{metering:e}}),help:g("Implement metering to configure access to restricted content before showing the gate.","newspack")}),e.metering&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)(o.TextControl,{type:"number",min:"0",value:e.metering_anonymous_count,label:g("Available views for anonymous readers","newspack"),onChange:e=>t({meta:{metering_anonymous_count:e}}),help:g("Number of times an anonymous reader can view gated content. If set to 0, anonymous readers will always render the gate.","newspack")}),(0,n.createElement)(o.TextControl,{type:"number",min:"0",value:e.metering_registered_count,label:g("Available views for registered readers","newspack"),onChange:e=>t({meta:{metering_registered_count:e}}),help:g("Number of times a registered reader can view gated content. If set to 0, registered readers without membership plan will always render the gate.","newspack")}),(0,n.createElement)(o.SelectControl,{label:g("Time period","newspack"),value:e.metering_period,options:[{value:"day",label:g("Day","newspack")},{value:"week",label:g("Week","newspack")},{value:"month",label:g("Month","newspack")}],onChange:e=>t({meta:{metering_period:e}}),help:g("The time period during which the metering views will be counted. For example, if the metering period is set to a week, the metering views will be reset every week.","newspack")}))))},icon:null})},5609:e=>{e.exports=window.wp.components},9818:e=>{e.exports=window.wp.data},9307:e=>{e.exports=window.wp.element},5736:e=>{e.exports=window.wp.i18n}},a={};function n(e){var l=a[e];if(void 0!==l)return l.exports;var r=a[e]={exports:{}};return t[e].call(r.exports,r,r.exports,n),r.exports}n.m=t,e=[],n.O=(t,a,l,r)=>{if(!a){var o=1/0;for(p=0;p<e.length;p++){for(var[a,l,r]=e[p],s=!0,i=0;i<a.length;i++)(!1&r||o>=r)&&Object.keys(n.O).every((e=>n.O[e](a[i])))?a.splice(i--,1):(s=!1,r<o&&(o=r));if(s){e.splice(p--,1);var c=l();void 0!==c&&(t=c)}}return t}r=r||0;for(var p=e.length;p>0&&e[p-1][2]>r;p--)e[p]=e[p-1];e[p]=[a,l,r]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.j=281,(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");a.length&&(e=a[a.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e={281:0};n.O.j=t=>0===e[t];var t=(t,a)=>{var l,r,[o,s,i]=a,c=0;if(o.some((t=>0!==e[t]))){for(l in s)n.o(s,l)&&(n.m[l]=s[l]);if(i)var p=i(n)}for(t&&t(a);c<o.length;c++)r=o[c],n.o(e,r)&&e[r]&&e[r][0](),e[o[c]]=0;return n.O(p)},a=globalThis.webpackChunkwebpack=globalThis.webpackChunkwebpack||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var l=n.O(void 0,[351],(()=>n(8516)));l=n.O(l);var r=window;for(var o in l)r[o]=l[o];l.__esModule&&Object.defineProperty(r,"__esModule",{value:!0})})();