!function(){"use strict";var e,t={8516:function(e,t,n){n.r(t);var a=n(9307),l=n(5736),r=n(9818),s=n(5609),o=window.wp.editPost,i=window.wp.plugins,c=n(7462),p=n(4184),m=n.n(p);const u=l.__;function g(e){let{allowedPositions:t,value:n,label:l,help:r,onChange:o,size:i,...p}=e;const g="full-width"===i?[{value:"top",label:u("Top","newspack")},{value:"center",label:u("Center","newspack")},{value:"bottom",label:u("Bottom","newspack")}]:[{value:"top_left",label:u("Top Left","newspack")},{value:"top",label:u("Top Center","newspack")},{value:"top_right",label:u("Top Right","newspack")},{value:"center_left",label:u("Center Left","newspack")},{value:"center",label:u("Center","newspack")},{value:"center_right",label:u("Center Right","newspack")},{value:"bottom_left",label:u("Bottom Left","newspack")},{value:"bottom",label:u("Bottom Center","newspack")},{value:"bottom_right",label:u("Bottom Right","newspack")}];return(0,a.createElement)("div",{className:m()("newspack-position-placement-control","size-"+i)},(0,a.createElement)("p",{className:"components-base-control__label"},l),(0,a.createElement)(s.ButtonGroup,(0,c.Z)({"aria-label":u("Select Position","newspack")},p),g.map(((e,l)=>(0,a.createElement)("div",{key:`newspack-position-placement-item-${l}`,className:e.value===n?"is-selected":null},(0,a.createElement)(s.Button,{isSmall:!0,title:e.label,"aria-label":e.label,isPrimary:e.value===n,onClick:()=>{o(e.value)},disabled:t?.length&&!t.includes(e.value)}))))),(0,a.createElement)("p",{className:"components-base-control__help"},r))}const w=l.__,d=[{value:"inline",label:w("Inline","newspack")},{value:"overlay",label:w("Overlay","newspack")}],h={center:w("center","newspack"),bottom:w("bottom","newspack")},b=[{value:"x-small",label:w("Extra Small","newspack")},{value:"small",label:w("Small","newspack")},{value:"medium",label:w("Medium","newspack")},{value:"large",label:w("Large","newspack")},{value:"full-width",label:w("Full Width","newspack")}];(0,i.registerPlugin)("newspack-memberships-gate",{render:function(){const{meta:e}=(0,r.useSelect)((e=>{const{getEditedPostAttribute:t}=e("core/editor");return{meta:t("meta")}})),{editPost:t}=(0,r.useDispatch)("core/editor");(0,a.useEffect)((()=>{const t=document.querySelector(".editor-styles-wrapper");t&&("overlay"===e.style?t.setAttribute("data-overlay-size",e.overlay_size):t.removeAttribute("data-overlay-size"))}),[e.style,e.overlay_size]);const{createNotice:n}=(0,r.useDispatch)("core/notices");return(0,a.useEffect)((()=>{Object.keys(newspack_memberships_gate.gate_plans).length&&n("info",(0,l.sprintf)(w("You're currently editing a gate for content restricted by: %s","newspack"),Object.values(newspack_memberships_gate.gate_plans).join(", ")))}),[]),(0,a.createElement)(a.Fragment,null,newspack_memberships_gate.has_campaigns&&(0,a.createElement)(o.PluginPostStatusInfo,null,(0,a.createElement)("p",null,w("Newspack Campaign prompts won't be displayed when rendering gated content.","newspack"))),newspack_memberships_gate.plans.length>1&&(0,a.createElement)(o.PluginDocumentSettingPanel,{name:"memberships-gate-plans",title:w("WooCommerce Memberships","newspack")},Object.keys(newspack_memberships_gate.gate_plans).length?(0,a.createElement)(a.Fragment,null,(0,a.createElement)("p",null,(0,l.sprintf)(w("This gate will be rendered for the following membership plans: %s","newspack"),Object.values(newspack_memberships_gate.gate_plans).join(", "))),(0,a.createElement)("hr",null),(0,a.createElement)("p",{dangerouslySetInnerHTML:{__html:(0,l.sprintf)(w('Edit the <a href="%s">primary gate</a>, or:',"newspack"),newspack_memberships_gate.edit_gate_url)}})):(0,a.createElement)(a.Fragment,null,(0,a.createElement)("p",null,w("This gate will be rendered for all membership plans. Manage custom gates for when the content is locked behind a specific plan:","newspack"))),(0,a.createElement)("ul",null,(()=>{const e=Object.keys(newspack_memberships_gate.gate_plans)||[];return newspack_memberships_gate.plans.filter((t=>!e.includes(t.id.toString())))})().map((e=>(0,a.createElement)("li",{key:e.id},e.name," (",!1!==e.gate_id&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)("strong",null,"publish"===e.gate_status?w("published","newspack"):w("draft","newspack"))," ","-"," "),(0,a.createElement)("a",{href:newspack_memberships_gate.edit_gate_url+"&plan_id="+e.id},e.gate_id?w("edit gate","newspack"):w("create gate","newspack")),")"))))),(0,a.createElement)(o.PluginDocumentSettingPanel,{name:"memberships-gate-styles-panel",title:w("Styles","newspack")},(0,a.createElement)("div",{className:"newspack-memberships-gate-style-selector"},d.map((n=>(0,a.createElement)(s.Button,{key:n.value,variant:e.style===n.value?"primary":"secondary",isPressed:e.style===n.value,onClick:()=>t({meta:{style:n.value}}),"aria-current":e.style===n.value},n.label)))),"inline"===e.style&&(0,a.createElement)(s.CheckboxControl,{label:w("Apply fade to last paragraph","newspack"),checked:e.inline_fade,onChange:e=>t({meta:{inline_fade:e}}),help:w("Whether to apply a gradient fade effect before rendering the gate.","newspack")}),"overlay"===e.style&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(s.SelectControl,{label:w("Size","newspack"),value:e.overlay_size,options:b,onChange:e=>t({meta:{overlay_size:e}})}),(0,a.createElement)(g,{label:w("Position","newspack"),value:e.overlay_position,size:e.overlay_size,allowedPositions:["bottom","center"],onChange:e=>t({meta:{overlay_position:e}}),help:(0,l.sprintf)(w("The gate will be displayed at the %s of the screen.","newspack"),h[e.overlay_position])}))),(0,a.createElement)(o.PluginDocumentSettingPanel,{name:"memberships-gate-settings-panel",title:w("Settings","newspack")},(0,a.createElement)(s.TextControl,{type:"number",min:"0",value:e.visible_paragraphs,label:w("Default paragraph count","newspack"),onChange:e=>t({meta:{visible_paragraphs:e}}),help:w("Number of paragraphs that readers can see above the content gate.","newspack")}),(0,a.createElement)("hr",null),(0,a.createElement)(s.CheckboxControl,{label:w("Use “More” tag to manually place content gate","newspack"),checked:e.use_more_tag,onChange:e=>t({meta:{use_more_tag:e}}),help:w("Override the default paragraph count on pages where a “More” block has been placed.","newspack")})),(0,a.createElement)(o.PluginDocumentSettingPanel,{name:"memberships-gate-metering-panel",title:w("Metering","newspack")},(0,a.createElement)(s.CheckboxControl,{label:w("Enable metering","newspack"),checked:e.metering,onChange:e=>t({meta:{metering:e}}),help:w("Implement metering to configure access to restricted content before showing the gate.","newspack")}),e.metering&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(s.TextControl,{type:"number",min:"0",value:e.metering_anonymous_count,label:w("Available views for anonymous readers","newspack"),onChange:e=>t({meta:{metering_anonymous_count:e}}),help:w("Number of times an anonymous reader can view gated content. If set to 0, anonymous readers will always render the gate.","newspack")}),(0,a.createElement)(s.TextControl,{type:"number",min:"0",value:e.metering_registered_count,label:w("Available views for registered readers","newspack"),onChange:e=>t({meta:{metering_registered_count:e}}),help:w("Number of times a registered reader can view gated content. If set to 0, registered readers without membership plan will always render the gate.","newspack")}),(0,a.createElement)(s.SelectControl,{label:w("Time period","newspack"),value:e.metering_period,options:[{value:"day",label:w("Day","newspack")},{value:"week",label:w("Week","newspack")},{value:"month",label:w("Month","newspack")}],onChange:e=>t({meta:{metering_period:e}}),help:w("The time period during which the metering views will be counted. For example, if the metering period is set to a week, the metering views will be reset every week.","newspack")}))))},icon:null})},5609:function(e){e.exports=window.wp.components},9818:function(e){e.exports=window.wp.data},9307:function(e){e.exports=window.wp.element},5736:function(e){e.exports=window.wp.i18n}},n={};function a(e){var l=n[e];if(void 0!==l)return l.exports;var r=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=t,e=[],a.O=function(t,n,l,r){if(!n){var s=1/0;for(p=0;p<e.length;p++){n=e[p][0],l=e[p][1],r=e[p][2];for(var o=!0,i=0;i<n.length;i++)(!1&r||s>=r)&&Object.keys(a.O).every((function(e){return a.O[e](n[i])}))?n.splice(i--,1):(o=!1,r<s&&(s=r));if(o){e.splice(p--,1);var c=l();void 0!==c&&(t=c)}}return t}r=r||0;for(var p=e.length;p>0&&e[p-1][2]>r;p--)e[p]=e[p-1];e[p]=[n,l,r]},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},a.j=281,function(){var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e}(),function(){var e={281:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var l,r,s=n[0],o=n[1],i=n[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(l in o)a.o(o,l)&&(a.m[l]=o[l]);if(i)var p=i(a)}for(t&&t(n);c<s.length;c++)r=s[c],a.o(e,r)&&e[r]&&e[r][0](),e[s[c]]=0;return a.O(p)},n=self.webpackChunkwebpack=self.webpackChunkwebpack||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var l=a.O(void 0,[351],(function(){return a(8516)}));l=a.O(l);var r=window;for(var s in l)r[s]=l[s];l.__esModule&&Object.defineProperty(r,"__esModule",{value:!0})}();