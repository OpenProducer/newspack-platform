(()=>{"use strict";var e,t={4053:(e,t,n)=>{var o=n(9430);const a=["signin_modal","register_modal"];function i(){return document.querySelector(".newspack-reader-auth-modal .newspack-reader-auth")}function s(e={}){const t=window.newspackReaderActivation.getReader(),n=e.trigger;if(t?.authenticated)return void(e.onSuccess&&"function"==typeof e.onSuccess&&e.onSuccess());const s=i();if(!s)return void(e.onSuccess&&"function"==typeof e.onSuccess&&e.onSuccess());const r=s.closest(".newspack-reader-auth-modal");if(!r)return void(e.onSuccess&&"function"==typeof e.onSuccess&&e.onSuccess());const c=e=>{"Escape"===e.key&&d()},l=e=>{e.preventDefault(),d()},d=(t=!0)=>{s.config={},r.setAttribute("data-state","closed"),document.body.classList.remove("newspack-signin"),document.body.style.overflow="auto",r.overlayId&&window.newspackReaderActivation?.overlays&&window.newspackReaderActivation.overlays.remove(r.overlayId);const o=s.querySelector(".opener-content");o&&o.remove(),n&&n.focus(),t&&e.onDismiss&&"function"==typeof e.onDismiss&&e.onDismiss(),document.removeEventListener("keydown",c),u.forEach((e=>{e.removeEventListener("click",l)}))},u=r.querySelectorAll("button[data-close], .newspack-ui__modal__close");if(u?.length&&u.forEach((e=>{e.addEventListener("click",l)})),document.addEventListener("keydown",c),e.labels={...newspack_reader_activation_labels,...e?.labels},s.config=e,s.authCallback=(t,n)=>{e?.closeOnSuccess&&d(!1),e.onSuccess&&"function"==typeof e.onSuccess&&e.onSuccess(t,n)},s.formActionCallback=t=>{r.querySelector("h2").textContent="register"===t?e.labels.register.title:e.labels.signin.title,r.querySelectorAll("[data-action]").forEach((e=>{"none"!==e.style.display&&(e.prevDisplay=e.style.display),e.style.display="none"})),r.querySelectorAll('[data-action~="'+t+'"]').forEach((e=>{e.style.display=e.prevDisplay})),o.o(r)},e.content){const t=document.createElement("div");t.classList.add("opener-content"),t.innerHTML=e.content;const n=s.querySelector("form");n.insertBefore(t,n.firstChild)}const p=s.querySelector('input[name="npe"]');p&&(p.value=t?.email||"");let g="signin";window.newspackReaderActivation?.hasAuthLink()&&(g="otp");const w=window.location.hash.replace("#","");a.includes(w)&&(g="register_modal"===w?"register":"signin"),e.initialState&&(g=e.initialState),s.setFormAction(g,!0),"otp"===g&&window?.newspackReaderActivation?.getOTPTimeRemaining()<=0&&s.setFormAction("signin"),document.body.classList.add("newspack-signin"),document.body.style.overflow="hidden",r.setAttribute("data-state","open"),window.newspackReaderActivation?.overlays&&(r.overlayId=window.newspackReaderActivation.overlays.add("auth-modal"),o.o(r)),a.includes(window.location.hash.replace("#",""))&&history.pushState("",document.title,window.location.pathname+window.location.search)}var r=n(1622),c=n(5325);var l=n(2952);(0,r.Qc)((function(){[...document.querySelectorAll(".newspack-reader__logins")].forEach((e=>{e.classList.remove("newspack-reader__logins--disabled")})),document.querySelectorAll(".newspack-ui__button--google-oauth").forEach((e=>{const t=e.closest("form");e.addEventListener("click",(()=>{(0,l.cY)("log","[Google OAuth] Login button clicked"),t?.startLoginFlow&&t.startLoginFlow();const e=t?(0,r.wJ)(new FormData(t),["lists[]"]):{};e.current_page_url=window.location.href,(0,l.cY)("log","[Google OAuth] Opening auth window with metadata:",e);const n=window.open("about:blank","newspack_google_login","width=500,height=600");let o=null;const a=()=>{(0,l.cY)("log","[Google OAuth] Cleanup called"),o&&(window.removeEventListener("message",o),o=null)};o=n=>{(0,l.cY)("log","[Google OAuth] Received postMessage:",{origin:n.origin,data:n.data,expectedOrigin:window.location.origin}),n.origin===window.location.origin&&"google-oauth-success"===n.data&&((0,l.cY)("log","[Google OAuth] Valid success message received, calling checkLoginStatus"),a(),(e=>{(0,l.cY)("log","[Google OAuth] checkLoginStatus called with metadata:",e),fetch(`/wp-json/newspack/v1/login/google/register?metadata=${JSON.stringify(e)}`).then((e=>{(0,l.cY)("log","[Google OAuth] Register response status:",e.status),e.json().then((({message:n,data:o})=>{(0,l.cY)("log","[Google OAuth] Register response data:",{message:n,data:o}),t?.endLoginFlow&&t.endLoginFlow(n,e.status,o)})).catch((n=>{(0,l.cY)("error","[Google OAuth] Error parsing register response:",n),t?.endLoginFlow&&t.endLoginFlow(n?.message,e.status)}))})).catch((e=>{(0,l.cY)("error","[Google OAuth] Error fetching register endpoint:",e),t?.endLoginFlow&&t.endLoginFlow(e?.message)}))})(e))},window.addEventListener("message",o),fetch("/wp-json/newspack/v1/login/google?r="+Math.random()).then((e=>e.json().then((t=>Promise.resolve({data:t,status:e.status}))))).then((({data:e,status:o})=>{200!==o?(n&&n.close(),a(),t?.endLoginFlow&&t.endLoginFlow(e.message,o)):n?n.location=e:t?.endLoginFlow&&(a(),t.endLoginFlow(newspack_reader_activation_labels.blocked_popup))})).catch((e=>{a(),t?.endLoginFlow&&t.endLoginFlow(e?.message,400),n&&n.close()}))}))}))})),(0,r.Qc)((function(){document.querySelectorAll('input[name="otp_code"]').forEach((e=>{const t=parseInt(e.getAttribute("maxlength"));if(!t)return;const n=e.parentNode;n.removeChild(e);const o=[],a=document.createElement("input");a.setAttribute("type","hidden"),a.setAttribute("name","otp_code"),n.appendChild(a);for(let e=0;e<t;e++){const i=document.createElement("input");i.setAttribute("type","text"),i.setAttribute("pattern","[0-9]"),i.setAttribute("autocomplete",0===e?"one-time-code":"off"),i.setAttribute("inputmode","numeric"),i.setAttribute("data-index",e),i.addEventListener("keydown",(t=>{const i=n.querySelector(`[data-index="${e-1}"]`),s=n.querySelector(`[data-index="${e+1}"]`);switch(t.key){case"Backspace":t.preventDefault(),t.target.value="",i&&i.focus(),o[e]="",a.value=o.join("");break;case"ArrowLeft":t.preventDefault(),i&&i.focus();break;case"ArrowRight":t.preventDefault(),s&&s.focus();break;default:t.key.match(/^[0-9]$/)&&(t.preventDefault(),t.target.value=t.key,t.target.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})),s&&s.focus())}})),i.addEventListener("input",(i=>{const s=i.target.value.trim();if(t!==s.length){if(s.match(/^[0-9]$/)){o[e]=s;const t=n.querySelector(`[data-index="${e+1}"]`);t&&t.focus()}else i.target.value="";a.value=o.join("")}else{for(let e=0;e<t;e++){const t=s[e];/^[0-9]$/.test(t)&&(n.querySelector(`[data-index="${e}"]`).value=t,o[e]=t)}a.value=o.join("")}})),i.addEventListener("paste",(e=>{e.preventDefault();const i=(e.clipboardData||window.clipboardData).getData("text");if(i.length===t){for(let e=0;e<t;e++)i[e].match(/^[0-9]$/)&&(n.querySelector(`[data-index="${e}"]`).value=i[e],o[e]=i[e]);a.value=o.join("")}})),n.appendChild(i)}}))}));const d=["register","signin","pwd","otp","success"];window.newspackRAS=window.newspackRAS||[],window.newspackRAS.push((function(e){(0,r.Qc)((function(){const t=[...document.querySelectorAll(".newspack-reader-auth")];t?.length&&t.forEach((t=>{const n=t.querySelector("form");if(!n)return;const a=n.querySelector('input[name="action"]'),i=n.querySelector('input[name="npe"]'),s=n.querySelector('input[name="otp_code"]'),l=n.querySelector('input[name="password"]'),u=n.querySelectorAll('[type="submit"]'),p=t.querySelectorAll("[data-back]"),g=t.querySelector("[data-send-code]"),w=t.querySelector("[data-resend-code]"),f=t.querySelector(".response"),h=e=>{e.addEventListener("click",(function(e){e.preventDefault(),t.setFormAction(e.target.getAttribute("data-set-action"),!0)}))};let m;n.setMessageContent=(e="",t=!1)=>{e?("string"==typeof e?f.innerHTML=e:f.appendChild(e),t?(f.classList.remove("newspack-ui__helper-text"),f.classList.add("newspack-ui__inline-error"),n.style.opacity=1):(f.classList.remove("newspack-ui__inline-error"),f.classList.add("newspack-ui__helper-text")),f.style.display="block",f.querySelectorAll('a[data-set-action="register"], a[data-set-action="signin"]').forEach((e=>{e.parentNode.setAttribute("data-action","signin"),e.addEventListener("click",(function(){f.innerHTML=""}),!1)}))):(f.style.display="none",f.innerHTML="",f.classList.remove("newspack-ui__inline-error","newspack-ui__helper-text"))},t.setFormAction=(o,r=!1)=>{d.includes(o)||(o="signin"),"signin"!==o&&"success"!==o||n.setMessageContent();const c=window.newspack_grecaptcha||{};if("v2_invisible"===c?.version&&("register"===o?(n.removeAttribute("data-skip-recaptcha"),c.render([n],(e=>n.setMessageContent(e,!0)))):n.setAttribute("data-skip-recaptcha","1")),"otp"===o){if(!e.getOTPHash())return;t.querySelectorAll(".email-address").forEach((t=>{t.textContent=e.getReader()?.email||""}));const n=t.querySelector('.otp-field input[type="text"]');n&&n.focus()}m=o,a.value=o,t.removeAttribute("data-form-status"),t.querySelectorAll("[data-action]").forEach((e=>{"none"!==e.style.display&&(e.prevDisplay=e.style.display),e.style.display="none"})),t.querySelectorAll('[data-action~="'+o+'"]').forEach((e=>{e.style.display=e.prevDisplay})),r&&("pwd"===o&&i.value?l.focus():"otp"===o?s.focus():i.focus()),t.formActionCallback&&t.formActionCallback(o)},t.setFormAction("signin");const v=()=>{const t=e.getReader();i&&(i.value=t?.email||""),setTimeout((function(){t?.authenticated&&"success"!==m&&n.endLoginFlow(null,200)}),1e3)};e.on("reader",v),v(),p.forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault(),n.setMessageContent(),t.setFormAction("signin",!0)}))}));const _=()=>{if(!w)return;w.originalButtonText=w.textContent.replace(/\s\(\d{1,}:\d{2}\)/,"");const t=()=>{const t=e.getOTPTimeRemaining();t?w.textContent=`${w.originalButtonText} (${(0,r.fU)(t)})`:(w.textContent=w.originalButtonText,clearInterval(w.otpTimerInterval)),w.disabled=!!t};e.getOTPTimeRemaining()&&(w.otpTimerInterval=setInterval(t,1e3),t())};(g||w)&&[g,w].forEach((o=>{o.addEventListener("click",(function(o){o.preventDefault(),n.setMessageContent(),n.startLoginFlow();const a=new FormData;if(a.set("reader-activation-auth-form",1),a.set("npe",i.value),a.set("action","link"),(0,c.m)()){const e=new URL(window.location.href);e.searchParams.set("checkout",1),a.set("redirect_url",e.toString())}fetch(n.getAttribute("action")||window.location.pathname,{method:"POST",headers:{Accept:"application/json"},body:a}).then((o=>{if(200!==o.status)return o.json().then((({message:e})=>{n.endLoginFlow(e,o.status)}));n.setMessageContent("pwd"===m?newspack_reader_activation_labels.code_sent:newspack_reader_activation_labels.code_resent),t.setFormAction("otp"),e.getOTPTimeRemaining()||e.setOTPTimer()})).finally((()=>{_(),n.style.opacity=1,u.forEach((e=>{e.disabled=!1}))}))}))})),t.querySelectorAll("[data-set-action]").forEach(h),n.startLoginFlow=()=>{t.removeAttribute("data-form-status"),u.forEach((e=>{e.disabled=!0})),n.setMessageContent(),n.style.opacity=.5},n.endLoginFlow=(a=null,i=500,s=null)=>{if(t.setAttribute("data-form-status",i),t.config?.closeOnSuccess&&(n.style.opacity=1),u.forEach((e=>{e.disabled=!1})),a&&(document.createElement("p").innerHTML=a,200!==i&&(n.setMessageContent(a,!0),f.querySelectorAll("[data-set-action]").forEach(h))),200===i){if(s?.email){e.setReaderEmail(s.email),e.setAuthenticated(!!s.authenticated);const t={email:s.email},o=new FormData(n);(s.metadata?.gate_post_id||o.has("memberships_content_gate"))&&(t.gate_post_id=s.metadata.gate_post_id||o.get("memberships_content_gate")),(s.metadata?.newspack_popup_id||o.has("newspack_popup_id"))&&(t.newspack_popup_id=s.metadata.newspack_popup_id||o.get("newspack_popup_id")),s?.sso&&(t.sso=!0),s?.existing_user?e.dispatchActivity("reader_logged_in",{...t,login_method:s?.metadata?.login_method||"auth-form"}):e.dispatchActivity("reader_registered",{...t,registration_method:s?.metadata?.registration_method||"auth-form"})}let i;if(i=!t.config?.skipNewslettersSignup&&s?.registered&&t.authCallback?(e,n)=>function(e={}){const t=document.querySelector(".newspack-newsletters-signup-modal .newspack-newsletters-signup");if(!t)return void(e?.onSuccess&&"function"==typeof e.onSuccess&&e.onSuccess());const n=t.closest(".newspack-newsletters-signup-modal");if(!n)return void(e?.onSuccess&&"function"==typeof e.onSuccess&&e.onSuccess());const a=t.querySelector("form"),i=(o=!0)=>{t.config={},n.setAttribute("data-state","closed"),n?.overlayId&&window?.newspackReaderActivation?.overlays&&window.newspackReaderActivation.overlays.remove(n.overlayId);const a=t.querySelector(".opener-content");a&&a.remove(),o&&e.onDismiss&&"function"==typeof e.onDismiss&&e.onDismiss()},s=n.querySelectorAll("button[data-close], .newspack-ui__modal__close");if(s?.length&&s.forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault(),i()}))})),e.labels={...e?.labels},t.config=e,t.newslettersSignupCallback=(t,n)=>{e?.closeOnSuccess&&i(!1),e?.onSuccess&&"function"==typeof e.onSuccess&&e.onSuccess(t,n)},e?.content){const t=document.createElement("div");t.classList.add("opener-content"),t.innerHTML=e.content,a.insertBefore(t,a.firstChild)}e?.signupMethod&&a.setAttribute("data-signup-method",e.signupMethod);const r=n.querySelector("span.email");if(r&&!r.innerText){const e=window?.newspackReaderActivation?.getReader();e?.email?r.textContent=e.email:r.parentElement.remove()}n.setAttribute("data-state","open"),o.o(n),window?.newspackReaderActivation?.overlays&&(n.overlayId=window.newspackReaderActivation.overlays.add())}({onSuccess:t.authCallback(e,n),closeOnSuccess:!0,signupMethod:"reader-registration"}):t.authCallback,t.config?.skipSuccess)i&&i(a,s);else{let e=newspack_reader_activation_labels.signin;s?.registered&&(e=newspack_reader_activation_labels.register),t.setFormAction("success"),t.querySelector(".success-title").innerHTML=e.success_title||"",t.querySelector(".success-description").innerHTML=e.success_description||"";const n=t.querySelector(".auth-callback");n&&i&&n.addEventListener("click",(e=>{e.preventDefault(),i(a,s)}));const o=t.querySelector(".set-password");if(o){const e=o.style.display;if(s?.password_url)o.style.display=e,o.setAttribute("href",s.password_url);else{o.style.display="none",o.setAttribute("href","#");const e=t.querySelector(".auth-callback");e&&e.classList.add("newspack-ui__last-child")}}if(s?.redirect_to){const e=t.querySelector(".auth-callback");e&&e.setAttribute("href",s.redirect_to)}}}},n.addEventListener("submit",(o=>{o.preventDefault(),n.startLoginFlow();const a=n.action?.value;if(!n.npe?.value)return n.endLoginFlow(newspack_reader_activation_labels.invalid_email,400);if("pwd"===a&&!n.password?.value)return n.endLoginFlow(newspack_reader_activation_labels.invalid_password,400);const i=new FormData(o.target);if(!i.has("npe")||!i.get("npe"))return n.endLoginFlow(newspack_reader_activation_labels.invalid_email,400);if((0,c.m)()){const e=new URL(window.location.href);e.searchParams.set("checkout",1),i.set("redirect_url",e.toString())}"otp"===a?e.authenticateOTP(i.get("otp_code")).then((e=>{n.endLoginFlow(e.message,200,e)})).catch((e=>{e.expired&&t.setFormAction("signin"),n.endLoginFlow(e.message,400)})):fetch(n.getAttribute("action")||window.location.pathname,{method:"POST",headers:{Accept:"application/json"},body:i}).then((o=>{t.setAttribute("data-form-status",o.status),o.json().then((({message:a,data:s})=>{const r=o.status;200===r&&e.setReaderEmail(i.get("npe")),s.action?(t.setFormAction(s.action,!0),"otp"===s.action&&(e.setOTPTimer(),_()),"otp"!==s.action&&"pwd"!==s.action||(n.style.opacity=1)):n.endLoginFlow(a,r,s)})).catch((()=>{n.endLoginFlow()})).finally((()=>{const e=o.status;t.config?.closeOnSuccess?n.style.opacity=1:200===e||t.config?.closeOnSuccess||(n.style.opacity=1),u.forEach((e=>{e.disabled=!1}))}))})).catch((()=>{n.endLoginFlow()}))}))}))}))})),window.newspackRAS=window.newspackRAS||[],window.newspackRAS.push((e=>{(0,r.Qc)((function(){function t(e){const t=i();if(!t)return;const n=window.location.hash.replace("#","");a.includes(n)&&(e&&e.preventDefault(),t.setFormAction("register_modal"===n?"register":"signin"),s({closeOnSuccess:!0}))}function n(e){e.preventDefault();const t=e.target;let n,o;if(o=e.target.getAttribute("data-redirect")?e.target.getAttribute("data-redirect"):e.target.getAttribute("href"),!o){const t=e.target.closest("a");t&&(o=t.getAttribute("data-redirect")?t.getAttribute("data-redirect"):t.getAttribute("href"))}o&&"#"!==o&&(n=()=>{window.location.href=o}),s({onSuccess:n,onError:n,trigger:t,closeOnSuccess:!0})}function o(){document.querySelectorAll(`[data-newspack-reader-account-link],[href="${newspack_ras_config.account_url}"]`).forEach((e=>{e.addEventListener("click",n)}))}function r(){const e=window.newspackReaderActivation.getReader(),t=document.querySelectorAll(".newspack-reader__account-link");t?.length&&t.forEach((t=>{const n=JSON.parse(t.getAttribute("data-labels")),o=t.querySelector(".newspack-reader__account-link__label");o&&(o.textContent=e?.authenticated?n.signedin:n.signedout,e?.authenticated&&t.setAttribute("href",newspack_ras_config.account_url))}))}e._openAuthModal=s,window.addEventListener("hashchange",t),t(),o(),setTimeout(o,1e3),window.newspackReaderActivation.on("reader",r),r()}));const t=window.location.search,n=new URLSearchParams(t),o=e.getReader();if(n.get(newspack_ras_config?.auth_action_result)&&o?.email&&o?.authenticated){n.delete(newspack_ras_config?.auth_action_result);const t=n.toString()?"?"+n.toString():"";window.history.replaceState({},"",window.location.pathname+t),e.dispatchActivity("reader_logged_in",{email:o.email,login_method:"auth-token"})}}))},5920:(e,t,n)=>{n.d(t,{AU:()=>l,Ic:()=>r,on:()=>c,qY:()=>a});const o="newspack-ras",a={reader:"reader",data:"data",activity:"activity",overlay:"overlay"},i=Object.values(a);function s(e){return i.includes(e)?`${o}-${e}`:""}function r(e,t){if(!(e=s(e)))throw new Error("Invalid event");window.dispatchEvent(new CustomEvent(e,{detail:t}))}function c(e,t){if(!(e=s(e)))throw new Error("Invalid event");window.addEventListener(e,t)}function l(e,t){if(!(e=s(e)))throw new Error("Invalid event");window.removeEventListener(e,t)}},8621:(e,t,n)=>{n.d(t,{M_:()=>u,OO:()=>h});var o=n(4916),a=n(5325),i=n(5920),s=n(2952),r=n(6500),c=n(8905),l=n(3497),d=n(5547);window.newspack_ras_config=window.newspack_ras_config||{};const u=(0,o.A)();function p(e,t,n=0){const o={action:e,data:t,timestamp:n||Date.now()};return u.add("activity",o),(0,i.Ic)(i.qY.activity,o),o}function g(e){const t=u.get("activity")||[];return e?t.filter((t=>t.action===e)):t}function w(e){if(!e)return;const t=h();t.email=e,u.set("reader",t,!1),(0,i.Ic)(i.qY.reader,t)}function f(e=!0){const t=u.get("reader")||{};if(!t.email)throw new Error("Reader email not set");t.authenticated=Boolean(e),u.set("reader",t,!1),(0,i.Ic)(i.qY.reader,t)}function h(){return u.get("reader")||{}}const m=["pwd","link"];function v(){return(0,s.Ri)("np_otp_hash")}const _="newspack_otp_timer";function y(){localStorage.removeItem(_)}const k={store:u,overlays:r.A,on:i.on,off:i.AU,dispatchActivity:p,getActivities:g,getUniqueActivitiesBy:function(e,t){const n=g(e),o=[],a={};for(const e of n){const n="function"==typeof t?t(e):e.data[t];a[n]||(o.push(e),a[n]=!0)}return o},setReaderEmail:w,setAuthenticated:f,refreshAuthentication:function(){const e=(0,s.Ri)("np_auth_reader");e?(w(e),f(!0)):w((0,s.Ri)("np_auth_intention"))},getReader:h,openNewslettersSignupModal:function(e={}){e={onSuccess:null,onDismiss:null,onError:null,initialState:null,skipSuccess:!1,labels:{},content:null,closeOnSuccess:!0,...e},k?._openNewslettersSignupModal?k._openNewslettersSignupModal(e):(console.warn("Newsletters signup modal not available"),e?.onError&&"function"==typeof e.onError&&e.onError())},hasAuthLink:function(){const e=h(),t=(0,s.Ri)("np_otp_hash");return!(!e?.email||!t)},getOTPHash:v,setOTPTimer:function(){localStorage.setItem(_,Math.floor(Date.now()/1e3))},clearOTPTimer:y,getOTPTimeRemaining:function(){const e=localStorage.getItem(_);if(!e)return 0;const t=newspack_ras_config.otp_rate_interval-(Math.floor(Date.now()/1e3)-e);return t||y(),t>0?t:0},authenticateOTP:function(e){return new Promise(((t,n)=>{const o=v(),a=h()?.email;return o?a?e?void fetch("",{method:"POST",headers:{Accept:"application/json"},body:new URLSearchParams({action:newspack_ras_config.otp_auth_action,email:a,hash:o,code:e})}).then((e=>e.json())).then((({success:e,message:o,data:i})=>{const s={...i,email:a,authenticated:!!e,message:o};f(!!e),e?t(s):n(s)})):n({message:"Invalid code"}):n({message:"You must provide an email"}):n({message:"Code has expired",expired:!0})}))},setAuthStrategy:function(e){if(!m.includes(e))throw new Error("Invalid authentication strategy");return(0,s.TV)("np_auth_strategy",e),e},getAuthStrategy:function(){return v()?"otp":(0,s.Ri)("np_auth_strategy")},setPendingCheckout:a._,getPendingCheckout:a.m,debugLog:s.cY,...newspack_ras_config.is_ras_enabled&&{openAuthModal:function(e={}){e={onSuccess:null,onDismiss:null,onError:null,initialState:null,skipSuccess:!1,skipNewslettersSignup:!1,labels:{signin:{title:null},register:{title:null}},content:null,trigger:null,closeOnSuccess:!0,...e},newspack_ras_config.is_logged_in?e.onSuccess&&"function"==typeof e.onSuccess&&e.onSuccess():k._openAuthModal?k._openAuthModal(e):(console.warn("Authentication modal not available"),e.onError&&"function"==typeof e.onError&&e.onError())}}};function S(...e){e.forEach((e=>{Array.isArray(e)&&"string"==typeof e[0]?p(...e):"function"==typeof e?e(k):console.warn("Invalid newspackRAS.push argument",e)}))}window.newspackRASInitialized||function(){const e=newspack_ras_config,t=e?.authenticated_email||(0,s.Ri)("np_auth_intention"),n=!!e?.authenticated_email,o=h(),a={email:t||o?.email,authenticated:n};o?.email===a?.email&&o?.authenticated===a?.authenticated||u.set("reader",a,!1),(0,i.Ic)(i.qY.reader,a),(0,c.Ay)(k),(0,d.A)(k),function(){const e=newspack_ras_config.cid_cookie;(0,s.Ri)(e)||(0,s.TV)(e,(0,s.ni)(12))}(),(0,l.A)(k),function(){if((0,s.Ri)("np_auth_reader"))return;const e=setInterval((()=>{const t=h(),n=(0,s.Ri)("np_auth_intention");if(n&&t.email!==n)w(n);else{const t=(0,s.Ri)("np_auth_reader");t&&(w(t),f(!0),clearInterval(e))}}),1e3)}(),function(){const e=(e,t="submit")=>{const n="FORM"===e.tagName?e:e.querySelector("form");n&&n.addEventListener(t,(()=>{u.set("is_newsletter_subscriber",!0)}))};document.querySelectorAll([".mc4wp-form"].join(",")).forEach((t=>e(t))),document.querySelectorAll([".newspack-newsletters-subscribe",".newspack-subscribe-form"].join(",")).forEach((t=>e(t,"newspack-newsletters-subscribe-success")))}(),(newspack_reader_data?.reader_activity||[]).forEach((({action:e,data:t})=>p(e,t))),function(){const e=document.referrer?new URL(document.referrer).hostname:"";e&&e!==window.location.hostname&&u.set("referrer",e.replace("www.","").trim().toLowerCase())}(),window.newspackReaderActivation=k,window.newspackRAS=window.newspackRAS||[],window.newspackRAS.forEach((e=>S(e))),window.newspackRAS.push=S,window.newspackRASInitialized=!0}()}},n={};function o(e){var a=n[e];if(void 0!==a)return a.exports;var i=n[e]={id:e,loaded:!1,exports:{}};return t[e](i,i.exports,o),i.loaded=!0,i.exports}o.m=t,e=[],o.O=(t,n,a,i)=>{if(!n){var s=1/0;for(d=0;d<e.length;d++){for(var[n,a,i]=e[d],r=!0,c=0;c<n.length;c++)(!1&i||s>=i)&&Object.keys(o.O).every((e=>o.O[e](n[c])))?n.splice(c--,1):(r=!1,i<s&&(s=i));if(r){e.splice(d--,1);var l=a();void 0!==l&&(t=l)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,a,i]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),o.j=193,(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var a=n.length-1;a>-1&&(!e||!/^http(s?):/.test(e));)e=n[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{var e={193:0,619:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var a,i,[s,r,c]=n,l=0;if(s.some((t=>0!==e[t]))){for(a in r)o.o(r,a)&&(o.m[a]=r[a]);if(c)var d=c(o)}for(t&&t(n);l<s.length;l++)i=s[l],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(d)},n=globalThis.webpackChunknewspack=globalThis.webpackChunknewspack||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=o.O(void 0,[223],(()=>o(4053)));a=o.O(a)})();