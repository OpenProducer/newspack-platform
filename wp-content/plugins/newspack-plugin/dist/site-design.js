!function(){"use strict";var e,t={5718:function(e,t,n){n.r(t);var a=n(4942),l=(n(5674),n(9307)),i=n(5736),s=n(264),o=n(9674),r=n(3741),p=n(5609);const u=i.__,c=e=>{const[t,n]=(0,l.useState)(null),{themeSettings:a,setThemeMods:i}=e,{show_author_bio:o=!0,show_author_email:r=!1,author_bio_length:c=200,featured_image_default:d="large",post_template_default:h="default",featured_image_all_posts:g="none",post_template_all_posts:m="none",newspack_image_credits_placeholder_url:w,newspack_image_credits_class_name:f="",newspack_image_credits_prefix_label:b=""}=a;return(0,l.useEffect)((()=>{w&&n(w)}),[w]),(0,l.createElement)(l.Fragment,null,(0,l.createElement)(s.M$,{title:u("Author Bio","newspack-plugin"),description:u("Control how author bios are displayed on posts.","newspack-plugin")}),(0,l.createElement)(s.rj,{gutter:32},(0,l.createElement)(s.rj,{columns:1,gutter:16},(0,l.createElement)(p.ToggleControl,{label:u("Author Bio","newspack-plugin"),help:u("Display an author bio under individual posts.","newspack-plugin"),checked:o,onChange:e=>i({show_author_bio:e})}),o&&(0,l.createElement)(p.ToggleControl,{label:u("Author Email","newspack-plugin"),help:u("Display the author email with bio on individual posts.","newspack-plugin"),checked:r,onChange:e=>i({show_author_email:e})})),(0,l.createElement)(s.rj,{columns:1,gutter:16},o&&(0,l.createElement)(s.w4,{label:u("Length","newspack-plugin"),help:u("Truncates the author bio on single posts to this approximate character length, but without breaking a word. The full bio appears on the author archive page.","newspack-plugin"),type:"number",value:c,onChange:e=>i({author_bio_length:e})}))),(0,l.createElement)(s.M$,{title:u("Default Featured Image Position And Post Template","newspack-plugin"),description:u("Modify how the featured image and post template settings are applied to new posts.","newspack-plugin")}),(0,l.createElement)(s.rj,{gutter:32},(0,l.createElement)(p.SelectControl,{label:u("Default featured image position for new posts","newspack-plugin"),help:u("Set a default featured image position for new posts.","newspack-plugin"),value:d,options:[{label:u("Large","newspack-plugin"),value:"large"},{label:u("Small","newspack-plugin"),value:"small"},{label:u("Behind article title","newspack-plugin"),value:"behind"},{label:u("Beside article title","newspack-plugin"),value:"beside"},{label:u("Hidden","newspack-plugin"),value:"hidden"}],onChange:e=>i({featured_image_default:e})}),(0,l.createElement)(p.SelectControl,{label:u("Default template for new posts","newspack-plugin"),help:u("Set a default template for new posts.","newspack-plugin"),value:h,options:[{label:u("With sidebar","newspack-plugin"),value:"default"},{label:u("One Column","newspack-plugin"),value:"single-feature.php"},{label:u("One Column Wide","newspack-plugin"),value:"single-wide.php"}],onChange:e=>i({post_template_default:e})})),(0,l.createElement)(s.M$,{title:u("Featured Image Position And Post Template For All Posts","newspack-plugin"),description:u("Modify how the featured image and post template settings are applied to existing posts. Warning: saving these options will override all posts.","newspack-plugin")}),a.post_count>1e3&&(0,l.createElement)(p.Notice,{isDismissible:!1,status:"warning",className:"ma0 mb2"},u("You have more than 1000 posts. Applying these settings might take a moment.","newspack-plugin")),(0,l.createElement)(s.rj,{gutter:32},(0,l.createElement)("div",null,(0,l.createElement)(p.SelectControl,{label:u("Featured image position for all posts","newspack-plugin"),help:u("Set a featured image position for all posts.","newspack-plugin"),value:g,options:[{label:u("Select to change all posts","newspack-plugin"),value:"none"},{label:u("Large","newspack-plugin"),value:"large"},{label:u("Small","newspack-plugin"),value:"small"},{label:u("Behind article title","newspack-plugin"),value:"behind"},{label:u("Beside article title","newspack-plugin"),value:"beside"},{label:u("Hidden","newspack-plugin"),value:"hidden"}],onChange:e=>i({featured_image_all_posts:e})}),"none"!==g&&(0,l.createElement)(p.Notice,{isDismissible:!1,status:"warning",className:"ma0 mt2"},u("After saving the settings with this option selected, all posts will be updated. This cannot be undone.","newspack-plugin"))),(0,l.createElement)("div",null,(0,l.createElement)(p.SelectControl,{label:u("Template for all posts","newspack-plugin"),help:u("Set a template for all posts.","newspack-plugin"),value:m,options:[{label:u("Select to change all posts","newspack-plugin"),value:"none"},{label:u("With sidebar","newspack-plugin"),value:"default"},{label:u("One Column","newspack-plugin"),value:"single-feature.php"},{label:u("One Column Wide","newspack-plugin"),value:"single-wide.php"}],onChange:e=>i({post_template_all_posts:e})}),"none"!==m&&(0,l.createElement)(p.Notice,{isDismissible:!1,status:"warning",className:"ma0 mt2"},u("After saving the settings with this option selected, all posts will be updated. This cannot be undone.","newspack-plugin")))),(0,l.createElement)(s.M$,{title:u("Media Credits","newspack-plugin"),description:u("Control how credits are displayed alongside media attachments.","newspack-plugin")}),(0,l.createElement)(s.rj,{gutter:32},(0,l.createElement)(s.rj,{columns:1,gutter:16},(0,l.createElement)(s.w4,{label:u("Credit Class Name","newspack-plugin"),help:u("A CSS class name to be applied to all image credit elements. Leave blank to display no class name.","newspack-plugin"),value:f,onChange:e=>i({newspack_image_credits_class_name:e})}),(0,l.createElement)(s.w4,{label:u("Credit Label","newspack-plugin"),help:u("A label to prefix all media credits. Leave blank to display no prefix.","newspack-plugin"),value:b,onChange:e=>i({newspack_image_credits_prefix_label:e})})),(0,l.createElement)(s.rj,{columns:1,gutter:16},(0,l.createElement)(s.Ur,{image:t?{url:t}:null,label:u("Placeholder Image","newspack-plugin"),buttonLabel:u("Select","newspack-plugin"),onChange:e=>{n(e?.url||null),i({newspack_image_credits_placeholder:e?.id||null})},help:u("A placeholder image to be displayed in place of images without credits. If none is chosen, the image will be displayed normally whether or not it has a credit.","newspack-plugin")}))))};c.defaultProps={themeSettings:{},setThemeMods:()=>null};var d=(0,s.a4)(c);const h=i.__,{HashRouter:g,Redirect:m,Route:w,Switch:f}=o.Z;class b extends l.Component{constructor(){super(...arguments),(0,a.Z)(this,"componentDidMount",(()=>{const{setError:e,wizardApiFetch:t}=this.props;t({path:"/newspack/v1/wizard/newspack-setup-wizard/theme",method:"GET"}).then((e=>this.setState({themeSettings:{...e.theme_mods,...e.etc}}))).catch(e)})),(0,a.Z)(this,"setThemeMods",(e=>this.setState({themeSettings:{...this.state.themeSettings,...e}}))),(0,a.Z)(this,"updateThemeSettings",(()=>{const{setError:e,wizardApiFetch:t}=this.props,{themeSettings:n}=this.state;(n.featured_image_all_posts&&"none"!==n.featured_image_all_posts||n.post_template_all_posts&&"none"!==n.post_template_all_posts)&&!s.P6.confirmAction(h("Saving will overwrite existing posts, this cannot be undone. Are you sure you want to proceed?","newspack-plugin"))||t({path:"/newspack/v1/wizard/newspack-setup-wizard/theme/",method:"POST",data:{theme_mods:n},quiet:!0}).then((e=>{const{theme:t,theme_mods:n}=e;this.setState({theme:t,themeSettings:n})})).catch((t=>{console.log("[Theme Update Error]",t),e({error:t})}))})),(0,a.Z)(this,"state",{})}render(){const{pluginRequirements:e,wizardApiFetch:t,setError:n}=this.props,a=[{label:h("Design"),path:"/",exact:!0},{label:h("Settings"),path:"/settings",exact:!0}];return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(g,{hashType:"slash"},(0,l.createElement)(f,null,e,(0,l.createElement)(w,{path:"/",exact:!0,render:()=>(0,l.createElement)(r.Z,{headerText:h("Site Design","newspack-plugin"),subHeaderText:h("Customize the look and feel of your site","newspack-plugin"),tabbedNavigation:a,wizardApiFetch:t,setError:n,isPartOfSetup:!1})}),(0,l.createElement)(w,{path:"/settings",exact:!0,render:()=>{const{themeSettings:e}=this.state;return(0,l.createElement)(d,{headerText:h("Site Design","newspack-plugin"),subHeaderText:h("Configure your Newspack theme","newspack-plugin"),tabbedNavigation:a,themeSettings:e,setThemeMods:this.setThemeMods,buttonText:h("Save","newspack-plugin"),buttonAction:this.updateThemeSettings,secondaryButtonText:h("Advanced Settings","newspack-plugin"),secondaryButtonAction:"/wp-admin/customize.php"})}}),(0,l.createElement)(m,{to:"/"}))))}}(0,l.render)((0,l.createElement)((0,s.uF)(b)),document.getElementById("newspack-site-design-wizard"))},9196:function(e){e.exports=window.React},6292:function(e){e.exports=window.moment},6989:function(e){e.exports=window.wp.apiFetch},5609:function(e){e.exports=window.wp.components},9818:function(e){e.exports=window.wp.data},9307:function(e){e.exports=window.wp.element},2694:function(e){e.exports=window.wp.hooks},2629:function(e){e.exports=window.wp.htmlEntities},5736:function(e){e.exports=window.wp.i18n},9630:function(e){e.exports=window.wp.keycodes},444:function(e){e.exports=window.wp.primitives},6483:function(e){e.exports=window.wp.url}},n={};function a(e){var l=n[e];if(void 0!==l)return l.exports;var i=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=t,e=[],a.O=function(t,n,l,i){if(!n){var s=1/0;for(u=0;u<e.length;u++){n=e[u][0],l=e[u][1],i=e[u][2];for(var o=!0,r=0;r<n.length;r++)(!1&i||s>=i)&&Object.keys(a.O).every((function(e){return a.O[e](n[r])}))?n.splice(r--,1):(o=!1,i<s&&(s=i));if(o){e.splice(u--,1);var p=l();void 0!==p&&(t=p)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,l,i]},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},a.j=657,function(){var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e}(),function(){var e={657:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var l,i,s=n[0],o=n[1],r=n[2],p=0;if(s.some((function(t){return 0!==e[t]}))){for(l in o)a.o(o,l)&&(a.m[l]=o[l]);if(r)var u=r(a)}for(t&&t(n);p<s.length;p++)i=s[p],a.o(e,i)&&e[i]&&e[i][0](),e[s[p]]=0;return a.O(u)},n=self.webpackChunkwebpack=self.webpackChunkwebpack||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var l=a.O(void 0,[351],(function(){return a(5718)}));l=a.O(l);var i=window;for(var s in l)i[s]=l[s];l.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})}();