(()=>{var e,t={741:(e,t,n)=>{var s=n(3693);e.exports=function(e){return s(e)?e:[]}},790:e=>{"use strict";e.exports=window.ReactJSXRuntime},1455:e=>{"use strict";e.exports=window.wp.apiFetch},1609:e=>{"use strict";e.exports=window.React},2619:e=>{"use strict";e.exports=window.wp.hooks},2685:(e,t,n)=>{"use strict";n.r(t),n.d(t,{metadata:()=>i,name:()=>u,settings:()=>d,title:()=>p});var s=n(4715),a=n(7723);const i=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"newspack/content-gate-countdown-box","category":"newspack","attributes":{"alwaysShow":{"type":"boolean","default":false}},"supports":{"__experimentalOnEnter":true,"__experimentalOnMerge":true,"__experimentalSettings":true,"align":["wide","full"],"anchor":true,"ariaLabel":true,"html":false,"background":{"backgroundImage":true,"backgroundSize":true,"__experimentalDefaultControls":{"backgroundImage":true}},"color":{"gradients":true,"heading":true,"button":true,"link":true,"__experimentalDefaultControls":{"background":true,"text":true}},"shadow":true,"spacing":{"margin":true,"padding":true,"blockGap":true,"__experimentalDefaultControls":{"padding":true,"blockGap":true}},"dimensions":{"minHeight":true},"__experimentalBorder":{"color":true,"radius":true,"style":true,"width":true,"__experimentalDefaultControls":{"color":true,"radius":true,"style":true,"width":true}},"position":{"sticky":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true,"__experimentalDefaultControls":{"fontSize":true}},"layout":{"allowSizingOnChildren":true},"interactivity":{"clientNavigation":true}},"textdomain":"newspack-plugin"}');var r=n(7209),l=n(1472),o=n(1349),c=n(790);const p=(0,a.__)("Content Gate Countdown","newspack-plugin"),{name:u}=i,d={title:p,icon:{src:l.A,foreground:o.A["primary-400"]},keywords:[(0,a.__)("countdown","newspack-plugin"),(0,a.__)("content gate","newspack-plugin"),(0,a.__)("metered","newspack-plugin"),(0,a.__)("paywall","newspack-plugin"),(0,a.__)("tracking","newspack-plugin")],description:(0,a.__)("Displays how many free articles remain before the paywall, helping users track access with a real-time countdown.","newspack-plugin"),edit:r.A,save:()=>(0,c.jsx)("div",{...s.useInnerBlocksProps.save({className:"newspack-content-gate-countdown__content"})})}},3582:e=>{"use strict";e.exports=window.wp.coreData},3832:e=>{"use strict";e.exports=window.wp.url},4598:(e,t,n)=>{"use strict";n.r(t),n.d(t,{metadata:()=>i,name:()=>p,settings:()=>u,title:()=>c});var s=n(6427),a=n(7723);const i=JSON.parse('{"name":"newspack/correction-item","category":"newspack","attributes":{},"supports":{"html":false,"__experimentalBorder":{"color":true,"radius":true,"style":true,"width":true},"color":{"link":true,"__experimentalDefaultControls":{"background":true,"text":true}},"spacing":{"margin":true,"padding":true},"shadow":true,"typography":{"fontSize":true,"lineHeight":true,"textAlign":true,"__experimentalFontFamily":true,"__experimentalTextDecoration":true,"__experimentalFontStyle":true,"__experimentalFontWeight":true,"__experimentalLetterSpacing":true,"__experimentalTextTransform":true,"__experimentalWritingMode":true,"__experimentalDefaultControls":{"fontSize":true}}},"parent":["core/post-template"],"usesContext":["postId","postType"],"textdomain":"newspack-plugin"}');var r=n(6122),l=n(1349),o=n(790);const c=(0,a.__)("Correction Item","newspack-plugin"),{name:p}=i,u={title:c,icon:{src:r.A,foreground:l.A["primary-400"]},description:(0,a.__)("Display an archive of all the corrections and clarifications.","newspack-plugin"),usesContext:["postType"],edit:({context:{postType:e}})=>"newspack_correction"!==e?(0,o.jsx)(s.Placeholder,{icon:r.A,label:(0,a.__)("Corrections & Clarifications","newspack-plugin"),instructions:(0,a.__)('Please select "Corrections" as the post type in the Query Loop to use this block.',"newspack-plugin")}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"correction__item",children:[(0,o.jsx)("strong",{className:"correction__item-title",children:(0,a.__)("Correction Type, Date, and Time: ","newspack-plugin")}),(0,o.jsx)("span",{className:"correction__item-content",children:(0,a.__)("This is where the content will appear, providing details about the update, whether correcting an error or offering additional context.","newspack-plugin")})]}),(0,o.jsx)("a",{className:"correction__post-link",href:"/#",style:{pointerEvents:"none"},children:(0,a.__)("Post Title","newspack-plugin")})]})}},4715:e=>{"use strict";e.exports=window.wp.blockEditor},4871:e=>{"use strict";e.exports=window.wp.serverSideRender},5287:(e,t,n)=>{var s=n(4932),a=n(7185),i=n(9302),r=n(741),l=i(function(e){var t=s(e,r);return t.length&&t[0]===e[0]?a(t):[]});e.exports=l},5463:e=>{e.exports=function(e){return e!=e}},5573:e=>{"use strict";e.exports=window.wp.primitives},5921:(e,t,n)=>{"use strict";n.r(t),n.d(t,{metadata:()=>a,name:()=>c,settings:()=>p,title:()=>o});var s=n(7723);const a=JSON.parse('{"name":"newspack/avatar","category":"newspack","attributes":{"size":{"type":"number","default":48},"linkToAuthorArchive":{"type":"boolean","default":false}},"supports":{"html":false,"align":true,"alignWide":false,"spacing":{"margin":true,"padding":true,"__experimentalDefaultControls":{"margin":false,"padding":false}},"__experimentalBorder":{"__experimentalSkipSerialization":true,"radius":true,"width":true,"color":true,"style":true,"__experimentalDefaultControls":{"radius":true}},"color":{"text":false,"background":false},"filter":{"duotone":true},"interactivity":{"clientNavigation":true}},"selectors":{"border":"img.wp-block-newspack-avatar__image","filter":{"duotone":".newspack-avatar-wrapper img"}},"usesContext":["postId","postType"],"textdomain":"newspack-plugin"}');var i=n(6028),r=n(227),l=n(1349);const o=(0,s.__)("Avatar","newspack-plugin"),{name:c}=a,p={title:o,icon:{src:r.A,foreground:l.A["primary-400"]},keywords:[(0,s.__)("author","newspack-plugin"),(0,s.__)("user","newspack-plugin"),(0,s.__)("profile","newspack-plugin"),(0,s.__)("newspack","newspack-plugin")],description:(0,s.__)("Display post author avatar.","newspack-plugin"),usesContext:["postId","postType"],edit:i.A}},6087:e=>{"use strict";e.exports=window.wp.element},6131:(e,t,n)=>{var s=n(2523),a=n(5463),i=n(6959);e.exports=function(e,t,n){return t==t?i(e,t,n):s(e,a,n)}},6427:e=>{"use strict";e.exports=window.wp.components},6959:e=>{e.exports=function(e,t,n){for(var s=n-1,a=e.length;++s<a;)if(e[s]===t)return s;return-1}},7143:e=>{"use strict";e.exports=window.wp.data},7185:(e,t,n)=>{var s=n(8859),a=n(7706),i=n(9905),r=n(4932),l=n(7301),o=n(9219),c=Math.min;e.exports=function(e,t,n){for(var p=n?i:a,u=e[0].length,d=e.length,g=d,_=Array(d),h=1/0,m=[];g--;){var w=e[g];g&&t&&(w=r(w,l(t))),h=c(w.length,h),_[g]=!n&&(t||u>=120&&w.length>=120)?new s(g&&w):void 0}w=e[0];var k=-1,x=_[0];e:for(;++k<u&&m.length<h;){var b=w[k],f=t?t(b):b;if(b=n||0!==b?b:0,!(x?o(x,f):p(m,f,n))){for(g=d;--g;){var y=_[g];if(!(y?o(y,f):p(e[g],f,n)))continue e}x&&x.push(f),m.push(b)}}return m}},7230:(e,t,n)=>{"use strict";var s={};n.r(s),n.d(s,{metadata:()=>y,name:()=>j,settings:()=>A});var a={};n.r(a),n.d(a,{metadata:()=>B,name:()=>H,settings:()=>G,title:()=>$});var i={};n.r(i),n.d(i,{metadata:()=>U,name:()=>ce,settings:()=>pe,title:()=>oe});var r={};n.r(r),n.d(r,{metadata:()=>ue,name:()=>_e,settings:()=>he,title:()=>ge});const l=window.wp.blocks;var o=n(4715),c=n(5287),p=n.n(c),u=n(1455),d=n.n(u),g=n(7723),_=n(6087),h=n(6427),m=n(7677),w=n(8351),k=n(8130),x=n(790);const b=e=>"newspack-reader-registration-list-checkbox-"+e,f=[{label:(0,g.__)("Initial","newspack-plugin"),value:"initial"},{label:(0,g.__)("Registration Success","newspack-plugin"),value:"registration"},{label:(0,g.__)("Login Success","newspack-plugin"),value:"login"}],y=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"newspack/reader-registration","title":"Reader Registration","category":"newspack","description":"Register a reader with their email.","textdomain":"newspack-plugin","attributes":{"title":{"type":"string"},"description":{"type":"string"},"placeholder":{"type":"string","default":"Email Address"},"label":{"type":"string","default":"Sign up","required":true},"privacyLabel":{"type":"string","default":""},"newsletterSubscription":{"type":"boolean","default":true},"displayListDescription":{"type":"boolean","default":true},"hideSubscriptionInput":{"type":"boolean","default":false},"newsletterLabel":{"type":"string","default":"Subscribe to our newsletter"},"lists":{"type":"array","default":[],"items":{"type":"string"}},"listsCheckboxes":{"type":"object","default":{}},"signInLabel":{"type":"string","default":"Sign in to an existing account"},"signedInLabel":{"type":"string","default":"An account was already registered with this email. Please check your inbox for an authentication link."}},"supports":{"html":false,"align":true,"multiple":false}}');var v=n(200),C=n(1349);const{name:j}=y,A={icon:{src:v.A,foreground:C.A["primary-400"]},edit:function({setAttributes:e,attributes:{title:t,description:n,placeholder:s,label:a,privacyLabel:i,newsletterSubscription:r,displayListDescription:l,hideSubscriptionInput:c,newsletterLabel:u,signInLabel:y,signedInLabel:v,lists:C,listsCheckboxes:j}}){const A=(0,o.useBlockProps)(),[T,S]=(0,_.useState)(f[0].value);let{reader_activation_terms:N,reader_activation_url:D}=window.newspack_blocks;D&&(N=`<a href="${D}">`+N+"</a>");const z=(0,o.useInnerBlocksProps)({},{renderAppender:o.InnerBlocks.ButtonBlockAppender,template:[["core/paragraph",{align:"center",content:(0,g.__)("Success! Your account was created and you’re signed in.","newspack-plugin")}]]}),[B,I]=(0,_.useState)(!1),[O,F]=(0,_.useState)({}),P=()=>{newspack_blocks.has_newsletters&&r&&(I(!0),d()({path:"/newspack-newsletters/v1/lists_config"}).then(F).finally(()=>I(!1)))};(0,_.useEffect)(P,[]),(0,_.useEffect)(P,[r]),(0,_.useEffect)(()=>{const t=Object.keys(O);!t.length||C.length&&p()(C,t).length||e({lists:[Object.keys(O)[0]]})},[O]);const L=e=>j.hasOwnProperty(e)&&j[e],E=t=>()=>{const n={...j};n[t]=!L(t),e({listsCheckboxes:n})};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(o.InspectorControls,{children:[(0,x.jsx)(h.PanelBody,{title:(0,g.__)("Form settings","newspack-plugin"),children:(0,x.jsx)(h.TextControl,{label:(0,g.__)("Input placeholder","newspack-plugin"),value:s,disabled:B,onChange:t=>e({placeholder:t})})}),newspack_blocks.has_newsletters&&(0,x.jsxs)(h.PanelBody,{title:(0,g.__)("Newsletter Subscription","newspack-plugin"),children:[(0,x.jsx)(h.ToggleControl,{label:(0,g.__)("Enable newsletter subscription","newspack-plugin"),checked:!!r,disabled:B,onChange:()=>e({newsletterSubscription:!r})}),r&&(0,x.jsxs)(x.Fragment,{children:[B&&(0,x.jsx)(h.Spinner,{}),!B&&!Object.keys(O).length&&(0,x.jsx)("div",{style:{marginBottom:"1.5rem"},children:(0,g.__)("To enable newsletter subscription, you must configure subscription lists on Newspack Newsletters.","newspack-plugin")}),Object.keys(O).length>0&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(h.ToggleControl,{label:(0,g.__)("Display list description","newspack-plugin"),checked:l,disabled:B,onChange:()=>e({displayListDescription:!l})}),(0,x.jsx)(h.ToggleControl,{label:(0,g.__)("Hide newsletter selection and always subscribe","newspack-plugin"),checked:c,disabled:B||1!==C.length,onChange:()=>e({hideSubscriptionInput:!c})}),C.length<1&&(0,x.jsx)("div",{style:{marginBottom:"1.5rem"},children:(0,x.jsx)(h.Notice,{isDismissible:!1,status:"error",children:(0,g.__)("You must select at least one list.","newspack-plugin")})}),Object.keys(O).length>0&&(0,x.jsxs)("p",{children:[(0,g.__)("Lists","newspack-plugin"),":"]}),Object.keys(O).map(t=>(0,x.jsx)(h.ToggleControl,{label:O[t].title,checked:C.includes(t),disabled:B,onChange:()=>{C.includes(t)?e({lists:C.filter(e=>e!==t)}):e({lists:C.concat(t)})}},t))]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("a",{href:newspack_blocks.newsletters_url,children:(0,g.__)("Configure your subscription lists","newspack-plugin")}),"."]})]})]}),(0,x.jsxs)(h.PanelBody,{title:(0,g.__)("Spam protection","newspack-plugin"),children:[(0,x.jsx)("p",{children:(0,g.sprintf)(
// translators: %s is either 'enabled' or 'disabled'.
// translators: %s is either 'enabled' or 'disabled'.
(0,g.__)("reCAPTCHA is currently %s.","newspack-plugin"),newspack_blocks.has_recaptcha?(0,g.__)("enabled","newspack-plugin"):(0,g.__)("disabled","newspack-plugin"))}),!newspack_blocks.has_recaptcha&&(0,x.jsx)("p",{children:(0,g.__)("It's highly recommended that you enable reCAPTCHA protection to prevent spambots from using this form!","newspack-plugin")}),(0,x.jsx)("p",{children:(0,x.jsx)("a",{href:newspack_blocks.recaptcha_url,children:(0,g.__)("Configure your reCAPTCHA settings.","newspack-plugin")})})]})]}),(0,x.jsxs)("div",{...A,children:[(0,x.jsxs)("div",{className:"newspack-registration__state-bar",children:[(0,x.jsx)("span",{children:(0,g.__)("Edited State","newspack-plugin")}),(0,x.jsx)("div",{children:f.map(e=>(0,x.jsx)(h.Button,{"data-is-active":T===e.value,onClick:()=>S(e.value),children:e.label},e.value))})]}),"initial"===T&&(0,x.jsx)("div",{className:"newspack-registration newspack-ui",children:(0,x.jsxs)("form",{onSubmit:e=>e.preventDefault(),children:[(0,x.jsx)("div",{className:"newspack-registration__header",children:(0,x.jsx)(o.RichText,{onChange:t=>e({title:t}),placeholder:(0,g.__)("Add title","newspack-plugin"),value:t,allowedFormats:[],tagName:"h3",className:"newspack-registration__title"})}),(0,x.jsx)(o.RichText,{onChange:t=>e({description:t}),placeholder:(0,g.__)("Add description","newspack-plugin"),value:n,tagName:"p",className:"newspack-registration__description"}),(0,x.jsxs)("div",{className:"newspack-registration__form-content",children:[1===C.length&&c||!r||!C.length?null:(0,x.jsx)(x.Fragment,{children:C.map(t=>(0,x.jsxs)("label",{htmlFor:b(t),className:"newspack-ui__input-card",children:[(0,x.jsx)("input",{id:b(t),type:"checkbox",checked:L(t),onChange:E(t)}),(0,x.jsx)("strong",{children:1===C.length?(0,x.jsx)(o.RichText,{onChange:t=>e({newsletterLabel:t}),placeholder:(0,g.__)("Subscribe to our newsletter","newspack-plugin"),value:u,allowedFormats:[],tagName:"span"}):O[t]?.title}),l&&(0,x.jsx)("span",{className:"newspack-ui__helper-text",children:O[t]?.description})]},t))}),(0,x.jsxs)("div",{className:"newspack-registration__main",children:[newspack_blocks.has_google_oauth&&(0,x.jsxs)("div",{className:"newspack-ui",children:[(0,x.jsxs)("button",{className:"newspack-ui__button newspack-ui__button--wide newspack-ui__button--secondary newspack-ui__button--google-oauth",children:[(0,x.jsx)("span",{dangerouslySetInnerHTML:{__html:newspack_blocks.google_logo_svg}}),(0,g.__)("Sign in with Google","newspack-plugin")]}),(0,x.jsx)("div",{className:"newspack-ui__word-divider",children:(0,g.__)("Or","newspack-plugin")})]}),(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:"newspack-registration__inputs",children:[(0,x.jsx)("input",{type:"email",placeholder:s}),(0,x.jsx)("button",{type:"submit",className:"newspack-ui__button newspack-ui__button--primary",children:(0,x.jsx)(o.RichText,{onChange:t=>e({label:t}),placeholder:(0,g.__)("Sign up","newspack-plugin"),value:a,allowedFormats:[],tagName:"span"})})]}),(0,x.jsx)("div",{className:"newspack-registration__response"})]})]})]}),(0,x.jsx)("div",{className:"newspack-registration__have-account",children:(0,x.jsx)("a",{href:"/my-account",onClick:e=>e.preventDefault(),className:"newspack-ui__button newspack-ui__button--ghost",children:(0,x.jsx)(o.RichText,{onChange:t=>e({signInLabel:t}),placeholder:(0,g.__)("Sign in to an existing account","newspack-plugin"),value:y,allowedFormats:[],tagName:"span"})})}),(0,x.jsx)("div",{className:"newspack-registration__help-text",children:(0,x.jsx)(o.RichText,{onChange:t=>e({privacyLabel:t}),placeholder:(0,g.__)("Terms & Conditions statement…","newspack-plugin"),value:i||N,allowedFormats:["core/bold","core/italic","core/link"],tagName:"p"})})]})}),"registration"===T&&(0,x.jsx)("div",{className:"newspack-registration newspack-ui",children:(0,x.jsxs)("div",{className:"newspack-ui__box newspack-ui__box--success newspack-ui__box--text-center",children:[(0,x.jsx)("span",{className:"newspack-ui__icon newspack-ui__icon--success",children:(0,x.jsx)(m.A,{icon:w.A})}),(0,x.jsx)("div",{...z})]})}),"login"===T&&(0,x.jsx)("div",{className:"newspack-registration newspack-ui",children:(0,x.jsxs)("div",{className:"newspack-ui__box newspack-ui__box--success newspack-ui__box--text-center",children:[(0,x.jsx)("span",{className:"newspack-ui__icon newspack-ui__icon--success",children:(0,x.jsx)(m.A,{icon:k.A})}),(0,x.jsx)(o.RichText,{align:"center",onChange:t=>e({signedInLabel:t}),placeholder:(0,g.__)("Logged in message…","newspack-plugin"),value:v,allowedFormats:[],tagName:"p"})]})})]})]})},save:()=>(0,x.jsx)("div",{...o.useInnerBlocksProps.save(o.useBlockProps.save())})};var T=n(7384),S=n(4598),N=n(5921),D=n(5573),z=(0,x.jsx)(D.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,x.jsx)(D.Path,{d:"M10 4.5a1 1 0 11-2 0 1 1 0 012 0zm1.5 0a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0zm2.25 7.5v-1A2.75 2.75 0 0011 8.25H7A2.75 2.75 0 004.25 11v1h1.5v-1c0-.69.56-1.25 1.25-1.25h4c.69 0 1.25.56 1.25 1.25v1h1.5zM4 20h9v-1.5H4V20zm16-4H4v-1.5h16V16z",fillRule:"evenodd",clipRule:"evenodd"})});const B=JSON.parse('{"apiVersion":3,"name":"newspack/byline","title":"Byline","category":"newspack","description":"Display post author(s) with support for custom bylines and CoAuthors Plus.","textdomain":"newspack-plugin","usesContext":["postId","postType"],"attributes":{"prefix":{"type":"string","default":"By"},"linkToAuthorArchive":{"type":"boolean","default":true}},"supports":{"html":false,"color":{"text":true,"background":true,"link":true,"__experimentalDefaultControls":{"text":true,"link":true}},"spacing":{"margin":true,"padding":true,"__experimentalDefaultControls":{"margin":false,"padding":false}},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true,"__experimentalDefaultControls":{"fontSize":true,"fontAppearance":true}},"__experimentalBorder":{"radius":true,"width":true,"color":true,"style":true,"__experimentalDefaultControls":{"radius":false,"width":false,"color":false,"style":false}},"interactivity":{"clientNavigation":true}}}');var I=n(5556),O=n.n(I);function F(e){if(!e)return"";const t=document.createElement("textarea");return t.innerHTML=e,t.value}function P(e,t,n){const s=e.display_name||e.name;return(0,_.createElement)("span",{key:`author-wrapper-${e.id||t}`,className:"author vcard"},n?(0,_.createElement)("a",{href:"#author-link",onClick:e=>e.preventDefault(),className:"url fn n"},s):(0,_.createElement)("span",{className:"fn n"},s))}function L(e,t){if(!e||0===e.length)return[];if(1===e.length)return[P(e[0],0,t)];const n=[];return e.forEach((s,a)=>{n.push(P(s,a,t)),a<e.length-2?n.push(", "):a===e.length-2&&n.push((0,g._x)(" and ","post author separator","newspack-plugin"))}),n}var E=n(7143),R=n(3582);function M({attributes:e,setAttributes:t,isCustomByline:n}){return(0,x.jsx)(o.InspectorControls,{children:(0,x.jsxs)(h.PanelBody,{title:(0,g.__)("Settings","newspack-plugin"),children:[!n&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(h.TextControl,{__nextHasNoMarginBottom:!0,label:(0,g.__)("Prefix","newspack-plugin"),help:(0,g.__)("Text displayed before the author name(s).","newspack-plugin"),value:e.prefix,onChange:e=>t({prefix:e})}),(0,x.jsx)(h.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,g.__)("Link to author archive","newspack-plugin"),checked:e.linkToAuthorArchive,onChange:()=>t({linkToAuthorArchive:!e.linkToAuthorArchive})})]}),n&&(0,x.jsx)("p",{className:"components-base-control__help",children:(0,g.__)("Prefix and link settings are controlled by the custom byline and cannot be changed here.","newspack-plugin")})]})})}function V({attributes:e,context:t,setAttributes:n}){const{postId:s,postType:a="post"}=t,i=(0,o.useBlockProps)(),{bylineActive:r,bylineContent:l}=function(e,t){const{bylineActive:n,bylineContent:s}=(0,E.useSelect)(n=>{const{getEditedEntityRecord:s}=n(R.store),a=s("postType",t,e);return{bylineActive:a?.meta?._newspack_byline_active||!1,bylineContent:a?.meta?._newspack_byline||""}},[e,t]);return{bylineActive:n,bylineContent:s}}(s,a),{authors:c,isCapAvailable:p}=function(e,t="post"){const{authors:n,isCapAvailable:s}=(0,E.useSelect)(n=>{const s=n("cap/authors"),a=Boolean(s&&"function"==typeof s.getAuthors),i=n("core/editor"),r=i?.getCurrentPostId?.(),l=e&&r&&e!==r;if(a&&!l){const t=e?s.getAuthors(e):[];return t&&t.length>0?{authors:t.map(e=>({id:e.id,display_name:e.display||e.value||e.label,user_nicename:e.value})),isCapAvailable:!0}:{authors:[],isCapAvailable:!0}}if(l&&e){const{getEntityRecord:s}=n(R.store),a=s("postType",t,e),i=a?.newspack_author_info;if(i&&Array.isArray(i)&&i.length>0)return{authors:i.map(e=>({id:e.id,display_name:e.display_name,author_link:e.author_link})),isCapAvailable:!0}}return{authors:[],isCapAvailable:a}},[e,t]);return{authors:n,isCapAvailable:s}}(s,a),{authorDetails:u,isLoading:d}=function(e,t){const{authorDetails:n,isLoading:s}=(0,E.useSelect)(n=>{const{getEditedEntityRecord:s,getUser:a,hasFinishedResolution:i}=n(R.store),r=s("postType",t,e)?.author;return r?{authorDetails:a(r),isLoading:!i("getUser",[r])}:{authorDetails:null,isLoading:!1}},[t,e]);return{authorDetails:n,isLoading:s}}(s,a),m=r&&l,w=p&&c?.length>0;if(!m&&!w&&d)return(0,x.jsx)("div",{...i,children:(0,x.jsx)(h.Spinner,{})});if(m){const t=function(e){if(!e)return[];const t=[];let n=0;const s=/\[Author id=(\d+)\](.*?)\[\/Author\]/g;let a;for(;null!==(a=s.exec(e));){if(a.index>n){const s=e.slice(n,a.index);t.push(F(s))}const s=a[1],i=a[2];t.push((0,_.createElement)("a",{key:`author-${s}-${a.index}`,href:"#author-link",onClick:e=>e.preventDefault(),className:"url fn n"},F(i))),n=a.index+a[0].length}if(n<e.length){const s=e.slice(n);t.push(F(s))}return t}(l);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(M,{attributes:e,setAttributes:n,isCustomByline:!0}),(0,x.jsx)("div",{...i,children:(0,x.jsx)("span",{className:"byline",children:t})})]})}if(w)return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(M,{attributes:e,setAttributes:n,isCustomByline:!1}),(0,x.jsx)("div",{...i,children:(0,x.jsxs)("span",{className:"byline",children:[e.prefix?.trim()&&`${e.prefix.trim()} `,L(c,e.linkToAuthorArchive)]})})]});const k=u?.name||(0,g.__)("[Author]","newspack-plugin");return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(M,{attributes:e,setAttributes:n,isCustomByline:!1}),(0,x.jsx)("div",{...i,children:(0,x.jsxs)("span",{className:"byline",children:[e.prefix?.trim()&&`${e.prefix.trim()} `,(0,x.jsx)("span",{className:"author vcard",children:e.linkToAuthorArchive?(0,x.jsx)("a",{href:"#author-link",onClick:e=>e.preventDefault(),className:"url fn n",children:k}):(0,x.jsx)("span",{className:"fn n",children:k})})]})})]})}M.propTypes={attributes:O().shape({prefix:O().string,linkToAuthorArchive:O().bool}).isRequired,setAttributes:O().func.isRequired,isCustomByline:O().bool.isRequired},V.propTypes={attributes:O().shape({prefix:O().string,linkToAuthorArchive:O().bool}).isRequired,context:O().shape({postId:O().number,postType:O().string}).isRequired,setAttributes:O().func.isRequired};const $=(0,g.__)("Byline","newspack-plugin"),{name:H}=B,G={title:$,icon:{src:z,foreground:C.A["primary-400"]},keywords:[(0,g.__)("author","newspack-plugin"),(0,g.__)("byline","newspack-plugin"),(0,g.__)("writer","newspack-plugin"),(0,g.__)("newspack","newspack-plugin")],description:(0,g.__)("Display post author(s) with support for custom bylines and CoAuthors Plus.","newspack-plugin"),usesContext:["postId","postType"],edit:V},U=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"newspack/collections","version":"1.0.0","title":"Collections","category":"newspack","description":"An advanced block that allows displaying collections based on different parameters and visual configurations.","keywords":["collections","issues","publications","magazines","groups"],"supports":{"html":false,"align":["wide","full"],"spacing":{"margin":true,"padding":true}},"attributes":{"queryType":{"type":"string","default":"recent"},"numberOfItems":{"type":"number","default":4},"offset":{"type":"number","default":0},"selectedCollections":{"type":"array","default":[]},"includeCategories":{"type":"array","default":[]},"excludeCategories":{"type":"array","default":[]},"layout":{"type":"string","default":"grid"},"columns":{"type":"number","default":4},"imageAlignment":{"type":"string","default":"left"},"imageSize":{"type":"string","default":"small"},"showFeaturedImage":{"type":"boolean","default":true},"showTitle":{"type":"boolean","default":true},"showCategory":{"type":"boolean","default":true},"showExcerpt":{"type":"boolean","default":false},"showPeriod":{"type":"boolean","default":true},"showVolume":{"type":"boolean","default":true},"showNumber":{"type":"boolean","default":true},"showCTAs":{"type":"boolean","default":true},"numberOfCTAs":{"type":"number","default":1},"showSubscriptionUrl":{"type":"boolean","default":true},"showOrderUrl":{"type":"boolean","default":true},"specificCTAs":{"type":"string","default":""}},"example":{"attributes":{"queryType":"recent","numberOfItems":4,"layout":"grid","columns":4,"showFeaturedImage":true,"showTitle":true,"showPeriod":true,"showVolume":true,"showNumber":true,"showCTAs":true,"numberOfCTAs":1}},"textdomain":"newspack-plugin","editorScript":"file:./index.js"}');var q=(0,x.jsx)(D.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,x.jsx)(D.Path,{d:"M4 4v1.5h16V4H4zm8 8.5h8V11h-8v1.5zM4 20h16v-1.5H4V20zm4-8c0-1.1-.9-2-2-2s-2 .9-2 2 .9 2 2 2 2-.9 2-2z"})}),J=(0,x.jsx)(D.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,x.jsx)(D.Path,{d:"m3 5c0-1.10457.89543-2 2-2h13.5c1.1046 0 2 .89543 2 2v13.5c0 1.1046-.8954 2-2 2h-13.5c-1.10457 0-2-.8954-2-2zm2-.5h6v6.5h-6.5v-6c0-.27614.22386-.5.5-.5zm-.5 8v6c0 .2761.22386.5.5.5h6v-6.5zm8 0v6.5h6c.2761 0 .5-.2239.5-.5v-6zm0-8v6.5h6.5v-6c0-.27614-.2239-.5-.5-.5z",fillRule:"evenodd",clipRule:"evenodd"})}),W=(0,x.jsx)(D.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,x.jsx)(D.Path,{d:"M19 3H5c-.6 0-1 .4-1 1v7c0 .5.4 1 1 1h14c.5 0 1-.4 1-1V4c0-.6-.4-1-1-1zM5.5 10.5v-.4l1.8-1.3 1.3.8c.3.2.7.2.9-.1L11 8.1l2.4 2.4H5.5zm13 0h-2.9l-4-4c-.3-.3-.8-.3-1.1 0L8.9 8l-1.2-.8c-.3-.2-.6-.2-.9 0l-1.3 1V4.5h13v6zM4 20h9v-1.5H4V20zm0-4h16v-1.5H4V16z"})}),Q=(0,x.jsx)(D.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,x.jsx)(D.Path,{d:"M4 18h6V6H4v12zm9-9.5V10h7V8.5h-7zm0 7h7V14h-7v1.5z"})}),Y=(0,x.jsx)(D.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,x.jsx)(D.Path,{d:"M14 6v12h6V6h-6zM4 10h7V8.5H4V10zm0 5.5h7V14H4v1.5z"})}),X=n(2578),K=n(6942),Z=n.n(K),ee=n(8537);const te=({collection:e,attributes:t})=>{const{showFeaturedImage:n,showCategory:s,showTitle:a,showExcerpt:i,showPeriod:r,showVolume:l,showNumber:o,showCTAs:c,numberOfCTAs:p,showSubscriptionUrl:u,showOrderUrl:d,specificCTAs:h,layout:m}=t,w=(0,_.useCallback)(e=>{e.preventDefault()},[]),k=(0,_.useMemo)(()=>(0,ee.decodeEntities)(e?.title?.rendered||""),[e?.title?.rendered]),b=(0,_.useMemo)(()=>e?._embedded?.["wp:featuredmedia"]?.[0],[e?._embedded]),f=(0,_.useMemo)(()=>e?._embedded?.["wp:term"]?.find(e=>"newspack_collection_category"===e?.[0]?.taxonomy)||[],[e?._embedded]),y=e.meta||{},v=y.newspack_collection_volume,C=y.newspack_collection_number,j=y.newspack_collection_period,A=(0,_.useMemo)(()=>{let t=(e.ctas||[]).filter(e=>!(e.label===(0,g.__)("Subscribe","newspack-plugin")&&!u||e.label===(0,g.__)("Order","newspack-plugin")&&!d));if(h&&h.trim()){const e=new Set(h.split(",").map(e=>e.trim().toLowerCase()));t=t.filter(t=>e.has(String(t.label).toLowerCase()))}return t.slice(0,p||1)},[e.ctas,u,d,h,p]),T=(0,_.useMemo)(()=>{const e=[];if(r&&j&&e.push((0,x.jsx)("span",{className:"wp-block-newspack-collections__period",children:j},"period")),r&&j&&(l&&v||o&&C)){const t="list"===m?(0,x.jsx)("span",{className:"wp-block-newspack-collections__divider",children:" / "},"period-sep"):(0,x.jsx)("br",{},"period-sep");e.push(t)}return l&&v&&e.push((0,x.jsx)("span",{className:"wp-block-newspack-collections__volume",children:`Vol. ${v}`},"volume")),l&&v&&o&&C&&e.push((0,x.jsx)("span",{className:"wp-block-newspack-collections__divider",children:" / "},"vol-num-sep")),o&&C&&e.push((0,x.jsx)("span",{className:"wp-block-newspack-collections__number",children:`No. ${C}`},"number")),e},[r,j,l,v,o,C,m]);return(0,x.jsxs)("article",{className:"wp-block-newspack-collections__item",children:[n&&(0,x.jsx)("div",{className:"wp-block-newspack-collections__image",children:b?(0,x.jsx)("a",{href:"#",onClick:w,children:(0,x.jsx)("img",{src:b?.media_details?.sizes?.full?.source_url,alt:b.alt_text||k,loading:"lazy"})}):(0,x.jsx)("div",{className:"wp-block-newspack-collections__placeholder","aria-hidden":"true"})}),(0,x.jsxs)("div",{className:"wp-block-newspack-collections__content",children:[s&&f.length>0&&(0,x.jsx)("div",{className:"wp-block-newspack-collections__categories",children:f.map(e=>(0,x.jsx)("a",{href:"#",onClick:w,className:"wp-block-newspack-collections__category",children:(0,ee.decodeEntities)(e.name)},e.id))}),a&&(0,x.jsx)("h3",{className:"wp-block-newspack-collections__title has-normal-font-size",children:(0,x.jsx)("a",{href:"#",onClick:w,children:k})}),T.length>0&&(0,x.jsx)("div",{className:"wp-block-newspack-collections__meta has-medium-gray-color has-text-color has-small-font-size",children:T}),i&&(e.excerpt?.rendered||e.content?.rendered)&&(0,x.jsx)("div",{className:"wp-block-newspack-collections__excerpt",children:(0,x.jsx)(_.RawHTML,{children:e.excerpt?.rendered||e.content?.rendered})}),c&&A.length>0&&(0,x.jsx)("div",{className:"wp-block-newspack-collections__ctas",children:A.map((e,t)=>(0,x.jsx)("a",{href:"#",onClick:w,className:"wp-block-button__link has-dark-gray-color has-light-gray-background-color has-text-color has-background has-link-color wp-element-button",children:e.label},`${e.label}-${t}`))})]})]})};var ne=n(1311),se=n(3832);const ae="/wp/v2/newspack_collection_category",ie="/wp/v2/newspack_collection",re=({attributes:e,setAttributes:t})=>{const{queryType:n,numberOfItems:s,offset:a,selectedCollections:i,includeCategories:r,excludeCategories:l,layout:c,columns:p,imageAlignment:u,imageSize:m,showFeaturedImage:w,showCategory:k,showTitle:b,showExcerpt:f,showVolume:y,showNumber:v,showPeriod:C,showSubscriptionUrl:j,showOrderUrl:A,showCTAs:T,numberOfCTAs:S,specificCTAs:N}=e,D=(0,_.useCallback)(e=>(e=>d()({path:(0,se.addQueryArgs)(ae,{search:e,per_page:20,_fields:"id,name,parent",orderby:"count",order:"desc"})}).then(e=>Promise.all(e.map(e=>e.parent>0?d()({path:(0,se.addQueryArgs)(`${ae}/${e.parent}`,{_fields:"name"})}).then(t=>({value:e.id,label:`${(0,ee.decodeEntities)(e.name)} – ${(0,ee.decodeEntities)(t.name)}`})):Promise.resolve({value:e.id,label:(0,ee.decodeEntities)(e.name)})))))(e),[]),z=(0,_.useCallback)(e=>(e=>e.length?d()({path:(0,se.addQueryArgs)(ae,{per_page:100,_fields:"id,name",include:e.join(",")})}).then(function(t){const n=t.map(e=>({value:e.id,label:(0,ee.decodeEntities)(e.name)}));return e.forEach(e=>{n.find(t=>t.value===parseInt(e))||n.push({value:parseInt(e),label:`(Deleted category - ID: ${e})`})}),n}):Promise.resolve([]))(e),[]),B=(0,_.useCallback)(e=>(e=>d()({path:(0,se.addQueryArgs)(ie,{search:e,per_page:20,_fields:"id,title",orderby:"title",order:"asc",status:"publish"})}).then(e=>e.map(e=>({value:e.id,label:(0,ee.decodeEntities)(e.title.rendered)}))))(e),[]),I=(0,_.useCallback)(e=>(e=>e.length?d()({path:(0,se.addQueryArgs)(ie,{per_page:100,_fields:"id,title",include:e.join(","),status:"publish"})}).then(t=>{const n=t.map(e=>({value:e.id,label:(0,ee.decodeEntities)(e.title.rendered)}));return e.forEach(e=>{n.find(t=>t.value===parseInt(e))||n.push({value:parseInt(e),label:`(Deleted collection - ID: ${e})`})}),n}):Promise.resolve([]))(e),[]);return(0,x.jsxs)(o.InspectorControls,{children:[(0,x.jsxs)(h.PanelBody,{title:(0,g.__)("Settings","newspack-plugin"),children:[(0,x.jsxs)(h.__experimentalToggleGroupControl,{label:(0,g.__)("Mode","newspack-plugin"),value:n,onChange:e=>t({queryType:e}),isBlock:!0,help:"recent"===n?(0,g.__)("The block will display the most recent collection(s).","newspack-plugin"):(0,g.__)("The block will display only the specifically selected collection(s).","newspack-plugin"),__next40pxDefaultSize:!0,children:[(0,x.jsx)(h.__experimentalToggleGroupControlOption,{label:(0,g.__)("Recent","newspack-plugin"),value:"recent"}),(0,x.jsx)(h.__experimentalToggleGroupControlOption,{label:(0,g.__)("Static","newspack-plugin"),value:"specific"})]}),"specific"===n&&(0,x.jsx)(ne.wg,{tokens:i||[],onChange:e=>t({selectedCollections:e}),fetchSuggestions:B,fetchSavedInfo:I,label:(0,g.__)("Collections","newspack-plugin"),help:(0,g.__)("Begin typing any word in a collection title. Click on an autocomplete result to select it.","newspack-plugin"),__next40pxDefaultSize:!0}),"recent"===n&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(h.RangeControl,{label:(0,g.__)("Number of collections","newspack-plugin"),value:s,onChange:e=>t({numberOfItems:e}),min:1,max:24,__next40pxDefaultSize:!0}),(0,x.jsx)(h.RangeControl,{label:(0,g.__)("Offset","newspack-plugin"),value:a,onChange:e=>t({offset:e}),min:0,max:50,help:(0,g.__)("Number of collections to skip from the beginning","newspack-plugin"),__next40pxDefaultSize:!0}),(0,x.jsx)(ne.wg,{tokens:r,onChange:e=>t({includeCategories:e}),fetchSuggestions:D,fetchSavedInfo:z,label:(0,g.__)("Included categories","newspack-plugin"),style:{marginBottom:"16px"},__next40pxDefaultSize:!0}),(0,x.jsx)(ne.wg,{tokens:l,onChange:e=>t({excludeCategories:e}),fetchSuggestions:D,fetchSavedInfo:z,label:(0,g.__)("Excluded categories","newspack-plugin"),style:{marginBottom:"16px"},__next40pxDefaultSize:!0})]})]}),"grid"===c&&(0,x.jsx)(h.PanelBody,{title:(0,g.__)("Grid","newspack-plugin"),children:(0,x.jsx)(h.RangeControl,{label:(0,g.__)("Columns","newspack-plugin"),value:p,onChange:e=>t({columns:e}),min:1,max:6,__next40pxDefaultSize:!0})}),(0,x.jsxs)(h.PanelBody,{title:(0,g.__)("Featured Image","newspack-plugin"),children:[(0,x.jsx)(h.ToggleControl,{label:(0,g.__)("Show featured image","newspack-plugin"),checked:w,onChange:e=>t({showFeaturedImage:e})}),"list"===c&&w&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(h.__experimentalToggleGroupControl,{label:(0,g.__)("Alignment","newspack-plugin"),value:u,onChange:e=>t({imageAlignment:e}),isBlock:!0,__next40pxDefaultSize:!0,children:[(0,x.jsx)(h.__experimentalToggleGroupControlOption,{label:(0,g.__)("Top","newspack-plugin"),value:"top",title:(0,g.__)("Show image on top","newspack-plugin")}),(0,x.jsx)(h.__experimentalToggleGroupControlOption,{label:(0,g.__)("Left","newspack-plugin"),value:"left",title:(0,g.__)("Show image on left","newspack-plugin")}),(0,x.jsx)(h.__experimentalToggleGroupControlOption,{label:(0,g.__)("Right","newspack-plugin"),value:"right",title:(0,g.__)("Show image on right","newspack-plugin")})]}),(0,x.jsxs)(h.__experimentalToggleGroupControl,{label:(0,g.__)("Size","newspack-plugin"),value:m,onChange:e=>t({imageSize:e}),isBlock:!0,__next40pxDefaultSize:!0,children:[(0,x.jsx)(h.__experimentalToggleGroupControlOption,{label:(0,g.__)("S","newspack-plugin"),value:"small",title:(0,g.__)("Small","newspack-plugin")}),(0,x.jsx)(h.__experimentalToggleGroupControlOption,{label:(0,g.__)("M","newspack-plugin"),value:"medium",title:(0,g.__)("Medium","newspack-plugin")}),(0,x.jsx)(h.__experimentalToggleGroupControlOption,{label:(0,g.__)("L","newspack-plugin"),value:"large",title:(0,g.__)("Large","newspack-plugin")})]})]})]}),(0,x.jsxs)(h.PanelBody,{title:(0,g.__)("Collection Meta","newspack-plugin"),children:[(0,x.jsx)(h.ToggleControl,{label:(0,g.__)("Show title","newspack-plugin"),checked:b,onChange:e=>t({showTitle:e})}),(0,x.jsx)(h.ToggleControl,{label:(0,g.__)("Show category","newspack-plugin"),checked:k,onChange:e=>t({showCategory:e})}),(0,x.jsx)(h.ToggleControl,{label:(0,g.__)("Show excerpt","newspack-plugin"),checked:f,onChange:e=>t({showExcerpt:e})}),(0,x.jsx)(h.ToggleControl,{label:(0,g.__)("Show period","newspack-plugin"),checked:C,onChange:e=>t({showPeriod:e})}),(0,x.jsx)(h.ToggleControl,{label:(0,g.__)("Show volume","newspack-plugin"),checked:y,onChange:e=>t({showVolume:e})}),(0,x.jsx)(h.ToggleControl,{label:(0,g.__)("Show number","newspack-plugin"),checked:v,onChange:e=>t({showNumber:e})}),(0,x.jsx)(h.ToggleControl,{label:(0,g.__)("Show CTAs","newspack-plugin"),checked:T,onChange:e=>t({showCTAs:e})}),T&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(h.RangeControl,{label:(0,g.__)("Number of CTAs","newspack-plugin"),value:S,onChange:e=>t({numberOfCTAs:e}),min:1,max:5,help:(0,g.__)("Maximum number of CTAs to display","newspack-plugin"),__next40pxDefaultSize:!0}),(0,x.jsx)(h.ToggleControl,{label:(0,g.__)("Show subscription URL","newspack-plugin"),checked:j,onChange:e=>t({showSubscriptionUrl:e})}),(0,x.jsx)(h.ToggleControl,{label:(0,g.__)("Show order URL","newspack-plugin"),checked:A,onChange:e=>t({showOrderUrl:e})}),(0,x.jsx)(h.BaseControl,{id:"specific-ctas-control",label:(0,g.__)("Specific CTAs (comma-separated)","newspack-plugin"),help:(0,g.__)('Enter specific CTA to show, e.g. "Digital Edition" (should match existing CTA label). Leave empty to show first available CTAs.',"newspack-plugin"),children:(0,x.jsx)("input",{type:"text",value:N,onChange:e=>t({specificCTAs:e.target.value}),placeholder:(0,g.__)("","newspack-plugin"),className:"components-text-control__input",style:{height:"40px"}})})]})]})]})};var le=n(5974);const oe=(0,g.__)("Collections","newspack-plugin"),{name:ce}=U,pe={title:oe,icon:{src:le.A,foreground:C.A["primary-400"]},keywords:[(0,g.__)("collections","newspack-plugin"),(0,g.__)("issues","newspack-plugin"),(0,g.__)("magazine","newspack-plugin"),(0,g.__)("publications","newspack-plugin"),(0,g.__)("content","newspack-plugin"),(0,g.__)("loop","newspack-plugin"),(0,g.__)("query","newspack-plugin"),(0,g.__)("latest","newspack-plugin"),(0,g.__)("newspack","newspack-plugin")],description:(0,g.__)("An advanced block that allows displaying collections based on different parameters and visual configurations.","newspack-plugin"),edit:({attributes:e,setAttributes:t})=>{const{layout:n,columns:s,imageAlignment:a,imageSize:i,showFeaturedImage:r}=e,{collections:l,isLoading:c,hasCollections:p}=(e=>{const{queryType:t,numberOfItems:n,offset:s=0,selectedCollections:a=[],includeCategories:i=[],excludeCategories:r=[]}=e,l="specific"===t,o=Number(n),c=Number.isFinite(o)&&o>0,p=l&&0===a.length||!c,u=(0,_.useMemo)(()=>{if(p)return null;const e={per_page:o,orderby:"date",order:"desc",_embed:!0,status:"publish"};return!l&&s>0&&(e.offset=s),l?e.include=a:(i.length&&(e.newspack_collection_category=i),r.length&&(e.newspack_collection_category_exclude=r)),e},[p,l,o,s,a,i,r]);return(0,E.useSelect)(e=>{if(!u)return{collections:[],isLoading:!1,hasCollections:!1};const{getEntityRecords:t,isResolving:n}=e("core"),s=t("postType","newspack_collection",u);return{collections:s||[],isLoading:n("getEntityRecords",["postType","newspack_collection",u]),hasCollections:Array.isArray(s)&&s.length>0}},[u])})(e),u=(0,_.useMemo)(()=>[{icon:q,title:(0,g.__)("List view","newspack-plugin"),onClick:()=>t({layout:"list"}),isActive:"list"===n},{icon:J,title:(0,g.__)("Grid view","newspack-plugin"),onClick:()=>t({layout:"grid"}),isActive:"grid"===n}],[n,t]),d=(0,_.useMemo)(()=>[{icon:W,title:(0,g.__)("Show image on top","newspack-plugin"),isActive:"top"===a,onClick:()=>t({imageAlignment:"top"})},{icon:Q,title:(0,g.__)("Show image on left","newspack-plugin"),isActive:"left"===a,onClick:()=>t({imageAlignment:"left"})},{icon:Y,title:(0,g.__)("Show image on right","newspack-plugin"),isActive:"right"===a,onClick:()=>t({imageAlignment:"right"})}],[a,t]),m=(0,_.useMemo)(()=>Z()("wp-block-newspack-collections",`layout-${n}`,"grid"===n&&`columns-${s}`,`image-${a}`,"list"===n&&`image-size-${i}`),[n,s,a,i]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(o.BlockControls,{children:[(0,x.jsx)(h.ToolbarGroup,{children:u.map(e=>(0,x.jsx)(h.ToolbarButton,{icon:e.icon,isPressed:e.isActive,onClick:e.onClick,label:e.title},e.title))}),"list"===n&&r&&(0,x.jsx)(h.ToolbarGroup,{children:d.map(e=>(0,x.jsx)(h.ToolbarButton,{icon:e.icon,isPressed:e.isActive,onClick:e.onClick,label:e.title},e.title))})]}),(0,x.jsx)(re,{attributes:e,setAttributes:t}),(0,x.jsxs)("div",{...(0,o.useBlockProps)({className:m}),children:[c&&(0,x.jsx)(h.Placeholder,{icon:(0,x.jsx)(h.Spinner,{style:{height:"24px",padding:"4px",width:"24px"}}),label:(0,g.__)("Loading collections…","newspack-plugin"),className:"collections-loading"}),!c&&!p&&(0,x.jsx)(h.Placeholder,{icon:X.A,label:(0,g.__)("No collections found","newspack-plugin"),className:"no-collections"}),!c&&p&&(0,x.jsx)(x.Fragment,{children:l.map(t=>(0,x.jsx)(te,{collection:t,attributes:e},t.id))})]})]})},save:()=>null},ue=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"newspack/content-gate-countdown","category":"newspack","attributes":{},"supports":{"html":false,"color":{"link":true,"__experimentalDefaultControls":{"background":true,"text":true}},"typography":{"fontSize":true,"lineHeight":true,"textAlign":true,"__experimentalFontFamily":true,"__experimentalTextDecoration":true,"__experimentalFontStyle":true,"__experimentalFontWeight":true,"__experimentalLetterSpacing":true,"__experimentalTextTransform":true,"__experimentalWritingMode":true,"__experimentalDefaultControls":{"fontSize":true}}},"parent":["newspack/content-gate-countdown-box"],"textdomain":"newspack-plugin"}');var de=n(1472);const ge=(0,g.__)("Article Counter","newspack-plugin"),{name:_e}=ue,he={title:ge,icon:{src:de.A,foreground:C.A["primary-400"]},keywords:[(0,g.__)("countdown","newspack-plugin"),(0,g.__)("content gate","newspack-plugin"),(0,g.__)("metered","newspack-plugin"),(0,g.__)("paywall","newspack-plugin"),(0,g.__)("tracking","newspack-plugin")],description:(0,g.__)("Displays the current free article count.","newspack-plugin"),edit:function(){const e=(0,o.useBlockProps)({className:"newspack-content-gate-countdown__wrapper"}),{loggedin_metered_views:t,anonymous_metered_views:n,metered_views:s}=newspack_blocks.content_gate_data||{},a=t>0?t:n;return(0,x.jsx)("div",{...e,children:(0,x.jsx)("span",{className:"newspack-content-gate-countdown",children:(0,g.sprintf)(/* translators: 1: current number of metered views, 2: total metered views. */ /* translators: 1: current number of metered views, 2: total metered views. */(0,g.__)("%1$d/%2$d","newspack-plugin"),parseInt(s),parseInt(a))})})},save:()=>null};var me=n(2685),we=n(2619);const ke=window.wp.compose,xe=window.location.href;(0,we.addFilter)("blocks.registerBlockType","newspack-plugin/register-hook/core-image",(e,t)=>"core/image"!==t?e:{...e,attributes:{...e.attributes,meta:{type:"object",default:{}}}});const be=({setAttributes:e,attributes:t})=>{var n;const s=t.id,{meta:a}=null!==(n=(0,E.useSelect)(e=>e("core").getMedia(s),[s]))&&void 0!==n?n:{meta:{}};return(0,_.useEffect)(()=>{if(Object.keys(a).length){const{_media_credit:n,_media_credit_url:s,_navis_media_credit_org:i}=a;n===t?.meta?._media_credit&&s===t?.meta?._media_credit_url&&i===t?.meta?._navis_media_credit_org||e({meta:{_media_credit:n,_media_credit_url:s,_navis_media_credit_org:i}})}},[a]),(0,x.jsx)(x.Fragment,{})},fe=(e,t=xe)=>new URL(e).hostname===new URL(t).hostname;(0,we.addFilter)("editor.BlockEdit","newspack-plugin/block-edit-hook/core-image",(0,ke.createHigherOrderComponent)(e=>t=>"core/image"===t.name?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(e,{...t}),t.attributes.url&&fe(t.attributes.url)&&(0,x.jsx)(be,{...t})]}):(0,x.jsx)(e,{...t}),"withCustomMetaData"));const ye=[s,T,S,N,a,i,r,me],ve=["newspack/reader-registration"],Ce=["newspack/correction-box","newspack/correction-item"],je=["newspack/collections"],Ae=["newspack/content-gate-countdown","newspack/content-gate-countdown-box"],Te=["newspack/avatar","newspack/byline"],Se=e=>{if(!e)return;const{metadata:t,settings:n,name:s}=e;ve.includes(s)&&!newspack_blocks.has_reader_activation||Ce.includes(s)&&!newspack_blocks.corrections_enabled||je.includes(s)&&!newspack_blocks.collections_enabled||(!Ae.includes(s)||newspack_blocks.has_memberships&&newspack_blocks.is_content_gate_countdown_active)&&(Te.includes(s)&&!newspack_blocks.is_block_theme||(0,l.registerBlockType)({name:s,...t},n))};for(const e of ye)Se(e)},7384:(e,t,n)=>{"use strict";n.r(t),n.d(t,{metadata:()=>a,name:()=>c,settings:()=>p,title:()=>o});var s=n(7723),a=n(9782),i=n(1702),r=n(6122),l=n(1349);const o=(0,s.__)("Corrections","newspack-plugin"),{name:c}=a,p={title:o,icon:{src:r.A,foreground:l.A["primary-400"]},keywords:[(0,s.__)("clarifications","newspack-plugin"),(0,s.__)("updates","newspack-plugin")],description:(0,s.__)("Display all corrections and clarifications made to a post.","newspack-plugin"),usesContext:["postId"],edit:i.A}},7706:(e,t,n)=>{var s=n(6131);e.exports=function(e,t){return!(null==e||!e.length)&&s(e,t,0)>-1}},7723:e=>{"use strict";e.exports=window.wp.i18n},8537:e=>{"use strict";e.exports=window.wp.htmlEntities},8558:e=>{"use strict";e.exports=window.wp.keycodes},9782:e=>{"use strict";e.exports=JSON.parse('{"name":"newspack/correction-box","category":"newspack","attributes":{"priority":{"type":"string","default":"all","enum":["high","low","all"]}},"supports":{"html":false,"__experimentalBorder":{"color":true,"radius":true,"style":true,"width":true},"color":{"link":true,"__experimentalDefaultControls":{"background":true,"text":true}},"spacing":{"margin":true,"padding":true},"shadow":true,"typography":{"fontSize":true,"lineHeight":true,"textAlign":true,"__experimentalFontFamily":true,"__experimentalTextDecoration":true,"__experimentalFontStyle":true,"__experimentalFontWeight":true,"__experimentalLetterSpacing":true,"__experimentalTextTransform":true,"__experimentalWritingMode":true,"__experimentalDefaultControls":{"fontSize":true}}},"usesContext":["postId"],"textdomain":"newspack-plugin"}')},9905:e=>{e.exports=function(e,t,n){for(var s=-1,a=null==e?0:e.length;++s<a;)if(n(t,e[s]))return!0;return!1}}},n={};function s(e){var a=n[e];if(void 0!==a)return a.exports;var i=n[e]={id:e,loaded:!1,exports:{}};return t[e](i,i.exports,s),i.loaded=!0,i.exports}s.m=t,e=[],s.O=(t,n,a,i)=>{if(!n){var r=1/0;for(p=0;p<e.length;p++){for(var[n,a,i]=e[p],l=!0,o=0;o<n.length;o++)(!1&i||r>=i)&&Object.keys(s.O).every(e=>s.O[e](n[o]))?n.splice(o--,1):(l=!1,i<r&&(r=i));if(l){e.splice(p--,1);var c=a();void 0!==c&&(t=c)}}return t}i=i||0;for(var p=e.length;p>0&&e[p-1][2]>i;p--)e[p]=e[p-1];e[p]=[n,a,i]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),s.j=2617,(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var a=n.length-1;a>-1&&(!e||!/^http(s?):/.test(e));)e=n[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{var e={1740:0,2617:0,2741:0,3104:0,5795:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var a,i,[r,l,o]=n,c=0;if(r.some(t=>0!==e[t])){for(a in l)s.o(l,a)&&(s.m[a]=l[a]);if(o)var p=o(s)}for(t&&t(n);c<r.length;c++)i=r[c],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(p)},n=globalThis.webpackChunknewspack=globalThis.webpackChunknewspack||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=s.O(void 0,[4223],()=>s(7230));a=s.O(a)})();