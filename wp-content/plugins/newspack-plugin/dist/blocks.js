(()=>{var e,t={7384:(e,t,n)=>{"use strict";n.r(t),n.d(t,{metadata:()=>i,name:()=>c,settings:()=>p,title:()=>l});var s=n(7723),i=n(9782),r=n(1702),a=n(9673),o=n(2547);const l=(0,s.__)("Corrections","newspack-plugin"),{name:c}=i,p={title:l,icon:{src:a.SX,foreground:o.A["primary-400"]},keywords:[(0,s.__)("clarifications","newspack-plugin"),(0,s.__)("updates","newspack-plugin")],description:(0,s.__)("Display all corrections and clarifications made to a post.","newspack-plugin"),usesContext:["postId"],edit:r.A}},4598:(e,t,n)=>{"use strict";n.r(t),n.d(t,{metadata:()=>r,name:()=>p,settings:()=>u,title:()=>c});var s=n(6427),i=n(7723);const r=JSON.parse('{"name":"newspack/correction-item","category":"newspack","attributes":{},"supports":{"html":false,"__experimentalBorder":{"color":true,"radius":true,"style":true,"width":true},"color":{"link":true,"__experimentalDefaultControls":{"background":true,"text":true}},"spacing":{"margin":true,"padding":true},"shadow":true,"typography":{"fontSize":true,"lineHeight":true,"textAlign":true,"__experimentalFontFamily":true,"__experimentalTextDecoration":true,"__experimentalFontStyle":true,"__experimentalFontWeight":true,"__experimentalLetterSpacing":true,"__experimentalTextTransform":true,"__experimentalWritingMode":true,"__experimentalDefaultControls":{"fontSize":true}}},"parent":["core/post-template"],"usesContext":["postId","postType"],"textdomain":"newspack-plugin"}');var a=n(9673),o=n(2547),l=n(790);const c=(0,i.__)("Correction Item","newspack-plugin"),{name:p}=r,u={title:c,icon:{src:a.SX,foreground:o.A["primary-400"]},description:(0,i.__)("Display an archive of all the corrections and clarifications.","newspack-plugin"),usesContext:["postType"],edit:({context:{postType:e}})=>"newspack_correction"!==e?(0,l.jsx)(s.Placeholder,{icon:a.SX,label:(0,i.__)("Corrections & Clarifications","newspack-plugin"),instructions:(0,i.__)('Please select "Corrections" as the post type in the Query Loop to use this block.',"newspack-plugin")}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"correction__item",children:[(0,l.jsx)("strong",{className:"correction__item-title",children:(0,i.__)("Correction Type, Date, and Time: ","newspack-plugin")}),(0,l.jsx)("span",{className:"correction__item-content",children:(0,i.__)("This is where the content will appear, providing details about the update, whether correcting an error or offering additional context.","newspack-plugin")})]}),(0,l.jsx)("a",{className:"correction__post-link",href:"/#",style:{pointerEvents:"none"},children:(0,i.__)("Post Title","newspack-plugin")})]})}},1516:(e,t,n)=>{"use strict";var s={};n.r(s),n.d(s,{metadata:()=>x,name:()=>f,settings:()=>v});const i=window.wp.blocks;var r=n(4715),a=n(5287),o=n.n(a),l=n(1455),c=n.n(l),p=n(7723),u=n(6087),d=n(6427),_=n(7677),g=n(8351),h=n(9673),w=n(790);const m=e=>"newspack-reader-registration-list-checkbox-"+e,k=[{label:(0,p.__)("Initial","newspack-plugin"),value:"initial"},{label:(0,p.__)("Registration Success","newspack-plugin"),value:"registration"},{label:(0,p.__)("Login Success","newspack-plugin"),value:"login"}],x=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"newspack/reader-registration","title":"Reader Registration","category":"newspack","description":"Register a reader with their email.","textdomain":"newspack-plugin","attributes":{"title":{"type":"string"},"description":{"type":"string"},"placeholder":{"type":"string","default":"Email Address"},"label":{"type":"string","default":"Sign up","required":true},"privacyLabel":{"type":"string","default":""},"newsletterSubscription":{"type":"boolean","default":true},"displayListDescription":{"type":"boolean","default":true},"hideSubscriptionInput":{"type":"boolean","default":false},"newsletterLabel":{"type":"string","default":"Subscribe to our newsletter"},"lists":{"type":"array","default":[],"items":{"type":"string"}},"listsCheckboxes":{"type":"object","default":{}},"signInLabel":{"type":"string","default":"Sign in to an existing account"},"signedInLabel":{"type":"string","default":"An account was already registered with this email. Please check your inbox for an authentication link."}},"supports":{"html":false,"align":true,"multiple":false}}');var b=n(2547);const{name:f}=x,v={icon:{src:h.jo,foreground:b.A["primary-400"]},edit:function({setAttributes:e,attributes:{title:t,description:n,placeholder:s,label:i,privacyLabel:a,newsletterSubscription:l,displayListDescription:x,hideSubscriptionInput:b,newsletterLabel:f,signInLabel:v,signedInLabel:y,lists:j,listsCheckboxes:C}}){const S=(0,r.useBlockProps)(),[N,T]=(0,u.useState)(k[0].value);let{reader_activation_terms:F,reader_activation_url:O}=window.newspack_blocks;O&&(F=`<a href="${O}">`+F+"</a>");const A=(0,r.useInnerBlocksProps)({},{renderAppender:r.InnerBlocks.ButtonBlockAppender,template:[["core/paragraph",{align:"center",content:(0,p.__)("Success! Your account was created and you’re signed in.","newspack-plugin")}]]}),[L,I]=(0,u.useState)(!1),[P,B]=(0,u.useState)({}),D=()=>{newspack_blocks.has_newsletters&&l&&(I(!0),c()({path:"/newspack-newsletters/v1/lists_config"}).then(B).finally((()=>I(!1))))};(0,u.useEffect)(D,[]),(0,u.useEffect)(D,[l]),(0,u.useEffect)((()=>{const t=Object.keys(P);!t.length||j.length&&o()(j,t).length||e({lists:[Object.keys(P)[0]]})}),[P]);const R=e=>C.hasOwnProperty(e)&&C[e],E=t=>()=>{const n={...C};n[t]=!R(t),e({listsCheckboxes:n})};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(r.InspectorControls,{children:[(0,w.jsx)(d.PanelBody,{title:(0,p.__)("Form settings","newspack-plugin"),children:(0,w.jsx)(d.TextControl,{label:(0,p.__)("Input placeholder","newspack-plugin"),value:s,disabled:L,onChange:t=>e({placeholder:t})})}),newspack_blocks.has_newsletters&&(0,w.jsxs)(d.PanelBody,{title:(0,p.__)("Newsletter Subscription","newspack-plugin"),children:[(0,w.jsx)(d.ToggleControl,{label:(0,p.__)("Enable newsletter subscription","newspack-plugin"),checked:!!l,disabled:L,onChange:()=>e({newsletterSubscription:!l})}),l&&(0,w.jsxs)(w.Fragment,{children:[L&&(0,w.jsx)(d.Spinner,{}),!L&&!Object.keys(P).length&&(0,w.jsx)("div",{style:{marginBottom:"1.5rem"},children:(0,p.__)("To enable newsletter subscription, you must configure subscription lists on Newspack Newsletters.","newspack-plugin")}),Object.keys(P).length>0&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(d.ToggleControl,{label:(0,p.__)("Display list description","newspack-plugin"),checked:x,disabled:L,onChange:()=>e({displayListDescription:!x})}),(0,w.jsx)(d.ToggleControl,{label:(0,p.__)("Hide newsletter selection and always subscribe","newspack-plugin"),checked:b,disabled:L||1!==j.length,onChange:()=>e({hideSubscriptionInput:!b})}),j.length<1&&(0,w.jsx)("div",{style:{marginBottom:"1.5rem"},children:(0,w.jsx)(d.Notice,{isDismissible:!1,status:"error",children:(0,p.__)("You must select at least one list.","newspack-plugin")})}),Object.keys(P).length>0&&(0,w.jsxs)("p",{children:[(0,p.__)("Lists","newspack-plugin"),":"]}),Object.keys(P).map((t=>(0,w.jsx)(d.ToggleControl,{label:P[t].title,checked:j.includes(t),disabled:L,onChange:()=>{j.includes(t)?e({lists:j.filter((e=>e!==t))}):e({lists:j.concat(t)})}},t)))]}),(0,w.jsxs)("p",{children:[(0,w.jsx)("a",{href:newspack_blocks.newsletters_url,children:(0,p.__)("Configure your subscription lists","newspack-plugin")}),"."]})]})]}),(0,w.jsxs)(d.PanelBody,{title:(0,p.__)("Spam protection","newspack-plugin"),children:[(0,w.jsx)("p",{children:(0,p.sprintf)(
// translators: %s is either 'enabled' or 'disabled'.
// translators: %s is either 'enabled' or 'disabled'.
(0,p.__)("reCAPTCHA is currently %s.","newspack-plugin"),newspack_blocks.has_recaptcha?(0,p.__)("enabled","newspack-plugin"):(0,p.__)("disabled","newspack-plugin"))}),!newspack_blocks.has_recaptcha&&(0,w.jsx)("p",{children:(0,p.__)("It's highly recommended that you enable reCAPTCHA protection to prevent spambots from using this form!","newspack-plugin")}),(0,w.jsx)("p",{children:(0,w.jsx)("a",{href:newspack_blocks.recaptcha_url,children:(0,p.__)("Configure your reCAPTCHA settings.","newspack-plugin")})})]})]}),(0,w.jsxs)("div",{...S,children:[(0,w.jsxs)("div",{className:"newspack-registration__state-bar",children:[(0,w.jsx)("span",{children:(0,p.__)("Edited State","newspack-plugin")}),(0,w.jsx)("div",{children:k.map((e=>(0,w.jsx)(d.Button,{"data-is-active":N===e.value,onClick:()=>T(e.value),children:e.label},e.value)))})]}),"initial"===N&&(0,w.jsx)("div",{className:"newspack-registration newspack-ui",children:(0,w.jsxs)("form",{onSubmit:e=>e.preventDefault(),children:[(0,w.jsx)("div",{className:"newspack-registration__header",children:(0,w.jsx)(r.RichText,{onChange:t=>e({title:t}),placeholder:(0,p.__)("Add title","newspack-plugin"),value:t,allowedFormats:[],tagName:"h3",className:"newspack-registration__title"})}),(0,w.jsx)(r.RichText,{onChange:t=>e({description:t}),placeholder:(0,p.__)("Add description","newspack-plugin"),value:n,tagName:"p",className:"newspack-registration__description"}),(0,w.jsxs)("div",{className:"newspack-registration__form-content",children:[1===j.length&&b||!l||!j.length?null:(0,w.jsx)(w.Fragment,{children:j.map((t=>(0,w.jsxs)("label",{htmlFor:m(t),className:"newspack-ui__input-card",children:[(0,w.jsx)("input",{id:m(t),type:"checkbox",checked:R(t),onChange:E(t)}),(0,w.jsx)("strong",{children:1===j.length?(0,w.jsx)(r.RichText,{onChange:t=>e({newsletterLabel:t}),placeholder:(0,p.__)("Subscribe to our newsletter","newspack-plugin"),value:f,allowedFormats:[],tagName:"span"}):P[t]?.title}),x&&(0,w.jsx)("span",{className:"newspack-ui__helper-text",children:P[t]?.description})]},t)))}),(0,w.jsxs)("div",{className:"newspack-registration__main",children:[newspack_blocks.has_google_oauth&&(0,w.jsxs)("div",{className:"newspack-ui",children:[(0,w.jsxs)("button",{className:"newspack-ui__button newspack-ui__button--wide newspack-ui__button--secondary newspack-ui__button--google-oauth",children:[(0,w.jsx)("span",{dangerouslySetInnerHTML:{__html:newspack_blocks.google_logo_svg}}),(0,p.__)("Sign in with Google","newspack-plugin")]}),(0,w.jsx)("div",{className:"newspack-ui__word-divider",children:(0,p.__)("Or","newspack-plugin")})]}),(0,w.jsxs)("div",{children:[(0,w.jsxs)("div",{className:"newspack-registration__inputs",children:[(0,w.jsx)("input",{type:"email",placeholder:s}),(0,w.jsx)("button",{type:"submit",className:"newspack-ui__button newspack-ui__button--primary",children:(0,w.jsx)(r.RichText,{onChange:t=>e({label:t}),placeholder:(0,p.__)("Sign up","newspack-plugin"),value:i,allowedFormats:[],tagName:"span"})})]}),(0,w.jsx)("div",{className:"newspack-registration__response"})]})]})]}),(0,w.jsx)("div",{className:"newspack-registration__have-account",children:(0,w.jsx)("a",{href:"/my-account",onClick:e=>e.preventDefault(),className:"newspack-ui__button newspack-ui__button--ghost",children:(0,w.jsx)(r.RichText,{onChange:t=>e({signInLabel:t}),placeholder:(0,p.__)("Sign in to an existing account","newspack-plugin"),value:v,allowedFormats:[],tagName:"span"})})}),(0,w.jsx)("div",{className:"newspack-registration__help-text",children:(0,w.jsx)(r.RichText,{onChange:t=>e({privacyLabel:t}),placeholder:(0,p.__)("Terms & Conditions statement…","newspack-plugin"),value:a||F,allowedFormats:["core/bold","core/italic","core/link"],tagName:"p"})})]})}),"registration"===N&&(0,w.jsx)("div",{className:"newspack-registration newspack-ui",children:(0,w.jsxs)("div",{className:"newspack-ui__box newspack-ui__box--success newspack-ui__box--text-center",children:[(0,w.jsx)("span",{className:"newspack-ui__icon newspack-ui__icon--success",children:(0,w.jsx)(_.A,{icon:g.A})}),(0,w.jsx)("div",{...A})]})}),"login"===N&&(0,w.jsx)("div",{className:"newspack-registration newspack-ui",children:(0,w.jsxs)("div",{className:"newspack-ui__box newspack-ui__box--success newspack-ui__box--text-center",children:[(0,w.jsx)("span",{className:"newspack-ui__icon newspack-ui__icon--success",children:(0,w.jsx)(_.A,{icon:h.xk})}),(0,w.jsx)(r.RichText,{align:"center",onChange:t=>e({signedInLabel:t}),placeholder:(0,p.__)("Logged in message…","newspack-plugin"),value:y,allowedFormats:[],tagName:"p"})]})})]})]})},save:()=>(0,w.jsx)("div",{...r.useInnerBlocksProps.save(r.useBlockProps.save())})};var y=n(7384),j=n(4598),C=n(2619),S=n(7143);const N=window.wp.compose,T=window.location.href;(0,C.addFilter)("blocks.registerBlockType","newspack-plugin/register-hook/core-image",((e,t)=>"core/image"!==t?e:{...e,attributes:{...e.attributes,meta:{type:"object",default:{}}}}));const F=({setAttributes:e,attributes:t})=>{var n;const s=t.id,{meta:i}=null!==(n=(0,S.useSelect)((e=>e("core").getMedia(s)),[s]))&&void 0!==n?n:{meta:{}};return(0,u.useEffect)((()=>{if(Object.keys(i).length){const{_media_credit:n,_media_credit_url:s,_navis_media_credit_org:r}=i;n===t?.meta?._media_credit&&s===t?.meta?._media_credit_url&&r===t?.meta?._navis_media_credit_org||e({meta:{_media_credit:n,_media_credit_url:s,_navis_media_credit_org:r}})}}),[i,t?.meta?._media_credit,t?.meta?._media_credit_url,t?.meta?._navis_media_credit_org]),(0,w.jsx)(w.Fragment,{})},O=(e,t=T)=>new URL(e).hostname===new URL(t).hostname;(0,C.addFilter)("editor.BlockEdit","newspack-plugin/block-edit-hook/core-image",(0,N.createHigherOrderComponent)((e=>t=>"core/image"===t.name?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(e,{...t}),t.attributes.url&&O(t.attributes.url)&&(0,w.jsx)(F,{...t})]}):(0,w.jsx)(e,{...t})),"withCustomMetaData"));const A=[s,y,j],L=["newspack/reader-registration"],I=["newspack/correction-box","newspack/correction-item"],P=e=>{if(!e)return;const{metadata:t,settings:n,name:s}=e;L.includes(s)&&!newspack_blocks.has_reader_activation||I.includes(s)&&!newspack_blocks.corrections_enabled||(0,i.registerBlockType)({name:s,...t},n)};for(const e of A)P(e)},7706:(e,t,n)=>{var s=n(6131);e.exports=function(e,t){return!(null==e||!e.length)&&s(e,t,0)>-1}},9905:e=>{e.exports=function(e,t,n){for(var s=-1,i=null==e?0:e.length;++s<i;)if(n(t,e[s]))return!0;return!1}},6131:(e,t,n)=>{var s=n(2523),i=n(5463),r=n(6959);e.exports=function(e,t,n){return t==t?r(e,t,n):s(e,i,n)}},7185:(e,t,n)=>{var s=n(8859),i=n(7706),r=n(9905),a=n(4932),o=n(7301),l=n(9219),c=Math.min;e.exports=function(e,t,n){for(var p=n?r:i,u=e[0].length,d=e.length,_=d,g=Array(d),h=1/0,w=[];_--;){var m=e[_];_&&t&&(m=a(m,o(t))),h=c(m.length,h),g[_]=!n&&(t||u>=120&&m.length>=120)?new s(_&&m):void 0}m=e[0];var k=-1,x=g[0];e:for(;++k<u&&w.length<h;){var b=m[k],f=t?t(b):b;if(b=n||0!==b?b:0,!(x?l(x,f):p(w,f,n))){for(_=d;--_;){var v=g[_];if(!(v?l(v,f):p(e[_],f,n)))continue e}x&&x.push(f),w.push(b)}}return w}},5463:e=>{e.exports=function(e){return e!=e}},741:(e,t,n)=>{var s=n(3693);e.exports=function(e){return s(e)?e:[]}},6959:e=>{e.exports=function(e,t,n){for(var s=n-1,i=e.length;++s<i;)if(e[s]===t)return s;return-1}},5287:(e,t,n)=>{var s=n(4932),i=n(7185),r=n(9302),a=n(741),o=r((function(e){var t=s(e,a);return t.length&&t[0]===e[0]?i(t):[]}));e.exports=o},790:e=>{"use strict";e.exports=window.ReactJSXRuntime},1455:e=>{"use strict";e.exports=window.wp.apiFetch},4715:e=>{"use strict";e.exports=window.wp.blockEditor},6427:e=>{"use strict";e.exports=window.wp.components},7143:e=>{"use strict";e.exports=window.wp.data},6087:e=>{"use strict";e.exports=window.wp.element},2619:e=>{"use strict";e.exports=window.wp.hooks},7723:e=>{"use strict";e.exports=window.wp.i18n},5573:e=>{"use strict";e.exports=window.wp.primitives},4871:e=>{"use strict";e.exports=window.wp.serverSideRender},9782:e=>{"use strict";e.exports=JSON.parse('{"name":"newspack/correction-box","category":"newspack","attributes":{"priority":{"type":"string","default":"all","enum":["high","low","all"]}},"supports":{"html":false,"__experimentalBorder":{"color":true,"radius":true,"style":true,"width":true},"color":{"link":true,"__experimentalDefaultControls":{"background":true,"text":true}},"spacing":{"margin":true,"padding":true},"shadow":true,"typography":{"fontSize":true,"lineHeight":true,"textAlign":true,"__experimentalFontFamily":true,"__experimentalTextDecoration":true,"__experimentalFontStyle":true,"__experimentalFontWeight":true,"__experimentalLetterSpacing":true,"__experimentalTextTransform":true,"__experimentalWritingMode":true,"__experimentalDefaultControls":{"fontSize":true}}},"usesContext":["postId"],"textdomain":"newspack-plugin"}')}},n={};function s(e){var i=n[e];if(void 0!==i)return i.exports;var r=n[e]={id:e,loaded:!1,exports:{}};return t[e](r,r.exports,s),r.loaded=!0,r.exports}s.m=t,e=[],s.O=(t,n,i,r)=>{if(!n){var a=1/0;for(p=0;p<e.length;p++){for(var[n,i,r]=e[p],o=!0,l=0;l<n.length;l++)(!1&r||a>=r)&&Object.keys(s.O).every((e=>s.O[e](n[l])))?n.splice(l--,1):(o=!1,r<a&&(a=r));if(o){e.splice(p--,1);var c=i();void 0!==c&&(t=c)}}return t}r=r||0;for(var p=e.length;p>0&&e[p-1][2]>r;p--)e[p]=e[p-1];e[p]=[n,i,r]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),s.j=617,(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var i=n.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=n[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{var e={617:0,795:0,741:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var i,r,[a,o,l]=n,c=0;if(a.some((t=>0!==e[t]))){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);if(l)var p=l(s)}for(t&&t(n);c<a.length;c++)r=a[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(p)},n=globalThis.webpackChunknewspack=globalThis.webpackChunknewspack||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=s.O(void 0,[223],(()=>s(1516)));i=s.O(i)})();