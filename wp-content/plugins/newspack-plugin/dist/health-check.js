(()=>{"use strict";var e,t={3251:(e,t,n)=>{n(8209);var s=n(6087),i=n(7723),a=n(1727),r=n(216),o=n(790);class c extends s.Component{render(){const{unsupportedPlugins:e,missingPlugins:t,deactivateAllPlugins:n}=this.props;return(0,o.jsxs)(a.xA,{columns:1,gutter:64,children:[t.length?(0,o.jsxs)(a.xA,{columns:1,gutter:16,children:[(0,o.jsx)(a.$T,{noticeText:(0,i.__)("These plugins shoud be active:","newspack-plugin"),isWarning:!0}),(0,o.jsx)(a.I2,{plugins:t})]}):null,e.length?(0,o.jsxs)(a.xA,{columns:1,gutter:16,children:[(0,o.jsx)(a.$T,{noticeText:(0,i.__)("Newspack does not support these plugins:","newspack-plugin"),isError:!0}),e.map((e=>(0,o.jsx)(a.Lz,{title:e.Name,description:e.Description,className:"newspack-card__is-unsupported"},e.Slug))),(0,o.jsx)("div",{className:"newspack-buttons-card",children:(0,o.jsx)(a.$n,{isPrimary:!0,onClick:n,children:(0,i.__)("Deactivate All","newspack-plugin")})})]}):(0,o.jsx)(a.$T,{noticeText:(0,i.__)("No unsupported plugins found.","newspack-plugin"),isSuccess:!0})]})}}const p=(0,a.c_)(c);class l extends s.Component{render(){const{configurationStatus:e,hasData:t}=this.props,{jetpack:n,sitekit:r}=e||{};return t&&(0,o.jsxs)(s.Fragment,{children:[(0,o.jsx)(a.Lz,{className:n?"newspack-card__is-supported":"newspack-card__is-unsupported",title:(0,i.__)("Jetpack","newspack-plugin"),description:n?(0,i.__)("Jetpack is connected.","newspack-plugin"):(0,i.__)("Jetpack is not connected. ","newspack-plugin"),actionText:!n&&(0,i.__)("Connect","newspack-plugin"),handoff:"jetpack"}),(0,o.jsx)(a.Lz,{className:r?"newspack-card__is-supported":"newspack-card__is-unsupported",title:(0,i.__)("Google Site Kit","newspack-plugin"),description:r?(0,i.__)("Site Kit is connected.","newspack-plugin"):(0,i.__)("Site Kit is not connected. ","newspack-plugin"),actionText:!r&&(0,i.__)("Connect","newspack-plugin"),handoff:"google-site-kit"})]})}}const u=(0,a.c_)(l),{HashRouter:d,Redirect:h,Route:w,Switch:g}=r.A;class k extends s.Component{constructor(e){super(e),this.state={hasData:!1,healthCheckData:{unsupported_plugins:{},missing_plugins:{}}}}onWizardReady=()=>{this.fetchHealthData()};fetchHealthData=()=>{const{wizardApiFetch:e,setError:t}=this.props;e({path:"/newspack/v1/wizard/newspack-health-check-wizard/"}).then((e=>this.setState({healthCheckData:e,hasData:!0}))).catch((e=>{t(e)}))};deactivateAllPlugins=()=>{const{wizardApiFetch:e,setError:t}=this.props;e({path:"/newspack/v1/wizard/newspack-health-check-wizard/unsupported_plugins",method:"delete"}).then((e=>this.setState({healthCheckData:e}))).catch((e=>{t(e)}))};render(){const{hasData:e,healthCheckData:t}=this.state,{unsupported_plugins:n,missing_plugins:a,configuration_status:r}=t,c=[{label:(0,i.__)("Plugins","newspack-plugin"),path:"/",exact:!0},{label:(0,i.__)("Configuration","newspack-plugin"),path:"/configuration"}];return(0,o.jsx)(s.Fragment,{children:(0,o.jsx)(d,{hashType:"slash",children:(0,o.jsxs)(g,{children:[(0,o.jsx)(w,{path:"/",exact:!0,render:()=>(0,o.jsx)(p,{headerText:(0,i.__)("Health Check","newspack-plugin"),subHeaderText:(0,i.__)("Verify and correct site health issues","newspack-plugin"),deactivateAllPlugins:this.deactivateAllPlugins,tabbedNavigation:c,missingPlugins:Object.keys(a),unsupportedPlugins:Object.keys(n).map((e=>({...n[e],Slug:e})))})}),(0,o.jsx)(w,{path:"/configuration",exact:!0,render:()=>(0,o.jsx)(u,{hasData:e,headerText:(0,i.__)("Health Check","newspack-plugin"),subHeaderText:(0,i.__)("Verify and correct site health issues","newspack-plugin"),tabbedNavigation:c,configurationStatus:r,missingPlugins:Object.keys(a)})}),(0,o.jsx)(h,{to:"/"})]})})})}}(0,s.render)((0,s.createElement)((0,a.Aq)(k)),document.getElementById("newspack-health-check-wizard"))},1609:e=>{e.exports=window.React},790:e=>{e.exports=window.ReactJSXRuntime},6154:e=>{e.exports=window.moment},1455:e=>{e.exports=window.wp.apiFetch},6427:e=>{e.exports=window.wp.components},7143:e=>{e.exports=window.wp.data},6087:e=>{e.exports=window.wp.element},2619:e=>{e.exports=window.wp.hooks},8537:e=>{e.exports=window.wp.htmlEntities},7723:e=>{e.exports=window.wp.i18n},8558:e=>{e.exports=window.wp.keycodes},5573:e=>{e.exports=window.wp.primitives},3832:e=>{e.exports=window.wp.url}},n={};function s(e){var i=n[e];if(void 0!==i)return i.exports;var a=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.loaded=!0,a.exports}s.m=t,e=[],s.O=(t,n,i,a)=>{if(!n){var r=1/0;for(l=0;l<e.length;l++){for(var[n,i,a]=e[l],o=!0,c=0;c<n.length;c++)(!1&a||r>=a)&&Object.keys(s.O).every((e=>s.O[e](n[c])))?n.splice(c--,1):(o=!1,a<r&&(r=a));if(o){e.splice(l--,1);var p=i();void 0!==p&&(t=p)}}return t}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[n,i,a]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),s.j=890,(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var i=n.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=n[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{var e={890:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var i,a,[r,o,c]=n,p=0;if(r.some((t=>0!==e[t]))){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);if(c)var l=c(s)}for(t&&t(n);p<r.length;p++)a=r[p],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(l)},n=globalThis.webpackChunknewspack=globalThis.webpackChunknewspack||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=s.O(void 0,[223],(()=>s(3251)));i=s.O(i)})();