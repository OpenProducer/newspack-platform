/*! For license information please see popups.js.LICENSE.txt */
(()=>{var e,t={8298:e=>{"use strict";const t=["K","M","B","T"];e.exports=(e,n)=>{let a=0;for(;e>=1e3&&++a<=t.length;)e/=1e3;return n&&(e=n(e)),String(0===a?e:e+t[a-1])}},5652:(e,t,n)=>{var a=n(8668),r=n(7443),o=n(1196),i=n(4757),s=n(3593),c=n(1814);e.exports=function(e,t,n){var l=-1,u=r,d=e.length,p=!0,m=[],h=m;if(n)p=!1,u=o;else if(d>=200){var g=t?null:s(e);if(g)return c(g);p=!1,u=i,h=new a}else h=t?[]:m;e:for(;++l<d;){var w=e[l],f=t?t(w):w;if(w=n||0!==w?w:0,p&&f==f){for(var v=h.length;v--;)if(h[v]===f)continue e;t&&h.push(f),m.push(w)}else u(h,f,n)||(h!==m&&h.push(f),m.push(w))}return m}},3593:(e,t,n)=>{var a=n(8525),r=n(308),o=n(1814),i=a&&1/o(new a([,-0]))[1]==1/0?function(e){return new a(e)}:r;e.exports=i},3729:(e,t,n)=>{var a=n(8674)({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});e.exports=a},308:e=>{e.exports=function(){}},7955:(e,t,n)=>{var a=n(9833),r=n(3729),o=/&(?:amp|lt|gt|quot|#39);/g,i=RegExp(o.source);e.exports=function(e){return(e=a(e))&&i.test(e)?e.replace(o,r):e}},5578:(e,t,n)=>{var a=n(7206),r=n(5652);e.exports=function(e,t){return e&&e.length?r(e,a(t,2)):[]}},1964:(e,t,n)=>{"use strict";n.r(t);var a=n(7462),r=n(4942),o=(n(5674),n(9307)),i=n(5736),s=n(6483),c=n(6989),l=n.n(c),u=n(129);function d(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var p=n(1002);function m(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function h(e){m(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===(0,p.Z)(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function g(e,t){m(2,arguments);var n=h(e),a=d(t);return isNaN(a)?new Date(NaN):a?(n.setDate(n.getDate()+a),n):n}function w(e,t){m(2,arguments);var n=d(t);return g(e,-n)}var f=n(1383),v=n(9674),y=n(9630),k=n(7259),b=n(5609);const _=i.__,E=e=>{let{dismiss:t,hasPrompts:n,hasPublished:a,isArchive:r,onActivate:i,onArchive:s,onDeactivate:c,onDelete:l,onDuplicate:u,onRename:d,onUnarchive:p}=e;return(0,o.createElement)(f.J2,{position:"bottom right",onFocusOutside:()=>t(),onKeyDown:e=>y.ESCAPE===e.keyCode&&t()},(0,o.createElement)(b.MenuItem,{onClick:()=>t(),className:"screen-reader-text"},_("Close Popover","newspack")),n&&(0,o.createElement)(b.MenuItem,{onClick:()=>{t(),i()},className:"newspack-button"},_("Activate all prompts","newspack")),a&&(0,o.createElement)(b.MenuItem,{onClick:()=>{t(),c()},className:"newspack-button"},_("Deactivate all prompts","newspack")),(0,o.createElement)(b.MenuItem,{onClick:()=>{t(),u()},className:"newspack-button"},_("Duplicate","newspack")),(0,o.createElement)(b.MenuItem,{onClick:()=>{t(),d()},className:"newspack-button"},_("Rename","newspack")),!r&&(0,o.createElement)(b.MenuItem,{onClick:()=>{t(),s()},className:"newspack-button"},_("Archive","newspack")),r&&(0,o.createElement)(b.MenuItem,{onClick:()=>{t(),p()},className:"newspack-button"},_("Unarchive","newspack")),(0,o.createElement)(b.MenuItem,{onClick:()=>{t(),l()},className:"newspack-button"},_("Delete","newspack")))};function C(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)e[a]=n[a]}return e}var T=function e(t,n){function a(e,a,r){if("undefined"!=typeof document){"number"==typeof(r=C({},n,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var i in r)r[i]&&(o+="; "+i,!0!==r[i]&&(o+="="+r[i].split(";")[0]));return document.cookie=e+"="+t.write(a,e)+o}}return Object.create({set:a,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],a={},r=0;r<n.length;r++){var o=n[r].split("="),i=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(a[s]=t.read(i,s),e===s)break}catch(e){}}return e?a[e]:a}},remove:function(e,t){a(e,"",C({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,C({},this.attributes,t))},withConverter:function(t){return e(C({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),x=n(444);const S=(0,o.createElement)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(x.Path,{d:"M18.5 10.5H10v8h8a.5.5 0 00.5-.5v-7.5zm-10 0h-3V18a.5.5 0 00.5.5h2.5v-8zM6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z"}));var D=n(5332);const P=e=>{const t=window?.newspack_popups_wizard_data?.preview_post,n=window?.newspack_popups_wizard_data?.frontend_url||"/",{campaign:r=!1,onLoad:i=(()=>{}),segment:c="",showUnpublished:l=!1,url:u=t||n}=e,d=e=>{const t=c.length?[`segment:${c}`]:["segment:everyone"];return l&&t.push("show_unpublished:true"),r?t.push(`campaign:${r}`):t.push("all"),(0,s.addQueryArgs)(e,{view_as:t.join(";")})};return(0,o.createElement)(f.BA,(0,a.Z)({},e,{onLoad:e=>{e&&([...e.contentWindow.document.querySelectorAll("a")].forEach((e=>{const t=e.getAttribute("href");0===t.indexOf(n)&&e.setAttribute("href",d(t))})),i(e))},url:d(u)}))};var M=n(2629),z=n(9522);const A=i.__,N=e=>{let{deletePopup:t,restorePopup:n,onFocusOutside:a,prompt:r,previewPopup:i,publishPopup:s,setIsDuplicatePromptModalVisible:c,unpublishPopup:l}=e;const{id:u,edit_link:d,status:p}=r,m="publish"===p,h="trash"===p;return(0,o.createElement)(f.J2,{position:"bottom left",onFocusOutside:a,onKeyDown:e=>y.ESCAPE===e.keyCode&&a(),className:"newspack-popover__campaigns__primary-popover"},(0,o.createElement)(b.MenuItem,{onClick:()=>a(),className:"screen-reader-text"},A("Close Popover","newspack")),h?(0,o.createElement)(o.Fragment,null,(0,o.createElement)(b.MenuItem,{onClick:()=>n(u),className:"newspack-button"},A("Restore","newspack")),(0,o.createElement)(b.MenuItem,{onClick:()=>t(u),className:"newspack-button"},A("Delete permanently","newspack"))):(0,o.createElement)(o.Fragment,null,(0,o.createElement)(b.MenuItem,{onClick:()=>{a(),i(r)},className:"newspack-button"},A("Preview","newspack")),(0,o.createElement)(b.MenuItem,{href:(0,M.decodeEntities)(d),className:"newspack-button",isLink:!0},A("Edit","newspack")),(0,o.createElement)(b.MenuItem,{onClick:()=>c(!0),className:"newspack-button"},A("Duplicate","newspack")),(0,o.createElement)(b.MenuItem,{onClick:()=>{a(),(m?l:s)(u)},className:"newspack-button"},A(m?"Deactivate":"Activate","newspack")),(0,o.createElement)(b.MenuItem,{onClick:()=>t(u),className:"newspack-button"},A("Delete","newspack"))),(0,o.createElement)("div",{className:"newspack-popover__campaigns__info"},A("ID:","newspack")," ",u))};var O=n(2694),U=n(8306),F=n.n(U);function I(e){return m(1,arguments),e instanceof Date||"object"===(0,p.Z)(e)&&"[object Date]"===Object.prototype.toString.call(e)}function Z(e){if(m(1,arguments),!I(e)&&"number"!=typeof e)return!1;var t=h(e);return!isNaN(Number(t))}function L(e,t){m(2,arguments);var n=h(e).getTime(),a=d(t);return new Date(n+a)}function q(e,t){m(2,arguments);var n=d(t);return L(e,-n)}var W=864e5;function H(e){m(1,arguments);var t=1,n=h(e),a=n.getUTCDay(),r=(a<t?7:0)+a-t;return n.setUTCDate(n.getUTCDate()-r),n.setUTCHours(0,0,0,0),n}function R(e){m(1,arguments);var t=h(e),n=t.getUTCFullYear(),a=new Date(0);a.setUTCFullYear(n+1,0,4),a.setUTCHours(0,0,0,0);var r=H(a),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var i=H(o);return t.getTime()>=r.getTime()?n+1:t.getTime()>=i.getTime()?n:n-1}function Y(e){m(1,arguments);var t=R(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var a=H(n);return a}var j=6048e5;function B(e){m(1,arguments);var t=h(e),n=H(t).getTime()-Y(t).getTime();return Math.round(n/j)+1}var $={};function G(){return $}function V(e,t){var n,a,r,o,i,s,c,l;m(1,arguments);var u=G(),p=d(null!==(n=null!==(a=null!==(r=null!==(o=null==t?void 0:t.weekStartsOn)&&void 0!==o?o:null==t||null===(i=t.locale)||void 0===i||null===(s=i.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==r?r:u.weekStartsOn)&&void 0!==a?a:null===(c=u.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==n?n:0);if(!(p>=0&&p<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=h(e),w=g.getUTCDay(),f=(w<p?7:0)+w-p;return g.setUTCDate(g.getUTCDate()-f),g.setUTCHours(0,0,0,0),g}function Q(e,t){var n,a,r,o,i,s,c,l;m(1,arguments);var u=h(e),p=u.getUTCFullYear(),g=G(),w=d(null!==(n=null!==(a=null!==(r=null!==(o=null==t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null==t||null===(i=t.locale)||void 0===i||null===(s=i.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==r?r:g.firstWeekContainsDate)&&void 0!==a?a:null===(c=g.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==n?n:1);if(!(w>=1&&w<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=new Date(0);f.setUTCFullYear(p+1,0,w),f.setUTCHours(0,0,0,0);var v=V(f,t),y=new Date(0);y.setUTCFullYear(p,0,w),y.setUTCHours(0,0,0,0);var k=V(y,t);return u.getTime()>=v.getTime()?p+1:u.getTime()>=k.getTime()?p:p-1}function X(e,t){var n,a,r,o,i,s,c,l;m(1,arguments);var u=G(),p=d(null!==(n=null!==(a=null!==(r=null!==(o=null==t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null==t||null===(i=t.locale)||void 0===i||null===(s=i.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==r?r:u.firstWeekContainsDate)&&void 0!==a?a:null===(c=u.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==n?n:1),h=Q(e,t),g=new Date(0);g.setUTCFullYear(h,0,p),g.setUTCHours(0,0,0,0);var w=V(g,t);return w}var J=6048e5;function K(e,t){m(1,arguments);var n=h(e),a=V(n,t).getTime()-X(n,t).getTime();return Math.round(a/J)+1}function ee(e,t){for(var n=e<0?"-":"",a=Math.abs(e).toString();a.length<t;)a="0"+a;return n+a}const te=function(e,t){var n=e.getUTCFullYear(),a=n>0?n:1-n;return ee("yy"===t?a%100:a,t.length)},ne=function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):ee(n+1,2)},ae=function(e,t){return ee(e.getUTCDate(),t.length)},re=function(e,t){return ee(e.getUTCHours()%12||12,t.length)},oe=function(e,t){return ee(e.getUTCHours(),t.length)},ie=function(e,t){return ee(e.getUTCMinutes(),t.length)},se=function(e,t){return ee(e.getUTCSeconds(),t.length)},ce=function(e,t){var n=t.length,a=e.getUTCMilliseconds();return ee(Math.floor(a*Math.pow(10,n-3)),t.length)};function le(e,t){var n=e>0?"-":"+",a=Math.abs(e),r=Math.floor(a/60),o=a%60;if(0===o)return n+String(r);var i=t||"";return n+String(r)+i+ee(o,2)}function ue(e,t){return e%60==0?(e>0?"-":"+")+ee(Math.abs(e)/60,2):de(e,t)}function de(e,t){var n=t||"",a=e>0?"-":"+",r=Math.abs(e);return a+ee(Math.floor(r/60),2)+n+ee(r%60,2)}const pe={G:function(e,t,n){var a=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});default:return n.era(a,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var a=e.getUTCFullYear(),r=a>0?a:1-a;return n.ordinalNumber(r,{unit:"year"})}return te(e,t)},Y:function(e,t,n,a){var r=Q(e,a),o=r>0?r:1-r;return"YY"===t?ee(o%100,2):"Yo"===t?n.ordinalNumber(o,{unit:"year"}):ee(o,t.length)},R:function(e,t){return ee(R(e),t.length)},u:function(e,t){return ee(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var a=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return ee(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,n){var a=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return ee(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,n){var a=e.getUTCMonth();switch(t){case"M":case"MM":return ne(e,t);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,n){var a=e.getUTCMonth();switch(t){case"L":return String(a+1);case"LL":return ee(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,n,a){var r=K(e,a);return"wo"===t?n.ordinalNumber(r,{unit:"week"}):ee(r,t.length)},I:function(e,t,n){var a=B(e);return"Io"===t?n.ordinalNumber(a,{unit:"week"}):ee(a,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):ae(e,t)},D:function(e,t,n){var a=function(e){m(1,arguments);var t=h(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var a=t.getTime(),r=n-a;return Math.floor(r/W)+1}(e);return"Do"===t?n.ordinalNumber(a,{unit:"dayOfYear"}):ee(a,t.length)},E:function(e,t,n){var a=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,n,a){var r=e.getUTCDay(),o=(r-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return ee(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,n,a){var r=e.getUTCDay(),o=(r-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return ee(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,n){var a=e.getUTCDay(),r=0===a?7:a;switch(t){case"i":return String(r);case"ii":return ee(r,t.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,n){var a=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){var a,r=e.getUTCHours();switch(a=12===r?"noon":0===r?"midnight":r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){var a,r=e.getUTCHours();switch(a=r>=17?"evening":r>=12?"afternoon":r>=4?"morning":"night",t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var a=e.getUTCHours()%12;return 0===a&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return re(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):oe(e,t)},K:function(e,t,n){var a=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(a,{unit:"hour"}):ee(a,t.length)},k:function(e,t,n){var a=e.getUTCHours();return 0===a&&(a=24),"ko"===t?n.ordinalNumber(a,{unit:"hour"}):ee(a,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):ie(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):se(e,t)},S:function(e,t){return ce(e,t)},X:function(e,t,n,a){var r=(a._originalDate||e).getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return ue(r);case"XXXX":case"XX":return de(r);default:return de(r,":")}},x:function(e,t,n,a){var r=(a._originalDate||e).getTimezoneOffset();switch(t){case"x":return ue(r);case"xxxx":case"xx":return de(r);default:return de(r,":")}},O:function(e,t,n,a){var r=(a._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+le(r,":");default:return"GMT"+de(r,":")}},z:function(e,t,n,a){var r=(a._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+le(r,":");default:return"GMT"+de(r,":")}},t:function(e,t,n,a){var r=a._originalDate||e;return ee(Math.floor(r.getTime()/1e3),t.length)},T:function(e,t,n,a){return ee((a._originalDate||e).getTime(),t.length)}};var me=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},he=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},ge={p:he,P:function(e,t){var n,a=e.match(/(P+)(p+)?/)||[],r=a[1],o=a[2];if(!o)return me(e,t);switch(r){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",me(r,t)).replace("{{time}}",he(o,t))}};const we=ge;function fe(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var ve=["D","DD"],ye=["YY","YYYY"];function ke(e){return-1!==ve.indexOf(e)}function be(e){return-1!==ye.indexOf(e)}function _e(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Ee={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Ce(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,a=e.formats[n]||e.formats[e.defaultWidth];return a}}var Te,xe={date:Ce({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Ce({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Ce({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Se={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function De(e){return function(t,n){var a;if("formatting"===(null!=n&&n.context?String(n.context):"standalone")&&e.formattingValues){var r=e.defaultFormattingWidth||e.defaultWidth,o=null!=n&&n.width?String(n.width):r;a=e.formattingValues[o]||e.formattingValues[r]}else{var i=e.defaultWidth,s=null!=n&&n.width?String(n.width):e.defaultWidth;a=e.values[s]||e.values[i]}return a[e.argumentCallback?e.argumentCallback(t):t]}}function Pe(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.width,r=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],o=t.match(r);if(!o)return null;var i,s=o[0],c=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(c)?ze(c,(function(e){return e.test(s)})):Me(c,(function(e){return e.test(s)}));i=e.valueCallback?e.valueCallback(l):l,i=n.valueCallback?n.valueCallback(i):i;var u=t.slice(s.length);return{value:i,rest:u}}}function Me(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function ze(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}const Ae={code:"en-US",formatDistance:function(e,t,n){var a,r=Ee[e];return a="string"==typeof r?r:1===t?r.one:r.other.replace("{{count}}",t.toString()),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a},formatLong:xe,formatRelative:function(e,t,n,a){return Se[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:De({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:De({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:De({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:De({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:De({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(Te={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(Te.matchPattern);if(!n)return null;var a=n[0],r=e.match(Te.parsePattern);if(!r)return null;var o=Te.valueCallback?Te.valueCallback(r[0]):r[0];o=t.valueCallback?t.valueCallback(o):o;var i=e.slice(a.length);return{value:o,rest:i}}),era:Pe({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Pe({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Pe({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Pe({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Pe({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};var Ne=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Oe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ue=/^'([^]*?)'?$/,Fe=/''/g,Ie=/[a-zA-Z]/;function Ze(e,t,n){var a,r,o,i,s,c,l,u,p,g,w,f,v,y,k,b,_,E;m(2,arguments);var C=String(t),T=G(),x=null!==(a=null!==(r=null==n?void 0:n.locale)&&void 0!==r?r:T.locale)&&void 0!==a?a:Ae,S=d(null!==(o=null!==(i=null!==(s=null!==(c=null==n?void 0:n.firstWeekContainsDate)&&void 0!==c?c:null==n||null===(l=n.locale)||void 0===l||null===(u=l.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==s?s:T.firstWeekContainsDate)&&void 0!==i?i:null===(p=T.locale)||void 0===p||null===(g=p.options)||void 0===g?void 0:g.firstWeekContainsDate)&&void 0!==o?o:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var D=d(null!==(w=null!==(f=null!==(v=null!==(y=null==n?void 0:n.weekStartsOn)&&void 0!==y?y:null==n||null===(k=n.locale)||void 0===k||null===(b=k.options)||void 0===b?void 0:b.weekStartsOn)&&void 0!==v?v:T.weekStartsOn)&&void 0!==f?f:null===(_=T.locale)||void 0===_||null===(E=_.options)||void 0===E?void 0:E.weekStartsOn)&&void 0!==w?w:0);if(!(D>=0&&D<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!x.localize)throw new RangeError("locale must contain localize property");if(!x.formatLong)throw new RangeError("locale must contain formatLong property");var P=h(e);if(!Z(P))throw new RangeError("Invalid time value");var M=fe(P),z=q(P,M),A={firstWeekContainsDate:S,weekStartsOn:D,locale:x,_originalDate:P},N=C.match(Oe).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,we[t])(e,x.formatLong):e})).join("").match(Ne).map((function(a){if("''"===a)return"'";var r=a[0];if("'"===r)return Le(a);var o=pe[r];if(o)return null!=n&&n.useAdditionalWeekYearTokens||!be(a)||_e(a,t,String(e)),null!=n&&n.useAdditionalDayOfYearTokens||!ke(a)||_e(a,t,String(e)),o(z,a,x.localize,A);if(r.match(Ie))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return a})).join("");return N}function Le(e){var t=e.match(Ue);return t?t[1].replace(Fe,"'"):e}function qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function We(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return qe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qe(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function He(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Ye=n(9611);function je(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,Ye.Z)(e,t)}function Be(e){return Be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Be(e)}function $e(e,t){if(t&&("object"===(0,p.Z)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Re(e)}function Ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Be(e);if(t){var r=Be(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return $e(this,n)}}function Ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Qe=n(7343);function Xe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(0,Qe.Z)(a.key),a)}}function Je(e,t,n){return t&&Xe(e.prototype,t),n&&Xe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Ke=function(){function e(){Ve(this,e),(0,r.Z)(this,"priority",void 0),(0,r.Z)(this,"subPriority",0)}return Je(e,[{key:"validate",value:function(e,t){return!0}}]),e}(),et=function(e){je(n,e);var t=Ge(n);function n(e,a,r,o,i){var s;return Ve(this,n),(s=t.call(this)).value=e,s.validateValue=a,s.setValue=r,s.priority=o,i&&(s.subPriority=i),s}return Je(n,[{key:"validate",value:function(e,t){return this.validateValue(e,this.value,t)}},{key:"set",value:function(e,t,n){return this.setValue(e,t,this.value,n)}}]),n}(Ke),tt=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",10),(0,r.Z)(Re(e),"subPriority",-1),e}return Je(n,[{key:"set",value:function(e,t){if(t.timestampIsSet)return e;var n=new Date(0);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}}]),n}(Ke),nt=function(){function e(){Ve(this,e),(0,r.Z)(this,"incompatibleTokens",void 0),(0,r.Z)(this,"priority",void 0),(0,r.Z)(this,"subPriority",void 0)}return Je(e,[{key:"run",value:function(e,t,n,a){var r=this.parse(e,t,n,a);return r?{setter:new et(r.value,this.validate,this.set,this.priority,this.subPriority),rest:r.rest}:null}},{key:"validate",value:function(e,t,n){return!0}}]),e}(),at=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",140),(0,r.Z)(Re(e),"incompatibleTokens",["R","u","t","T"]),e}return Je(n,[{key:"parse",value:function(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}},{key:"set",value:function(e,t,n){return t.era=n,e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(nt),rt=(Math.pow(10,8),/^(1[0-2]|0?\d)/),ot=/^(3[0-1]|[0-2]?\d)/,it=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,st=/^(5[0-3]|[0-4]?\d)/,ct=/^(2[0-3]|[0-1]?\d)/,lt=/^(2[0-4]|[0-1]?\d)/,ut=/^(1[0-1]|0?\d)/,dt=/^(1[0-2]|0?\d)/,pt=/^[0-5]?\d/,mt=/^[0-5]?\d/,ht=/^\d/,gt=/^\d{1,2}/,wt=/^\d{1,3}/,ft=/^\d{1,4}/,vt=/^-?\d+/,yt=/^-?\d/,kt=/^-?\d{1,2}/,bt=/^-?\d{1,3}/,_t=/^-?\d{1,4}/,Et=/^([+-])(\d{2})(\d{2})?|Z/,Ct=/^([+-])(\d{2})(\d{2})|Z/,Tt=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,xt=/^([+-])(\d{2}):(\d{2})|Z/,St=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function Dt(e,t){return e?{value:t(e.value),rest:e.rest}:e}function Pt(e,t){var n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function Mt(e,t){var n=t.match(e);return n?"Z"===n[0]?{value:0,rest:t.slice(1)}:{value:("+"===n[1]?1:-1)*(36e5*(n[2]?parseInt(n[2],10):0)+6e4*(n[3]?parseInt(n[3],10):0)+1e3*(n[5]?parseInt(n[5],10):0)),rest:t.slice(n[0].length)}:null}function zt(e){return Pt(vt,e)}function At(e,t){switch(e){case 1:return Pt(ht,t);case 2:return Pt(gt,t);case 3:return Pt(wt,t);case 4:return Pt(ft,t);default:return Pt(new RegExp("^\\d{1,"+e+"}"),t)}}function Nt(e,t){switch(e){case 1:return Pt(yt,t);case 2:return Pt(kt,t);case 3:return Pt(bt,t);case 4:return Pt(_t,t);default:return Pt(new RegExp("^-?\\d{1,"+e+"}"),t)}}function Ot(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function Ut(e,t){var n,a=t>0,r=a?t:1-t;if(r<=50)n=e||100;else{var o=r+50;n=e+100*Math.floor(o/100)-(e>=o%100?100:0)}return a?n:1-n}function Ft(e){return e%400==0||e%4==0&&e%100!=0}var It=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",130),(0,r.Z)(Re(e),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),e}return Je(n,[{key:"parse",value:function(e,t,n){var a=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return Dt(At(4,e),a);case"yo":return Dt(n.ordinalNumber(e,{unit:"year"}),a);default:return Dt(At(t.length,e),a)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n){var a=e.getUTCFullYear();if(n.isTwoDigitYear){var r=Ut(n.year,a);return e.setUTCFullYear(r,0,1),e.setUTCHours(0,0,0,0),e}var o="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(o,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(nt),Zt=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",130),(0,r.Z)(Re(e),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),e}return Je(n,[{key:"parse",value:function(e,t,n){var a=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return Dt(At(4,e),a);case"Yo":return Dt(n.ordinalNumber(e,{unit:"year"}),a);default:return Dt(At(t.length,e),a)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n,a){var r=Q(e,a);if(n.isTwoDigitYear){var o=Ut(n.year,r);return e.setUTCFullYear(o,0,a.firstWeekContainsDate),e.setUTCHours(0,0,0,0),V(e,a)}var i="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(i,0,a.firstWeekContainsDate),e.setUTCHours(0,0,0,0),V(e,a)}}]),n}(nt),Lt=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",130),(0,r.Z)(Re(e),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),e}return Je(n,[{key:"parse",value:function(e,t){return Nt("R"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){var a=new Date(0);return a.setUTCFullYear(n,0,4),a.setUTCHours(0,0,0,0),H(a)}}]),n}(nt),qt=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",130),(0,r.Z)(Re(e),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),e}return Je(n,[{key:"parse",value:function(e,t){return Nt("u"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(nt),Wt=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",120),(0,r.Z)(Re(e),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),e}return Je(n,[{key:"parse",value:function(e,t,n){switch(t){case"Q":case"QQ":return At(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}]),n}(nt),Ht=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",120),(0,r.Z)(Re(e),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),e}return Je(n,[{key:"parse",value:function(e,t,n){switch(t){case"q":case"qq":return At(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}]),n}(nt),Rt=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),(0,r.Z)(Re(e),"priority",110),e}return Je(n,[{key:"parse",value:function(e,t,n){var a=function(e){return e-1};switch(t){case"M":return Dt(Pt(rt,e),a);case"MM":return Dt(At(2,e),a);case"Mo":return Dt(n.ordinalNumber(e,{unit:"month"}),a);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),n}(nt),Yt=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",110),(0,r.Z)(Re(e),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),e}return Je(n,[{key:"parse",value:function(e,t,n){var a=function(e){return e-1};switch(t){case"L":return Dt(Pt(rt,e),a);case"LL":return Dt(At(2,e),a);case"Lo":return Dt(n.ordinalNumber(e,{unit:"month"}),a);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),n}(nt),jt=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",100),(0,r.Z)(Re(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),e}return Je(n,[{key:"parse",value:function(e,t,n){switch(t){case"w":return Pt(st,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return At(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n,a){return V(function(e,t,n){m(2,arguments);var a=h(e),r=d(t),o=K(a,n)-r;return a.setUTCDate(a.getUTCDate()-7*o),a}(e,n,a),a)}}]),n}(nt),Bt=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",100),(0,r.Z)(Re(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),e}return Je(n,[{key:"parse",value:function(e,t,n){switch(t){case"I":return Pt(st,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return At(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n){return H(function(e,t){m(2,arguments);var n=h(e),a=d(t),r=B(n)-a;return n.setUTCDate(n.getUTCDate()-7*r),n}(e,n))}}]),n}(nt),$t=[31,28,31,30,31,30,31,31,30,31,30,31],Gt=[31,29,31,30,31,30,31,31,30,31,30,31],Vt=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",90),(0,r.Z)(Re(e),"subPriority",1),(0,r.Z)(Re(e),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),e}return Je(n,[{key:"parse",value:function(e,t,n){switch(t){case"d":return Pt(ot,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return At(t.length,e)}}},{key:"validate",value:function(e,t){var n=Ft(e.getUTCFullYear()),a=e.getUTCMonth();return n?t>=1&&t<=Gt[a]:t>=1&&t<=$t[a]}},{key:"set",value:function(e,t,n){return e.setUTCDate(n),e.setUTCHours(0,0,0,0),e}}]),n}(nt),Qt=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",90),(0,r.Z)(Re(e),"subpriority",1),(0,r.Z)(Re(e),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),e}return Je(n,[{key:"parse",value:function(e,t,n){switch(t){case"D":case"DD":return Pt(it,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return At(t.length,e)}}},{key:"validate",value:function(e,t){return Ft(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365}},{key:"set",value:function(e,t,n){return e.setUTCMonth(0,n),e.setUTCHours(0,0,0,0),e}}]),n}(nt);function Xt(e,t,n){var a,r,o,i,s,c,l,u;m(2,arguments);var p=G(),g=d(null!==(a=null!==(r=null!==(o=null!==(i=null==n?void 0:n.weekStartsOn)&&void 0!==i?i:null==n||null===(s=n.locale)||void 0===s||null===(c=s.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==o?o:p.weekStartsOn)&&void 0!==r?r:null===(l=p.locale)||void 0===l||null===(u=l.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==a?a:0);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var w=h(e),f=d(t),v=w.getUTCDay(),y=f%7,k=(y+7)%7,b=(k<g?7:0)+f-v;return w.setUTCDate(w.getUTCDate()+b),w}var Jt=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",90),(0,r.Z)(Re(e),"incompatibleTokens",["D","i","e","c","t","T"]),e}return Je(n,[{key:"parse",value:function(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,a){return(e=Xt(e,n,a)).setUTCHours(0,0,0,0),e}}]),n}(nt),Kt=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",90),(0,r.Z)(Re(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),e}return Je(n,[{key:"parse",value:function(e,t,n,a){var r=function(e){var t=7*Math.floor((e-1)/7);return(e+a.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return Dt(At(t.length,e),r);case"eo":return Dt(n.ordinalNumber(e,{unit:"day"}),r);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,a){return(e=Xt(e,n,a)).setUTCHours(0,0,0,0),e}}]),n}(nt),en=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",90),(0,r.Z)(Re(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),e}return Je(n,[{key:"parse",value:function(e,t,n,a){var r=function(e){var t=7*Math.floor((e-1)/7);return(e+a.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return Dt(At(t.length,e),r);case"co":return Dt(n.ordinalNumber(e,{unit:"day"}),r);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,a){return(e=Xt(e,n,a)).setUTCHours(0,0,0,0),e}}]),n}(nt),tn=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",90),(0,r.Z)(Re(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),e}return Je(n,[{key:"parse",value:function(e,t,n){var a=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return At(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return Dt(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),a);case"iiiii":return Dt(n.day(e,{width:"narrow",context:"formatting"}),a);case"iiiiii":return Dt(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),a);default:return Dt(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),a)}}},{key:"validate",value:function(e,t){return t>=1&&t<=7}},{key:"set",value:function(e,t,n){return e=function(e,t){m(2,arguments);var n=d(t);n%7==0&&(n-=7);var a=1,r=h(e),o=r.getUTCDay(),i=((n%7+7)%7<a?7:0)+n-o;return r.setUTCDate(r.getUTCDate()+i),r}(e,n),e.setUTCHours(0,0,0,0),e}}]),n}(nt),nn=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",80),(0,r.Z)(Re(e),"incompatibleTokens",["b","B","H","k","t","T"]),e}return Je(n,[{key:"parse",value:function(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(Ot(n),0,0,0),e}}]),n}(nt),an=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",80),(0,r.Z)(Re(e),"incompatibleTokens",["a","B","H","k","t","T"]),e}return Je(n,[{key:"parse",value:function(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(Ot(n),0,0,0),e}}]),n}(nt),rn=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",80),(0,r.Z)(Re(e),"incompatibleTokens",["a","b","t","T"]),e}return Je(n,[{key:"parse",value:function(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(Ot(n),0,0,0),e}}]),n}(nt),on=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",70),(0,r.Z)(Re(e),"incompatibleTokens",["H","K","k","t","T"]),e}return Je(n,[{key:"parse",value:function(e,t,n){switch(t){case"h":return Pt(dt,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return At(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=12}},{key:"set",value:function(e,t,n){var a=e.getUTCHours()>=12;return a&&n<12?e.setUTCHours(n+12,0,0,0):a||12!==n?e.setUTCHours(n,0,0,0):e.setUTCHours(0,0,0,0),e}}]),n}(nt),sn=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",70),(0,r.Z)(Re(e),"incompatibleTokens",["a","b","h","K","k","t","T"]),e}return Je(n,[{key:"parse",value:function(e,t,n){switch(t){case"H":return Pt(ct,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return At(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=23}},{key:"set",value:function(e,t,n){return e.setUTCHours(n,0,0,0),e}}]),n}(nt),cn=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",70),(0,r.Z)(Re(e),"incompatibleTokens",["h","H","k","t","T"]),e}return Je(n,[{key:"parse",value:function(e,t,n){switch(t){case"K":return Pt(ut,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return At(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.getUTCHours()>=12&&n<12?e.setUTCHours(n+12,0,0,0):e.setUTCHours(n,0,0,0),e}}]),n}(nt),ln=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",70),(0,r.Z)(Re(e),"incompatibleTokens",["a","b","h","H","K","t","T"]),e}return Je(n,[{key:"parse",value:function(e,t,n){switch(t){case"k":return Pt(lt,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return At(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=24}},{key:"set",value:function(e,t,n){var a=n<=24?n%24:n;return e.setUTCHours(a,0,0,0),e}}]),n}(nt),un=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",60),(0,r.Z)(Re(e),"incompatibleTokens",["t","T"]),e}return Je(n,[{key:"parse",value:function(e,t,n){switch(t){case"m":return Pt(pt,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return At(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCMinutes(n,0,0),e}}]),n}(nt),dn=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",50),(0,r.Z)(Re(e),"incompatibleTokens",["t","T"]),e}return Je(n,[{key:"parse",value:function(e,t,n){switch(t){case"s":return Pt(mt,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return At(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCSeconds(n,0),e}}]),n}(nt),pn=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",30),(0,r.Z)(Re(e),"incompatibleTokens",["t","T"]),e}return Je(n,[{key:"parse",value:function(e,t){return Dt(At(t.length,e),(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))}},{key:"set",value:function(e,t,n){return e.setUTCMilliseconds(n),e}}]),n}(nt),mn=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",10),(0,r.Z)(Re(e),"incompatibleTokens",["t","T","x"]),e}return Je(n,[{key:"parse",value:function(e,t){switch(t){case"X":return Mt(Et,e);case"XX":return Mt(Ct,e);case"XXXX":return Mt(Tt,e);case"XXXXX":return Mt(St,e);default:return Mt(xt,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}]),n}(nt),hn=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",10),(0,r.Z)(Re(e),"incompatibleTokens",["t","T","X"]),e}return Je(n,[{key:"parse",value:function(e,t){switch(t){case"x":return Mt(Et,e);case"xx":return Mt(Ct,e);case"xxxx":return Mt(Tt,e);case"xxxxx":return Mt(St,e);default:return Mt(xt,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}]),n}(nt),gn=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",40),(0,r.Z)(Re(e),"incompatibleTokens","*"),e}return Je(n,[{key:"parse",value:function(e){return zt(e)}},{key:"set",value:function(e,t,n){return[new Date(1e3*n),{timestampIsSet:!0}]}}]),n}(nt),wn=function(e){je(n,e);var t=Ge(n);function n(){var e;Ve(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)(Re(e),"priority",20),(0,r.Z)(Re(e),"incompatibleTokens","*"),e}return Je(n,[{key:"parse",value:function(e){return zt(e)}},{key:"set",value:function(e,t,n){return[new Date(n),{timestampIsSet:!0}]}}]),n}(nt),fn={G:new at,y:new It,Y:new Zt,R:new Lt,u:new qt,Q:new Wt,q:new Ht,M:new Rt,L:new Yt,w:new jt,I:new Bt,d:new Vt,D:new Qt,E:new Jt,e:new Kt,c:new en,i:new tn,a:new nn,b:new an,B:new rn,h:new on,H:new sn,K:new cn,k:new ln,m:new un,s:new dn,S:new pn,X:new mn,x:new hn,t:new gn,T:new wn},vn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,yn=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,kn=/^'([^]*?)'?$/,bn=/''/g,_n=/\S/,En=/[a-zA-Z]/;function Cn(e){return e.match(kn)[1].replace(bn,"'")}const Tn=i.__,xn=e=>-1<(window.newspack_popups_wizard_data?.overlay_placements||[]).indexOf(e.options.placement),Sn=e=>"above_header"===e.options.placement,Dn=e=>{const t=window.newspack_popups_wizard_data?.custom_placements||{};return-1<Object.keys(t).indexOf(e.options.placement)},Pn={top:Tn("Top Overlay","newspack"),top_left:Tn("Top Left Overlay","newspack"),top_right:Tn("Top Right Overlay","newspack"),center:Tn("Center Overlay","newspack"),center_left:Tn("Center Left Overlay","newspack"),center_right:Tn("Center Right Overlay","newspack"),bottom:Tn("Bottom Overlay","newspack"),bottom_left:Tn("Bottom Left Overlay","newspack"),bottom_right:Tn("Bottom Right Overlay","newspack"),inline:Tn("Inline","newspack"),archives:Tn("In archive pages","newspack"),above_header:Tn("Above Header","newspack"),manual:Tn("Manual Only","newspack")},Mn=e=>{let{options:{frequency:t,placement:n}}=e;const a=window.newspack_popups_wizard_data?.custom_placements||{};return"manual"===t||a.hasOwnProperty(n)?Tn("Custom Placement","newspack"):Pn[n]},zn=e=>{const t=window.newspack_popups_wizard_data?.custom_placements,n=window.newspack_popups_wizard_data?.overlay_placements,a=Object.keys(Pn).filter((t=>xn(e)?-1<n.indexOf(t):-1===n.indexOf(t))).map((e=>({label:Pn[e],value:e})));return!xn(e)&&t?a.concat(Object.keys(t).map((e=>({label:t[e],value:e})))):a},An={once:Tn("Once a month","newspack"),weekly:Tn("Once a week","newspack"),daily:Tn("Once a day","newspack"),always:Tn("Every pageview","newspack"),custom:Tn("Custom frequency (edit prompt to manage)","newspack")},Nn=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"publish"!==e||t?"newspack-card__is-disabled":"newspack-card__is-supported"},On=e=>{const{categories:t,tags:n,campaign_groups:a,status:r}=e,o=[];if(a.length>0){const e=a.map((e=>{let{name:t}=e;return t})).join(", ");o.push((1===a.length?Tn("Campaign: ","newspack"):Tn("Campaigns: ","newspack"))+e)}return t.length>0&&o.push(Tn("Categories: ","newspack")+t.map((e=>e.name)).join(", ")),n.length>0&&o.push(Tn("Tags: ","newspack")+n.map((e=>e.name)).join(", ")),"pending"===r&&o.push(Tn("Pending review","newspack")),"future"===r&&o.push(Tn("Scheduled","newspack")),o.push(Tn("Frequency: ","newspack")+Zn(e)),o.length?o.join(" | "):null},Un=F()((async e=>{try{return await Promise.all(e.map((async e=>(await l()({path:(0,s.addQueryArgs)("/wp/v2/categories/"+e,{_fields:"name"})})).name)))}catch(e){return console.error(e),[]}})),Fn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const{configuration:n}=e,{favorite_categories:a=[],is_donor:r=!1,is_not_donor:o=!1,is_former_donor:s=!1,is_not_subscribed:c=!1,is_subscribed:l=!1,is_logged_in:u=!1,is_not_logged_in:d=!1,max_posts:p=0,max_session_posts:m=0,min_posts:h=0,min_session_posts:g=0,referrers:w="",referrers_not:f="",is_disabled:v=!1}=n,y=[];return v&&y.push(Tn("Segment disabled","newspack")),(0<h||0<p)&&y.push((0,i.sprintf)(Tn("Articles read (past 30 days): %1$s %2$s","newspack"),0<h?Tn("min ","newspack")+h:"",0<p?Tn("max ","newspack")+p:"")),(0<g||0<m)&&y.push((0,i.sprintf)(Tn("Articles read (session): %1$s %2$s","newspack"),0<g?Tn("min ","newspack")+g:"",0<m?Tn("max ","newspack")+m:"")),r&&y.push(Tn("Has donated","newspack")),o&&y.push(Tn("Has not donated","newspack")),s&&y.push(Tn("Has cancelled a recurring donation","newspack")),l&&y.push(Tn("Has subscribed","newspack")),c&&y.push(Tn("Has not subscribed","newspack")),u&&y.push(Tn("Has user account","newspack")),d&&y.push(Tn("Does not have user account","newspack")),w&&y.push(Tn("Referrers (matching): ")+w),f&&y.push(Tn("Referrers (excluding): ")+f),0<a.length&&(0<t.length?y.push((0,i.sprintf)(Tn("Favorite %1$s: %2$s","newspack"),t.length>1?Tn("categories","newspack"):Tn("category","newspack"),t.filter((e=>!!e)).join(", "))):y.push(Tn("Has favorite categories","newspack"))),y.length?y.join(" | "):null},In=(e,t)=>{const n=[];if("publish"===t.status&&(Sn(t)||xn(t)||Dn(t))){const n=t.categories,a=e.filter((e=>{const a=e.categories,r=0===n.length&&0===a.length||n.some((e=>a.some((t=>e.term_id===t.term_id))));return"publish"===e.status&&e.id!==t.id&&(o=e,t.options.placement===o.options.placement)&&((e,t)=>{const n=e?e.split(","):[],a=t?t.split(","):[];return!n.length&&!a.length||n.some((e=>-1<a.indexOf(e)))})(t.options.selected_segment_id,e.options.selected_segment_id)&&r;var o})),r=(0,O.applyFilters)("newspack.wizards.campaigns.conflictingPrompts",a,t,e);return 0<r.length?(0,o.createElement)(o.Fragment,null,(0,o.createElement)("strong",null,(0,i.sprintf)(Tn("%s detected:","newspack"),1<r.length?Tn("Conflicts","newspack"):Tn("Conflict","newspack"))),(0,o.createElement)("ul",null,r.map((e=>(0,o.createElement)("li",{key:e.id},(0,o.createElement)("p",{"data-testid":`conflict-warning-${t.id}`},(0,o.createElement)("strong",null,(0,i.sprintf)("%s: ",e.title)),(0,o.createElement)("span",null,((e,t)=>xn(e)||Sn(e)?(0,i.sprintf)(Tn("If multiple%1$s %2$s share the same segment%3$s, only the most recent one will be displayed."),0===t.length?Tn(" uncategorized","newspack"):"",Sn(e)?Tn("above-header prompts","newspack"):Tn("overlays","newspack"),0<t.length?Tn(" and category filtering","newspack"):""):Dn(e)?(0,i.sprintf)(Tn("If multiple%1$s prompts in the same custom placement share the same segment%2$s, only the most recent one will be displayed."),0===t.length?Tn(" uncategorized","newspack"):"",0<t.length?Tn(" and category filtering","newspack"):""):"")(t,n)))))))):null}return n.length?n.join(" "):null},Zn=e=>{let{options:{frequency:t}}=e;return An[t]},Ln=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return Ze(e,"yyyy-MM-dd")},qn=e=>function(e,t,n,a){var r,o,i,s,c,l,u,g,w,f,v,y,k,b,_,E,C,T;m(3,arguments);var x=String(e),S=String(t),D=G(),P=null!==(r=null!==(o=null==a?void 0:a.locale)&&void 0!==o?o:D.locale)&&void 0!==r?r:Ae;if(!P.match)throw new RangeError("locale must contain match property");var M=d(null!==(i=null!==(s=null!==(c=null!==(l=null==a?void 0:a.firstWeekContainsDate)&&void 0!==l?l:null==a||null===(u=a.locale)||void 0===u||null===(g=u.options)||void 0===g?void 0:g.firstWeekContainsDate)&&void 0!==c?c:D.firstWeekContainsDate)&&void 0!==s?s:null===(w=D.locale)||void 0===w||null===(f=w.options)||void 0===f?void 0:f.firstWeekContainsDate)&&void 0!==i?i:1);if(!(M>=1&&M<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var z=d(null!==(v=null!==(y=null!==(k=null!==(b=null==a?void 0:a.weekStartsOn)&&void 0!==b?b:null==a||null===(_=a.locale)||void 0===_||null===(E=_.options)||void 0===E?void 0:E.weekStartsOn)&&void 0!==k?k:D.weekStartsOn)&&void 0!==y?y:null===(C=D.locale)||void 0===C||null===(T=C.options)||void 0===T?void 0:T.weekStartsOn)&&void 0!==v?v:0);if(!(z>=0&&z<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===S)return""===x?h(n):new Date(NaN);var A,N={firstWeekContainsDate:M,weekStartsOn:z,locale:P},O=[new tt],U=S.match(yn).map((function(e){var t=e[0];return t in we?(0,we[t])(e,P.formatLong):e})).join("").match(vn),F=[],I=We(U);try{var Z=function(){var t=A.value;null!=a&&a.useAdditionalWeekYearTokens||!be(t)||_e(t,S,e),null!=a&&a.useAdditionalDayOfYearTokens||!ke(t)||_e(t,S,e);var n=t[0],r=fn[n];if(r){var o=r.incompatibleTokens;if(Array.isArray(o)){var i=F.find((function(e){return o.includes(e.token)||e.token===n}));if(i)throw new RangeError("The format string mustn't contain `".concat(i.fullToken,"` and `").concat(t,"` at the same time"))}else if("*"===r.incompatibleTokens&&F.length>0)throw new RangeError("The format string mustn't contain `".concat(t,"` and any other token at the same time"));F.push({token:n,fullToken:t});var s=r.run(x,t,P.match,N);if(!s)return{v:new Date(NaN)};O.push(s.setter),x=s.rest}else{if(n.match(En))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");if("''"===t?t="'":"'"===n&&(t=Cn(t)),0!==x.indexOf(t))return{v:new Date(NaN)};x=x.slice(t.length)}};for(I.s();!(A=I.n()).done;){var L=Z();if("object"===(0,p.Z)(L))return L.v}}catch(e){I.e(e)}finally{I.f()}if(x.length>0&&_n.test(x))return new Date(NaN);var W=O.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return O.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),H=h(n);if(isNaN(H.getTime()))return new Date(NaN);var R,Y=q(H,fe(H)),j={},B=We(W);try{for(B.s();!(R=B.n()).done;){var $=R.value;if(!$.validate(Y,N))return new Date(NaN);var V=$.set(Y,j,N);Array.isArray(V)?(Y=V[0],He(j,V[1])):Y=V}}catch(e){B.e(e)}finally{B.f()}return Y}(e,"yyyy-MM-dd",new Date),Wn=i.__,{SettingsCard:Hn}=f.Zr,Rn=e=>{let{prompt:t,disabled:n,onClose:a,segments:r,updatePopup:s}=e;const[c,l]=f.PT.useObjectState(t),{excluded_categories:u=[],excluded_tags:d=[]}=c.options||{},[p,m]=(0,o.useState)(0<u.length||0<d.length||!1),h=(c.options.selected_segment_id||"").split(",");return(0,o.createElement)(f.u_,{title:t.title,onRequestClose:a,isWide:!0},(0,o.createElement)(f.zx,{onClick:()=>a(),className:"screen-reader-text"},Wn("Close Modal","newspack")),(0,o.createElement)(f.rj,{gutter:64,columns:1},(0,o.createElement)(Hn,{title:Wn("Campaigns","newspack"),description:Wn("Assign a prompt to one or more campaigns for easier management","newspack"),columns:1,className:"newspack-settings__campaigns",noBorder:!0},(0,o.createElement)(f.HZ,{disabled:n,value:c.campaign_groups||[],onChange:e=>l({campaign_groups:e}),label:Wn("Campaigns","newspack"),taxonomy:"newspack_popups_taxonomy",hideLabelFromVision:!0})),(0,o.createElement)(Hn,{title:Wn("Settings","newspack"),description:Wn("When and how should the prompt be displayed","newspack"),columns:xn(t)?3:2,className:"newspack-settings__settings",rowGap:16,noBorder:!0},(0,o.createElement)(f.Yw,{label:Wn("Frequency","newspack"),disabled:n,onChange:e=>{l({options:{frequency:e}})},options:Object.keys(An).map((e=>({label:An[e],value:e}))),value:c.options.frequency}),(0,o.createElement)(f.Yw,{label:xn(t)?Wn("Position"):Wn("Placement"),disabled:n,onChange:e=>{l({options:{placement:e}})},options:zn(t),value:c.options.placement}),xn(t)&&(0,o.createElement)(f.Yw,{label:Wn("Size"),disabled:n,onChange:e=>{l({options:{overlay_size:e}})},options:window.newspack_popups_wizard_data?.overlay_sizes,value:c.options.overlay_size})),(0,o.createElement)(Hn,{title:Wn("Targeting","newspack"),description:()=>(0,o.createElement)(o.Fragment,null,Wn("Under which conditions should the prompt be displayed","newspack"),(0,o.createElement)("br",null),Wn("If multiple conditions are set, all will have to be satisfied in order to display the prompt","newspack")),className:"newspack-settings__targeting",columns:1,rowGap:16,noBorder:!0},(0,o.createElement)(f.rj,{columns:3,rowGap:16},(0,o.createElement)(f.RG,{label:Wn("Segment","newspack"),disabled:n,hideHelpFromVision:!0,value:r.filter((e=>{let{id:t}=e;return h.indexOf(t)>-1})).map((e=>e.name)),onChange:e=>{const t=r.filter((t=>-1<e.indexOf(t.name))).map((e=>e.id));l({options:{selected_segment_id:t.join(",")}})},suggestions:r.filter((e=>-1===h.indexOf(e.id))).map((e=>e.name)),description:Wn("Prompt will only appear to reader belonging to the specified segments.","newspack")}),(0,o.createElement)(f.HZ,{label:Wn("Post categories","newspack "),disabled:n,hideHelpFromVision:!0,value:c.categories||[],onChange:e=>l({categories:e}),description:Wn("Prompt will only appear on posts with the specified categories.","newspack")}),(0,o.createElement)(f.HZ,{label:Wn("Post tags","newspack "),disabled:n,hideHelpFromVision:!0,taxonomy:"tags",value:c.tags||[],onChange:e=>l({tags:e}),description:Wn("Prompt will only appear on posts with the specified tags.","newspack")})),(0,o.createElement)("div",null,(0,o.createElement)(f.zx,{isLink:!0,onClick:()=>m(!p)},(0,i.sprintf)(Wn("%s Advanced Settings","newspack_popups_taxonomy"),Wn(p?"Hide":"Show","newspack")))),p&&(0,o.createElement)(f.rj,{columns:3,rowGap:16},(0,o.createElement)(f.HZ,{label:Wn("Category Exclusions","newspack "),disabled:n,hideHelpFromVision:!0,value:u||[],onChange:e=>l({options:{excluded_categories:e.map((e=>e.id))}}),description:Wn("Prompt will not appear on posts with the specified categories.","newspack")}),(0,o.createElement)(f.HZ,{label:Wn("Tag Exclusions","newspack "),disabled:n,hideHelpFromVision:!0,taxonomy:"tags",value:d||[],onChange:e=>l({options:{excluded_tags:e.map((e=>e.id))}}),description:Wn("Prompt will not appear on posts with the specified tags.","newspack")})))),(0,o.createElement)(f.Zb,{buttonsCard:!0,noBorder:!0,className:"justify-end"},(0,o.createElement)(f.zx,{onClick:a,variant:"secondary"},Wn("Cancel","newspack")),(0,o.createElement)(f.zx,{onClick:()=>{s(c).then(a)},variant:"primary"},Wn("Save","newspack"))))},Yn=i.__,jn=e=>{let{value:t,description:n}=e;return(0,o.createElement)("div",{className:"newspack-popups-wizard__analytics-data--value"},(0,o.createElement)("strong",null,t,"%"),(0,o.createElement)("small",null,n))},Bn=e=>{let{error:t,id:n,analyticsData:a}=e;if(t)return(0,o.createElement)(f.RZ,{className:"newspack-popups-wizard__analytics-data--icon",text:Yn("Could not fetch Analytics data","newspack")});if(!a)return(0,o.createElement)("div",{className:"newspack-popups-wizard__analytics-data--icon"},(0,o.createElement)(f.Pi,null));const{seen:r,load:i,form_submission:s}=a[n]||{};if(!r||!i)return(0,o.createElement)(f.RZ,{className:"newspack-popups-wizard__analytics-data--icon",text:Yn("No Analytics data","newspack")});const c=Math.min(100,Math.round(r/i*100)),l=()=>(0,o.createElement)(jn,{value:c,description:Yn("viewability","newspack")});if(s){const e=Math.min(100,Math.round(s/r*100));return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(jn,{value:e,description:Yn("conversion rate","newspack")}),l())}return l()},$n=e=>{const[t,n]=(0,o.useState)(!1),[r,s]=(0,o.useState)(!1),[c,u]=(0,o.useState)(!1),[d,p]=(0,o.useState)(null),{className:m,description:h,duplicated:g,duplicatePopup:w,inFlight:v,resetDuplicated:y,prompt:b={},segments:_,warning:E,promptsAnalyticsData:C}=e,{campaign_groups:T,id:x,edit_link:S,title:D}=b;(0,o.useEffect)((()=>{c&&!d&&P()}),[c]);const P=async()=>{const e=parseInt(b?.duplicate_of||b.id);try{const t=await l()({path:`/newspack/v1/wizard/newspack-popups-wizard/${e}/${b.id}/duplicate`});p(t)}catch(e){p(D+Yn(" copy","newspack-popups"))}};return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(f.fM,{isSmall:!0,badge:Mn(b),className:m,title:D.length?(0,M.decodeEntities)(D):Yn("(no title)","newspack"),titleLink:(0,M.decodeEntities)(S),key:x,description:h,notification:E,notificationLevel:"error",actionText:(0,o.createElement)(o.Fragment,null,(0,o.createElement)(Bn,{error:C?.error,analyticsData:C,id:b.id}),(0,o.createElement)("div",{className:"newspack-popups-wizard__buttons"},(0,o.createElement)(f.zx,{className:t&&"popover-active",onClick:()=>n(!t),icon:z.Z,label:Yn("Prompt settings","newspack"),tooltipPosition:"bottom center"}),(0,o.createElement)(f.zx,{className:r&&"popover-active",onClick:()=>s(!r),icon:k.Z,label:Yn("More options","newspack"),tooltipPosition:"bottom center"}),r&&(0,o.createElement)(N,(0,a.Z)({onFocusOutside:()=>s(!1),prompt:b,setIsDuplicatePromptModalVisible:u},e))))}),t&&(0,o.createElement)(Rn,{prompt:b,disabled:v,onClose:()=>n(!1),segments:_,updatePopup:e.updatePopup}),c&&(0,o.createElement)(f.u_,{className:"newspack-popups__duplicate-modal",title:(0,i.sprintf)(Yn("Duplicate %s","newspack"),D),onRequestClose:()=>{u(!1),p(null),y()}},g?(0,o.createElement)(o.Fragment,null,(0,o.createElement)(f.qX,{isSuccess:!0,noticeText:(0,i.sprintf)(Yn("Duplicate of %s created as a draft.","newspack"),D)}),!T&&(0,o.createElement)(f.qX,{isWarning:!0,noticeText:Yn("This prompt is currently not assigned to any campaign.","newspack")}),(0,o.createElement)(f.Zb,{buttonsCard:!0,noBorder:!0,className:"justify-end"},(0,o.createElement)(f.zx,{isSecondary:!0,onClick:()=>{u(!1),p(null),y()}},Yn("Close","newspack")),(0,o.createElement)(f.zx,{isPrimary:!0,href:`/wp-admin/post.php?post=${g}&action=edit`},Yn("Edit","newspack")))):(0,o.createElement)(o.Fragment,null,!T&&(0,o.createElement)(f.qX,{isWarning:!0,noticeText:Yn("This prompt will not be assigned to any campaign.","newspack")}),(0,o.createElement)(f.w4,{disabled:v||null===d,label:Yn("Title","newspack"),value:d,onChange:e=>p(e)}),(0,o.createElement)(f.Zb,{buttonsCard:!0,noBorder:!0,className:"justify-end"},(0,o.createElement)(f.zx,{disabled:v,isSecondary:!0,onClick:()=>{u(!1),p(null),y()}},Yn("Cancel","newspack")),(0,o.createElement)(f.zx,{disabled:v||null===d,isPrimary:!0,onClick:()=>{const e=d.trim()||P();w(x,e)}},Yn("Duplicate","newspack"))))))},Gn=(0,o.createElement)(b.SVG,{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},(0,o.createElement)(b.Path,{d:"M4 9h16v2H4V9zm0 4h10v2H4v-2z"})),Vn=(0,o.createElement)(b.SVG,{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},(0,o.createElement)(b.Path,{d:"M17 14H7v3h10v-3z"}),(0,o.createElement)(b.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18 4H6a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2zM6 5.5h12a.5.5 0 01.5.5v12a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5z"})),Qn=(0,o.createElement)(b.SVG,{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},(0,o.createElement)(b.Path,{d:"M16 10H8v4h8v-4z"}),(0,o.createElement)(b.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18 4H6a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2zM6 5.5h12a.5.5 0 01.5.5v12a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5z"})),Xn=(0,o.createElement)(b.SVG,{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},(0,o.createElement)(b.Path,{d:"M17 7H7v3h10V7z"}),(0,o.createElement)(b.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18 4H6a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2zM6 5.5h12a.5.5 0 01.5.5v12a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5z"})),Jn=(0,o.createElement)(b.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,o.createElement)(b.Path,{d:"M18 4H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H6c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h12c.3 0 .5.2.5.5v12zM7 11h2V9H7v2zm0 4h2v-2H7v2zm3-4h7V9h-7v2zm0 4h7v-2h-7v2z"})),Kn=(0,o.createElement)(b.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,o.createElement)(b.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v3.5h-15V5c0-.3.2-.5.5-.5zm8 5.5h6.5v3.5H13V10zm-1.5 3.5h-7V10h7v3.5zm-7 5.5v-4h7v4.5H5c-.3 0-.5-.2-.5-.5zm14.5.5h-6V15h6.5v4c0 .3-.2.5-.5.5z"})),ea=i.__,ta=(e,t,n)=>{const a=[];return e&&a.push(`placement=${e}`),+t>0&&a.push(`group=${t}`),n&&a.push(`segment=${n}`),"/wp-admin/post-new.php?post_type=newspack_popups_cpt&"+a.join("&")},na=()=>{newspack_aux_data.popups_cookie_name&&window.location.host.split(".").reduce(((e,t,n,a)=>(e.push(a.slice(-(n+1)).join(".")),e)),[]).map((e=>T.remove(newspack_aux_data.popups_cookie_name,{domain:`.${e}`})))},aa=e=>{const{campaignData:t,campaignId:n,segment:r}=e,[i,s]=(0,o.useState)(!1),[c,l]=(0,o.useState)([]),{label:u,id:d,prompts:p}=r,m="unassigned"!==n?parseInt(n):-1;(0,o.useEffect)((()=>{h()}),[r]);const h=async()=>{0<r.configuration?.favorite_categories?.length&&l(await Un(r.configuration.favorite_categories))};let g;return g="unassigned"===n?ea("No unassigned prompts in this segment.","newspack"):t?ea("No prompts in this segment for","newspack")+" "+t.name+".":ea("No active prompts in this segment.","newspack"),(0,o.createElement)(f.Zb,{isSmall:!0,className:"newspack-campaigns__segment-group__card"},(0,o.createElement)("div",{className:"newspack-campaigns__segment-group__card__segment"},(0,o.createElement)("div",{className:"newspack-campaigns__segment-group__card__segment-title"},(0,o.createElement)("h3",null,d?(0,o.createElement)(f.zx,{href:`#/segments/${d}`,label:ea("Edit Segment ","newspack"),isLink:!0,showTooltip:!0,tooltipPosition:"bottom center"},ea("Segment: ","newspack"),u):u),(0,o.createElement)("span",{className:"newspack-campaigns__segment-group__description"},d?Fn(r,c):ea("All readers, regardless of segment","newspack"))),(0,o.createElement)("div",{className:"newspack-campaigns__segment-group__card__segment-actions"},(0,o.createElement)(P,{campaign:!!n&&m,segment:d,showUnpublished:!!n,onClose:na,renderButton:e=>{let{showPreview:t}=e;return(0,o.createElement)(f.zx,{isSmall:!0,variant:"tertiary",onClick:()=>{na(),newspack_aux_data.popups_cookie_name&&T.set(newspack_aux_data.popups_cookie_name,`preview-${Date.now()}`,{domain:"."+window.location.host}),t()}},ea("Preview Segment","newspack"))}}),"unassigned"!==n&&(0,o.createElement)(o.Fragment,null,(0,o.createElement)(f.zx,{isSmall:!0,variant:"secondary",onClick:()=>s(!i)},ea("Add New Prompt","newspack")),i&&(0,o.createElement)(f.u_,{title:ea("Add New Prompt","newspack"),onRequestClose:()=>s(!1),shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,isWide:!0},(0,o.createElement)(f.rj,{gutter:32,columns:3},(0,o.createElement)(f.Wu,{href:ta("overlay-center",n,d),title:ea("Center Overlay","newspack"),desc:ea("Fixed at the center of the screen","newspack"),icon:Qn}),(0,o.createElement)(f.Wu,{href:ta("overlay-top",n,d),title:ea("Top Overlay","newspack"),desc:ea("Fixed at the top of the screen","newspack"),icon:Xn}),(0,o.createElement)(f.Wu,{href:ta("overlay-bottom",n,d),title:ea("Bottom Overlay","newspack"),desc:ea("Fixed at the bottom of the screen","newspack"),icon:Vn}),(0,o.createElement)(f.Wu,{href:ta(null,n,d),title:ea("Inline","newspack"),desc:ea("Embedded in content","newspack"),icon:Gn}),(0,o.createElement)(f.Wu,{href:ta("archives",n,d),title:ea("In Archive Pages","newspack"),desc:ea("Embedded once or many times in archive pages","newspack"),icon:Jn}),(0,o.createElement)(f.Wu,{href:ta("above-header",n,d),title:ea("Above Header","newspack"),desc:ea("Embedded at the very top of the page","newspack"),icon:S}),(0,o.createElement)(f.Wu,{href:ta("custom",n,d),title:ea("Custom Placement","newspack"),desc:ea("Only appears when placed in content","newspack"),icon:D.Z}),(0,o.createElement)(f.Wu,{href:ta("manual",n,d),title:ea("Manual Only","newspack"),desc:ea("Only appears where Single Prompt block is inserted","newspack"),icon:Kn})))))),(0,o.createElement)(f.Zb,{noBorder:!0,className:"newspack-campaigns__segment-group__action-cards"},p.map((t=>(0,o.createElement)($n,(0,a.Z)({className:Nn(t.status,r.configuration.is_disabled),description:On(t),warning:In(p,t),key:t.id,prompt:t},e))))),p.length<1?(0,o.createElement)("p",null,g):"")},ra=(0,o.createContext)({prompts:[]});var oa=n(4184),ia=n.n(oa),sa=n(3311),ca=n.n(sa);const la=i.__,{useHistory:ua}=f.F0,da="active",pa=e=>la(2===e?"Rename Campaign":1===e?"Duplicate Campaign":"Add New Campaign","newspack"),ma=(e,t)=>{if("trash"===t)return e.filter((e=>{let{status:t}=e;return"trash"===t}));const n=e.filter((e=>{let{status:t}=e;return"trash"!==t}));return da===t?n.filter((e=>{let{status:t}=e;return"publish"===t})):"all"===t?n.filter((e=>{let{status:t}=e;return"trash"!==t})):"unassigned"===t?n.filter((e=>{let{campaign_groups:t}=e;return!t||!t.length})):n.filter((e=>{let{campaign_groups:n}=e;return n&&n.find((e=>+e.term_id==+t))}))},ha=(0,f.a4)((e=>{const{campaignId:t=da,campaigns:n=[],manageCampaignGroup:r,segments:i,createCampaignGroup:s,duplicateCampaignGroup:c,deleteCampaignGroup:l,archiveCampaignGroup:u,renameCampaignGroup:d}=e,p=(0,o.useRef)(null),[m,h]=(0,o.useState)(),[g,w]=(0,o.useState)(),[v,b]=(0,o.useState)(),[_,C]=(0,o.useState)(),T=(0,o.useContext)(ra),x=ma(T,t),S=ma(T,"unassigned").length;(0,o.useEffect)((()=>{g&&p.current.querySelector("input").focus()}),[g]);const D=ua(),P=e=>{3===v?s(e):2===v?d(t,e):1===v&&c(t,e),w(!1)},M=n.filter((e=>{let{status:t}=e;return"archive"!==t})),z=n.filter((e=>{let{status:t}=e;return"archive"===t})),A=((e,t)=>t.reduce(((t,n)=>+e>0&&+e==+n.term_id?n:t),null))(t,n),N=[{key:da,name:la("Active Prompts","newspack")},{key:"all",name:la("All Prompts","newspack")},{key:"trash",name:la("Trash","newspack")},...S?[{key:"unassigned",name:la("Unassigned Prompts","newspack")}]:[],...M.length?[{key:"header-campaigns",name:la("Campaigns","newspack"),className:"is-header"}]:[],...M.map((e=>{let{term_id:t,name:n}=e;return{key:String(t),name:n,className:"newspack-campaigns__campaign-group__select-control-group-item"}})),...z.length?[{key:"header-archived-campaigns",name:la("Archived Campaigns","newspack"),className:"is-header"}]:[],...z.map((e=>{let{term_id:t,name:n}=e;return{key:String(t),name:n+" "+la("(archived)","newspack"),className:"newspack-campaigns__campaign-group__select-control-group-item"}}))];return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(f.Zb,{headerActions:!0,noBorder:!0},(0,o.createElement)("div",{className:"newspack-campaigns__campaign-group__filter-group-actions"},(0,o.createElement)(f.Yq,{label:la("Campaigns","newspack"),options:N.map((e=>({...e,className:ia()(e.className,{"is-selected":e.key===t})}))),onChange:e=>{let{selectedItem:{key:t}}=e;return da===t?D.push("/campaigns"):D.push(`/campaigns/${t}`)},value:ca()(N,["key",t||da]),hideLabelFromVision:!0}),A&&(0,o.createElement)("div",{className:"newspack-campaigns__campaign-group__filter-group-actions__button"},(0,o.createElement)(f.zx,{className:m&&"popover-active",onClick:()=>h(!m),icon:k.Z,label:la("Actions","newspack"),tooltipPosition:"bottom center"}),m&&(0,o.createElement)(E,{dismiss:()=>h(!1),isArchive:A&&"archive"===A.status,onActivate:()=>r(x),onArchive:()=>u(t,!0),onDeactivate:()=>r(x,"DELETE"),onDelete:()=>l(t),onDuplicate:()=>{w(!0),C(""),b(1)},onRename:()=>{C(A.name),w(!0),b(2)},onUnarchive:()=>u(t,!1),hasPrompts:x.length>0,hasPublished:x.some((e=>{let{status:t}=e;return"publish"===t}))}))),(0,o.createElement)("div",{className:"newspack-campaigns__campaign-group__add-new-button"},(0,o.createElement)(f.zx,{isPrimary:!0,onClick:()=>{w(!g),C(""),b(3)}},la("Add New Campaign","newspack")),g&&(0,o.createElement)(f.u_,{title:pa(v),onRequestClose:()=>{w(!1)}},(0,o.createElement)("div",{ref:p},(0,o.createElement)(f.w4,{placeholder:la("Campaign Name","newspack"),onChange:C,label:la("Campaign Name","newspack"),hideLabelFromVision:!0,value:_,onKeyDown:e=>{y.ENTER===e.keyCode&&""!==_&&(e.preventDefault(),P(_))}})),(0,o.createElement)(f.Zb,{buttonsCard:!0,noBorder:!0,className:"justify-end"},(0,o.createElement)(f.zx,{variant:"secondary",onClick:()=>{w(!1)}},la("Cancel","newspack")),(0,o.createElement)(f.zx,{variant:"primary",disabled:!_,onClick:()=>P(_)},(e=>la(2===e?"Rename":1===e?"Duplicate":"Add","newspack"))(v)))))),((e,t)=>{const n=[];return n.push(...e.map((e=>{let{name:n,id:a,configuration:r}=e;return{label:n,id:a,configuration:r,prompts:t.filter((e=>{let{options:{selected_segment_id:t}}=e;return!!t&&-1<t.split(",").indexOf(a)}))}}))),n.push({label:la("Everyone","newspack"),id:"",prompts:t.filter((e=>{let{options:{selected_segment_id:t}}=e;return!t})),configuration:{}}),n})(i,x).map(((n,r)=>da===t&&n.configuration.is_disabled?null:(0,o.createElement)(aa,(0,a.Z)({key:r,segment:n,campaignId:t,campaignData:A},e)))))}));var ga=n(3904);const wa=i.__,fa=e=>Ze(qn(e),"MMM do yyyy"),va=e=>{let{filtersState:t,labelFilters:n,eventActionFilters:a,onChange:r,disabled:i}=e;const[s,c]=(0,o.useState)(!1);return(0,o.createElement)("div",{className:"newspack-campaigns-wizard-analytics__filters"},(0,o.createElement)("div",{className:"newspack-campaigns-wizard-analytics__filters__date"},(0,o.createElement)(f.zx,{isSecondary:!0,isSmall:!0,icon:ga.Z,iconSize:18,disabled:i,onClick:()=>c((e=>!e))},`${fa(t.start_date)} ${wa("to","newspack")} ${fa(t.end_date)}`),s&&(0,o.createElement)(f.u_,{title:wa("Choose a date range","newspack"),onRequestClose:()=>{c(!1)},isNarrow:!0},(0,o.createElement)(f.Dw,{start:qn(t.start_date),end:qn(t.end_date),onChange:e=>{r("SET_RANGE_FILTER")({start_date:Ln(e.start),end_date:Ln(e.end)}),c(!1)}}))),(0,o.createElement)("div",{className:"newspack-campaigns-wizard-analytics__filters__group"},(0,o.createElement)(f.Yw,{options:[{label:wa("All Prompts","newspack"),value:""},...n],onChange:r("SET_EVENT_LABEL_FILTER"),value:t.event_label_id,disabled:i,isSmall:!0}),(0,o.createElement)(f.Yw,{options:[{label:wa("All Events","newspack"),value:""},...a],onChange:r("SET_EVENT_ACTION_FILTER"),value:t.event_action,disabled:i,isSmall:!0})))};var ya=n(3467);const ka=e=>{let{data:t}=e;return(0,o.createElement)(ya.kL,{width:"100%",height:"400px",chartType:"AreaChart",data:t,options:{animation:{duration:500,easing:"in-out",startup:!0},legend:"none"}})};var ba=n(7955),_a=n.n(ba),Ea=n(8298),Ca=n.n(Ea);const Ta=i.__,xa=e=>`${String((100*e).toFixed(2)).replace(/\.00$/,"")}%`,Sa=e=>{let{keyMetrics:t,filtersState:n,labelFilters:a,isLoading:r,postEditLink:i}=e;const s=""!==n.event_label_id&&a.find((e=>{let{value:t}=e;return t===n.event_label_id})),{seen:c,form_submissions:l,link_clicks:u}=t,d=l>=0&&c>0,p=u>=0&&c>0;if(""!==n.event_action)return(0,o.createElement)(f.qX,{noticeText:Ta('Choose "All Events" filter to see key metrics.',"newspack")});const m=Ta("n/a","newspack"),h=e=>1e6<=c?Math.round(100*e)/100:Math.round(e),g=e=>1e4<e?Ca()(e,h):e.toLocaleString();return(0,o.createElement)("div",{className:"newspack-campaigns-wizard-analytics__info"},(0,o.createElement)("h2",null,s?`${s.label}:`:Ta("All:","newspack"),i&&(0,o.createElement)(o.Fragment,null," ","(",(0,o.createElement)("a",{href:_a()(i)},"edit"),")")),(0,o.createElement)("div",{className:"newspack-campaigns-wizard-analytics__info__sections"},[{label:Ta("Seen","newspack"),value:g(c),withSeparator:!0},{label:Ta("Conversion Rate","newspack"),value:d?xa(l/c):m},{label:Ta("Form Submissions","newspack"),value:d?g(l):m,withSeparator:!0},{label:Ta("Click-through Rate","newspack"),value:p?xa(u/c):m},{label:Ta("Link Clicks","newspack"),value:p?g(u):m}].map(((e,t)=>(0,o.createElement)("div",{className:ia()("newspack-campaigns-wizard-analytics__info__sections__section",{"newspack-campaigns-wizard-analytics__info__sections__section--with-separator":e.withSeparator,"newspack-campaigns-wizard-analytics__info__sections__section--dimmed":!r&&e.value===m}),key:t},(0,o.createElement)("h2",null,r?"-":e.value),(0,o.createElement)("span",null,e.label))))),!s&&1!==a.length&&(0,o.createElement)(f.qX,{noticeText:Ta("These are aggregated metrics for multiple campaigns. Some of them might not have links or forms, which can skew the displayed rates.","newspack"),isWarning:!0}))};var Da=n(5578),Pa=n.n(Da);const Ma={event_label_id:"",event_action:"",start_date:Ln(w(new Date,7)),end_date:Ln()},za=(e,t)=>{switch(t.type){case"SET_RANGE_FILTER":return{...e,start_date:t.payload.start_date,end_date:t.payload.end_date};case"SET_EVENT_LABEL_FILTER":return{...e,event_label_id:t.payload};case"SET_EVENT_ACTION_FILTER":return{...e,event_action:t.payload};default:return e}},Aa={labels:[],actions:[]},Na=(e,t)=>{if("UPDATE_ALL"===t.type){const{labels:n,actions:a,...r}=t.payload;return{...e,...r,labels:Pa()([...e.labels,...n],"value"),actions:Pa()([...e.actions,...a],"value")}}return e},Oa=(0,f.a4)((e=>{let{setError:t}=e;const[n,a]=(0,o.useReducer)(za,Ma),[r,i]=(0,o.useState)(),[s,c]=(0,o.useState)(!1),[d,p]=(0,o.useReducer)(Na,Aa),{report:m,labels:h,actions:g,key_metrics:w,post_edit_link:v}=d;return(0,o.useEffect)((()=>{c(!0),l()({path:`/newspack/v1/popups-analytics/report/?${(0,u.stringify)(n)}`}).then((e=>{p({type:"UPDATE_ALL",payload:e}),c(!1)})).catch((e=>{"newspack_campaign_analytics_sitekit_disconnected"===e.code||"newspack_campaign_analytics_sitekit_auth"===e.code?(i(e.message),c(!1)):t(e)}))}),[n]),r?(0,o.createElement)(f.qX,{rawHTML:!0,isWarning:!0,noticeText:`<a href="/wp-admin/admin.php?page=googlesitekit-splash">${r}</a>`}):(0,o.createElement)("div",{className:ia()("newspack-campaigns-wizard-analytics__wrapper",{"newspack-campaigns-wizard-analytics__wrapper--loading":s})},(0,o.createElement)(va,{disabled:s,labelFilters:h,eventActionFilters:g,filtersState:n,onChange:e=>t=>a({type:e,payload:t})}),m&&(0,o.createElement)(ka,{data:m,isLoading:s}),w&&(0,o.createElement)(Sa,{keyMetrics:w,filtersState:n,labelFilters:h,isLoading:s,postEditLink:v}))})),Ua=(0,f.a4)((()=>(0,o.createElement)(f.d5,{pluginSlug:"newspack-popups-wizard",isWizard:!0,title:null})));var Fa=n(1984);const Ia=(0,o.createElement)(x.SVG,{width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18"},(0,o.createElement)(x.Path,{d:"M5 4h2V2H5v2zm6-2v2h2V2h-2zm-6 8h2V8H5v2zm6 0h2V8h-2v2zm-6 6h2v-2H5v2zm6 0h2v-2h-2v2z"}));var Za=n(6015);const La=i.__,{NavLink:qa,useHistory:Wa}=f.F0,Ha=()=>(0,o.createElement)(qa,{to:"segments/new"},(0,o.createElement)(f.zx,{variant:"primary"},La("Add New Segment","newspack"))),Ra=e=>{let{inFlight:t,segment:n,segments:a,deleteSegment:r,dropTargetIndex:i,setDropTargetIndex:s,index:c,sortSegments:l,totalSegments:u,wrapperRef:d,toggleSegmentStatus:p}=e;const[m,h]=(0,o.useState)(!1),[g,w]=(0,o.useState)([]),[v,_]=(0,o.useState)(!1);(0,o.useEffect)((()=>{E()}),[n]);const E=async()=>{0<n.configuration?.favorite_categories?.length&&w(await Un(n.configuration.favorite_categories))},C=()=>h(!1),T=Wa(),x=0===c,S=c+1===u,D=c===i,P=S&&i>=u,M=e=>{if(t)return;const r=[...a],o=e>c?e-1:e;r.splice(c,1),r.splice(o,0,n),r.forEach(((e,t)=>e.priority=t)),JSON.stringify(r)!==JSON.stringify(a)&&l(r)},z=()=>{if(t)return;let e=c-1;0>e&&(e=0),M(e)},A=()=>{if(t)return;let e=c+2;u<e&&(e=u),M(e)};return(0,o.createElement)("div",{className:"newspack-campaigns__draggable"+(v?" is-dragging":"")+(D?" is-drop-target":"")+(P?" drop-target-after":""),id:`segment-${n.id}`},(0,o.createElement)(b.Draggable,{elementId:`segment-${n.id}`,transferData:{},onDragStart:()=>{v||t||_(!0)},onDragEnd:()=>{t||(null!==i&&M(i),s(null),_(!1))},onDragOver:e=>{if(t)return;const n=d.current.getBoundingClientRect(),a=e.pageY<=n.top+window.scrollY,r=e.pageY>=n.bottom+window.scrollY;if(a||r||e.target.classList.contains("newspack-action-card")){let t=Array.prototype.slice.call(d.current.querySelectorAll(".newspack-campaigns__draggable")).indexOf(e.target.parentElement);(0>t||t===c+1)&&(t=c),a&&(t=0),r&&(t=u),s(t)}}},(e=>{let{onDraggableStart:t,onDraggableEnd:a}=e;return(0,o.createElement)(f.fM,{isSmall:!0,title:n.name,titleLink:`#/segments/${n.id}`,description:Fn(n,g),toggleChecked:!n.configuration.is_disabled,toggleOnChange:()=>p(n),actionText:(0,o.createElement)(o.Fragment,null,(0,o.createElement)(f.zx,{onClick:()=>h(!m),label:La("More options","newspack"),icon:k.Z,className:m&&"popover-active"}),m&&(0,o.createElement)(f.J2,{position:"bottom left",onKeyDown:e=>y.ESCAPE===e.keyCode&&C,onFocusOutside:C},(0,o.createElement)(b.MenuItem,{onClick:()=>C(),className:"screen-reader-text"},La("Close Popover","newspack")),(0,o.createElement)(b.MenuItem,{onClick:()=>T.push(`/segments/${n.id}`),className:"newspack-button"},La("Edit","newspack")),(0,o.createElement)(b.MenuItem,{onClick:()=>r(n),className:"newspack-button"},La("Delete","newspack"))))},(0,o.createElement)("div",{className:"newspack-campaigns__segment-priority-controls"},(0,o.createElement)("div",{className:"drag-handle",draggable:!0,onDragStart:t,onDragEnd:a},(0,o.createElement)(Fa.Z,{icon:Ia,height:18,width:18})),(0,o.createElement)("div",{className:"movers"},(0,o.createElement)(f.zx,{icon:Za.Z,onClick:z,disabled:x,label:La("Move segment position up","newspack")}),(0,o.createElement)(f.zx,{icon:ga.Z,onClick:A,disabled:S,label:La("Move segment position down","newspack")}))))})))},Ya=e=>{let{wizardApiFetch:t,segments:n,setSegments:a,isLoading:r}=e;const[i,s]=(0,o.useState)(null),[c,l]=(0,o.useState)(null),[u,d]=(0,o.useState)(!1),[p,m]=(0,o.useState)(null),h=(0,o.useRef)(),g=e=>{d(!0),m(null),t({path:`/newspack/v1/wizard/newspack-popups-wizard/segmentation/${e.id}`,method:"POST",quiet:!0,data:{name:e.name,configuration:{...e.configuration,is_disabled:!e.configuration.is_disabled}}}).then((e=>{console.log(e),d(!1),a(e)})).catch((e=>{console.error(e),d(!1)}))},w=e=>{d(!0),m(null),t({path:`/newspack/v1/wizard/newspack-popups-wizard/segmentation/${e.id}`,method:"DELETE",quiet:!0}).then((e=>{d(!1),a(e)})).catch((e=>{console.error(e),d(!1)}))},v=e=>{m(null),l(e),d(!0),t({path:"/newspack/v1/wizard/newspack-popups-wizard/segmentation-sort",method:"POST",data:{segmentIds:e.map((e=>e.id))},quiet:!0}).then((e=>{d(!1),l(null),a(e)})).catch((e=>{d(!1),m(e.message||La("There was an error sorting segments. Please try again.")),a(n)}))};if(null===n)return null;const y=c||n;return n.length?(0,o.createElement)(o.Fragment,null,p&&(0,o.createElement)(f.qX,{noticeText:p,isError:!0}),(0,o.createElement)(f.Zb,{headerActions:!0,noBorder:!0},(0,o.createElement)("h2",null,La("Audience segments","newspack")),(0,o.createElement)(Ha,null)),(0,o.createElement)("div",{className:"newspack-campaigns-wizard-segments__list"+(u?" is-loading":""),ref:h},y.map(((e,t)=>(0,o.createElement)(Ra,{deleteSegment:w,key:e.id,inFlight:u||r>0,segment:e,segments:n,sortSegments:v,index:t,wrapperRef:h,dropTargetIndex:i,setDropTargetIndex:s,totalSegments:n.length,toggleSegmentStatus:g}))))):(0,o.createElement)(o.Fragment,null,(0,o.createElement)(f.Zb,{headerActions:!0,noBorder:!0},(0,o.createElement)("h2",null,La("You have no saved audience segments.","newspack")),(0,o.createElement)(Ha,null)),(0,o.createElement)("p",null,La("Create audience segments to target visitors by engagement, activity, and more.","newspack")))};var ja=n(3279),Ba=n.n(ja);const $a=i.__,{useHistory:Ga}=f.F0,{SettingsCard:Va,SettingsSection:Qa,MinMaxSetting:Xa}=f.Zr,Ja={min_posts:0,max_posts:0,min_session_posts:0,max_session_posts:0,is_subscribed:!1,is_not_subscribed:!1,is_donor:!1,is_not_donor:!1,is_former_donor:!1,is_logged_in:!1,is_not_logged_in:!1,favorite_categories:[],referrers:"",referrers_not:"",is_disabled:!1},Ka=e=>{let{segmentId:t,setSegments:n,wizardApiFetch:a}=e;const[r,i]=f.PT.useObjectState(Ja),[s,c]=(0,o.useState)(""),[u,d]=(0,o.useState)(""),[p,m]=(0,o.useState)(!1),[h,g]=(0,o.useState)({total:0,in_segment:0}),w=Ga(),[v,y]=(0,o.useState)(null),k=JSON.stringify(v)!==JSON.stringify(r)||u!==s,_=f.PT.usePrompt(k,$a("There are unsaved changes to this segment. Discard changes?","newspack")),E="new"===t;(0,o.useEffect)((()=>{E||a({path:"/newspack/v1/wizard/newspack-popups-wizard/segmentation"}).then((e=>{const n=ca()(e,(e=>{let{id:n}=e;return n===t}));if(n){const e={...Ja,...n.configuration};i(e),y(e),c(n.name),d(n.name)}}))}),[E]);const C=(0,o.useMemo)((()=>Ba()((e=>{m(!0),l()({path:`/newspack/v1/wizard/newspack-popups-wizard/segmentation-reach?config=${JSON.stringify(e)}`}).then((e=>{g(e),m(!1)}))}),500,{leading:!0})),[]);return(0,o.useEffect)((()=>{C(r)}),[JSON.stringify(r)]),(0,o.createElement)(o.Fragment,null,(0,o.createElement)(f.w4,{placeholder:$a("Untitled Segment","newspack"),value:s,onChange:c,label:$a("Title","newspack"),className:"newspack-campaigns-wizard-segments__title"}),h.total>0&&(0,o.createElement)(f.qX,{isInfo:!0,className:"newspack-campaigns-wizard-segments__recorded-visitors",style:{opacity:p?.5:1},noticeText:$a("This segment would reach approximately ","newspack")+Math.round(100*h.in_segment/h.total)+$a("% of recorded visitors.","newspack")}),(0,o.createElement)(Va,{title:$a("Segment Status","newspack"),description:$a("If not enabled, the segment will be ignored for reader segmentation.","newspack"),noBorder:!0},(0,o.createElement)(b.ToggleControl,{label:$a("Segment enabled","newspack"),checked:!r.is_disabled,onChange:()=>i({is_disabled:!r.is_disabled})})),(0,o.createElement)(Va,{title:$a("Reader Engagement","newspack"),description:$a("Target readers based on their browsing behavior","newspack"),noBorder:!0},(0,o.createElement)(Qa,{title:$a("Articles read","newspack"),description:$a("Number of articles read in the last 30 day period.","newspack")},(0,o.createElement)(Xa,{min:r.min_posts,max:r.max_posts,onChangeMin:i("min_posts"),onChangeMax:i("max_posts"),minPlaceholder:$a("Min posts","newspack"),maxPlaceholder:$a("Max posts","newspack")})),(0,o.createElement)(Qa,{title:$a("Articles read in session","newspack"),description:$a("Number of articles read in the current session (45 minutes).","newspack")},(0,o.createElement)(Xa,{min:r.min_session_posts,max:r.max_session_posts,onChangeMin:i("min_session_posts"),onChangeMax:i("max_session_posts"),minPlaceholder:$a("Min posts in session","newspack"),maxPlaceholder:$a("Max posts in session","newspack")})),(0,o.createElement)(Qa,{title:$a("Favorite Categories","newspack"),description:$a("Most-read categories of reader.","newspack")},(0,o.createElement)(f.HZ,{value:r.favorite_categories.map((e=>parseInt(e))),onChange:e=>{i("favorite_categories")(e.map((e=>e.id)))},label:$a("Favorite Categories","newspack "),hideLabelFromVision:!0}))),(0,o.createElement)(Va,{title:$a("Reader Activity","newspack"),description:$a("Target readers based on their actions","newspack"),columns:3,noBorder:!0},(0,o.createElement)(Qa,{title:$a("Newsletter","newspack")},(0,o.createElement)(f.Yw,{isWide:!0,"data-testid":"subscriber-select",onChange:e=>{e=parseInt(e),i(0===e?{is_subscribed:!1,is_not_subscribed:!1}:{is_subscribed:1===e,is_not_subscribed:2===e})},value:r.is_subscribed?1:r.is_not_subscribed?2:0,options:[{value:0,label:$a("Subscribers and non-subscribers","newspack")},{value:1,label:$a("Subscribers","newspack")},{value:2,label:$a("Non-subscribers","newspack")}]})),(0,o.createElement)(Qa,{title:$a("Donation","newspack"),description:$a("(if the checkout happens on-site)","newspack")},(0,o.createElement)(f.Yw,{isWide:!0,onChange:e=>{e=parseInt(e),i({is_donor:1===e,is_not_donor:2===e,is_former_donor:3===e})},value:[!1,r.is_donor,r.is_not_donor,r.is_former_donor].reduce(((e,t,n)=>t?n:e),0),options:[{value:0,label:$a("Donors and non-donors","newspack")},{value:1,label:$a("Donors","newspack")},{value:2,label:$a("Non-donors","newspack")},{value:3,label:$a("Former donors (who cancelled a recurring donation)","newspack")}]})),(0,o.createElement)(Qa,{title:$a("User Account","newspack")},(0,o.createElement)(f.Yw,{isWide:!0,onChange:e=>{e=parseInt(e),i(0===e?{is_logged_in:!1,is_not_logged_in:!1}:{is_logged_in:1===e,is_not_logged_in:2===e})},value:r.is_logged_in?1:r.is_not_logged_in?2:0,options:[{value:0,label:$a("All users","newspack")},{value:1,label:$a("Has user account","newspack")},{value:2,label:$a("Does not have user account","newspack")}]}))),(0,o.createElement)(Va,{title:$a("Referrer Sources","newspack"),description:$a("Target readers based on where theyre coming from","newspack"),notification:$a("Segments using these options will apply only to the first page visited after coming from an external source.","newspack"),columns:2,noBorder:!0},(0,o.createElement)(Qa,{title:$a("Sources to match","newspack"),description:$a("Segment based on traffic source.","newspack")},(0,o.createElement)(f.w4,{isWide:!0,"data-testid":"referrers-input",placeholder:$a("google.com, facebook.com","newspack"),help:$a("A comma-separated list of domains.","newspack"),value:r.referrers,onChange:i("referrers")})),(0,o.createElement)(Qa,{title:$a("Sources to exclude","newspack"),description:$a("Segment based on traffic source - hide campaigns for visitors coming from specific sources.","newspack")},(0,o.createElement)(f.w4,{isWide:!0,placeholder:$a("twitter.com, instagram.com","newspack"),help:$a("A comma-separated list of domains.","newspack"),value:r.referrers_not,onChange:i("referrers_not")}))),(0,o.createElement)("div",{className:"newspack-buttons-card"},(0,o.createElement)(f.zx,{disabled:!(()=>{const e={...r},t={...Ja};return delete e.is_disabled,delete t.is_disabled,s.length>0&&JSON.stringify(e)!==JSON.stringify(t)})()||!E&&!k,isPrimary:!0,onClick:()=>{_(),a({path:E?"/newspack/v1/wizard/newspack-popups-wizard/segmentation":`/newspack/v1/wizard/newspack-popups-wizard/segmentation/${t}`,method:"POST",data:{name:s,configuration:r}}).then(n).then(w.push("/segments"))}},$a("Save","newspack")),(0,o.createElement)(f.zx,{isSecondary:!0,href:"#/segments"},$a("Cancel","newspack"))))},er=(0,f.a4)((e=>{let{wizardApiFetch:t,match:n,...r}=e;const i=n.params.id;return i?(0,o.createElement)(Ka,(0,a.Z)({segmentId:i,wizardApiFetch:t},r)):(0,o.createElement)(Ya,(0,a.Z)({wizardApiFetch:t},r))})),tr=i.__,{HashRouter:nr,Redirect:ar,Route:rr,Switch:or}=v.Z,ir=tr("Campaigns","newspack"),sr=tr("Reach your readers with configurable campaigns","newspack"),cr=[{label:tr("Campaigns","newpack"),path:"/campaigns",exact:!0},{label:tr("Segments","newpack"),path:"/segments",exact:!0},{label:tr("Analytics","newpack"),path:"/analytics",exact:!0},{label:tr("Settings","newpack"),path:"/settings",exact:!0}];class lr extends o.Component{constructor(e){var t;super(e),t=this,(0,r.Z)(this,"onWizardReady",(()=>{this.refetch({isInitial:!0})})),(0,r.Z)(this,"refetch",(function(){let{isInitial:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{setError:n,wizardApiFetch:a}=t.props;a({path:"/newspack/v1/wizard/newspack-popups-wizard/"}).then((n=>{if(t.updateAfterAPI(n),e){const e={start_date:Ln(w(new Date,30)),end_date:Ln(),with_report_by_id:!0};l()({path:`/newspack/v1/popups-analytics/report/?${(0,u.stringify)(e)}`}).then((e=>{let{report_by_id:n}=e;t.setState({promptsAnalyticsData:n})})).catch((e=>{t.setState({promptsAnalyticsData:{error:e}})}))}})).catch((e=>n(e)))})),(0,r.Z)(this,"updatePopup",(e=>{let{id:t,...n}=e;const{setError:a,wizardApiFetch:r}=this.props;return this.setState({inFlight:!0}),r({path:`/newspack/v1/wizard/newspack-popups-wizard/${t}`,method:"POST",data:{config:n},quiet:!0}).then(this.updateAfterAPI).catch((e=>a(e)))})),(0,r.Z)(this,"deletePopup",(e=>{const{setError:t,wizardApiFetch:n}=this.props;return n({path:`/newspack/v1/wizard/newspack-popups-wizard/${e}`,method:"DELETE",quiet:!0}).then(this.updateAfterAPI).catch((e=>t(e)))})),(0,r.Z)(this,"restorePopup",(e=>{const{setError:t,wizardApiFetch:n}=this.props;return n({path:`/newspack/v1/wizard/newspack-popups-wizard/${e}/restore`,method:"POST",quiet:!0}).then(this.updateAfterAPI).catch((e=>t(e)))})),(0,r.Z)(this,"publishPopup",(e=>{const{setError:t,wizardApiFetch:n}=this.props;return n({path:`/newspack/v1/wizard/newspack-popups-wizard/${e}/publish`,method:"POST",quiet:!0}).then(this.updateAfterAPI).catch((e=>t(e)))})),(0,r.Z)(this,"unpublishPopup",(e=>{const{setError:t,wizardApiFetch:n}=this.props;return n({path:`/newspack/v1/wizard/newspack-popups-wizard/${e}/publish`,method:"DELETE",quiet:!0}).then(this.updateAfterAPI).catch((e=>t(e)))})),(0,r.Z)(this,"duplicatePopup",((e,t)=>{const{setError:n,wizardApiFetch:a}=this.props;return this.setState({inFlight:!0}),a({path:(0,s.addQueryArgs)(`/newspack/v1/wizard/newspack-popups-wizard/${e}/duplicate`,{title:t}),method:"POST",quiet:!0}).then(this.updateAfterAPI).catch((()=>{n({code:"duplicate_prompt_error",message:tr("Error duplicating prompt. Please try again later.","newspack")})}))})),(0,r.Z)(this,"previewUrlForPopup",(e=>{let{options:t,id:n}=e;const{placement:a,trigger_type:r}=t,o=window.newspack_popups_wizard_data?.preview_query_keys||{},i={};Object.keys(t).forEach((e=>{o.hasOwnProperty(e)&&(i[o[e]]=t[e])}));let s="/";return"archives"===a&&window.newspack_popups_wizard_data?.preview_archive?s=window.newspack_popups_wizard_data.preview_archive:("inline"===a||"scroll"===r)&&window&&window.newspack_popups_wizard_data?.preview_post&&(s=window.newspack_popups_wizard_data?.preview_post),`${s}?${(0,u.stringify)({...i,pid:n})}`})),(0,r.Z)(this,"updateAfterAPI",(e=>{let{campaigns:t,prompts:n,segments:a,settings:r,duplicated:o=null}=e;return this.setState({campaigns:t,prompts:n,segments:a,settings:r,duplicated:o,inFlight:!1})})),(0,r.Z)(this,"manageCampaignGroup",(function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST";const{setError:a,wizardApiFetch:r}=t.props;return r({path:"/newspack/v1/wizard/newspack-popups-wizard/batch-publish/",data:{ids:e.map((e=>e.id))},method:n,quiet:!0}).then(t.updateAfterAPI).catch((e=>a(e)))})),this.state={campaigns:[],prompts:[],promptsAnalyticsData:null,segments:[],settings:[],previewUrl:null,duplicated:null,inFlight:!1}}render(){const{pluginRequirements:e,setError:t,isLoading:n,wizardApiFetch:r,startLoading:i,doneLoading:s}=this.props,{campaigns:c,inFlight:l,prompts:u,segments:d,settings:p,previewUrl:m,duplicated:h,promptsAnalyticsData:g}=this.state;return(0,o.createElement)(f.BA,{url:m,renderButton:m=>{let{showPreview:w}=m;const f={headerText:ir,subHeaderText:sr,tabbedNavigation:cr,setError:t,isLoading:n,startLoading:i,doneLoading:s,wizardApiFetch:r,prompts:u,segments:d,settings:p,duplicated:h,inFlight:l},v={...f,manageCampaignGroup:this.manageCampaignGroup,updatePopup:this.updatePopup,deletePopup:this.deletePopup,restorePopup:this.restorePopup,duplicatePopup:this.duplicatePopup,previewPopup:e=>this.setState({previewUrl:this.previewUrlForPopup(e)},(()=>w())),publishPopup:this.publishPopup,resetDuplicated:()=>this.setState({duplicated:null}),unpublishPopup:this.unpublishPopup,refetch:this.refetch};return(0,o.createElement)(nr,{hashType:"slash"},(0,o.createElement)(or,null,e,(0,o.createElement)(rr,{path:"/campaigns/:id?",render:e=>{const n=e.match.params.id;return(0,o.createElement)(ra.Provider,{value:u},(0,o.createElement)(ha,(0,a.Z)({},v,{archiveCampaignGroup:(e,n)=>r({path:`/newspack/v1/wizard/newspack-popups-wizard/archive-campaign/${e}`,method:n?"POST":"DELETE",quiet:!0}).then(this.updateAfterAPI).catch((e=>t(e))),campaignId:n,createCampaignGroup:n=>r({path:"/newspack/v1/wizard/newspack-popups-wizard/create-campaign/",method:"POST",data:{name:n},quiet:!0}).then((t=>{this.setState({campaigns:t.campaigns,prompts:t.prompts,segments:t.segments,settings:t.settings}),e.history.push(`/campaigns/${t.term_id}`)})).catch((e=>t(e))),deleteCampaignGroup:n=>r({path:`/newspack/v1/wizard/newspack-popups-wizard/delete-campaign/${n}`,method:"DELETE",quiet:!0}).then((t=>{this.setState({campaigns:t.campaigns,prompts:t.prompts,segments:t.segments,settings:t.settings}),e.history.push("/campaigns/")})).catch((e=>t(e))),duplicateCampaignGroup:(n,a)=>r({path:`/newspack/v1/wizard/newspack-popups-wizard/duplicate-campaign/${n}`,method:"POST",data:{name:a},quiet:!0}).then((t=>{this.setState({campaigns:t.campaigns,prompts:t.prompts,segments:t.segments,settings:t.settings}),e.history.push(`/campaigns/${t.term_id}`)})).catch((e=>t(e))),renameCampaignGroup:(e,n)=>r({path:`/newspack/v1/wizard/newspack-popups-wizard/rename-campaign/${e}`,method:"POST",data:{name:n},quiet:!0}).then(this.updateAfterAPI).catch((e=>t(e))),campaigns:c,promptsAnalyticsData:g})))}}),(0,o.createElement)(rr,{path:"/segments/:id?",render:e=>(0,o.createElement)(er,(0,a.Z)({},e,f,{setSegments:e=>this.setState({segments:e})}))}),(0,o.createElement)(rr,{path:"/analytics",render:()=>(0,o.createElement)(Oa,f)}),(0,o.createElement)(rr,{path:"/settings",render:()=>(0,o.createElement)(Ua,f)}),(0,o.createElement)(ar,{to:"/campaigns"})))}})}}(0,o.render)((0,o.createElement)((0,f.uF)(lr,["newspack-popups"])),document.getElementById("newspack-popups-wizard"))},9196:e=>{"use strict";e.exports=window.React},6292:e=>{"use strict";e.exports=window.moment},6989:e=>{"use strict";e.exports=window.wp.apiFetch},5609:e=>{"use strict";e.exports=window.wp.components},9818:e=>{"use strict";e.exports=window.wp.data},9307:e=>{"use strict";e.exports=window.wp.element},2694:e=>{"use strict";e.exports=window.wp.hooks},2629:e=>{"use strict";e.exports=window.wp.htmlEntities},5736:e=>{"use strict";e.exports=window.wp.i18n},9630:e=>{"use strict";e.exports=window.wp.keycodes},444:e=>{"use strict";e.exports=window.wp.primitives},6483:e=>{"use strict";e.exports=window.wp.url},3467:(e,t,n)=>{"use strict";var a=n(9196);function r(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var o=r(a);function i(e){let{onLoad:t,onError:n,...r}=e;const[o,i]=function(e){let{chartVersion:t="current",chartPackages:n=["corechart","controls"],chartLanguage:r="en",mapsApiKey:o}=e;const[i,s]=a.useState(null),[c,l]=a.useState(!1);var u,d,p;return u="https://www.gstatic.com/charts/loader.js",d=()=>{const e=null===window||void 0===window?void 0:window.google;e&&(e.charts.load(t,{packages:n,language:r,mapsApiKey:o}),e.charts.setOnLoadCallback((()=>{s(e)})))},p=()=>{l(!0)},a.useEffect((()=>{if(!document)return;const e=document.querySelector('script[src="'.concat(u,'"]'));if(null==e?void 0:e.dataset.loaded)return void(null==d||d());const t=e||document.createElement("script");e||(t.src=u);const n=()=>{t.dataset.loaded="1",null==d||d()};return t.addEventListener("load",n),p&&t.addEventListener("error",p),e||document.head.append(t),()=>{t.removeEventListener("load",n),p&&t.removeEventListener("error",p)}}),[]),[i,c]}(r);return a.useEffect((()=>{o&&t&&t(o)}),[o]),a.useEffect((()=>{i&&n&&n()}),[i]),null}const s={legend_toggle:!1,options:{},legendToggle:!1,getChartWrapper:()=>{},spreadSheetQueryParameters:{headers:1,gid:1},rootProps:{},chartWrapperParams:{}};let c=0;const l=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#3B3EAC"],{Provider:u,Consumer:d}=o.createContext(s),p=e=>{let{children:t,value:n}=e;return o.createElement(u,{value:n},t)},m=e=>{let{render:t}=e;return o.createElement(d,null,(e=>t(e)))};class h extends o.Component{componentDidMount(){this.draw(this.props),window.addEventListener("resize",this.onResize),(this.props.legend_toggle||this.props.legendToggle)&&this.listenToLegendToggle()}componentWillUnmount(){const{google:e,googleChartWrapper:t}=this.props;window.removeEventListener("resize",this.onResize),e.visualization.events.removeAllListeners(t),"Timeline"===t.getChartType()&&t.getChart()&&t.getChart().clearChart()}componentDidUpdate(){this.draw(this.props)}render(){return null}constructor(...e){super(...e),this.state={hiddenColumns:[]},this.listenToLegendToggle=()=>{const{google:e,googleChartWrapper:t}=this.props;e.visualization.events.addListener(t,"select",(()=>{const e=t.getChart().getSelection(),n=t.getDataTable();if(0===e.length||e[0].row||!n)return;const a=e[0].column,r=this.getColumnID(n,a);this.state.hiddenColumns.includes(r)?this.setState((e=>({...e,hiddenColumns:[...e.hiddenColumns.filter((e=>e!==r))]}))):this.setState((e=>({...e,hiddenColumns:[...e.hiddenColumns,r]})))}))},this.applyFormatters=(e,t)=>{const{google:n}=this.props;for(let a of t)switch(a.type){case"ArrowFormat":new n.visualization.ArrowFormat(a.options).format(e,a.column);break;case"BarFormat":new n.visualization.BarFormat(a.options).format(e,a.column);break;case"ColorFormat":{const t=new n.visualization.ColorFormat(a.options),{ranges:r}=a;for(let e of r)t.addRange(...e);t.format(e,a.column);break}case"DateFormat":new n.visualization.DateFormat(a.options).format(e,a.column);break;case"NumberFormat":new n.visualization.NumberFormat(a.options).format(e,a.column);break;case"PatternFormat":new n.visualization.PatternFormat(a.options).format(e,a.column)}},this.getColumnID=(e,t)=>e.getColumnId(t)||e.getColumnLabel(t),this.draw=async e=>{let{data:t,diffdata:n,rows:a,columns:r,options:o,legend_toggle:i,legendToggle:s,chartType:c,formatters:l,spreadSheetUrl:u,spreadSheetQueryParameters:d}=e;const{google:p,googleChartWrapper:m}=this.props;let h,g=null;if(n){const e=p.visualization.arrayToDataTable(n.old),t=p.visualization.arrayToDataTable(n.new);g=p.visualization[c].prototype.computeDiff(e,t)}h=null!==t?Array.isArray(t)?p.visualization.arrayToDataTable(t):new p.visualization.DataTable(t):a&&r?p.visualization.arrayToDataTable([r,...a]):u?await async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(((a,r)=>{const o="".concat(n.headers?"headers=".concat(n.headers):"headers=0"),i="".concat(n.query?"&tq=".concat(encodeURIComponent(n.query)):""),s="".concat(n.gid?"&gid=".concat(n.gid):""),c="".concat(n.sheet?"&sheet=".concat(n.sheet):""),l="".concat(n.access_token?"&access_token=".concat(n.access_token):""),u="".concat(o).concat(s).concat(c).concat(i).concat(l),d="".concat(t,"/gviz/tq?").concat(u);new e.visualization.Query(d).send((e=>{e.isError()?r("Error in query:  ".concat(e.getMessage()," ").concat(e.getDetailedMessage())):a(e.getDataTable())}))}))}(p,u,d):p.visualization.arrayToDataTable([]);const w=h.getNumberOfColumns();for(let e=0;e<w;e+=1){const t=this.getColumnID(h,e);if(this.state.hiddenColumns.includes(t)){const t=h.getColumnLabel(e),n=h.getColumnId(e),a=h.getColumnType(e);h.removeColumn(e),h.addColumn({label:t,id:n,type:a})}}const f=m.getChart();"Timeline"===m.getChartType()&&f&&f.clearChart(),m.setChartType(c),m.setOptions(o||{}),m.setDataTable(h),m.draw(),null!==this.props.googleChartDashboard&&this.props.googleChartDashboard.draw(h),g&&(m.setDataTable(g),m.draw()),l&&(this.applyFormatters(h,l),m.setDataTable(h),m.draw()),!0!==s&&!0!==i||this.grayOutHiddenColumns({options:o})},this.grayOutHiddenColumns=e=>{let{options:t}=e;const{googleChartWrapper:n}=this.props,a=n.getDataTable();if(!a)return;const r=a.getNumberOfColumns();if(!1==this.state.hiddenColumns.length>0)return;const o=Array.from({length:r-1}).map(((e,n)=>{const r=this.getColumnID(a,n+1);return this.state.hiddenColumns.includes(r)?"#CCCCCC":t&&t.colors?t.colors[n]:l[n]}));n.setOptions({...t,colors:o}),n.draw()},this.onResize=()=>{const{googleChartWrapper:e}=this.props;e.draw()}}}class g extends o.Component{componentDidMount(){}componentWillUnmount(){}shouldComponentUpdate(){return!1}render(){const{google:e,googleChartWrapper:t,googleChartDashboard:n}=this.props;return o.createElement(m,{render:a=>o.createElement(h,Object.assign({},a,{google:e,googleChartWrapper:t,googleChartDashboard:n}))})}}class w extends o.Component{shouldComponentUpdate(){return!1}listenToEvents(e){let{chartEvents:t,google:n,googleChartWrapper:a}=e;if(t){n.visualization.events.removeAllListeners(a);for(let e of t){var r=this;const{eventName:t,callback:o}=e;n.visualization.events.addListener(a,t,(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];o({chartWrapper:a,props:r.props,google:n,eventArgs:t})}))}}}componentDidMount(){var e;const{google:t,googleChartWrapper:n}=this.props;this.listenToEvents({chartEvents:(null===(e=this.propsFromContext)||void 0===e?void 0:e.chartEvents)||null,google:t,googleChartWrapper:n})}render(){return this.props,o.createElement(m,{render:e=>(this.propsFromContext=e,null)})}constructor(e){super(e),this.propsFromContext=null}}let f=0;class v extends o.Component{componentDidMount(){const{options:e,google:t,chartType:n,chartWrapperParams:a,toolbarItems:r,getChartEditor:o,getChartWrapper:i}=this.props,s={chartType:n,options:e,containerId:this.getGraphID(),...a},c=new t.visualization.ChartWrapper(s);c.setOptions(e||{}),i&&i(c,t);const l=new t.visualization.Dashboard(this.dashboard_ref),u=this.addControls(c,l);r&&t.visualization.drawToolbar(this.toolbar_ref.current,r);let d=null;o&&(d=new t.visualization.ChartEditor,o({chartEditor:d,chartWrapper:c,google:t})),this.setState({googleChartEditor:d,googleChartControls:u,googleChartDashboard:l,googleChartWrapper:c,isReady:!0})}componentDidUpdate(){if(!this.state.googleChartWrapper)return;if(!this.state.googleChartDashboard)return;if(!this.state.googleChartControls)return;const{controls:e}=this.props;if(e)for(let t=0;t<e.length;t+=1){const{controlType:n,options:a,controlWrapperParams:r}=e[t];r&&"state"in r&&this.state.googleChartControls[t].control.setState(r.state),this.state.googleChartControls[t].control.setOptions(a),this.state.googleChartControls[t].control.setControlType(n)}}shouldComponentUpdate(e,t){return this.state.isReady!==t.isReady||e.controls!==this.props.controls}render(){const{width:e,height:t,options:n,style:a}=this.props,r={height:t||n&&n.height,width:e||n&&n.width,...a};return this.props.render?o.createElement("div",{ref:this.dashboard_ref,style:r},o.createElement("div",{ref:this.toolbar_ref,id:"toolbar"}),this.props.render({renderChart:this.renderChart,renderControl:this.renderControl,renderToolbar:this.renderToolBar})):o.createElement("div",{ref:this.dashboard_ref,style:r},this.renderControl((e=>{let{controlProp:t}=e;return"bottom"!==t.controlPosition})),this.renderChart(),this.renderControl((e=>{let{controlProp:t}=e;return"bottom"===t.controlPosition})),this.renderToolBar())}constructor(...e){var t;super(...e),t=this,this.state={googleChartWrapper:null,googleChartDashboard:null,googleChartControls:null,googleChartEditor:null,isReady:!1},this.graphID=null,this.dashboard_ref=o.createRef(),this.toolbar_ref=o.createRef(),this.getGraphID=()=>{const{graphID:e,graph_id:t}=this.props;let n;return e||t?n=e&&!t?e:t&&!e?t:e:this.graphID?n=this.graphID:(c+=1,n="reactgooglegraph-".concat(c)),this.graphID=n,this.graphID},this.getControlID=(e,t)=>{let n;return f+=1,n=void 0===e?"googlechart-control-".concat(t,"-").concat(f):e,n},this.addControls=(e,t)=>{const{google:n,controls:a}=this.props,r=a?a.map(((e,t)=>{const{controlID:a,controlType:r,options:o,controlWrapperParams:i}=e,s=this.getControlID(a,t);return{controlProp:e,control:new n.visualization.ControlWrapper({containerId:s,controlType:r,options:o,...i})}})):null;if(!r)return null;t.bind(r.map((e=>{let{control:t}=e;return t})),e);for(let t of r){const{control:a,controlProp:r}=t,{controlEvents:i=[]}=r;for(let t of i){var o=this;const{callback:r,eventName:i}=t;n.visualization.events.removeListener(a,i,r),n.visualization.events.addListener(a,i,(function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];r({chartWrapper:e,controlWrapper:a,props:o.props,google:n,eventArgs:i})}))}}return r},this.renderChart=()=>{const{width:e,height:t,options:n,style:a,className:r,rootProps:i,google:s}=this.props,c={height:t||n&&n.height,width:e||n&&n.width,...a};return o.createElement("div",Object.assign({id:this.getGraphID(),style:c,className:r},i),this.state.isReady&&null!==this.state.googleChartWrapper?o.createElement(o.Fragment,null,o.createElement(g,{googleChartWrapper:this.state.googleChartWrapper,google:s,googleChartDashboard:this.state.googleChartDashboard}),o.createElement(w,{googleChartWrapper:this.state.googleChartWrapper,google:s})):null)},this.renderControl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>!0;return t.state.isReady&&null!==t.state.googleChartControls?o.createElement(o.Fragment,null,t.state.googleChartControls.filter((t=>{let{controlProp:n,control:a}=t;return e({control:a,controlProp:n})})).map((e=>{let{control:t,controlProp:n}=e;return o.createElement("div",{key:t.getContainerId(),id:t.getContainerId()})}))):null},this.renderToolBar=()=>this.props.toolbarItems?o.createElement("div",{ref:this.toolbar_ref}):null}}class y extends o.Component{render(){const{chartLanguage:e,chartPackages:t,chartVersion:n,mapsApiKey:a,loader:r,errorElement:s}=this.props;return o.createElement(p,{value:this.props},"ready"===this.state.loadingStatus&&null!==this.state.google?o.createElement(v,Object.assign({},this.props,{google:this.state.google})):"errored"===this.state.loadingStatus&&s?s:r,o.createElement(i,{chartLanguage:e,chartPackages:t,chartVersion:n,mapsApiKey:a,onLoad:this.onLoad,onError:this.onError}))}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}isFullyLoaded(e){const{controls:t,toolbarItems:n,getChartEditor:a}=this.props;return e&&e.visualization&&e.visualization.ChartWrapper&&e.visualization.Dashboard&&(!t||e.visualization.ChartWrapper)&&(!a||e.visualization.ChartEditor)&&(!n||e.visualization.drawToolbar)}constructor(...e){super(...e),this._isMounted=!1,this.state={loadingStatus:"loading",google:null},this.onLoad=e=>{if(this.props.onLoad&&this.props.onLoad(e),this.isFullyLoaded(e))this.onSuccess(e);else{const e=setInterval((()=>{const t=window.google;this._isMounted?t&&this.isFullyLoaded(t)&&(clearInterval(e),this.onSuccess(t)):clearInterval(e)}),1e3)}},this.onSuccess=e=>{this.setState({loadingStatus:"ready",google:e})},this.onError=()=>{this.setState({loadingStatus:"errored"})}}}var k;y.defaultProps=s,t.sw=void 0,(k=t.sw||(t.sw={})).annotation="annotation",k.annotationText="annotationText",k.certainty="certainty",k.emphasis="emphasis",k.interval="interval",k.scope="scope",k.style="style",k.tooltip="tooltip",k.domain="domain";t.kL=y}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}a.m=t,e=[],a.O=(t,n,r,o)=>{if(!n){var i=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],o=e[u][2];for(var s=!0,c=0;c<n.length;c++)(!1&o||i>=o)&&Object.keys(a.O).every((e=>a.O[e](n[c])))?n.splice(c--,1):(s=!1,o<i&&(i=o));if(s){e.splice(u--,1);var l=r();void 0!==l&&(t=l)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,r,o]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),a.j=964,(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={964:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var r,o,i=n[0],s=n[1],c=n[2],l=0;if(i.some((t=>0!==e[t]))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(c)var u=c(a)}for(t&&t(n);l<i.length;l++)o=i[l],a.o(e,o)&&e[o]&&e[o][0](),e[i[l]]=0;return a.O(u)},n=self.webpackChunkwebpack=self.webpackChunkwebpack||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=a.O(void 0,[351],(()=>a(1964)));r=a.O(r);var o=window;for(var i in r)o[i]=r[i];r.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})();