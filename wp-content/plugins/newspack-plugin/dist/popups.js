/*! For license information please see popups.js.LICENSE.txt */
!function(){"use strict";var e,t={8298:function(e){const t="KMGTPEZY".split("");e.exports=function(e,n){e=Math.abs(e);let a=0;for(;e>=1e3&&++a<t.length;)e/=1e3;return n&&(e=n(e)),String(0===a?e:e+t[a-1])}},9227:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=(a=n(9196))&&a.__esModule?a:{default:a},i=n(5697),s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.scriptLoaderId="id"+n.constructor.idCount++,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.onError,n=e.onLoad,a=e.url;this.constructor.loadedScripts[a]?n():this.constructor.erroredScripts[a]?t():this.constructor.scriptObservers[a]?this.constructor.scriptObservers[a][this.scriptLoaderId]=this.props:(this.constructor.scriptObservers[a]=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},this.scriptLoaderId,this.props),this.createScript())}},{key:"componentWillUnmount",value:function(){var e=this.props.url,t=this.constructor.scriptObservers[e];t&&delete t[this.scriptLoaderId]}},{key:"createScript",value:function(){var e=this,t=this.props,n=t.onCreate,a=t.url,r=t.attributes,o=document.createElement("script");n(),r&&Object.keys(r).forEach((function(e){return o.setAttribute(e,r[e])})),o.src=a,o.hasAttribute("async")||(o.async=1);var i=function(t){var n=e.constructor.scriptObservers[a];Object.keys(n).forEach((function(r){t(n[r])&&delete e.constructor.scriptObservers[a][e.scriptLoaderId]}))};o.onload=function(){e.constructor.loadedScripts[a]=!0,i((function(e){return e.onLoad(),!0}))},o.onerror=function(){e.constructor.erroredScripts[a]=!0,i((function(e){return e.onError(),!0}))},document.body.appendChild(o)}},{key:"render",value:function(){return null}}]),t}(o.default.Component);s.propTypes={attributes:i.PropTypes.object,onCreate:i.PropTypes.func,onError:i.PropTypes.func.isRequired,onLoad:i.PropTypes.func.isRequired,url:i.PropTypes.string.isRequired},s.defaultProps={attributes:{},onCreate:function(){},onError:function(){},onLoad:function(){}},s.scriptObservers={},s.loadedScripts={},s.erroredScripts={},s.idCount=0,t.default=s,e.exports=t.default},3586:function(e,t,n){n.r(t);var a=n(7462),r=n(4942),o=(n(5674),n(9307)),i=n(5736),s=n(6483),c=n(6989),l=n.n(c),u=n(129);function p(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function d(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function m(e){d(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function h(e,t){d(2,arguments);var n=m(e),a=p(t);return isNaN(a)?new Date(NaN):a?(n.setDate(n.getDate()+a),n):n}function g(e,t){d(2,arguments);var n=p(t);return h(e,-n)}var w=n(4009),f=n(8614),v=n(9630),b=n(3279),y=n(5609);const k=i.__;var _=e=>{let{dismiss:t,hasPrompts:n,hasPublished:a,isArchive:r,onActivate:i,onArchive:s,onDeactivate:c,onDelete:l,onDuplicate:u,onRename:p,onUnarchive:d}=e;return(0,o.createElement)(w.J2,{position:"bottom right",onFocusOutside:()=>t(),onKeyDown:e=>v.ESCAPE===e.keyCode&&t()},(0,o.createElement)(y.MenuItem,{onClick:()=>t(),className:"screen-reader-text"},k("Close Popover","newspack")),n&&(0,o.createElement)(y.MenuItem,{onClick:()=>{t(),i()},className:"newspack-button"},k("Activate all prompts","newspack")),a&&(0,o.createElement)(y.MenuItem,{onClick:()=>{t(),c()},className:"newspack-button"},k("Deactivate all prompts","newspack")),(0,o.createElement)(y.MenuItem,{onClick:()=>{t(),u()},className:"newspack-button"},k("Duplicate","newspack")),(0,o.createElement)(y.MenuItem,{onClick:()=>{t(),p()},className:"newspack-button"},k("Rename","newspack")),!r&&(0,o.createElement)(y.MenuItem,{onClick:()=>{t(),s()},className:"newspack-button"},k("Archive","newspack")),r&&(0,o.createElement)(y.MenuItem,{onClick:()=>{t(),d()},className:"newspack-button"},k("Unarchive","newspack")),(0,o.createElement)(y.MenuItem,{onClick:()=>{t(),l()},className:"newspack-button"},k("Delete","newspack")))};function C(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)e[a]=n[a]}return e}var E=function e(t,n){function a(e,a,r){if("undefined"!=typeof document){"number"==typeof(r=C({},n,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var i in r)r[i]&&(o+="; "+i,!0!==r[i]&&(o+="="+r[i].split(";")[0]));return document.cookie=e+"="+t.write(a,e)+o}}return Object.create({set:a,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],a={},r=0;r<n.length;r++){var o=n[r].split("="),i=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(a[s]=t.read(i,s),e===s)break}catch(e){}}return e?a[e]:a}},remove:function(e,t){a(e,"",C({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,C({},this.attributes,t))},withConverter:function(t){return e(C({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),T=E,x=n(5117),S=n(444),P=(0,o.createElement)(S.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(S.Path,{d:"M18.5 10.5H10v8h8a.5.5 0 00.5-.5v-7.5zm-10 0h-3V18a.5.5 0 00.5.5h2.5v-8zM6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z"})),D=n(5332),M=e=>{var t,n,r,i;const c=null===(t=window)||void 0===t||null===(n=t.newspack_popups_wizard_data)||void 0===n?void 0:n.preview_post,l=(null===(r=window)||void 0===r||null===(i=r.newspack_popups_wizard_data)||void 0===i?void 0:i.frontend_url)||"/",{campaign:u=!1,onLoad:p=(()=>{}),segment:d="",showUnpublished:m=!1,url:h=c||l}=e,g=e=>{const t=d.length?[`segment:${d}`]:["segment:everyone"];return m&&t.push("show_unpublished:true"),u?t.push(`campaign:${u}`):t.push("all"),(0,s.addQueryArgs)(e,{view_as:t.join(";")})};return(0,o.createElement)(w.BA,(0,a.Z)({},e,{onLoad:e=>{e&&([...e.contentWindow.document.querySelectorAll("a")].forEach((e=>{const t=e.getAttribute("href");0===t.indexOf(l)&&e.setAttribute("href",g(t))})),p(e))},url:g(h)}))},z=n(2629),N=n(9522);const O=i.__;var A=e=>{let{deletePopup:t,restorePopup:n,onFocusOutside:a,prompt:r,previewPopup:i,publishPopup:s,setIsDuplicatePromptModalVisible:c,unpublishPopup:l}=e;const{id:u,edit_link:p,status:d}=r,m="publish"===d,h="trash"===d;return(0,o.createElement)(w.J2,{position:"bottom left",onFocusOutside:a,onKeyDown:e=>v.ESCAPE===e.keyCode&&a(),className:"newspack-popover__campaigns__primary-popover"},(0,o.createElement)(y.MenuItem,{onClick:()=>a(),className:"screen-reader-text"},O("Close Popover","newspack")),h?(0,o.createElement)(o.Fragment,null,(0,o.createElement)(y.MenuItem,{onClick:()=>n(u),className:"newspack-button"},O("Restore","newspack")),(0,o.createElement)(y.MenuItem,{onClick:()=>t(u),className:"newspack-button"},O("Delete permanently","newspack"))):(0,o.createElement)(o.Fragment,null,(0,o.createElement)(y.MenuItem,{onClick:()=>{a(),i(r)},className:"newspack-button"},O("Preview","newspack")),(0,o.createElement)(y.MenuItem,{href:(0,z.decodeEntities)(p),className:"newspack-button",isLink:!0},O("Edit","newspack")),(0,o.createElement)(y.MenuItem,{onClick:()=>c(!0),className:"newspack-button"},O("Duplicate","newspack")),(0,o.createElement)(y.MenuItem,{onClick:()=>{a(),(m?l:s)(u)},className:"newspack-button"},O(m?"Deactivate":"Activate","newspack")),(0,o.createElement)(y.MenuItem,{onClick:()=>t(u),className:"newspack-button"},O("Delete","newspack"))),(0,o.createElement)("div",{className:"newspack-popover__campaigns__info"},O("ID:","newspack")," ",u))},U=n(2819);function F(e){return d(1,arguments),e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function I(e){if(d(1,arguments),!F(e)&&"number"!=typeof e)return!1;var t=m(e);return!isNaN(Number(t))}var L={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function q(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,a=e.formats[n]||e.formats[e.defaultWidth];return a}}var H={date:q({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:q({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:q({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},R={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function W(e){return function(t,n){var a,r=n||{};if("formatting"===(r.context?String(r.context):"standalone")&&e.formattingValues){var o=e.defaultFormattingWidth||e.defaultWidth,i=r.width?String(r.width):o;a=e.formattingValues[i]||e.formattingValues[o]}else{var s=e.defaultWidth,c=r.width?String(r.width):e.defaultWidth;a=e.values[c]||e.values[s]}return a[e.argumentCallback?e.argumentCallback(t):t]}}var Y={ordinalNumber:function(e,t){var n=Number(e),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:W({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:W({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:W({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:W({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:W({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function j(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.width,r=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],o=t.match(r);if(!o)return null;var i,s=o[0],c=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(c)?G(c,(function(e){return e.test(s)})):B(c,(function(e){return e.test(s)}));i=e.valueCallback?e.valueCallback(l):l,i=n.valueCallback?n.valueCallback(i):i;var u=t.slice(s.length);return{value:i,rest:u}}}function B(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function G(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}var $,Z={ordinalNumber:($={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match($.matchPattern);if(!n)return null;var a=n[0],r=e.match($.parsePattern);if(!r)return null;var o=$.valueCallback?$.valueCallback(r[0]):r[0];o=t.valueCallback?t.valueCallback(o):o;var i=e.slice(a.length);return{value:o,rest:i}}),era:j({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:j({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:j({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:j({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:j({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},Q={code:"en-US",formatDistance:function(e,t,n){var a,r=L[e];return a="string"==typeof r?r:1===t?r.one:r.other.replace("{{count}}",t.toString()),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a},formatLong:H,formatRelative:function(e,t,n,a){return R[e]},localize:Y,match:Z,options:{weekStartsOn:0,firstWeekContainsDate:1}};function V(e,t){d(2,arguments);var n=m(e).getTime(),a=p(t);return new Date(n+a)}function X(e,t){d(2,arguments);var n=p(t);return V(e,-n)}var J=864e5;function K(e){d(1,arguments);var t=1,n=m(e),a=n.getUTCDay(),r=(a<t?7:0)+a-t;return n.setUTCDate(n.getUTCDate()-r),n.setUTCHours(0,0,0,0),n}function ee(e){d(1,arguments);var t=m(e),n=t.getUTCFullYear(),a=new Date(0);a.setUTCFullYear(n+1,0,4),a.setUTCHours(0,0,0,0);var r=K(a),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var i=K(o);return t.getTime()>=r.getTime()?n+1:t.getTime()>=i.getTime()?n:n-1}function te(e){d(1,arguments);var t=ee(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var a=K(n);return a}var ne=6048e5;function ae(e){d(1,arguments);var t=m(e),n=K(t).getTime()-te(t).getTime();return Math.round(n/ne)+1}function re(e,t){d(1,arguments);var n=t||{},a=n.locale,r=a&&a.options&&a.options.weekStartsOn,o=null==r?0:p(r),i=null==n.weekStartsOn?o:p(n.weekStartsOn);if(!(i>=0&&i<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=m(e),c=s.getUTCDay(),l=(c<i?7:0)+c-i;return s.setUTCDate(s.getUTCDate()-l),s.setUTCHours(0,0,0,0),s}function oe(e,t){d(1,arguments);var n=m(e),a=n.getUTCFullYear(),r=t||{},o=r.locale,i=o&&o.options&&o.options.firstWeekContainsDate,s=null==i?1:p(i),c=null==r.firstWeekContainsDate?s:p(r.firstWeekContainsDate);if(!(c>=1&&c<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var l=new Date(0);l.setUTCFullYear(a+1,0,c),l.setUTCHours(0,0,0,0);var u=re(l,t),h=new Date(0);h.setUTCFullYear(a,0,c),h.setUTCHours(0,0,0,0);var g=re(h,t);return n.getTime()>=u.getTime()?a+1:n.getTime()>=g.getTime()?a:a-1}function ie(e,t){d(1,arguments);var n=t||{},a=n.locale,r=a&&a.options&&a.options.firstWeekContainsDate,o=null==r?1:p(r),i=null==n.firstWeekContainsDate?o:p(n.firstWeekContainsDate),s=oe(e,t),c=new Date(0);c.setUTCFullYear(s,0,i),c.setUTCHours(0,0,0,0);var l=re(c,t);return l}var se=6048e5;function ce(e,t){d(1,arguments);var n=m(e),a=re(n,t).getTime()-ie(n,t).getTime();return Math.round(a/se)+1}function le(e,t){for(var n=e<0?"-":"",a=Math.abs(e).toString();a.length<t;)a="0"+a;return n+a}var ue=function(e,t){var n=e.getUTCFullYear(),a=n>0?n:1-n;return le("yy"===t?a%100:a,t.length)},pe=function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):le(n+1,2)},de=function(e,t){return le(e.getUTCDate(),t.length)},me=function(e,t){return le(e.getUTCHours()%12||12,t.length)},he=function(e,t){return le(e.getUTCHours(),t.length)},ge=function(e,t){return le(e.getUTCMinutes(),t.length)},we=function(e,t){return le(e.getUTCSeconds(),t.length)},fe=function(e,t){var n=t.length,a=e.getUTCMilliseconds();return le(Math.floor(a*Math.pow(10,n-3)),t.length)},ve={G:function(e,t,n){var a=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});default:return n.era(a,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var a=e.getUTCFullYear(),r=a>0?a:1-a;return n.ordinalNumber(r,{unit:"year"})}return ue(e,t)},Y:function(e,t,n,a){var r=oe(e,a),o=r>0?r:1-r;return"YY"===t?le(o%100,2):"Yo"===t?n.ordinalNumber(o,{unit:"year"}):le(o,t.length)},R:function(e,t){return le(ee(e),t.length)},u:function(e,t){return le(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var a=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return le(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,n){var a=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return le(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,n){var a=e.getUTCMonth();switch(t){case"M":case"MM":return pe(e,t);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,n){var a=e.getUTCMonth();switch(t){case"L":return String(a+1);case"LL":return le(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,n,a){var r=ce(e,a);return"wo"===t?n.ordinalNumber(r,{unit:"week"}):le(r,t.length)},I:function(e,t,n){var a=ae(e);return"Io"===t?n.ordinalNumber(a,{unit:"week"}):le(a,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):de(e,t)},D:function(e,t,n){var a=function(e){d(1,arguments);var t=m(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var a=t.getTime(),r=n-a;return Math.floor(r/J)+1}(e);return"Do"===t?n.ordinalNumber(a,{unit:"dayOfYear"}):le(a,t.length)},E:function(e,t,n){var a=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,n,a){var r=e.getUTCDay(),o=(r-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return le(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,n,a){var r=e.getUTCDay(),o=(r-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return le(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,n){var a=e.getUTCDay(),r=0===a?7:a;switch(t){case"i":return String(r);case"ii":return le(r,t.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,n){var a=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){var a,r=e.getUTCHours();switch(a=12===r?"noon":0===r?"midnight":r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){var a,r=e.getUTCHours();switch(a=r>=17?"evening":r>=12?"afternoon":r>=4?"morning":"night",t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var a=e.getUTCHours()%12;return 0===a&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return me(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):he(e,t)},K:function(e,t,n){var a=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(a,{unit:"hour"}):le(a,t.length)},k:function(e,t,n){var a=e.getUTCHours();return 0===a&&(a=24),"ko"===t?n.ordinalNumber(a,{unit:"hour"}):le(a,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):ge(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):we(e,t)},S:function(e,t){return fe(e,t)},X:function(e,t,n,a){var r=(a._originalDate||e).getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return ye(r);case"XXXX":case"XX":return ke(r);default:return ke(r,":")}},x:function(e,t,n,a){var r=(a._originalDate||e).getTimezoneOffset();switch(t){case"x":return ye(r);case"xxxx":case"xx":return ke(r);default:return ke(r,":")}},O:function(e,t,n,a){var r=(a._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+be(r,":");default:return"GMT"+ke(r,":")}},z:function(e,t,n,a){var r=(a._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+be(r,":");default:return"GMT"+ke(r,":")}},t:function(e,t,n,a){var r=a._originalDate||e;return le(Math.floor(r.getTime()/1e3),t.length)},T:function(e,t,n,a){return le((a._originalDate||e).getTime(),t.length)}};function be(e,t){var n=e>0?"-":"+",a=Math.abs(e),r=Math.floor(a/60),o=a%60;if(0===o)return n+String(r);var i=t||"";return n+String(r)+i+le(o,2)}function ye(e,t){return e%60==0?(e>0?"-":"+")+le(Math.abs(e)/60,2):ke(e,t)}function ke(e,t){var n=t||"",a=e>0?"-":"+",r=Math.abs(e);return a+le(Math.floor(r/60),2)+n+le(r%60,2)}var _e=ve;function Ce(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}}function Ee(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}}var Te={p:Ee,P:function(e,t){var n,a=e.match(/(P+)(p+)?/)||[],r=a[1],o=a[2];if(!o)return Ce(e,t);switch(r){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",Ce(r,t)).replace("{{time}}",Ee(o,t))}};function xe(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var Se=["D","DD"],Pe=["YY","YYYY"];function De(e){return-1!==Se.indexOf(e)}function Me(e){return-1!==Pe.indexOf(e)}function ze(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var Ne=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Oe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ae=/^'([^]*?)'?$/,Ue=/''/g,Fe=/[a-zA-Z]/;function Ie(e,t,n){d(2,arguments);var a=String(t),r=n||{},o=r.locale||Q,i=o.options&&o.options.firstWeekContainsDate,s=null==i?1:p(i),c=null==r.firstWeekContainsDate?s:p(r.firstWeekContainsDate);if(!(c>=1&&c<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var l=o.options&&o.options.weekStartsOn,u=null==l?0:p(l),h=null==r.weekStartsOn?u:p(r.weekStartsOn);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!o.localize)throw new RangeError("locale must contain localize property");if(!o.formatLong)throw new RangeError("locale must contain formatLong property");var g=m(e);if(!I(g))throw new RangeError("Invalid time value");var w=xe(g),f=X(g,w),v={firstWeekContainsDate:c,weekStartsOn:h,locale:o,_originalDate:g},b=a.match(Oe).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,Te[t])(e,o.formatLong,v):e})).join("").match(Ne).map((function(n){if("''"===n)return"'";var a=n[0];if("'"===a)return Le(n);var i=_e[a];if(i)return!r.useAdditionalWeekYearTokens&&Me(n)&&ze(n,t,e),!r.useAdditionalDayOfYearTokens&&De(n)&&ze(n,t,e),i(f,n,o.localize,v);if(a.match(Fe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+a+"`");return n})).join("");return b}function Le(e){return e.match(Ae)[1].replace(Ue,"'")}function qe(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t=t||{})Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function He(e,t,n){d(2,arguments);var a=n||{},r=a.locale,o=r&&r.options&&r.options.weekStartsOn,i=null==o?0:p(o),s=null==a.weekStartsOn?i:p(a.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var c=m(e),l=p(t),u=c.getUTCDay(),h=l%7,g=(h+7)%7,w=(g<s?7:0)+l-u;return c.setUTCDate(c.getUTCDate()+w),c}var Re=/^(1[0-2]|0?\d)/,We=/^(3[0-1]|[0-2]?\d)/,Ye=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,je=/^(5[0-3]|[0-4]?\d)/,Be=/^(2[0-3]|[0-1]?\d)/,Ge=/^(2[0-4]|[0-1]?\d)/,$e=/^(1[0-1]|0?\d)/,Ze=/^(1[0-2]|0?\d)/,Qe=/^[0-5]?\d/,Ve=/^[0-5]?\d/,Xe=/^\d/,Je=/^\d{1,2}/,Ke=/^\d{1,3}/,et=/^\d{1,4}/,tt=/^-?\d+/,nt=/^-?\d/,at=/^-?\d{1,2}/,rt=/^-?\d{1,3}/,ot=/^-?\d{1,4}/,it=/^([+-])(\d{2})(\d{2})?|Z/,st=/^([+-])(\d{2})(\d{2})|Z/,ct=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,lt=/^([+-])(\d{2}):(\d{2})|Z/,ut=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function pt(e,t,n){var a=t.match(e);if(!a)return null;var r=parseInt(a[0],10);return{value:n?n(r):r,rest:t.slice(a[0].length)}}function dt(e,t){var n=t.match(e);return n?"Z"===n[0]?{value:0,rest:t.slice(1)}:{value:("+"===n[1]?1:-1)*(36e5*(n[2]?parseInt(n[2],10):0)+6e4*(n[3]?parseInt(n[3],10):0)+1e3*(n[5]?parseInt(n[5],10):0)),rest:t.slice(n[0].length)}:null}function mt(e,t){return pt(tt,e,t)}function ht(e,t,n){switch(e){case 1:return pt(Xe,t,n);case 2:return pt(Je,t,n);case 3:return pt(Ke,t,n);case 4:return pt(et,t,n);default:return pt(new RegExp("^\\d{1,"+e+"}"),t,n)}}function gt(e,t,n){switch(e){case 1:return pt(nt,t,n);case 2:return pt(at,t,n);case 3:return pt(rt,t,n);case 4:return pt(ot,t,n);default:return pt(new RegExp("^-?\\d{1,"+e+"}"),t,n)}}function wt(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function ft(e,t){var n,a=t>0,r=a?t:1-t;if(r<=50)n=e||100;else{var o=r+50;n=e+100*Math.floor(o/100)-(e>=o%100?100:0)}return a?n:1-n}var vt=[31,28,31,30,31,30,31,31,30,31,30,31],bt=[31,29,31,30,31,30,31,31,30,31,30,31];function yt(e){return e%400==0||e%4==0&&e%100!=0}var kt={G:{priority:140,parse:function(e,t,n,a){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}},set:function(e,t,n,a){return t.era=n,e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["R","u","t","T"]},y:{priority:130,parse:function(e,t,n,a){var r=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return ht(4,e,r);case"yo":return n.ordinalNumber(e,{unit:"year",valueCallback:r});default:return ht(t.length,e,r)}},validate:function(e,t,n){return t.isTwoDigitYear||t.year>0},set:function(e,t,n,a){var r=e.getUTCFullYear();if(n.isTwoDigitYear){var o=ft(n.year,r);return e.setUTCFullYear(o,0,1),e.setUTCHours(0,0,0,0),e}var i="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(i,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","u","w","I","i","e","c","t","T"]},Y:{priority:130,parse:function(e,t,n,a){var r=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return ht(4,e,r);case"Yo":return n.ordinalNumber(e,{unit:"year",valueCallback:r});default:return ht(t.length,e,r)}},validate:function(e,t,n){return t.isTwoDigitYear||t.year>0},set:function(e,t,n,a){var r=oe(e,a);if(n.isTwoDigitYear){var o=ft(n.year,r);return e.setUTCFullYear(o,0,a.firstWeekContainsDate),e.setUTCHours(0,0,0,0),re(e,a)}var i="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(i,0,a.firstWeekContainsDate),e.setUTCHours(0,0,0,0),re(e,a)},incompatibleTokens:["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:{priority:130,parse:function(e,t,n,a){return gt("R"===t?4:t.length,e)},set:function(e,t,n,a){var r=new Date(0);return r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0),K(r)},incompatibleTokens:["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:{priority:130,parse:function(e,t,n,a){return gt("u"===t?4:t.length,e)},set:function(e,t,n,a){return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["G","y","Y","R","w","I","i","e","c","t","T"]},Q:{priority:120,parse:function(e,t,n,a){switch(t){case"Q":case"QQ":return ht(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=1&&t<=4},set:function(e,t,n,a){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:{priority:120,parse:function(e,t,n,a){switch(t){case"q":case"qq":return ht(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=1&&t<=4},set:function(e,t,n,a){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:{priority:110,parse:function(e,t,n,a){var r=function(e){return e-1};switch(t){case"M":return pt(Re,e,r);case"MM":return ht(2,e,r);case"Mo":return n.ordinalNumber(e,{unit:"month",valueCallback:r});case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,a){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]},L:{priority:110,parse:function(e,t,n,a){var r=function(e){return e-1};switch(t){case"L":return pt(Re,e,r);case"LL":return ht(2,e,r);case"Lo":return n.ordinalNumber(e,{unit:"month",valueCallback:r});case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,a){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:{priority:100,parse:function(e,t,n,a){switch(t){case"w":return pt(je,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return ht(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=53},set:function(e,t,n,a){return re(function(e,t,n){d(2,arguments);var a=m(e),r=p(t),o=ce(a,n)-r;return a.setUTCDate(a.getUTCDate()-7*o),a}(e,n,a),a)},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:{priority:100,parse:function(e,t,n,a){switch(t){case"I":return pt(je,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return ht(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=53},set:function(e,t,n,a){return K(function(e,t){d(2,arguments);var n=m(e),a=p(t),r=ae(n)-a;return n.setUTCDate(n.getUTCDate()-7*r),n}(e,n,a),a)},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:{priority:90,subPriority:1,parse:function(e,t,n,a){switch(t){case"d":return pt(We,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return ht(t.length,e)}},validate:function(e,t,n){var a=yt(e.getUTCFullYear()),r=e.getUTCMonth();return a?t>=1&&t<=bt[r]:t>=1&&t<=vt[r]},set:function(e,t,n,a){return e.setUTCDate(n),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:{priority:90,subPriority:1,parse:function(e,t,n,a){switch(t){case"D":case"DD":return pt(Ye,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return ht(t.length,e)}},validate:function(e,t,n){return yt(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365},set:function(e,t,n,a){return e.setUTCMonth(0,n),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:{priority:90,parse:function(e,t,n,a){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,a){return(e=He(e,n,a)).setUTCHours(0,0,0,0),e},incompatibleTokens:["D","i","e","c","t","T"]},e:{priority:90,parse:function(e,t,n,a){var r=function(e){var t=7*Math.floor((e-1)/7);return(e+a.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return ht(t.length,e,r);case"eo":return n.ordinalNumber(e,{unit:"day",valueCallback:r});case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,a){return(e=He(e,n,a)).setUTCHours(0,0,0,0),e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:{priority:90,parse:function(e,t,n,a){var r=function(e){var t=7*Math.floor((e-1)/7);return(e+a.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return ht(t.length,e,r);case"co":return n.ordinalNumber(e,{unit:"day",valueCallback:r});case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,a){return(e=He(e,n,a)).setUTCHours(0,0,0,0),e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:{priority:90,parse:function(e,t,n,a){var r=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return ht(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return n.day(e,{width:"abbreviated",context:"formatting",valueCallback:r})||n.day(e,{width:"short",context:"formatting",valueCallback:r})||n.day(e,{width:"narrow",context:"formatting",valueCallback:r});case"iiiii":return n.day(e,{width:"narrow",context:"formatting",valueCallback:r});case"iiiiii":return n.day(e,{width:"short",context:"formatting",valueCallback:r})||n.day(e,{width:"narrow",context:"formatting",valueCallback:r});default:return n.day(e,{width:"wide",context:"formatting",valueCallback:r})||n.day(e,{width:"abbreviated",context:"formatting",valueCallback:r})||n.day(e,{width:"short",context:"formatting",valueCallback:r})||n.day(e,{width:"narrow",context:"formatting",valueCallback:r})}},validate:function(e,t,n){return t>=1&&t<=7},set:function(e,t,n,a){return e=function(e,t){d(2,arguments);var n=p(t);n%7==0&&(n-=7);var a=1,r=m(e),o=r.getUTCDay(),i=((n%7+7)%7<a?7:0)+n-o;return r.setUTCDate(r.getUTCDate()+i),r}(e,n,a),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:{priority:80,parse:function(e,t,n,a){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,a){return e.setUTCHours(wt(n),0,0,0),e},incompatibleTokens:["b","B","H","k","t","T"]},b:{priority:80,parse:function(e,t,n,a){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,a){return e.setUTCHours(wt(n),0,0,0),e},incompatibleTokens:["a","B","H","k","t","T"]},B:{priority:80,parse:function(e,t,n,a){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,a){return e.setUTCHours(wt(n),0,0,0),e},incompatibleTokens:["a","b","t","T"]},h:{priority:70,parse:function(e,t,n,a){switch(t){case"h":return pt(Ze,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return ht(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=12},set:function(e,t,n,a){var r=e.getUTCHours()>=12;return r&&n<12?e.setUTCHours(n+12,0,0,0):r||12!==n?e.setUTCHours(n,0,0,0):e.setUTCHours(0,0,0,0),e},incompatibleTokens:["H","K","k","t","T"]},H:{priority:70,parse:function(e,t,n,a){switch(t){case"H":return pt(Be,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return ht(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=23},set:function(e,t,n,a){return e.setUTCHours(n,0,0,0),e},incompatibleTokens:["a","b","h","K","k","t","T"]},K:{priority:70,parse:function(e,t,n,a){switch(t){case"K":return pt($e,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return ht(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,a){return e.getUTCHours()>=12&&n<12?e.setUTCHours(n+12,0,0,0):e.setUTCHours(n,0,0,0),e},incompatibleTokens:["h","H","k","t","T"]},k:{priority:70,parse:function(e,t,n,a){switch(t){case"k":return pt(Ge,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return ht(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=24},set:function(e,t,n,a){var r=n<=24?n%24:n;return e.setUTCHours(r,0,0,0),e},incompatibleTokens:["a","b","h","H","K","t","T"]},m:{priority:60,parse:function(e,t,n,a){switch(t){case"m":return pt(Qe,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return ht(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=59},set:function(e,t,n,a){return e.setUTCMinutes(n,0,0),e},incompatibleTokens:["t","T"]},s:{priority:50,parse:function(e,t,n,a){switch(t){case"s":return pt(Ve,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return ht(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=59},set:function(e,t,n,a){return e.setUTCSeconds(n,0),e},incompatibleTokens:["t","T"]},S:{priority:30,parse:function(e,t,n,a){return ht(t.length,e,(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))},set:function(e,t,n,a){return e.setUTCMilliseconds(n),e},incompatibleTokens:["t","T"]},X:{priority:10,parse:function(e,t,n,a){switch(t){case"X":return dt(it,e);case"XX":return dt(st,e);case"XXXX":return dt(ct,e);case"XXXXX":return dt(ut,e);default:return dt(lt,e)}},set:function(e,t,n,a){return t.timestampIsSet?e:new Date(e.getTime()-n)},incompatibleTokens:["t","T","x"]},x:{priority:10,parse:function(e,t,n,a){switch(t){case"x":return dt(it,e);case"xx":return dt(st,e);case"xxxx":return dt(ct,e);case"xxxxx":return dt(ut,e);default:return dt(lt,e)}},set:function(e,t,n,a){return t.timestampIsSet?e:new Date(e.getTime()-n)},incompatibleTokens:["t","T","X"]},t:{priority:40,parse:function(e,t,n,a){return mt(e)},set:function(e,t,n,a){return[new Date(1e3*n),{timestampIsSet:!0}]},incompatibleTokens:"*"},T:{priority:20,parse:function(e,t,n,a){return mt(e)},set:function(e,t,n,a){return[new Date(n),{timestampIsSet:!0}]},incompatibleTokens:"*"}},_t=kt,Ct=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Et=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Tt=/^'([^]*?)'?$/,xt=/''/g,St=/\S/,Pt=/[a-zA-Z]/;function Dt(e,t){if(t.timestampIsSet)return e;var n=new Date(0);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}function Mt(e){return e.match(Tt)[1].replace(xt,"'")}const zt=i.__,Nt=e=>{var t;return-1<((null===(t=window.newspack_popups_wizard_data)||void 0===t?void 0:t.overlay_placements)||[]).indexOf(e.options.placement)},Ot=e=>"above_header"===e.options.placement,At=e=>{var t;const n=(null===(t=window.newspack_popups_wizard_data)||void 0===t?void 0:t.custom_placements)||{};return-1<Object.keys(n).indexOf(e.options.placement)},Ut={top:zt("Top Overlay","newspack"),top_left:zt("Top Left Overlay","newspack"),top_right:zt("Top Right Overlay","newspack"),center:zt("Center Overlay","newspack"),center_left:zt("Center Left Overlay","newspack"),center_right:zt("Center Right Overlay","newspack"),bottom:zt("Bottom Overlay","newspack"),bottom_left:zt("Bottom Left Overlay","newspack"),bottom_right:zt("Bottom Right Overlay","newspack"),inline:zt("Inline","newspack"),archives:zt("In archive pages","newspack"),above_header:zt("Above Header","newspack"),manual:zt("Manual Only","newspack")},Ft=e=>{var t;let{options:{frequency:n,placement:a}}=e;const r=(null===(t=window.newspack_popups_wizard_data)||void 0===t?void 0:t.custom_placements)||{};return"manual"===n||r.hasOwnProperty(a)?zt("Custom Placement","newspack"):Ut[a]},It=e=>{var t,n;const a=null===(t=window.newspack_popups_wizard_data)||void 0===t?void 0:t.custom_placements,r=null===(n=window.newspack_popups_wizard_data)||void 0===n?void 0:n.overlay_placements,o=Object.keys(Ut).filter((t=>Nt(e)?-1<r.indexOf(t):-1===r.indexOf(t))).map((e=>({label:Ut[e],value:e})));return!Nt(e)&&a?o.concat(Object.keys(a).map((e=>({label:a[e],value:e})))):o},Lt={once:zt("Once","newspack"),daily:zt("Once a day","newspack"),always:zt("Until dismissed","newspack")},qt=e=>{let{status:t}=e;return"publish"!==t?"newspack-card__is-disabled":"newspack-card__is-supported"},Ht=e=>{const{categories:t,tags:n,campaign_groups:a,status:r}=e,o=[];if(a.length>0){const e=a.map((e=>{let{name:t}=e;return t})).join(", ");o.push((1===a.length?zt("Campaign: ","newspack"):zt("Campaigns: ","newspack"))+e)}return t.length>0&&o.push(zt("Categories: ","newspack")+t.map((e=>e.name)).join(", ")),n.length>0&&o.push(zt("Tags: ","newspack")+n.map((e=>e.name)).join(", ")),"pending"===r&&o.push(zt("Pending review","newspack")),"future"===r&&o.push(zt("Scheduled","newspack")),o.push(zt("Frequency: ","newspack")+jt(e)),o.length?o.join(" | "):null},Rt=(0,U.memoize)((async e=>{try{return await Promise.all(e.map((async e=>(await l()({path:(0,s.addQueryArgs)("/wp/v2/categories/"+e,{_fields:"name"})})).name)))}catch(e){return console.error(e),[]}})),Wt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const{configuration:n}=e,{favorite_categories:a=[],is_donor:r=!1,is_not_donor:o=!1,is_not_subscribed:s=!1,is_subscribed:c=!1,is_logged_in:l=!1,is_not_logged_in:u=!1,max_posts:p=0,max_session_posts:d=0,min_posts:m=0,min_session_posts:h=0,referrers:g="",referrers_not:w=""}=n,f=[];return(0<m||0<p)&&f.push((0,i.sprintf)(zt("Articles read (past 30 days): %1$s %2$s","newspack"),0<m?zt("min ","newspack")+m:"",0<p?zt("max ","newspack")+p:"")),(0<h||0<d)&&f.push((0,i.sprintf)(zt("Articles read (session): %1$s %2$s","newspack"),0<h?zt("min ","newspack")+h:"",0<d?zt("max ","newspack")+d:"")),r&&f.push(zt("Has donated","newspack")),o&&f.push(zt("Has not donated","newspack")),c&&f.push(zt("Has subscribed","newspack")),s&&f.push(zt("Has not subscribed","newspack")),l&&f.push(zt("Is logged in","newspack")),u&&f.push(zt("Is not logged in","newspack")),g&&f.push(zt("Referrers (matching): ")+g),w&&f.push(zt("Referrers (excluding): ")+w),0<a.length&&(0<t.length?f.push((0,i.sprintf)(zt("Favorite %1$s: %2$s","newspack"),t.length>1?zt("categories","newspack"):zt("category","newspack"),t.filter((e=>!!e)).join(", "))):f.push(zt("Has favorite categories","newspack"))),f.length?f.join(" | "):null},Yt=(e,t)=>{const n=[];if("publish"===t.status&&(Ot(t)||Nt(t)||At(t))){const n=t.categories,a=e.filter((e=>{const a=e.categories,r=0===n.length&&0===a.length||n.some((e=>a.some((t=>e.term_id===t.term_id))));return"publish"===e.status&&e.id!==t.id&&(o=e,t.options.placement===o.options.placement)&&((e,t)=>{const n=e?e.split(","):[],a=t?t.split(","):[];return!n.length&&!a.length||n.some((e=>-1<a.indexOf(e)))})(t.options.selected_segment_id,e.options.selected_segment_id)&&r;var o}));return 0<a.length?(0,o.createElement)(o.Fragment,null,(0,o.createElement)("h4",{className:"newspack-notice__heading"},(0,i.sprintf)(zt("%s detected:","newspack"),1<a.length?zt("Conflicts","newspack"):zt("Conflict","newspack"))),(0,o.createElement)("ul",null,a.map((e=>(0,o.createElement)("li",{key:e.id},(0,o.createElement)("p",{"data-testid":`conflict-warning-${t.id}`},(0,o.createElement)("strong",null,(0,i.sprintf)("%s: ",e.title)),(0,o.createElement)("span",null,((e,t)=>Nt(e)||Ot(e)?(0,i.sprintf)(zt("If multiple%1$s %2$s share the same segment%3$s, only the most recent one will be displayed."),0===t.length?zt(" uncategorized","newspack"):"",Ot(e)?zt("above-header prompts","newspack"):zt("overlays","newspack"),0<t.length?zt(" and category filtering","newspack"):""):At(e)?(0,i.sprintf)(zt("If multiple%1$s prompts in the same custom placement share the same segment%2$s, only the most recent one will be displayed."),0===t.length?zt(" uncategorized","newspack"):"",0<t.length?zt(" and category filtering","newspack"):""):"")(t,n)))))))):null}return n.length?n.join(" "):null},jt=e=>{let{options:{frequency:t}}=e;return Lt[t]},Bt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return Ie(e,"yyyy-MM-dd")},Gt=e=>function(e,t,n,a){d(3,arguments);var r=String(e),o=String(t),i=a||{},s=i.locale||Q;if(!s.match)throw new RangeError("locale must contain match property");var c=s.options&&s.options.firstWeekContainsDate,l=null==c?1:p(c),u=null==i.firstWeekContainsDate?l:p(i.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var h=s.options&&s.options.weekStartsOn,g=null==h?0:p(h),w=null==i.weekStartsOn?g:p(i.weekStartsOn);if(!(w>=0&&w<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===o)return""===r?m(n):new Date(NaN);var f,v={firstWeekContainsDate:u,weekStartsOn:w,locale:s},b=[{priority:10,subPriority:-1,set:Dt,index:0}],y=o.match(Et).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,Te[t])(e,s.formatLong,v):e})).join("").match(Ct),k=[];for(f=0;f<y.length;f++){var _=y[f];!i.useAdditionalWeekYearTokens&&Me(_)&&ze(_,o,e),!i.useAdditionalDayOfYearTokens&&De(_)&&ze(_,o,e);var C=_[0],E=_t[C];if(E){var T=E.incompatibleTokens;if(Array.isArray(T)){for(var x=void 0,S=0;S<k.length;S++){var P=k[S].token;if(-1!==T.indexOf(P)||P===C){x=k[S];break}}if(x)throw new RangeError("The format string mustn't contain `".concat(x.fullToken,"` and `").concat(_,"` at the same time"))}else if("*"===E.incompatibleTokens&&k.length)throw new RangeError("The format string mustn't contain `".concat(_,"` and any other token at the same time"));k.push({token:C,fullToken:_});var D=E.parse(r,_,s.match,v);if(!D)return new Date(NaN);b.push({priority:E.priority,subPriority:E.subPriority||0,set:E.set,validate:E.validate,value:D.value,index:b.length}),r=D.rest}else{if(C.match(Pt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");if("''"===_?_="'":"'"===C&&(_=Mt(_)),0!==r.indexOf(_))return new Date(NaN);r=r.slice(_.length)}}if(r.length>0&&St.test(r))return new Date(NaN);var M=b.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return b.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),z=m(n);if(isNaN(z))return new Date(NaN);var N=X(z,xe(z)),O={};for(f=0;f<M.length;f++){var A=M[f];if(A.validate&&!A.validate(N,A.value,v))return new Date(NaN);var U=A.set(N,O,A.value,v);U[0]?(N=U[0],qe(O,U[1])):N=U}return N}(e,"yyyy-MM-dd",new Date),$t=i.__,{SettingsCard:Zt}=w.Zr;var Qt=e=>{let{prompt:t,disabled:n,onClose:a,segments:r,updatePopup:s}=e;const[c,l]=w.PT.useObjectState(t),{excluded_categories:u=[],excluded_tags:p=[]}=c.options||{},[d,m]=(0,o.useState)(0<u.length||0<p.length||!1),h=(c.options.selected_segment_id||"").split(",");return(0,o.createElement)(w.u_,{title:t.title,onRequestClose:a,isWide:!0},(0,o.createElement)(w.zx,{onClick:()=>a(),className:"screen-reader-text"},$t("Close Modal","newspack")),(0,o.createElement)(w.rj,{gutter:16,columns:1},(0,o.createElement)(Zt,{title:$t("Campaigns","newspack"),description:$t("Assign a prompt to one or more campaigns for easier management","newspack"),columns:1,className:"newspack-settings__campaigns"},(0,o.createElement)(w.HZ,{disabled:n,value:c.campaign_groups||[],onChange:e=>l({campaign_groups:e}),label:$t("Campaigns","newspack"),taxonomy:"newspack_popups_taxonomy",hideLabelFromVision:!0})),(0,o.createElement)(Zt,{title:$t("Settings","newspack"),description:$t("When and how should the prompt be displayed","newspack"),columns:Nt(t)?3:2,className:"newspack-settings__settings"},(0,o.createElement)(w.Yw,{label:$t("Frequency","newspack"),disabled:n,onChange:e=>{l({options:{frequency:e}})},options:(f=t,Object.keys(Lt).filter((e=>!("always"===e&&Nt(f)))).map((e=>({label:Lt[e],value:e})))),value:c.options.frequency}),(0,o.createElement)(w.Yw,{label:Nt(t)?$t("Position"):$t("Placement"),disabled:n,onChange:e=>{l({options:{placement:e}})},options:It(t),value:c.options.placement}),Nt(t)&&(0,o.createElement)(w.Yw,{label:$t("Size"),disabled:n,onChange:e=>{l({options:{overlay_size:e}})},options:null===(g=window.newspack_popups_wizard_data)||void 0===g?void 0:g.overlay_sizes,value:c.options.overlay_size})),(0,o.createElement)(Zt,{title:$t("Targeting","newspack"),description:()=>(0,o.createElement)(o.Fragment,null,$t("Under which conditions should the prompt be displayed","newspack"),(0,o.createElement)("br",null),$t("If multiple conditions are set, all will have to be satisfied in order to display the prompt","newspack")),className:"newspack-settings__targeting"},(0,o.createElement)(w.RG,{label:$t("Segment","newspack"),disabled:n,hideHelpFromVision:!0,value:r.filter((e=>{let{id:t}=e;return h.indexOf(t)>-1})).map((e=>e.name)),onChange:e=>{const t=r.filter((t=>-1<e.indexOf(t.name))).map((e=>e.id));l({options:{selected_segment_id:t.join(",")}})},suggestions:r.filter((e=>-1===h.indexOf(e.id))).map((e=>e.name)),description:$t("Prompt will only appear to reader belonging to the specified segments.","newspack")}),(0,o.createElement)(w.HZ,{label:$t("Post categories","newspack "),disabled:n,hideHelpFromVision:!0,value:c.categories||[],onChange:e=>l({categories:e}),description:$t("Prompt will only appear on posts with the specified categories.","newspack")}),(0,o.createElement)(w.HZ,{label:$t("Post tags","newspack "),disabled:n,hideHelpFromVision:!0,taxonomy:"tags",value:c.tags||[],onChange:e=>l({tags:e}),description:$t("Prompt will only appear on posts with the specified tags.","newspack")}),(0,o.createElement)(w.zx,{isLink:!0,onClick:()=>m(!d)},(0,i.sprintf)($t("%s Advanced Settings","newspack_popups_taxonomy"),$t(d?"Hide":"Show","newspack"))),d&&(0,o.createElement)(o.Fragment,null,(0,o.createElement)(w.HZ,{label:$t("Category Exclusions","newspack "),disabled:n,hideHelpFromVision:!0,value:u||[],onChange:e=>l({options:{excluded_categories:e.map((e=>e.id))}}),description:$t("Prompt will not appear on posts with the specified categories.","newspack")}),(0,o.createElement)(w.HZ,{label:$t("Tag Exclusions","newspack "),disabled:n,hideHelpFromVision:!0,taxonomy:"tags",value:p||[],onChange:e=>l({options:{excluded_tags:e}}),description:$t("Prompt will not appear on posts with the specified tags.","newspack")})))),(0,o.createElement)(w.Zb,{buttonsCard:!0,noBorder:!0,className:"justify-end"},(0,o.createElement)(w.zx,{onClick:a,isSecondary:!0},$t("Cancel","newspack")),(0,o.createElement)(w.zx,{onClick:()=>{s(c).then(a)},isPrimary:!0},$t("Save","newspack"))));var g,f};const Vt=i.__,Xt=e=>{let{value:t,description:n}=e;return(0,o.createElement)("div",{className:"newspack-popups-wizard__analytics-data--value"},(0,o.createElement)("strong",null,t,"%"),(0,o.createElement)("small",null,n))},Jt=e=>{let{error:t,id:n,analyticsData:a}=e;if(t)return(0,o.createElement)(w.RZ,{className:"newspack-popups-wizard__analytics-data--icon",text:Vt("Could not fetch Analytics data","newspack")});if(!a)return(0,o.createElement)("div",{className:"newspack-popups-wizard__analytics-data--icon"},(0,o.createElement)(w.Pi,null));const{seen:r,load:i,form_submission:s}=a[n]||{};if(!r||!i)return(0,o.createElement)(w.RZ,{className:"newspack-popups-wizard__analytics-data--icon",text:Vt("No Analytics data","newspack")});const c=Math.min(100,Math.round(r/i*100)),l=()=>(0,o.createElement)(Xt,{value:c,description:Vt("viewability","newspack")});if(s){const e=Math.min(100,Math.round(s/r*100));return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(Xt,{value:e,description:Vt("conversion rate","newspack")}),l())}return l()};var Kt=e=>{const[t,n]=(0,o.useState)(!1),[r,s]=(0,o.useState)(!1),[c,u]=(0,o.useState)(!1),[p,d]=(0,o.useState)(null),{className:m,description:h,duplicated:g,duplicatePopup:f,inFlight:v,resetDuplicated:y,prompt:k={},segments:_,warning:C,promptsAnalyticsData:E}=e,{campaign_groups:T,id:x,edit_link:S,title:P}=k;(0,o.useEffect)((()=>{c&&!p&&D()}),[c]);const D=async()=>{const e=parseInt((null==k?void 0:k.duplicate_of)||k.id);try{const t=await l()({path:`/newspack/v1/wizard/newspack-popups-wizard/${e}/${k.id}/duplicate`});d(t)}catch(e){d(P+Vt(" copy","newspack-popups"))}};return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(w.fM,{isSmall:!0,badge:Ft(k),className:m,title:P.length?(0,z.decodeEntities)(P):Vt("(no title)","newspack"),titleLink:(0,z.decodeEntities)(S),key:x,description:h,notification:C,notificationLevel:"error",actionText:(0,o.createElement)(o.Fragment,null,(0,o.createElement)(Jt,{error:null==E?void 0:E.error,analyticsData:E,id:k.id}),(0,o.createElement)("div",{className:"newspack-popups-wizard__buttons"},(0,o.createElement)(w.zx,{isQuaternary:!0,isSmall:!0,className:t&&"popover-active",onClick:()=>n(!t),icon:N.Z,label:Vt("Prompt settings","newspack"),tooltipPosition:"bottom center"}),(0,o.createElement)(w.zx,{isQuaternary:!0,isSmall:!0,className:r&&"popover-active",onClick:()=>s(!r),icon:b.Z,label:Vt("More options","newspack"),tooltipPosition:"bottom center"}),r&&(0,o.createElement)(A,(0,a.Z)({onFocusOutside:()=>s(!1),prompt:k,setIsDuplicatePromptModalVisible:u},e))))}),t&&(0,o.createElement)(Qt,{prompt:k,disabled:v,onClose:()=>n(!1),segments:_,updatePopup:e.updatePopup}),c&&(0,o.createElement)(w.u_,{className:"newspack-popups__duplicate-modal",title:(0,i.sprintf)(Vt("Duplicate %s","newspack"),P),onRequestClose:()=>{u(!1),d(null),y()}},g?(0,o.createElement)(o.Fragment,null,(0,o.createElement)(w.qX,{isSuccess:!0,noticeText:(0,i.sprintf)(Vt("Duplicate of %s created as a draft.","newspack"),P)}),!T&&(0,o.createElement)(w.qX,{isWarning:!0,noticeText:Vt("This prompt is currently not assigned to any campaign.","newspack")}),(0,o.createElement)(w.Zb,{buttonsCard:!0,noBorder:!0,className:"justify-end"},(0,o.createElement)(w.zx,{isSecondary:!0,onClick:()=>{u(!1),d(null),y()}},Vt("Close","newspack")),(0,o.createElement)(w.zx,{isPrimary:!0,href:`/wp-admin/post.php?post=${g}&action=edit`},Vt("Edit","newspack")))):(0,o.createElement)(o.Fragment,null,!T&&(0,o.createElement)(w.qX,{isWarning:!0,noticeText:Vt("This prompt will not be assigned to any campaign.","newspack")}),(0,o.createElement)(w.w4,{disabled:v||null===p,label:Vt("Title","newspack"),value:p,onChange:e=>d(e)}),(0,o.createElement)(w.Zb,{buttonsCard:!0,noBorder:!0,className:"justify-end"},(0,o.createElement)(w.zx,{disabled:v,isSecondary:!0,onClick:()=>{u(!1),d(null),y()}},Vt("Cancel","newspack")),(0,o.createElement)(w.zx,{disabled:v||null===p,isPrimary:!0,onClick:()=>{const e=p.trim()||D();f(x,e)}},Vt("Duplicate","newspack"))))))};const en=(0,o.createElement)(y.SVG,{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},(0,o.createElement)(y.Path,{d:"M4 9h16v2H4V9zm0 4h10v2H4v-2z"})),tn=(0,o.createElement)(y.SVG,{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},(0,o.createElement)(y.Path,{d:"M17 14H7v3h10v-3z"}),(0,o.createElement)(y.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18 4H6a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2zM6 5.5h12a.5.5 0 01.5.5v12a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5z"})),nn=(0,o.createElement)(y.SVG,{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},(0,o.createElement)(y.Path,{d:"M16 10H8v4h8v-4z"}),(0,o.createElement)(y.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18 4H6a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2zM6 5.5h12a.5.5 0 01.5.5v12a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5z"})),an=(0,o.createElement)(y.SVG,{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},(0,o.createElement)(y.Path,{d:"M17 7H7v3h10V7z"}),(0,o.createElement)(y.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18 4H6a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2zM6 5.5h12a.5.5 0 01.5.5v12a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5z"})),rn=(0,o.createElement)(y.SVG,{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},(0,o.createElement)(y.Path,{d:"M12 18.8c-4.8 0-8.5-6.1-8.6-6.4l-.3-.4.2-.4c.2-.3 3.9-6.4 8.6-6.4 4.7 0 8.5 6.1 8.6 6.4l.2.4-.2.4c0 .2-3.7 6.4-8.5 6.4zM4.9 12c.9 1.3 3.8 5.2 7.1 5.2s6.3-4 7.1-5.2c-.9-1.3-3.8-5.3-7.1-5.3-3.3.1-6.3 4-7.1 5.3z"}),(0,o.createElement)(y.Path,{d:"M15 11.2c-.3.5-.8.8-1.4.8-.9 0-1.6-.7-1.6-1.6 0-.5.3-1 .7-1.3-.2 0-.5-.1-.7-.1-1.7 0-3.2 1.4-3.2 3.2s1.4 3.2 3.2 3.2c1.7 0 3.2-1.4 3.2-3.2 0-.3-.1-.7-.2-1z"})),on=(0,o.createElement)(y.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,o.createElement)(y.Path,{d:"M18 4H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H6c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h12c.3 0 .5.2.5.5v12zM7 11h2V9H7v2zm0 4h2v-2H7v2zm3-4h7V9h-7v2zm0 4h7v-2h-7v2z"})),sn=(0,o.createElement)(y.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,o.createElement)(y.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v3.5h-15V5c0-.3.2-.5.5-.5zm8 5.5h6.5v3.5H13V10zm-1.5 3.5h-7V10h7v3.5zm-7 5.5v-4h7v4.5H5c-.3 0-.5-.2-.5-.5zm14.5.5h-6V15h6.5v4c0 .3-.2.5-.5.5z"})),cn=i.__,ln=(e,t,n)=>{const a=[];return e&&a.push(`placement=${e}`),+t>0&&a.push(`group=${t}`),n&&a.push(`segment=${n}`),"/wp-admin/post-new.php?post_type=newspack_popups_cpt&"+a.join("&")},un=()=>{newspack_aux_data.popups_cookie_name&&window.location.host.split(".").reduce(((e,t,n,a)=>(e.push(a.slice(-(n+1)).join(".")),e)),[]).map((e=>T.remove(newspack_aux_data.popups_cookie_name,{domain:`.${e}`})))};var pn=e=>{const{campaignData:t,campaignId:n,segment:r}=e,[i,s]=(0,o.useState)(!1),[c,l]=(0,o.useState)([]),{label:u,id:p,prompts:d}=r,m="unassigned"!==n?parseInt(n):-1;(0,o.useEffect)((()=>{h()}),[r]);const h=async()=>{var e,t;0<(null===(e=r.configuration)||void 0===e||null===(t=e.favorite_categories)||void 0===t?void 0:t.length)&&l(await Rt(r.configuration.favorite_categories))};let g;return g="unassigned"===n?cn("No unassigned prompts in this segment.","newspack"):t?cn("No prompts in this segment for","newspack")+" "+t.name+".":cn("No active prompts in this segment.","newspack"),(0,o.createElement)(w.Zb,{isSmall:!0,className:"newspack-campaigns__segment-group__card"},(0,o.createElement)("div",{className:"newspack-campaigns__segment-group__card__segment"},(0,o.createElement)("div",{className:"newspack-campaigns__segment-group__card__segment-title"},(0,o.createElement)("h3",null,p?(0,o.createElement)(w.zx,{href:`#/segments/${p}`,label:cn("Edit Segment ","newspack"),isLink:!0,showTooltip:!0,tooltipPosition:"bottom center"},cn("Segment: ","newspack"),u):u),(0,o.createElement)("span",{className:"newspack-campaigns__segment-group__description"},p?Wt(r,c):cn("All readers, regardless of segment","newspack"))),(0,o.createElement)("div",{className:"newspack-campaigns__segment-group__card__segment-actions"},(0,o.createElement)(M,{campaign:!!n&&m,segment:p,showUnpublished:!!n,onClose:un,renderButton:e=>{let{showPreview:t}=e;return(0,o.createElement)(w.zx,{isQuaternary:!0,isSmall:!0,onClick:()=>{un(),newspack_aux_data.popups_cookie_name&&T.set(newspack_aux_data.popups_cookie_name,`preview-${Date.now()}`,{domain:"."+window.location.host}),t()},icon:rn,label:cn("Preview Segment","newspack"),tooltipPosition:"bottom center"})}}),"unassigned"!==n&&(0,o.createElement)(o.Fragment,null,(0,o.createElement)(w.zx,{isSmall:!0,isQuaternary:!0,onClick:()=>s(!i),icon:x.Z,label:cn("Add New Prompt","newspack"),tooltipPosition:"bottom center"}),i&&(0,o.createElement)(w.u_,{title:cn("Add New Prompt","newspack"),onRequestClose:()=>s(!1),shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,isWide:!0},(0,o.createElement)(w.rj,{gutter:32,columns:3},(0,o.createElement)(w.Wu,{href:ln("overlay-center",n,p),title:cn("Center Overlay","newspack"),desc:cn("Fixed at the center of the screen","newspack"),icon:nn}),(0,o.createElement)(w.Wu,{href:ln("overlay-top",n,p),title:cn("Top Overlay","newspack"),desc:cn("Fixed at the top of the screen","newspack"),icon:an}),(0,o.createElement)(w.Wu,{href:ln("overlay-bottom",n,p),title:cn("Bottom Overlay","newspack"),desc:cn("Fixed at the bottom of the screen","newspack"),icon:tn}),(0,o.createElement)(w.Wu,{href:ln(null,n,p),title:cn("Inline","newspack"),desc:cn("Embedded in content","newspack"),icon:en}),(0,o.createElement)(w.Wu,{href:ln("archives",n,p),title:cn("In Archive Pages","newspack"),desc:cn("Embedded once or many times in archive pages","newspack"),icon:on}),(0,o.createElement)(w.Wu,{href:ln("above-header",n,p),title:cn("Above Header","newspack"),desc:cn("Embedded at the very top of the page","newspack"),icon:P}),(0,o.createElement)(w.Wu,{href:ln("custom",n,p),title:cn("Custom Placement","newspack"),desc:cn("Only appears when placed in content","newspack"),icon:D.Z}),(0,o.createElement)(w.Wu,{href:ln("manual",n,p),title:cn("Manual Only","newspack"),desc:cn("Only appears where Single Prompt block is inserted","newspack"),icon:sn})))))),(0,o.createElement)(w.Zb,{noBorder:!0,className:"newspack-campaigns__segment-group__action-cards"},d.map((t=>(0,o.createElement)(Kt,(0,a.Z)({className:qt(t),description:Ht(t),warning:Yt(d,t),key:t.id,prompt:t},e))))),d.length<1?(0,o.createElement)("p",null,g):"")};const dn=(0,o.createContext)({prompts:[]});var mn=n(4184),hn=n.n(mn);const gn=i.__,{useHistory:wn}=w.F0,fn="active",vn=e=>gn(2===e?"Rename Campaign":1===e?"Duplicate Campaign":"Add New Campaign","newspack"),bn=(e,t)=>{if("trash"===t)return e.filter((e=>{let{status:t}=e;return"trash"===t}));const n=e.filter((e=>{let{status:t}=e;return"trash"!==t}));return fn===t?n.filter((e=>{let{status:t}=e;return"publish"===t})):"all"===t?n.filter((e=>{let{status:t}=e;return"trash"!==t})):"unassigned"===t?n.filter((e=>{let{campaign_groups:t}=e;return!t||!t.length})):n.filter((e=>{let{campaign_groups:n}=e;return n&&n.find((e=>+e.term_id==+t))}))};var yn=(0,w.a4)((e=>{const{campaignId:t=fn,campaigns:n=[],manageCampaignGroup:r,segments:i,createCampaignGroup:s,duplicateCampaignGroup:c,deleteCampaignGroup:l,archiveCampaignGroup:u,renameCampaignGroup:p}=e,d=(0,o.useRef)(null),[m,h]=(0,o.useState)(),[g,f]=(0,o.useState)(),[y,k]=(0,o.useState)(),[C,E]=(0,o.useState)(),T=(0,o.useContext)(dn),x=bn(T,t),S=bn(T,"unassigned").length;(0,o.useEffect)((()=>{g&&d.current.querySelector("input").focus()}),[g]);const P=wn(),D=e=>{3===y?s(e):2===y?p(t,e):1===y&&c(t,e),f(!1)},M=n.filter((e=>{let{status:t}=e;return"archive"!==t})),z=n.filter((e=>{let{status:t}=e;return"archive"===t})),N=((e,t)=>t.reduce(((t,n)=>+e>0&&+e==+n.term_id?n:t),null))(t,n),O=[{key:fn,name:gn("Active Prompts","newspack")},{key:"all",name:gn("All Prompts","newspack")},{key:"trash",name:gn("Trash","newspack")},...S?[{key:"unassigned",name:gn("Unassigned Prompts","newspack")}]:[],...M.length?[{key:"header-campaigns",name:gn("Campaigns","newspack"),className:"is-header"}]:[],...M.map((e=>{let{term_id:t,name:n}=e;return{key:String(t),name:n,className:"newspack-campaigns__campaign-group__select-control-group-item"}})),...z.length?[{key:"header-archived-campaigns",name:gn("Archived Campaigns","newspack"),className:"is-header"}]:[],...z.map((e=>{let{term_id:t,name:n}=e;return{key:String(t),name:n+" "+gn("(archived)","newspack"),className:"newspack-campaigns__campaign-group__select-control-group-item"}}))];return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(w.Zb,{headerActions:!0,noBorder:!0},(0,o.createElement)("div",{className:"newspack-campaigns__campaign-group__filter-group-actions"},(0,o.createElement)(w.Yq,{label:gn("Campaigns","newspack"),options:O.map((e=>({...e,className:hn()(e.className,{"is-selected":e.key===t})}))),onChange:e=>{let{selectedItem:{key:t}}=e;return fn===t?P.push("/campaigns"):P.push(`/campaigns/${t}`)},value:(0,U.find)(O,["key",t||fn]),hideLabelFromVision:!0}),N&&(0,o.createElement)("div",{className:"newspack-campaigns__campaign-group__filter-group-actions__button"},(0,o.createElement)(w.zx,{isQuaternary:!0,isSmall:!0,className:m&&"popover-active",onClick:()=>h(!m),icon:b.Z,label:gn("Actions","newspack"),tooltipPosition:"bottom center"}),m&&(0,o.createElement)(_,{dismiss:()=>h(!1),isArchive:N&&"archive"===N.status,onActivate:()=>r(x),onArchive:()=>u(t,!0),onDeactivate:()=>r(x,"DELETE"),onDelete:()=>l(t),onDuplicate:()=>{f(!0),E(""),k(1)},onRename:()=>{E(N.name),f(!0),k(2)},onUnarchive:()=>u(t,!1),hasPrompts:x.length>0,hasPublished:x.some((e=>{let{status:t}=e;return"publish"===t}))}))),(0,o.createElement)("div",{className:"newspack-campaigns__campaign-group__add-new-button"},(0,o.createElement)(w.zx,{isPrimary:!0,isSmall:!0,onClick:()=>{f(!g),E(""),k(3)}},gn("Add New Campaign","newspack")),g&&(0,o.createElement)(w.u_,{title:vn(y),onRequestClose:()=>{f(!1)}},(0,o.createElement)("div",{ref:d},(0,o.createElement)(w.w4,{placeholder:gn("Campaign Name","newspack"),onChange:E,label:gn("Campaign Name","newspack"),hideLabelFromVision:!0,value:C,onKeyDown:e=>{v.ENTER===e.keyCode&&""!==C&&(e.preventDefault(),D(C))}})),(0,o.createElement)(w.Zb,{buttonsCard:!0,noBorder:!0,className:"justify-end"},(0,o.createElement)(w.zx,{isSecondary:!0,onClick:()=>{f(!1)}},gn("Cancel","newspack")),(0,o.createElement)(w.zx,{isPrimary:!0,disabled:!C,onClick:()=>D(C)},(e=>gn(2===e?"Rename":1===e?"Duplicate":"Add","newspack"))(y)))))),((e,t)=>{const n=[];return n.push(...e.map((e=>{let{name:n,id:a,configuration:r}=e;return{label:n,id:a,configuration:r,prompts:t.filter((e=>{let{options:{selected_segment_id:t}}=e;return!!t&&-1<t.split(",").indexOf(a)}))}}))),n.push({label:gn("Everyone","newspack"),id:"",prompts:t.filter((e=>{let{options:{selected_segment_id:t}}=e;return!t})),configuration:{}}),n})(i,x).map(((n,r)=>(0,o.createElement)(pn,(0,a.Z)({key:r,segment:n,campaignId:t,campaignData:N},e)))))})),kn=n(3904);const _n=i.__,Cn=e=>Ie(Gt(e),"MMM do yyyy");var En=e=>{let{filtersState:t,labelFilters:n,eventActionFilters:a,onChange:r,disabled:i}=e;const[s,c]=(0,o.useState)(!1);return(0,o.createElement)("div",{className:"newspack-campaigns-wizard-analytics__filters"},(0,o.createElement)("div",{className:"newspack-campaigns-wizard-analytics__filters__date"},(0,o.createElement)(w.zx,{isSecondary:!0,isSmall:!0,icon:kn.Z,iconSize:18,disabled:i,onClick:()=>c((e=>!e))},`${Cn(t.start_date)} ${_n("to","newspack")} ${Cn(t.end_date)}`),s&&(0,o.createElement)(w.u_,{title:_n("Choose a date range","newspack"),onRequestClose:()=>{c(!1)},isNarrow:!0},(0,o.createElement)(w.Dw,{start:Gt(t.start_date),end:Gt(t.end_date),onChange:e=>{r("SET_RANGE_FILTER")({start_date:Bt(e.start),end_date:Bt(e.end)}),c(!1)}}))),(0,o.createElement)("div",{className:"newspack-campaigns-wizard-analytics__filters__group"},(0,o.createElement)(w.Yw,{options:[{label:_n("All Prompts","newspack"),value:""},...n],onChange:r("SET_EVENT_LABEL_FILTER"),value:t.event_label_id,disabled:i,isSmall:!0}),(0,o.createElement)(w.Yw,{options:[{label:_n("All Events","newspack"),value:""},...a],onChange:r("SET_EVENT_ACTION_FILTER"),value:t.event_action,disabled:i,isSmall:!0})))},Tn=n(9196),xn=n(9227),Sn=n.n(xn),Pn=function(e,t){return Pn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Pn(e,t)};function Dn(e,t){function n(){this.constructor=e}Pn(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Mn=function(){return Mn=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Mn.apply(this,arguments)};function zn(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(i,s)}c((a=a.apply(e,t||[])).next())}))}function Nn(e,t){var n,a,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){i.label=o[1];break}if(6===o[0]&&i.label<r[1]){i.label=r[1],r=o;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(o);break}r[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var On={graph_id:null,legend_toggle:!1,graphID:null,options:{colors:null},data:null,rows:null,columns:null,diffdata:null,chartEvents:null,legendToggle:!1,chartActions:null,getChartWrapper:function(e,t){},getChartEditor:null,className:"",style:{},formatters:null,spreadSheetUrl:null,spreadSheetQueryParameters:{headers:1,gid:1},rootProps:{},chartWrapperParams:{},controls:null,render:null,toolbarItems:null,toolbarID:null},An=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleGoogleChartsLoaderScriptLoaded=function(e){var n=t.props,a=n.chartVersion,r=n.chartPackages,o=n.chartLanguage,i=n.mapsApiKey,s=n.onLoad;e.charts.load(a||"current",{packages:r||["corechart","controls"],language:o||"en",mapsApiKey:i}),e.charts.setOnLoadCallback((function(){s(e)}))},t}return Dn(t,e),t.prototype.shouldComponentUpdate=function(e){return e.chartPackages===this.props.chartPackages},t.prototype.render=function(){var e=this,t=this.props.onError;return(0,Tn.createElement)(Sn(),{url:"https://www.gstatic.com/charts/loader.js",onError:t,onLoad:function(){var t=window;t.google&&e.handleGoogleChartsLoaderScriptLoaded(t.google)}})},t}(Tn.Component),Un=0,Fn=function(){return"reactgooglegraph-"+(Un+=1)},In=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#3B3EAC"],Ln=function(e,t,n){return void 0===n&&(n={}),zn(void 0,void 0,void 0,(function(){return Nn(this,(function(a){return[2,new Promise((function(a,r){var o=n.headers?"headers="+n.headers:"headers=0",i=n.query?"&tq="+encodeURIComponent(n.query):"",s=n.gid?"&gid="+n.gid:"",c=n.sheet?"&sheet="+n.sheet:"",l=n.access_token?"&access_token="+n.access_token:"",u=t+"/gviz/tq?"+o+s+c+i+l;new e.visualization.Query(u).send((function(e){e.isError()?r("Error in query:  "+e.getMessage()+" "+e.getDetailedMessage()):a(e.getDataTable())}))}))]}))}))},qn=(0,Tn.createContext)(On),Hn=qn.Provider,Rn=qn.Consumer,Wn=function(e){var t=e.children,n=e.value;return(0,Tn.createElement)(Hn,{value:n},t)},Yn=function(e){var t=e.render;return(0,Tn.createElement)(Rn,null,(function(e){return t(e)}))},jn="#CCCCCC",Bn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hiddenColumns:[]},t.listenToLegendToggle=function(){var e=t.props,n=e.google,a=e.googleChartWrapper;n.visualization.events.addListener(a,"select",(function(){var e=a.getChart().getSelection(),n=a.getDataTable();if(0!==e.length&&null===e[0].row&&null!==n){var r=e[0].column,o=t.getColumnID(n,r);t.state.hiddenColumns.includes(o)?t.setState((function(e){return Mn({},e,{hiddenColumns:e.hiddenColumns.filter((function(e){return e!==o})).slice()})})):t.setState((function(e){return Mn({},e,{hiddenColumns:e.hiddenColumns.concat([o])})}))}}))},t.applyFormatters=function(e,n){for(var a=t.props.google,r=0,o=n;r<o.length;r++){var i=o[r];switch(i.type){case"ArrowFormat":(s=new a.visualization.ArrowFormat(i.options)).format(e,i.column);break;case"BarFormat":(s=new a.visualization.BarFormat(i.options)).format(e,i.column);break;case"ColorFormat":for(var s=new a.visualization.ColorFormat(i.options),c=0,l=i.ranges;c<l.length;c++){var u=l[c];s.addRange.apply(s,u)}s.format(e,i.column);break;case"DateFormat":(s=new a.visualization.DateFormat(i.options)).format(e,i.column);break;case"NumberFormat":(s=new a.visualization.NumberFormat(i.options)).format(e,i.column);break;case"PatternFormat":(s=new a.visualization.PatternFormat(i.options)).format(e,i.column)}}},t.getColumnID=function(e,t){return e.getColumnId(t)||e.getColumnLabel(t)},t.draw=function(e){var n=e.data,a=e.diffdata,r=e.rows,o=e.columns,i=e.options,s=e.legend_toggle,c=e.legendToggle,l=e.chartType,u=e.formatters,p=e.spreadSheetUrl,d=e.spreadSheetQueryParameters;return zn(t,void 0,void 0,(function(){var e,t,m,h,g,w,f,v,b,y,k,_,C,E;return Nn(this,(function(T){switch(T.label){case 0:return e=this.props,t=e.google,m=e.googleChartWrapper,g=null,null!==a&&(w=t.visualization.arrayToDataTable(a.old),f=t.visualization.arrayToDataTable(a.new),g=t.visualization[l].prototype.computeDiff(w,f)),null===n?[3,1]:(h=Array.isArray(n)?t.visualization.arrayToDataTable(n):new t.visualization.DataTable(n),[3,5]);case 1:return null===r||null===o?[3,2]:(h=t.visualization.arrayToDataTable([o].concat(r)),[3,5]);case 2:return null===p?[3,4]:[4,Ln(t,p,d)];case 3:return h=T.sent(),[3,5];case 4:h=t.visualization.arrayToDataTable([]),T.label=5;case 5:for(v=h.getNumberOfColumns(),b=0;b<v;b+=1)y=this.getColumnID(h,b),this.state.hiddenColumns.includes(y)&&(k=h.getColumnLabel(b),_=h.getColumnId(b),C=h.getColumnType(b),h.removeColumn(b),h.addColumn({label:k,id:_,type:C}));return E=m.getChart(),"Timeline"===m.getChartType()&&E&&E.clearChart(),m.setChartType(l),m.setOptions(i),m.setDataTable(h),m.draw(),null!==this.props.googleChartDashboard&&this.props.googleChartDashboard.draw(h),null!==g&&(m.setDataTable(g),m.draw()),null!==u&&(this.applyFormatters(h,u),m.setDataTable(h),m.draw()),!0!==c&&!0!==s||this.grayOutHiddenColumns({options:i}),[2]}}))}))},t.grayOutHiddenColumns=function(e){var n=e.options,a=t.props.googleChartWrapper,r=a.getDataTable();if(null!==r){var o=r.getNumberOfColumns();if(!1!=t.state.hiddenColumns.length>0){var i=Array.from({length:o-1}).map((function(e,a){var o=t.getColumnID(r,a+1);return t.state.hiddenColumns.includes(o)?jn:void 0!==n.colors&&null!==n.colors?n.colors[a]:In[a]}));a.setOptions(Mn({},n,{colors:i})),a.draw()}}},t.onResize=function(){t.props.googleChartWrapper.draw()},t}return Dn(t,e),t.prototype.componentDidMount=function(){this.draw(this.props),window.addEventListener("resize",this.onResize),(this.props.legend_toggle||this.props.legendToggle)&&this.listenToLegendToggle()},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.google,n=e.googleChartWrapper;window.removeEventListener("resize",this.onResize),t.visualization.events.removeAllListeners(n),"Timeline"===n.getChartType()&&n.getChart()&&n.getChart().clearChart()},t.prototype.componentDidUpdate=function(){this.draw(this.props)},t.prototype.render=function(){return null},t}(Tn.Component),Gn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dn(t,e),t.prototype.componentDidMount=function(){},t.prototype.componentWillUnmount=function(){},t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.render=function(){var e=this.props,t=e.google,n=e.googleChartWrapper,a=e.googleChartDashboard;return(0,Tn.createElement)(Yn,{render:function(e){return(0,Tn.createElement)(Bn,Mn({},e,{google:t,googleChartWrapper:n,googleChartDashboard:a}))}})},t}(Tn.Component),$n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dn(t,e),t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.listenToEvents=function(e){var t=this,n=e.chartEvents,a=e.google,r=e.googleChartWrapper;if(null!==n){a.visualization.events.removeAllListeners(r);for(var o=function(e){var n=e.eventName,o=e.callback;a.visualization.events.addListener(r,n,(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];o({chartWrapper:r,props:t.props,google:a,eventArgs:e})}))},i=0,s=n;i<s.length;i++)o(s[i])}},t.prototype.render=function(){var e=this,t=this.props,n=t.google,a=t.googleChartWrapper;return(0,Tn.createElement)(Yn,{render:function(t){return e.listenToEvents({chartEvents:t.chartEvents||null,google:n,googleChartWrapper:a}),null}})},t}(Tn.Component),Zn=0,Qn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={googleChartWrapper:null,googleChartDashboard:null,googleChartControls:null,googleChartEditor:null,isReady:!1},t.graphID=null,t.dashboard_ref=(0,Tn.createRef)(),t.toolbar_ref=(0,Tn.createRef)(),t.getGraphID=function(){var e,n=t.props,a=n.graphID,r=n.graph_id;return e=null===a&&null===r?null===t.graphID?Fn():t.graphID:null!==a&&null===r?a:null!==r&&null===a?r:a,t.graphID=e,t.graphID},t.getControlID=function(e,t){return Zn+=1,void 0===e?"googlechart-control-"+t+"-"+Zn:e},t.addControls=function(e,n){var a=t.props,r=a.google,o=a.controls,i=null===o?null:o.map((function(e,n){var a=e.controlID,o=e.controlType,i=e.options,s=e.controlWrapperParams,c=t.getControlID(a,n);return{controlProp:e,control:new r.visualization.ControlWrapper(Mn({containerId:c,controlType:o,options:i},s))}}));if(null===i)return null;n.bind(i.map((function(e){return e.control})),e);for(var s=function(n){for(var a=n.control,o=n.controlProp.controlEvents,i=function(n){var o=n.callback,i=n.eventName;r.visualization.events.removeListener(a,i,o),r.visualization.events.addListener(a,i,(function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];o({chartWrapper:e,controlWrapper:a,props:t.props,google:r,eventArgs:n})}))},s=0,c=void 0===o?[]:o;s<c.length;s++)i(c[s])},c=0,l=i;c<l.length;c++)s(l[c]);return i},t.renderChart=function(){var e=t.props,n=e.width,a=e.height,r=e.options,o=e.style,i=e.className,s=e.rootProps,c=e.google,l=Mn({height:a||r&&r.height,width:n||r&&r.width},o);return(0,Tn.createElement)("div",Mn({id:t.getGraphID(),style:l,className:i},s),t.state.isReady&&null!==t.state.googleChartWrapper?(0,Tn.createElement)(Tn.Fragment,null,(0,Tn.createElement)(Gn,{googleChartWrapper:t.state.googleChartWrapper,google:c,googleChartDashboard:t.state.googleChartDashboard}),(0,Tn.createElement)($n,{googleChartWrapper:t.state.googleChartWrapper,google:c})):null)},t.renderControl=function(e){return void 0===e&&(e=function(e){return e.control,e.controlProp,!0}),t.state.isReady&&null!==t.state.googleChartControls?(0,Tn.createElement)(Tn.Fragment,null,t.state.googleChartControls.filter((function(t){var n=t.controlProp,a=t.control;return e({control:a,controlProp:n})})).map((function(e){var t=e.control;return e.controlProp,(0,Tn.createElement)("div",{key:t.getContainerId(),id:t.getContainerId()})}))):null},t.renderToolBar=function(){return null===t.props.toolbarItems?null:(0,Tn.createElement)("div",{ref:t.toolbar_ref})},t}return Dn(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.options,n=e.google,a=e.chartType,r=e.chartWrapperParams,o=e.toolbarItems,i=e.getChartEditor,s=e.getChartWrapper,c=Mn({chartType:a,options:t,containerId:this.getGraphID()},r),l=new n.visualization.ChartWrapper(c);l.setOptions(t),s(l,n);var u=new n.visualization.Dashboard(this.dashboard_ref),p=this.addControls(l,u);null!==o&&n.visualization.drawToolbar(this.toolbar_ref.current,o);var d=null;null!==i&&i({chartEditor:d=new n.visualization.ChartEditor,chartWrapper:l,google:n}),this.setState({googleChartEditor:d,googleChartControls:p,googleChartDashboard:u,googleChartWrapper:l,isReady:!0})},t.prototype.componentDidUpdate=function(){if(null!==this.state.googleChartWrapper&&null!==this.state.googleChartDashboard&&null!==this.state.googleChartControls)for(var e=this.props.controls,t=0;t<e.length;t+=1){var n=e[t],a=n.controlType,r=n.options,o=n.controlWrapperParams;o&&"state"in o&&this.state.googleChartControls[t].control.setState(o.state),this.state.googleChartControls[t].control.setOptions(r),this.state.googleChartControls[t].control.setControlType(a)}},t.prototype.shouldComponentUpdate=function(e,t){return this.state.isReady!==t.isReady||e.controls!==this.props.controls},t.prototype.render=function(){var e=this.props,t=e.width,n=e.height,a=e.options,r=e.style,o=Mn({height:n||a&&a.height,width:t||a&&a.width},r);return null!==this.props.render?(0,Tn.createElement)("div",{ref:this.dashboard_ref,style:o},(0,Tn.createElement)("div",{ref:this.toolbar_ref,id:"toolbar"}),this.props.render({renderChart:this.renderChart,renderControl:this.renderControl,renderToolbar:this.renderToolBar})):(0,Tn.createElement)("div",{ref:this.dashboard_ref,style:o},this.renderControl((function(e){return"bottom"!==e.controlProp.controlPosition})),this.renderChart(),this.renderControl((function(e){return"bottom"===e.controlProp.controlPosition})),this.renderToolBar())},t}(Tn.Component),Vn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isMounted=!1,t.state={loadingStatus:"loading",google:null},t.onLoad=function(e){if(t.isFullyLoaded(e))t.onSuccess(e);else var n=setInterval((function(){var e=window.google;t._isMounted?e&&t.isFullyLoaded(e)&&(clearInterval(n),t.onSuccess(e)):clearInterval(n)}),1e3)},t.onSuccess=function(e){t.setState({loadingStatus:"ready",google:e})},t.onError=function(){t.setState({loadingStatus:"errored"})},t}return Dn(t,e),t.prototype.render=function(){var e=this.props,t=e.chartLanguage,n=e.chartPackages,a=e.chartVersion,r=e.mapsApiKey,o=e.loader,i=e.errorElement;return(0,Tn.createElement)(Wn,{value:this.props},"ready"===this.state.loadingStatus&&null!==this.state.google?(0,Tn.createElement)(Qn,Mn({},this.props,{google:this.state.google})):"errored"===this.state.loadingStatus&&i?i:o,(0,Tn.createElement)(An,Mn({},{chartLanguage:t,chartPackages:n,chartVersion:a,mapsApiKey:r},{onLoad:this.onLoad,onError:this.onError})))},t.prototype.componentDidMount=function(){this._isMounted=!0},t.prototype.componentWillUnmount=function(){this._isMounted=!1},t.prototype.isFullyLoaded=function(e){var t=this.props,n=t.controls,a=t.toolbarItems,r=t.getChartEditor;return e&&e.visualization&&e.visualization.ChartWrapper&&e.visualization.Dashboard&&(!n||e.visualization.ChartWrapper)&&(!r||e.visualization.ChartEditor)&&(!a||e.visualization.drawToolbar)},t.defaultProps=On,t}(Tn.Component),Xn=e=>{let{data:t}=e;return(0,o.createElement)(Vn,{width:"100%",height:"400px",chartType:"AreaChart",data:t,options:{animation:{duration:500,easing:"in-out",startup:!0},legend:"none"}})},Jn=n(8298),Kn=n.n(Jn);const ea=i.__,ta=e=>`${String((100*e).toFixed(2)).replace(/\.00$/,"")}%`;var na=e=>{let{keyMetrics:t,filtersState:n,labelFilters:a,isLoading:r,postEditLink:i}=e;const s=""!==n.event_label_id&&a.find((e=>{let{value:t}=e;return t===n.event_label_id})),{seen:c,form_submissions:l,link_clicks:u}=t,p=l>=0&&c>0,d=u>=0&&c>0;if(""!==n.event_action)return(0,o.createElement)(w.qX,{noticeText:ea('Choose "All Events" filter to see key metrics.',"newspack")});const m=ea("n/a","newspack");return(0,o.createElement)("div",{className:"newspack-campaigns-wizard-analytics__info"},(0,o.createElement)("h2",null,s?`${s.label}:`:ea("All:","newspack"),i&&(0,o.createElement)(o.Fragment,null," ","(",(0,o.createElement)("a",{href:(0,U.unescape)(i)},"edit"),")")),(0,o.createElement)("div",{className:"newspack-campaigns-wizard-analytics__info__sections"},[{label:ea("Seen","newspack"),value:Kn()(c),withSeparator:!0},{label:ea("Conversion Rate","newspack"),value:p?ta(l/c):m},{label:ea("Form Submissions","newspack"),value:p?l:m,withSeparator:!0},{label:ea("Click-through Rate","newspack"),value:d?ta(u/c):m},{label:ea("Link Clicks","newspack"),value:d?u:m}].map(((e,t)=>(0,o.createElement)("div",{className:hn()("newspack-campaigns-wizard-analytics__info__sections__section",{"newspack-campaigns-wizard-analytics__info__sections__section--with-separator":e.withSeparator,"newspack-campaigns-wizard-analytics__info__sections__section--dimmed":!r&&e.value===m}),key:t},(0,o.createElement)("h2",null,r?"-":e.value),(0,o.createElement)("span",null,e.label))))),!s&&1!==a.length&&(0,o.createElement)(w.qX,{noticeText:ea("These are aggregated metrics for multiple campaigns. Some of them might not have links or forms, which can skew the displayed rates.","newspack"),isWarning:!0}))};const aa={event_label_id:"",event_action:"",start_date:Bt(g(new Date,7)),end_date:Bt()},ra=(e,t)=>{switch(t.type){case"SET_RANGE_FILTER":return{...e,start_date:t.payload.start_date,end_date:t.payload.end_date};case"SET_EVENT_LABEL_FILTER":return{...e,event_label_id:t.payload};case"SET_EVENT_ACTION_FILTER":return{...e,event_action:t.payload};default:return e}},oa={labels:[],actions:[]},ia=(e,t)=>{if("UPDATE_ALL"===t.type){const{labels:n,actions:a,...r}=t.payload;return{...e,...r,labels:(0,U.uniqBy)([...e.labels,...n],"value"),actions:(0,U.uniqBy)([...e.actions,...a],"value")}}return e};var sa=(0,w.a4)((e=>{let{setError:t}=e;const[n,a]=(0,o.useReducer)(ra,aa),[r,i]=(0,o.useState)(),[s,c]=(0,o.useState)(!1),[p,d]=(0,o.useReducer)(ia,oa),{report:m,labels:h,actions:g,key_metrics:f,post_edit_link:v}=p;return(0,o.useEffect)((()=>{c(!0),l()({path:`/newspack/v1/popups-analytics/report/?${(0,u.stringify)(n)}`}).then((e=>{d({type:"UPDATE_ALL",payload:e}),c(!1)})).catch((e=>{"newspack_campaign_analytics_sitekit_disconnected"===e.code||"newspack_campaign_analytics_sitekit_auth"===e.code?(i(e.message),c(!1)):t(e)}))}),[n]),r?(0,o.createElement)(w.qX,{rawHTML:!0,isWarning:!0,noticeText:`<a href="/wp-admin/admin.php?page=googlesitekit-splash">${r}</a>`}):(0,o.createElement)("div",{className:hn()("newspack-campaigns-wizard-analytics__wrapper",{"newspack-campaigns-wizard-analytics__wrapper--loading":s})},(0,o.createElement)(En,{disabled:s,labelFilters:h,eventActionFilters:g,filtersState:n,onChange:e=>t=>a({type:e,payload:t})}),m&&(0,o.createElement)(Xn,{data:m,isLoading:s}),f&&(0,o.createElement)(na,{keyMetrics:f,filtersState:n,labelFilters:h,isLoading:s,postEditLink:v}))})),ca=(0,w.a4)((()=>(0,o.createElement)(w.d5,{pluginSlug:"newspack-popups-wizard",isWizard:!0,title:null}))),la=n(1984),ua=(0,o.createElement)(S.SVG,{width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18"},(0,o.createElement)(S.Path,{d:"M5 4h2V2H5v2zm6-2v2h2V2h-2zm-6 8h2V8H5v2zm6 0h2V8h-2v2zm-6 6h2v-2H5v2zm6 0h2v-2h-2v2z"})),pa=(0,o.createElement)(S.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,o.createElement)(S.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"}));const da=i.__,{NavLink:ma,useHistory:ha}=w.F0,ga=()=>(0,o.createElement)(ma,{to:"segments/new"},(0,o.createElement)(w.zx,{isPrimary:!0,isSmall:!0},da("Add New Segment","newspack"))),wa=e=>{let{inFlight:t,segment:n,segments:a,deleteSegment:r,dropTargetIndex:i,setDropTargetIndex:s,index:c,sortSegments:l,totalSegments:u,wrapperRef:p}=e;const[d,m]=(0,o.useState)(!1),[h,g]=(0,o.useState)([]),[f,k]=(0,o.useState)(!1);(0,o.useEffect)((()=>{_()}),[n]);const _=async()=>{var e,t;0<(null===(e=n.configuration)||void 0===e||null===(t=e.favorite_categories)||void 0===t?void 0:t.length)&&g(await Rt(n.configuration.favorite_categories))},C=()=>m(!1),E=ha(),T=0===c,x=c+1===u,S=c===i,P=x&&i>=u,D=e=>{if(t)return;const r=[...a],o=e>c?e-1:e;r.splice(c,1),r.splice(o,0,n),r.forEach(((e,t)=>e.priority=t)),JSON.stringify(r)!==JSON.stringify(a)&&l(r)},M=()=>{if(t)return;let e=c-1;0>e&&(e=0),D(e)},z=()=>{if(t)return;let e=c+2;u<e&&(e=u),D(e)};return(0,o.createElement)("div",{className:"newspack-campaigns__draggable"+(f?" is-dragging":"")+(S?" is-drop-target":"")+(P?" drop-target-after":""),id:`segment-${n.id}`},(0,o.createElement)(y.Draggable,{elementId:`segment-${n.id}`,transferData:{},onDragStart:()=>{f||t||k(!0)},onDragEnd:()=>{t||(null!==i&&D(i),s(null),k(!1))},onDragOver:e=>{if(t)return;const n=p.current.getBoundingClientRect(),a=e.pageY<=n.top+window.scrollY,r=e.pageY>=n.bottom+window.scrollY;if(a||r||e.target.classList.contains("newspack-action-card")){let t=Array.prototype.slice.call(p.current.querySelectorAll(".newspack-campaigns__draggable")).indexOf(e.target.parentElement);(0>t||t===c+1)&&(t=c),a&&(t=0),r&&(t=u),s(t)}}},(e=>{let{onDraggableStart:t,onDraggableEnd:a}=e;return(0,o.createElement)(w.fM,{isSmall:!0,title:n.name,titleLink:`#/segments/${n.id}`,description:Wt(n,h),actionText:(0,o.createElement)(o.Fragment,null,(0,o.createElement)(w.zx,{isQuaternary:!0,onClick:()=>m(!d),label:da("More options","newspack"),icon:b.Z,className:d&&"popover-active"}),d&&(0,o.createElement)(w.J2,{position:"bottom left",onKeyDown:e=>v.ESCAPE===e.keyCode&&C,onFocusOutside:C},(0,o.createElement)(y.MenuItem,{onClick:()=>C(),className:"screen-reader-text"},da("Close Popover","newspack")),(0,o.createElement)(y.MenuItem,{onClick:()=>E.push(`/segments/${n.id}`),className:"newspack-button"},da("Edit","newspack")),(0,o.createElement)(y.MenuItem,{onClick:()=>r(n),className:"newspack-button"},da("Delete","newspack"))))},(0,o.createElement)("div",{className:"newspack-campaigns__segment-priority-controls"},(0,o.createElement)("div",{className:"drag-handle",draggable:!0,onDragStart:t,onDragEnd:a},(0,o.createElement)(la.Z,{icon:ua,height:18,width:18})),(0,o.createElement)("div",{className:"movers"},(0,o.createElement)(w.zx,{icon:pa,isLink:!0,onClick:M,disabled:T,label:da("Move segment position up","newspack")}),(0,o.createElement)(w.zx,{icon:kn.Z,isLink:!0,onClick:z,disabled:x,label:da("Move segment position down","newspack")}))))})))};var fa=e=>{let{wizardApiFetch:t,segments:n,setSegments:a,isLoading:r}=e;const[i,s]=(0,o.useState)(null),[c,l]=(0,o.useState)(null),[u,p]=(0,o.useState)(!1),[d,m]=(0,o.useState)(null),h=(0,o.useRef)(),g=e=>{p(!0),m(null),t({path:`/newspack/v1/wizard/newspack-popups-wizard/segmentation/${e.id}`,method:"DELETE",quiet:!0}).then((e=>{p(!1),a(e)})).catch((e=>{console.error(e),p(!1)}))},f=e=>{m(null),l(e),p(!0),t({path:"/newspack/v1/wizard/newspack-popups-wizard/segmentation-sort",method:"POST",data:{segmentIds:e.map((e=>e.id))},quiet:!0}).then((e=>{p(!1),l(null),a(e)})).catch((e=>{p(!1),m(e.message||da("There was an error sorting segments. Please try again.")),a(n)}))};if(null===n)return null;const v=c||n;return n.length?(0,o.createElement)(o.Fragment,null,d&&(0,o.createElement)(w.qX,{noticeText:d,isError:!0}),(0,o.createElement)(w.Zb,{headerActions:!0,noBorder:!0},(0,o.createElement)("h2",null,da("Audience segments","newspack")),(0,o.createElement)(ga,null)),(0,o.createElement)("div",{className:"newspack-campaigns-wizard-segments__list"+(u?" is-loading":""),ref:h},v.map(((e,t)=>(0,o.createElement)(wa,{deleteSegment:g,key:e.id,inFlight:u||r>0,segment:e,segments:n,sortSegments:f,index:t,wrapperRef:h,dropTargetIndex:i,setDropTargetIndex:s,totalSegments:n.length}))))):(0,o.createElement)(o.Fragment,null,(0,o.createElement)(w.Zb,{headerActions:!0,noBorder:!0},(0,o.createElement)("h2",null,da("You have no saved audience segments.","newspack")),(0,o.createElement)(ga,null)),(0,o.createElement)("p",null,da("Create audience segments to target visitors by engagement, activity, and more.","newspack")))};const va=i.__,{useHistory:ba}=w.F0,{SettingsCard:ya,SettingsSection:ka,MinMaxSetting:_a}=w.Zr,Ca={min_posts:0,max_posts:0,min_session_posts:0,max_session_posts:0,is_subscribed:!1,is_donor:!1,is_not_subscribed:!1,is_not_donor:!1,is_logged_in:!1,is_not_logged_in:!1,favorite_categories:[],referrers:"",referrers_not:""};var Ea=e=>{let{segmentId:t,setSegments:n,wizardApiFetch:a}=e;const[r,i]=w.PT.useObjectState(Ca),[s,c]=(0,o.useState)(""),[u,p]=(0,o.useState)(""),[d,m]=(0,o.useState)(!1),[h,g]=(0,o.useState)({total:0,in_segment:0}),f=ba(),[v,b]=(0,o.useState)(null),y=s.length>0&&JSON.stringify(r)!==JSON.stringify(Ca),k=JSON.stringify(v)!==JSON.stringify(r)||u!==s,_=w.PT.usePrompt(k,va("There are unsaved changes to this segment. Discard changes?","newspack")),C="new"===t;(0,o.useEffect)((()=>{C||a({path:"/newspack/v1/wizard/newspack-popups-wizard/segmentation"}).then((e=>{const n=(0,U.find)(e,(e=>{let{id:n}=e;return n===t}));if(n){const e={...Ca,...n.configuration};i(e),b(e),c(n.name),p(n.name)}}))}),[C]);const E=(0,o.useMemo)((()=>(0,U.debounce)((e=>{m(!0),l()({path:`/newspack/v1/wizard/newspack-popups-wizard/segmentation-reach?config=${JSON.stringify(e)}`}).then((e=>{g(e),m(!1)}))}),500,{leading:!0})),[]);return(0,o.useEffect)((()=>{E(r)}),[JSON.stringify(r)]),(0,o.createElement)(o.Fragment,null,(0,o.createElement)(w.w4,{placeholder:va("Untitled Segment","newspack"),value:s,onChange:c,label:va("Title","newspack"),className:"newspack-campaigns-wizard-segments__title"}),h.total>0&&(0,o.createElement)(w.qX,{isInfo:!0,className:"newspack-campaigns-wizard-segments__recorded-visitors",style:{opacity:d?.5:1},noticeText:va("This segment would reach approximately ","newspack")+Math.round(100*h.in_segment/h.total)+va("% of recorded visitors.","newspack")}),(0,o.createElement)(ya,{title:va("Reader Engagement","newspack"),description:va("Target readers based on their browsing behavior","newspack"),noBorder:!0},(0,o.createElement)(ka,{title:va("Articles read","newspack"),description:va("Number of articles read in the last 30 day period.","newspack")},(0,o.createElement)(_a,{min:r.min_posts,max:r.max_posts,onChangeMin:i("min_posts"),onChangeMax:i("max_posts"),minPlaceholder:va("Min posts","newspack"),maxPlaceholder:va("Max posts","newspack")})),(0,o.createElement)(ka,{title:va("Articles read in session","newspack"),description:va("Number of articles read in the current session (45 minutes).","newspack")},(0,o.createElement)(_a,{min:r.min_session_posts,max:r.max_session_posts,onChangeMin:i("min_session_posts"),onChangeMax:i("max_session_posts"),minPlaceholder:va("Min posts in session","newspack"),maxPlaceholder:va("Max posts in session","newspack")})),(0,o.createElement)(ka,{title:va("Favorite Categories","newspack"),description:va("Most-read categories of reader.","newspack")},(0,o.createElement)(w.HZ,{value:r.favorite_categories.map((e=>parseInt(e))),onChange:e=>{i("favorite_categories")(e.map((e=>e.id)))},label:va("Favorite Categories","newspack "),hideLabelFromVision:!0}))),(0,o.createElement)(ya,{title:va("Reader Activity","newspack"),description:va("Target readers based on their actions","newspack"),columns:3,noBorder:!0},(0,o.createElement)(ka,{title:va("Newsletter","newspack")},(0,o.createElement)(w.Yw,{"data-testid":"subscriber-select",onChange:e=>{e=parseInt(e),i(0===e?{is_subscribed:!1,is_not_subscribed:!1}:{is_subscribed:1===e,is_not_subscribed:2===e})},value:r.is_subscribed?1:r.is_not_subscribed?2:0,options:[{value:0,label:va("Subscribers and non-subscribers","newspack")},{value:1,label:va("Subscribers","newspack")},{value:2,label:va("Non-subscribers","newspack")}]})),(0,o.createElement)(ka,{title:va("Donation","newspack"),description:va("(if using WooCommerce checkout)","newspack")},(0,o.createElement)(w.Yw,{onChange:e=>{e=parseInt(e),i(0===e?{is_donor:!1,is_not_donor:!1}:{is_donor:1===e,is_not_donor:2===e})},value:r.is_donor?1:r.is_not_donor?2:0,options:[{value:0,label:va("Donors and non-donors","newspack")},{value:1,label:va("Donors","newspack")},{value:2,label:va("Non-donors","newspack")}]})),(0,o.createElement)(ka,{title:va("User Account","newspack")},(0,o.createElement)(w.Yw,{onChange:e=>{e=parseInt(e),i(0===e?{is_logged_in:!1,is_not_logged_in:!1}:{is_logged_in:1===e,is_not_logged_in:2===e})},value:r.is_logged_in?1:r.is_not_logged_in?2:0,options:[{value:0,label:va("All users","newspack")},{value:1,label:va("Has user account","newspack")},{value:2,label:va("Does not have user account","newspack")}]}))),(0,o.createElement)(ya,{title:va("Referrer Sources","newspack"),description:va("Target readers based on where theyre coming from","newspack"),notification:va("Segments using these options will apply only to the first page visited after coming from an external source.","newspack"),columns:2,noBorder:!0},(0,o.createElement)(ka,{title:va("Sources to match","newspack"),description:va("Segment based on traffic source.","newspack")},(0,o.createElement)(w.w4,{"data-testid":"referrers-input",isWide:!0,placeholder:va("google.com, facebook.com","newspack"),help:va("A comma-separated list of domains.","newspack"),value:r.referrers,onChange:i("referrers")})),(0,o.createElement)(ka,{title:va("Sources to exclude","newspack"),description:va("Segment based on traffic source - hide campaigns for visitors coming from specific sources.","newspack")},(0,o.createElement)(w.w4,{isWide:!0,placeholder:va("twitter.com, instagram.com","newspack"),help:va("A comma-separated list of domains.","newspack"),value:r.referrers_not,onChange:i("referrers_not")}))),(0,o.createElement)("div",{className:"newspack-buttons-card"},(0,o.createElement)(w.zx,{disabled:!y||!C&&!k,isPrimary:!0,onClick:()=>{_(),a({path:C?"/newspack/v1/wizard/newspack-popups-wizard/segmentation":`/newspack/v1/wizard/newspack-popups-wizard/segmentation/${t}`,method:"POST",data:{name:s,configuration:r}}).then(n).then(f.push("/segments"))}},va("Save","newspack")),(0,o.createElement)(w.zx,{isSecondary:!0,href:"#/segments"},va("Cancel","newspack"))))},Ta=(0,w.a4)((e=>{let{wizardApiFetch:t,match:n,...r}=e;const i=n.params.id;return i?(0,o.createElement)(Ea,(0,a.Z)({segmentId:i,wizardApiFetch:t},r)):(0,o.createElement)(fa,(0,a.Z)({wizardApiFetch:t},r))}));const xa=i.__,{HashRouter:Sa,Redirect:Pa,Route:Da,Switch:Ma}=f.Z,za=xa("Campaigns","newspack"),Na=xa("Reach your readers with configurable campaigns","newspack"),Oa=[{label:xa("Campaigns","newpack"),path:"/campaigns",exact:!0},{label:xa("Segments","newpack"),path:"/segments",exact:!0},{label:xa("Analytics","newpack"),path:"/analytics",exact:!0},{label:xa("Settings","newpack"),path:"/settings",exact:!0}];class Aa extends o.Component{constructor(e){var t;super(e),t=this,(0,r.Z)(this,"onWizardReady",(()=>{this.refetch({isInitial:!0})})),(0,r.Z)(this,"refetch",(function(){let{isInitial:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{setError:n,wizardApiFetch:a}=t.props;a({path:"/newspack/v1/wizard/newspack-popups-wizard/"}).then((n=>{if(t.updateAfterAPI(n),e){const e={start_date:Bt(g(new Date,30)),end_date:Bt(),with_report_by_id:!0};l()({path:`/newspack/v1/popups-analytics/report/?${(0,u.stringify)(e)}`}).then((e=>{let{report_by_id:n}=e;t.setState({promptsAnalyticsData:n})})).catch((e=>{t.setState({promptsAnalyticsData:{error:e}})}))}})).catch((e=>n(e)))})),(0,r.Z)(this,"updatePopup",(e=>{let{id:t,...n}=e;const{setError:a,wizardApiFetch:r}=this.props;return this.setState({inFlight:!0}),r({path:`/newspack/v1/wizard/newspack-popups-wizard/${t}`,method:"POST",data:{config:n},quiet:!0}).then(this.updateAfterAPI).catch((e=>a(e)))})),(0,r.Z)(this,"deletePopup",(e=>{const{setError:t,wizardApiFetch:n}=this.props;return n({path:`/newspack/v1/wizard/newspack-popups-wizard/${e}`,method:"DELETE",quiet:!0}).then(this.updateAfterAPI).catch((e=>t(e)))})),(0,r.Z)(this,"restorePopup",(e=>{const{setError:t,wizardApiFetch:n}=this.props;return n({path:`/newspack/v1/wizard/newspack-popups-wizard/${e}/restore`,method:"POST",quiet:!0}).then(this.updateAfterAPI).catch((e=>t(e)))})),(0,r.Z)(this,"publishPopup",(e=>{const{setError:t,wizardApiFetch:n}=this.props;return n({path:`/newspack/v1/wizard/newspack-popups-wizard/${e}/publish`,method:"POST",quiet:!0}).then(this.updateAfterAPI).catch((e=>t(e)))})),(0,r.Z)(this,"unpublishPopup",(e=>{const{setError:t,wizardApiFetch:n}=this.props;return n({path:`/newspack/v1/wizard/newspack-popups-wizard/${e}/publish`,method:"DELETE",quiet:!0}).then(this.updateAfterAPI).catch((e=>t(e)))})),(0,r.Z)(this,"duplicatePopup",((e,t)=>{const{setError:n,wizardApiFetch:a}=this.props;return this.setState({inFlight:!0}),a({path:(0,s.addQueryArgs)(`/newspack/v1/wizard/newspack-popups-wizard/${e}/duplicate`,{title:t}),method:"POST",quiet:!0}).then(this.updateAfterAPI).catch((()=>{n({code:"duplicate_prompt_error",message:xa("Error duplicating prompt. Please try again later.","newspack")})}))})),(0,r.Z)(this,"previewUrlForPopup",(e=>{var t,n,a;let{options:r,id:o}=e;const{placement:i,trigger_type:s}=r,c=(null===(t=window.newspack_popups_wizard_data)||void 0===t?void 0:t.preview_query_keys)||{},l={};Object.keys(r).forEach((e=>{c.hasOwnProperty(e)&&(l[c[e]]=r[e])}));let p="/";if("archives"===i&&null!==(n=window.newspack_popups_wizard_data)&&void 0!==n&&n.preview_archive)p=window.newspack_popups_wizard_data.preview_archive;else if(("inline"===i||"scroll"===s)&&window&&null!==(a=window.newspack_popups_wizard_data)&&void 0!==a&&a.preview_post){var d;p=null===(d=window.newspack_popups_wizard_data)||void 0===d?void 0:d.preview_post}return`${p}?${(0,u.stringify)({...l,pid:o})}`})),(0,r.Z)(this,"updateAfterAPI",(e=>{let{campaigns:t,prompts:n,segments:a,settings:r,duplicated:o=null}=e;return this.setState({campaigns:t,prompts:n,segments:a,settings:r,duplicated:o,inFlight:!1})})),(0,r.Z)(this,"manageCampaignGroup",(function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST";const{setError:a,wizardApiFetch:r}=t.props;return r({path:"/newspack/v1/wizard/newspack-popups-wizard/batch-publish/",data:{ids:e.map((e=>e.id))},method:n,quiet:!0}).then(t.updateAfterAPI).catch((e=>a(e)))})),this.state={campaigns:[],prompts:[],promptsAnalyticsData:null,segments:[],settings:[],previewUrl:null,duplicated:null,inFlight:!1}}render(){const{pluginRequirements:e,setError:t,isLoading:n,wizardApiFetch:r,startLoading:i,doneLoading:s}=this.props,{campaigns:c,inFlight:l,prompts:u,segments:p,settings:d,previewUrl:m,duplicated:h,promptsAnalyticsData:g}=this.state;return(0,o.createElement)(w.BA,{url:m,renderButton:m=>{let{showPreview:w}=m;const f={headerText:za,subHeaderText:Na,tabbedNavigation:Oa,setError:t,isLoading:n,startLoading:i,doneLoading:s,wizardApiFetch:r,prompts:u,segments:p,settings:d,duplicated:h,inFlight:l},v={...f,manageCampaignGroup:this.manageCampaignGroup,updatePopup:this.updatePopup,deletePopup:this.deletePopup,restorePopup:this.restorePopup,duplicatePopup:this.duplicatePopup,previewPopup:e=>this.setState({previewUrl:this.previewUrlForPopup(e)},(()=>w())),publishPopup:this.publishPopup,resetDuplicated:()=>this.setState({duplicated:null}),unpublishPopup:this.unpublishPopup,refetch:this.refetch};return(0,o.createElement)(Sa,{hashType:"slash"},(0,o.createElement)(Ma,null,e,(0,o.createElement)(Da,{path:"/campaigns/:id?",render:e=>{const n=e.match.params.id;return(0,o.createElement)(dn.Provider,{value:u},(0,o.createElement)(yn,(0,a.Z)({},v,{archiveCampaignGroup:(e,n)=>r({path:`/newspack/v1/wizard/newspack-popups-wizard/archive-campaign/${e}`,method:n?"POST":"DELETE",quiet:!0}).then(this.updateAfterAPI).catch((e=>t(e))),campaignId:n,createCampaignGroup:n=>r({path:"/newspack/v1/wizard/newspack-popups-wizard/create-campaign/",method:"POST",data:{name:n},quiet:!0}).then((t=>{this.setState({campaigns:t.campaigns,prompts:t.prompts,segments:t.segments,settings:t.settings}),e.history.push(`/campaigns/${t.term_id}`)})).catch((e=>t(e))),deleteCampaignGroup:n=>r({path:`/newspack/v1/wizard/newspack-popups-wizard/delete-campaign/${n}`,method:"DELETE",quiet:!0}).then((t=>{this.setState({campaigns:t.campaigns,prompts:t.prompts,segments:t.segments,settings:t.settings}),e.history.push("/campaigns/")})).catch((e=>t(e))),duplicateCampaignGroup:(n,a)=>r({path:`/newspack/v1/wizard/newspack-popups-wizard/duplicate-campaign/${n}`,method:"POST",data:{name:a},quiet:!0}).then((t=>{this.setState({campaigns:t.campaigns,prompts:t.prompts,segments:t.segments,settings:t.settings}),e.history.push(`/campaigns/${t.term_id}`)})).catch((e=>t(e))),renameCampaignGroup:(e,n)=>r({path:`/newspack/v1/wizard/newspack-popups-wizard/rename-campaign/${e}`,method:"POST",data:{name:n},quiet:!0}).then(this.updateAfterAPI).catch((e=>t(e))),campaigns:c,promptsAnalyticsData:g})))}}),(0,o.createElement)(Da,{path:"/segments/:id?",render:e=>(0,o.createElement)(Ta,(0,a.Z)({},e,f,{setSegments:e=>this.setState({segments:e})}))}),(0,o.createElement)(Da,{path:"/analytics",render:()=>(0,o.createElement)(sa,f)}),(0,o.createElement)(Da,{path:"/settings",render:()=>(0,o.createElement)(ca,f)}),(0,o.createElement)(Pa,{to:"/campaigns"})))}})}}(0,o.render)((0,o.createElement)((0,w.uF)(Aa,["jetpack","newspack-popups"])),document.getElementById("newspack-popups-wizard"))},9196:function(e){e.exports=window.React},2819:function(e){e.exports=window.lodash},6292:function(e){e.exports=window.moment},6989:function(e){e.exports=window.wp.apiFetch},5609:function(e){e.exports=window.wp.components},9818:function(e){e.exports=window.wp.data},9307:function(e){e.exports=window.wp.element},2694:function(e){e.exports=window.wp.hooks},2629:function(e){e.exports=window.wp.htmlEntities},5736:function(e){e.exports=window.wp.i18n},9630:function(e){e.exports=window.wp.keycodes},444:function(e){e.exports=window.wp.primitives},6483:function(e){e.exports=window.wp.url}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var o=n[e]={exports:{}};return t[e].call(o.exports,o,o.exports,a),o.exports}a.m=t,e=[],a.O=function(t,n,r,o){if(!n){var i=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],o=e[u][2];for(var s=!0,c=0;c<n.length;c++)(!1&o||i>=o)&&Object.keys(a.O).every((function(e){return a.O[e](n[c])}))?n.splice(c--,1):(s=!1,o<i&&(i=o));if(s){e.splice(u--,1);var l=r();void 0!==l&&(t=l)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,r,o]},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.j=964,function(){var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e}(),function(){var e={964:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,o,i=n[0],s=n[1],c=n[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(c)var u=c(a)}for(t&&t(n);l<i.length;l++)o=i[l],a.o(e,o)&&e[o]&&e[o][0](),e[i[l]]=0;return a.O(u)},n=self.webpackChunkwebpack=self.webpackChunkwebpack||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var r=a.O(void 0,[351],(function(){return a(3586)}));r=a.O(r);var o=window;for(var i in r)o[i]=r[i];r.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})}();