(()=>{"use strict";var e;e=function(){const e=document.querySelector(".subscription_details .button.cancel"),{labels:t,nonce:n,rest_url:c,should_rate_limit:o}=newspack_my_account||{};if(e){const n=e=>{confirm(t?.cancel_subscription_message||"Are you sure you want to cancel this subscription?")||e.preventDefault()};e.addEventListener("click",n)}const r=document.getElementById("add_payment_method");if(r&&Boolean(o)){const e=document.querySelector(".woocommerce-notices-wrapper"),t=r.querySelector('input[type="submit"], button[type="submit"]'),o=function(o){if(r.hasAttribute("data-check-rate-limit")){e.textContent="",t.setAttribute("disabled",""),o.preventDefault();const a=new XMLHttpRequest;a.onreadystatechange=function(){if(4===a.readyState&&a.status>=200&&a.status<300){t.removeAttribute("disabled");const n=JSON.parse(a.responseText);if(n?.success&&(r.removeAttribute("data-check-rate-limit"),r.requestSubmit(t),r.setAttribute("data-check-rate-limit","1")),n?.error){const t=document.createElement("div"),c=document.createElement("ul"),o=document.createElement("li");c.classList.add("woocommerce-error"),o.textContent=n.error,t.appendChild(c),c.appendChild(o),e.appendChild(t),e.scrollIntoView({behavior:"smooth"})}}},a.open("GET",c+"newspack/v1/check-rate"),a.setRequestHeader("X-WP-Nonce",n),a.send()}};r.setAttribute("data-check-rate-limit","1"),r.addEventListener("submit",o,!0),t.addEventListener("click",o,!0)}},"undefined"!=typeof document&&("complete"!==document.readyState&&"interactive"!==document.readyState?document.addEventListener("DOMContentLoaded",e):e())})();