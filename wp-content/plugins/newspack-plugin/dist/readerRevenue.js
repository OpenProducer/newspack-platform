(()=>{"use strict";var e,n={8824:(e,n,t)=>{t.d(n,{FF:()=>a,L0:()=>s,Zs:()=>i,lG:()=>o});const a="nrh",s="wc",i="other",o="newspack-reader-revenue-wizard"},2802:(e,n,t)=>{t(8209);var a=t(5880),s=t.n(a),i=t(6087),o=t(7723),r=t(1727),l=t(7143),c=t(6427),d=t(7948),p=t(8824),u=t(790);const _={once:{tieredLabel:(0,o.__)("One-time donations"),staticLabel:(0,o.__)("Suggested one-time donation amount")},month:{tieredLabel:(0,o.__)("Monthly donations"),staticLabel:(0,o.__)("Suggested donation amount per month")},year:{tieredLabel:(0,o.__)("Annual donations"),staticLabel:(0,o.__)("Suggested donation amount per year")}},g=Object.keys(_),h=()=>{const e=r.sQ.useWizardData("reader-revenue"),{updateWizardSettings:n}=(0,l.useDispatch)(r.sQ.STORE_NAMESPACE);if(!e.donation_data||"errors"in e.donation_data)return null;const{amounts:t,currencySymbol:a,tiered:s,disabledFrequencies:i,minimumDonation:p}=e.donation_data,h=e=>t=>n({slug:"newspack-reader-revenue-wizard",path:["donation_data",...e],value:t}),m=g.map((e=>({key:e,..._[e]}))),w=parseFloat(p),k=window.newspack_reader_revenue?.can_use_name_your_price;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(r.Zp,{headerActions:!0,noBorder:!0,children:[(0,u.jsx)(r.X3,{title:(0,o.__)("Suggested Donations","newspack-plugin"),description:(0,o.__)("Set suggested donation amounts. These will be the default settings for the Donate block.","newspack-plugin"),noMargin:!0}),k&&(0,u.jsx)(r.Yq,{label:(0,o.__)("Donation Type","newspack-plugin"),onChange:()=>h(["tiered"])(!s),buttonOptions:[{value:!0,label:(0,o.__)("Tiered","newspack-plugin")},{value:!1,label:(0,o.__)("Untiered","newspack-plugin")}],buttonSmall:!0,value:s,hideLabelFromVision:!0})]}),s?(0,u.jsx)(r.xA,{columns:1,children:m.map((e=>{const n=i[e.key],s=Object.values(i).filter(Boolean).length===g.length-1;return(0,u.jsx)(r.Zp,{noBorder:!0,children:(0,u.jsxs)(r.xA,{columns:1,gutter:8,children:[(0,u.jsx)(c.ToggleControl,{checked:!n,onChange:()=>h(["disabledFrequencies",e.key])(!n),label:e.tieredLabel,disabled:!n&&s}),!n&&(0,u.jsxs)(r.xA,{columns:3,rowGap:16,children:[(0,u.jsx)(d.F,{currencySymbol:a,label:(0,o.__)("Low-tier"),error:t[e.key][0]<w?(0,o.__)("Warning: suggested donations should be at least the minimum donation amount.","newspack-plugin"):null,value:t[e.key][0],min:w,onChange:h(["amounts",e.key,0])}),(0,u.jsx)(d.F,{currencySymbol:a,label:(0,o.__)("Mid-tier"),error:t[e.key][1]<w?(0,o.__)("Warning: suggested donations should be at least the minimum donation amount.","newspack-plugin"):null,value:t[e.key][1],min:w,onChange:h(["amounts",e.key,1])}),(0,u.jsx)(d.F,{currencySymbol:a,label:(0,o.__)("High-tier"),error:t[e.key][2]<w?(0,o.__)("Warning: suggested donations should be at least the minimum donation amount.","newspack-plugin"):null,value:t[e.key][2],min:w,onChange:h(["amounts",e.key,2])})]})]})},e.key)}))}):(0,u.jsx)(r.xA,{columns:1,children:(0,u.jsx)(r.Zp,{noBorder:!0,children:(0,u.jsx)(r.xA,{columns:3,rowGap:16,children:m.map((e=>{const n=i[e.key],s=Object.values(i).filter(Boolean).length===g.length-1;return(0,u.jsxs)(r.xA,{columns:1,gutter:16,children:[(0,u.jsx)(c.ToggleControl,{checked:!n,onChange:()=>h(["disabledFrequencies",e.key])(!n),label:e.tieredLabel,disabled:!n&&s}),!n&&(0,u.jsx)(d.F,{currencySymbol:a,label:e.staticLabel,value:t[e.key][3],min:w,error:t[e.key][3]<w?(0,o.__)("Warning: suggested donations should be at least the minimum donation amount.","newspack-plugin"):null,onChange:h(["amounts",e.key,3])},e.key)]},e.key)}))})})}),(0,u.jsx)(r.xA,{columns:3,children:(0,u.jsx)(r.xt,{label:(0,o.__)("Minimum donation","newspack-plugin"),help:(0,o.__)("Set minimum donation amount. Setting a reasonable minimum donation amount can help protect your site from bot attacks.","newspack-plugin"),type:"number",min:1,value:w,onChange:e=>h(["minimumDonation"])(e)})})]})},m=()=>{const e=r.sQ.useWizardData("reader-revenue"),{updateWizardSettings:n}=(0,l.useDispatch)(r.sQ.STORE_NAMESPACE);if(!e.donation_data||"errors"in e.donation_data)return null;const t=e=>t=>n({slug:"newspack-reader-revenue-wizard",path:["donation_data",...e],value:t}),a=e.available_billing_fields,s=e.order_notes_field;if(!a||!Object.keys(a).length)return null;const i=e.donation_data.billingFields.length?e.donation_data.billingFields:Object.keys(a);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(r.Zp,{noBorder:!0,headerActions:!0,children:(0,u.jsx)(r.X3,{title:(0,o.__)("Billing Fields","newspack-plugin"),description:(0,o.__)("Configure the billing fields shown in the modal checkout form. Fields marked with (*) are required if shown. Note that for shippable products, address fields will always be shown.","newspack-plugin"),noMargin:!0})}),(0,u.jsxs)(r.xA,{columns:3,rowGap:16,children:[Object.keys(a).map((e=>(0,u.jsx)(c.CheckboxControl,{label:a[e].label+(a[e].required?" *":""),checked:i.includes(e),disabled:"billing_email"===e,onChange:()=>{let n=[...i];n=i.includes(e)?n.filter((n=>n!==e)):[...n,e],t(["billingFields"])(n)}},e))),s&&(0,u.jsx)(c.CheckboxControl,{label:s.label,checked:i.includes("order_comments"),onChange:()=>{let e=[...i];e=i.includes("order_comments")?e.filter((e=>"order_comments"!==e)):[...e,"order_comments"],t(["billingFields"])(e)}})]})]})},w=()=>{const e=r.sQ.useWizardData("reader-revenue"),{saveWizardSettings:n}=(0,l.useDispatch)(r.sQ.STORE_NAMESPACE);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(r.Lz,{description:(0,o.__)("Configure options for donations.","newspack-plugin"),hasGreyHeader:!0,isMedium:!0,title:(0,o.__)("Donation Settings","newspack-plugin"),actionContent:(0,u.jsx)(r.$n,{variant:"primary",onClick:()=>n({slug:p.lG,section:"donations",payloadPath:["donation_data"],auxData:{saveDonationProduct:!0}}),children:(0,o.__)("Save Donation Settings","newspack-plugin")}),children:[e.donation_page&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(r.Zp,{noBorder:!0,headerActions:!0,children:[(0,u.jsx)(r.X3,{title:(0,o.__)("Donations Landing Page","newspack-plugin"),noMargin:!0}),(0,u.jsx)(r.$n,{variant:"secondary",isSmall:!0,href:e.donation_page.editUrl,onClick:void 0,children:(0,o.__)("Edit Page")})]}),"publish"===e.donation_page.status?(0,u.jsx)(r.$T,{isSuccess:!0,noticeText:(0,o.__)("Your donations landing page is published.","newspack-plugin")}):(0,u.jsx)(r.$T,{isError:!0,noticeText:(0,o.__)("Your donations landing page is not yet published.","newspack-plugin")})]}),(0,u.jsx)(h,{})]}),(0,u.jsx)(r.Lz,{description:(0,o.__)("Configure options for modal checkouts.","newspack-plugin"),hasGreyHeader:!0,isMedium:!0,title:(0,o.__)("Modal Checkout Settings","newspack-plugin"),actionContent:(0,u.jsx)(r.$n,{variant:"primary",onClick:()=>n({slug:p.lG,section:"donations",payloadPath:["donation_data"]}),children:(0,o.__)("Save Modal Checkout Settings","newspack-plugin")}),children:(0,u.jsx)(m,{})})]})},k=()=>{const[e,n]=(0,i.useState)(null),t=r.sQ.useWizardData("reader-revenue"),{updateWizardSettings:a,saveWizardSettings:s}=(0,l.useDispatch)(r.sQ.STORE_NAMESPACE);(0,i.useEffect)((()=>{t?.platform_data?.donor_landing_page&&n(t.platform_data.donor_landing_page)}),[]);const c=(e,n)=>a({slug:p.lG,path:["platform_data",e],value:n}),d=t?.platform_data||{};return(0,u.jsxs)(r.Lz,{hasGreyHeader:!0,isMedium:!0,title:(0,o.__)("News Revenue Hub Settings","newspack"),description:(0,o.__)("Configure your site’s connection to News Revenue Hub.","newspack"),actionContent:(0,u.jsx)(r.$n,{isPrimary:!0,onClick:()=>s({slug:p.lG,payloadPath:["platform_data"]}),children:(0,o.__)("Save Settings")}),children:[(0,u.jsx)("div",{children:(0,u.jsxs)(r.xA,{columns:3,children:[(0,u.jsx)(r.xt,{label:(0,o.__)("Organization ID","newspack"),placeholder:"exampleid",value:d?.nrh_organization_id||"",onChange:e=>c("nrh_organization_id",e)}),(0,u.jsx)(r.xt,{label:(0,o.__)("Custom domain (optional)","newspack"),help:(0,o.__)("Enter the raw domain without protocol or slashes."),placeholder:"donate.example.com",value:d?.nrh_custom_domain||"",onChange:e=>c("nrh_custom_domain",e)}),(0,u.jsx)(r.xt,{label:(0,o.__)("Salesforce Campaign ID (optional)","newspack"),placeholder:"exampleid",value:d?.nrh_salesforce_campaign_id||"",onChange:e=>c("nrh_salesforce_campaign_id",e)})]})}),d.hasOwnProperty("donor_landing_page")&&(0,u.jsxs)("div",{children:[(0,u.jsx)("hr",{}),(0,u.jsx)("h3",{children:(0,o.__)("Donor Landing Page","newspack")}),(0,u.jsx)("p",{className:"components-base-control__help",children:(0,o.__)("Set a page on your site as a donor landing page. Once a reader donates and lands on this page, they will be considered a donor.","newspack")}),(0,u.jsx)(r.IW,{label:(0,o.__)("Search for a New Donor Landing Page","newspack"),help:(0,o.__)("Begin typing page title, click autocomplete result to select.","newspack"),onChange:e=>{if(!e||!e.length)return n(null),c("donor_landing_page",null);const t=e[0];return n(t),c("donor_landing_page",t)},postTypes:[{slug:"page",label:"Page"}],postTypeLabel:(0,o.__)("page","newspack"),postTypeLabelPlural:(0,o.__)("pages","newspack"),selectedItems:e?[e]:[]})]})]})};var f=t(2774);const b=({settings:e})=>{const{updateWizardSettings:n}=(0,l.useDispatch)(r.sQ.STORE_NAMESPACE),t=(e,t)=>n({slug:p.lG,path:["additional_settings",e],value:t}),{saveWizardSettings:a}=(0,l.useDispatch)(r.sQ.STORE_NAMESPACE),s=()=>a({slug:p.lG,section:"settings",payloadPath:["additional_settings"]});return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(r.X3,{title:(0,o.__)("Additional Settings","newspack-plugin"),description:(0,o.__)("Configure Newspack-exclusive settings.","newspack-plugin")}),(0,u.jsx)(r.Lz,{isMedium:!0,title:(0,o.__)("Collect transaction fees","newspack-plugin"),description:(0,o.__)("Allow donors to optionally cover transaction fees imposed by payment processors.","newspack-plugin"),notificationLevel:"info",toggleChecked:e.allow_covering_fees,toggleOnChange:()=>{t("allow_covering_fees",!e.allow_covering_fees),s()},hasGreyHeader:e.allow_covering_fees,hasWhiteHeader:!e.allow_covering_fees,actionContent:e.allow_covering_fees&&(0,u.jsx)(r.$n,{isPrimary:!0,onClick:s,children:(0,o.__)("Save Settings","newspack-plugin")}),children:e.allow_covering_fees&&(0,u.jsxs)(r.xA,{noMargin:!0,rowGap:16,children:[(0,u.jsx)(r.xt,{type:"number",step:"0.1",value:e.fee_multiplier,label:(0,o.__)("Fee multiplier","newspack-plugin"),onChange:e=>t("fee_multiplier",e)}),(0,u.jsx)(r.xt,{type:"number",step:"0.1",value:e.fee_static,label:(0,o.__)("Fee static portion","newspack-plugin"),onChange:e=>t("fee_static",e)}),(0,u.jsx)(r.xt,{value:e.allow_covering_fees_label,label:(0,o.__)("Custom message","newspack-plugin"),placeholder:(0,o.__)("A message to explain the transaction fee option (optional).","newspack-plugin"),onChange:e=>t("allow_covering_fees_label",e)}),(0,u.jsx)(c.CheckboxControl,{label:(0,o.__)("Cover fees by default","newspack-plugin"),checked:e.allow_covering_fees_default,onChange:()=>t("allow_covering_fees_default",!e.allow_covering_fees_default),help:(0,o.__)("If enabled, the option to cover the transaction fee will be checked by default.","newspack-plugin")})]})})]})},y=({stripe:e})=>{const n=(0,l.useSelect)((e=>e(r.sQ.STORE_NAMESPACE).isLoading())),t=(0,l.useSelect)((e=>e(r.sQ.STORE_NAMESPACE).isQuietLoading())),{updateWizardSettings:a}=(0,l.useDispatch)(r.sQ.STORE_NAMESPACE),{saveWizardSettings:s}=(0,l.useDispatch)(r.sQ.STORE_NAMESPACE),i=e?.testMode,d=i?e?.is_connected_api_test:e?.is_connected_api_live,_=i?e?.is_connected_oauth_test:e?.is_connected_oauth_live;return(0,u.jsx)(r.Lz,{isMedium:!0,title:(0,o.__)("Stripe","newspack-plugin"),description:()=>(0,u.jsxs)(u.Fragment,{children:[(0,o.__)("Enable the Stripe payment gateway for WooCommerce. ","newspack-plugin"),(0,u.jsx)(c.ExternalLink,{href:"https://woocommerce.com/document/stripe/",children:(0,o.__)("Learn more","newspack-plugin")})]}),hasWhiteHeader:!0,toggleChecked:!!e.enabled,toggleOnChange:()=>{var n;n=!e.enabled,a({slug:p.lG,path:["payment_gateways","stripe","enabled"],value:n}),s({slug:p.lG,section:"stripe",payloadPath:["payment_gateways","stripe"]})},badge:e?.enabled?n||t?(0,o.__)("Loading…","newspack-plugin"):d?_?i?(0,o.__)("Connected - test mode","newspack-plugin"):(0,o.__)("Connected","newspack-plugin"):(0,o.__)("Needs attention","newspack-plugin"):(0,o.__)("Not connected","newspack-plugin"):null,badgeLevel:!e?.enabled||n||t?"info":d?_?"success":"warning":"error",actionContent:!e?.enabled||n||t?null:_?(0,u.jsx)(r.$n,{variant:"secondary",href:"/wp-admin/admin.php?page=wc-settings&tab=checkout&section=stripe&panel=settings",target:"_blank",rel:"noreferrer",children:(0,o.__)("Configure","newspack-plugin")}):(0,u.jsx)(r.$n,{variant:"primary",href:"/wp-admin/admin.php?page=wc-settings&tab=checkout&section=stripe&panel=payment-methods",target:"_blank",rel:"noreferrer",children:(0,o.__)("Connect","newspack-plugin")})})},x=({woopayments:e})=>{const n=(0,l.useSelect)((e=>e(r.sQ.STORE_NAMESPACE).isLoading())),t=(0,l.useSelect)((e=>e(r.sQ.STORE_NAMESPACE).isQuietLoading())),{updateWizardSettings:a}=(0,l.useDispatch)(r.sQ.STORE_NAMESPACE),{saveWizardSettings:s}=(0,l.useDispatch)(r.sQ.STORE_NAMESPACE),i=e?.test_mode,d=e?.is_connected;return(0,u.jsx)(r.Lz,{isMedium:!0,title:(0,o.__)("WooPayments","newspack-plugin"),description:()=>(0,u.jsxs)(u.Fragment,{children:[(0,o.__)("Enable WooPayments. ","newspack-plugin"),(0,u.jsx)(c.ExternalLink,{href:"https://woocommerce.com/payments/",children:(0,o.__)("Learn more","newspack-plugin")})]}),hasWhiteHeader:!0,toggleChecked:!!e.enabled,toggleOnChange:()=>{var n;n=!e.enabled,a({slug:p.lG,path:["payment_gateways","woopayments","enabled"],value:n}),s({slug:p.lG,section:"woopayments",payloadPath:["payment_gateways","woopayments"]})},badge:e?.enabled?n||t?(0,o.__)("Loading…","newspack-plugin"):d?i?(0,o.__)("Connected - test mode","newspack-plugin"):(0,o.__)("Connected","newspack-plugin"):(0,o.__)("Not connected","newspack-plugin"):null,badgeLevel:!e?.enabled||n||t?"info":d?"success":"error",actionContent:!e?.enabled||n||t?null:d?(0,u.jsx)(r.$n,{variant:"secondary",href:"/wp-admin/admin.php?page=wc-settings&tab=checkout&section=woocommerce_payments",target:"_blank",rel:"noreferrer",children:(0,o.__)("Configure","newspack-plugin")}):(0,u.jsx)(r.$n,{variant:"primary",href:"/wp-admin/admin.php?page=wc-admin&path=%2Fpayments%2Foverview",target:"_blank",rel:"noreferrer",children:(0,o.__)("Connect","newspack-plugin")})})},v=()=>{const{payment_gateways:e={},is_ssl:n,errors:t=[],additional_settings:a={},plugin_status:s,platform_data:i={}}=r.sQ.useWizardData("reader-revenue");if(!1===s||"wc"!==i?.platform)return null;const{stripe:l=!1,woopayments:d=!1}=e,p=Object.keys(e).some((n=>e[n]?.enabled));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(r.X3,{title:(0,o.__)("Payment Gateways","newspack-plugin"),description:()=>(0,u.jsxs)(u.Fragment,{children:[(0,o.__)("Configure Newspack-supported payment gateways for WooCommerce. Payment gateways allow you to accept various payment methods from your readers. ","newspack-plugin"),(0,u.jsx)(c.ExternalLink,{href:"https://woocommerce.com/document/premium-payment-gateway-extensions/",children:(0,o.__)("Learn more","newspack-plugin")})]})}),t.length>0&&t.map(((e,n)=>(0,u.jsx)(r.$T,{isError:!0,noticeText:(0,u.jsx)("span",{children:e.message})},n))),!1===n&&(0,u.jsx)(r.$T,{isWarning:!0,noticeText:(0,u.jsxs)(u.Fragment,{children:[(0,o.__)("Missing or invalid SSL configuration detected. To collect payments, the site must be secured with SSL. ","newspack-plugin"),(0,u.jsx)(c.ExternalLink,{href:"https://stripe.com/docs/security/guide",children:(0,o.__)("Learn more","newspack-plugin")})]})}),(0,u.jsx)(y,{stripe:l}),(0,u.jsx)(x,{woopayments:d}),p&&(0,u.jsx)(b,{settings:a})]})};var S=t(1455),j=t.n(S);const C=s()(newspack_reader_revenue.emails),E=newspack_reader_revenue.email_cpt,T=()=>{const[e,n]=(0,i.useState)(null),[t,a]=(0,i.useState)(!1),[l,c]=(0,i.useState)(!1),[d,p]=(0,i.useState)(C);return!1===e?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(r.$T,{isError:!0,children:(0,o.__)("Newspack uses Newspack Newsletters to handle editing email-type content. Please activate this plugin to proceed.","newspack-plugin")}),(0,u.jsx)(r.$T,{isError:!0,children:(0,o.__)("Until this feature is configured, default receipts will be used.","newspack-plugin")}),(0,u.jsx)(r.I2,{style:e?{display:"none"}:{},plugins:["newspack-newsletters"],onStatus:e=>n(e.complete),onInstalled:()=>window.location.reload(),withoutFooterButton:!0})]}):(0,u.jsx)(u.Fragment,{children:d.map((e=>{const n="publish"===e.status;let i=(0,o.__)("This email is not active.","newspack-plugin");return"receipt"===e.type&&(i=(0,o.__)("This email is not active. The default receipt will be used.","newspack-plugin")),"welcome"===e.type&&(i=(0,o.__)("This email is not active. The receipt template will be used if active.","newspack-plugin")),(0,u.jsx)(r.Lz,{disabled:l,title:e.label,titleLink:e.edit_link,href:e.edit_link,description:e.description,actionText:(0,o.__)("Edit","newspack-plugin"),secondaryActionText:(0,o.__)("Reset","newspack-plugin"),onSecondaryActionClick:()=>{var n;r.Wp.confirmAction((0,o.__)("Are you sure you want to reset the contents of this email?","newspack-plugin"))&&(n=e.post_id,a(!1),c(!0),j()({path:`/newspack/v1/wizard/newspack-reader-revenue-wizard/donations/emails/${n}`,method:"DELETE",quiet:!0}).then((e=>p(s()(e)))).catch(a).finally((()=>c(!1))))},secondaryDestructive:!0,toggleChecked:n,toggleOnChange:n=>{return t=e.post_id,s=n?"publish":"draft",a(!1),c(!0),void j()({path:`/wp/v2/${E}/${t}`,method:"post",data:{status:s}}).then((()=>{p(d.map((e=>e.post_id===t?{...e,status:s}:e)))})).catch(a).finally((()=>c(!1)));var t,s},...n?{}:{notification:i,notificationLevel:"info"},children:t&&(0,u.jsx)(r.$T,{noticeText:t?.message||(0,o.__)("Something went wrong.","newspack-plugin"),isError:!0})},e.post_id)}))})};var A=t(5373),L=t(3832);const P=()=>{const{salesforce_redirect_url:e}=window?.newspack_reader_revenue||{},[n,t]=(0,i.useState)(!1),{salesforce_settings:a={}}=r.sQ.useWizardData("reader-revenue"),[s,d]=(0,i.useState)(a.refresh_token),[_,g]=(0,i.useState)(null),{saveWizardSettings:h,wizardApiFetch:m}=(0,l.useDispatch)(r.sQ.STORE_NAMESPACE);return(0,i.useEffect)((()=>{const n=(0,A.parse)(window.location.search).code;n&&(window.history.replaceState({},"",e),(async n=>{try{const a=await m({path:"/newspack/salesforce/v1/tokens",method:"POST",data:{code:n,redirect_uri:e}}),{access_token:s,client_id:i,client_secret:o,instance_url:r,refresh_token:l}=a;s&&l&&(t={access_token:s,client_id:i,client_secret:o,instance_url:r,refresh_token:l},h({slug:p.lG,section:"salesforce",payloadPath:["salesforce_settings"],updatePayload:{path:["salesforce_settings"],value:t}})),d(!0)}catch(e){g((0,o.__)("We couldn’t establish a connection to Salesforce. Please verify your Consumer Key and Secret and try connecting again.","newspack"))}var t})(n))}),[]),(0,i.useEffect)((()=>{s?(async()=>{const e=await m({path:"/newspack/salesforce/v1/connection-status",method:"POST",isQuietFetch:!0});e.error&&g(e.error)})():g(null)}),[s]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(r.x5,{afterUpdate:n=>{let t,a;if((n?.salesforce||[]).forEach((e=>{"newspack_salesforce_client_id"===e.key?t=e.value:"newspack_salesforce_client_secret"===e.key&&(a=e.value)})),t&&a&&e){const n=(0,L.addQueryArgs)("https://login.salesforce.com/services/oauth2/authorize",{response_type:"code",client_id:encodeURIComponent(t),client_secret:encodeURIComponent(a),redirect_uri:encodeURI(e)});window.location.assign(n)}else d(!1)},pluginSlug:"newspack/salesforce",title:(0,o.__)("Salesforce Settings","newspack"),description:()=>(0,u.jsxs)(u.Fragment,{children:[_&&(0,u.jsx)(r.$T,{noticeText:_,isWarning:!0}),s&&!_&&(0,u.jsx)(r.$T,{noticeText:(0,o.__)("Your site is connected to Salesforce.","newspack"),isSuccess:!0}),(0,o.__)("Establish a connection to sync WooCommerce order data to Salesforce. To connect with Salesforce, create or choose a Connected App for this site in your Salesforce dashboard. Make sure to paste the full URL for this page (","newspack"),(0,u.jsx)(c.ClipboardButton,{className:"newspack-button is-link",text:e,onCopy:()=>t(!0),onFinishCopy:()=>t(!1),children:n?(0,o.__)("copied to clipboard!","newspack"):(0,o.__)("copy to clipboard","newspack")}),(0,o.__)(") into the “Callback URL” field in the Connected App’s settings. ","newspack"),(0,u.jsx)(c.ExternalLink,{href:"https://help.salesforce.com/articleView?id=connected_app_create.htm",children:(0,o.__)("Learn how to create a Connected App","newspack")})]})})})};(0,i.render)((0,i.createElement)((()=>{const{platform_data:e,plugin_status:n,donation_data:t}=r.sQ.useWizardData("reader-revenue"),a=e?.platform,i={label:(0,o.__)("Platform","newspack"),path:"/",render:f.A};let l=[{label:(0,o.__)("Donations","newspack"),path:"/donations",render:w,isHidden:a===p.Zs},{label:(0,o.__)("Payment Methods","newspack"),path:"/payment-methods",activeTabPaths:["/payment-methods"],render:v,isHidden:a!==p.L0},{label:(0,o.__)("Emails","newspack"),path:"/emails",render:T,isHidden:a!==p.L0},{label:(0,o.__)("Salesforce","newspack"),path:"/salesforce",render:P,isHidden:a!==p.L0},{label:(0,o.__)("News Revenue Hub Settings","newspack"),path:"/settings",render:k,isHidden:a!==p.FF},i];return a!==p.L0||n||(l=[i]),(0,u.jsx)(r.sQ,{headerText:(0,o.__)("Reader Revenue","newspack"),subHeaderText:(0,o.__)("Generate revenue from your customers","newspack"),sections:l,apiSlug:p.lG,renderAboveSections:()=>s()(t?.errors).map(((e,n)=>(0,u.jsx)(r.$T,{isError:!0,noticeText:e},n))),requiredPlugins:["newspack-blocks"]})})),document.getElementById("newspack-reader-revenue-wizard"))},1609:e=>{e.exports=window.React},790:e=>{e.exports=window.ReactJSXRuntime},6154:e=>{e.exports=window.moment},1455:e=>{e.exports=window.wp.apiFetch},6427:e=>{e.exports=window.wp.components},7143:e=>{e.exports=window.wp.data},6087:e=>{e.exports=window.wp.element},2619:e=>{e.exports=window.wp.hooks},8537:e=>{e.exports=window.wp.htmlEntities},7723:e=>{e.exports=window.wp.i18n},8558:e=>{e.exports=window.wp.keycodes},5573:e=>{e.exports=window.wp.primitives},3832:e=>{e.exports=window.wp.url}},t={};function a(e){var s=t[e];if(void 0!==s)return s.exports;var i=t[e]={id:e,loaded:!1,exports:{}};return n[e].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=n,e=[],a.O=(n,t,s,i)=>{if(!t){var o=1/0;for(d=0;d<e.length;d++){for(var[t,s,i]=e[d],r=!0,l=0;l<t.length;l++)(!1&i||o>=i)&&Object.keys(a.O).every((e=>a.O[e](t[l])))?t.splice(l--,1):(r=!1,i<o&&(o=i));if(r){e.splice(d--,1);var c=s();void 0!==c&&(n=c)}}return n}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[t,s,i]},a.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return a.d(n,{a:n}),n},a.d=(e,n)=>{for(var t in n)a.o(n,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),a.j=509,(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var n=a.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var t=n.getElementsByTagName("script");if(t.length)for(var s=t.length-1;s>-1&&(!e||!/^http(s?):/.test(e));)e=t[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={509:0};a.O.j=n=>0===e[n];var n=(n,t)=>{var s,i,[o,r,l]=t,c=0;if(o.some((n=>0!==e[n]))){for(s in r)a.o(r,s)&&(a.m[s]=r[s]);if(l)var d=l(a)}for(n&&n(t);c<o.length;c++)i=o[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},t=globalThis.webpackChunknewspack=globalThis.webpackChunknewspack||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})();var s=a.O(void 0,[223],(()=>a(2802)));s=a.O(s)})();