(()=>{var e,t={1075:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var a=n(4058);class s extends a.A{constructor(e,t,n,a=""){super(e,n,a),this.name="WizardApiError",this.statusCode=t,Object.setPrototypeOf(this,s.prototype)}toJSON(){return{name:this.name,message:this.message,statusCode:this.statusCode,errorCode:this.errorCode,details:this.details,stackTrace:this.stack}}}const o=s},9693:(e,t,n)=>{"use strict";n(8209);var a=n(6087),s=n(7723),o=n(179),r=n.n(o),i=n(6638),l=n.n(i),c=n(1455),p=n.n(c),d=n(7677),u=n(8851),_=n(8351),h=n(5573),g=n(790);const m=(0,g.jsx)(h.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,g.jsx)(h.Path,{d:"M18.5 5.5V8H20V5.5h2.5V4H20V1.5h-1.5V4H16v1.5h2.5zM12 4H6a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2v-6h-1.5v6a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5h6V4z"})}),w=(0,g.jsx)(h.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,g.jsx)(h.Path,{d:"M18 5.5H6a.5.5 0 00-.5.5v3h13V6a.5.5 0 00-.5-.5zm.5 5H10v8h8a.5.5 0 00.5-.5v-7.5zm-10 0h-3V18a.5.5 0 00.5.5h2.5v-8zM6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z"})});var b=n(3832),k=n(6427),x=n(5135),f=n(216);const{useHistory:v}=f.A,j=newspack_aux_data.is_e2e?12:40,y=j+3,S={plugin_configuration:{message:(0,s.__)("Installation","newspack")},starter_content:{message:(0,s.__)("Starter content","newspack")}},C=e=>p()({path:`/newspack/v1/wizard/newspack-setup-wizard/starter-content/${e}`,method:"post"}),A=(0,x.c_)((({buttonAction:e})=>{const[t,n]=(0,a.useState)(0),[o,r]=(0,a.useState)([]),[i,c]=(0,a.useState)(null),[h,f]=(0,a.useState)(!0),[A,T]=(0,a.useState)([]),[N,z]=(0,a.useState)(""),[P,L]=(0,a.useState)(),F="generated"===P,O="import"===P,M=e=>t=>T((n=>[...n,{...e,error:t}])),E=(h?y:0)+o.length;(0,a.useEffect)((()=>(document.body.classList.add("newspack-wizard__welcome","newspack-wizard__blue"),p()({path:"/newspack/v1/wizard/newspack-setup-wizard/initial-check/"}).then((e=>{r(e.plugins),c(e.is_ssl)})),()=>document.body.classList.remove("newspack-wizard__welcome","newspack-wizard__blue"))),[]);const B=()=>n((e=>e+1)),H=async()=>{T([]),n(0),await new Promise((e=>setTimeout(e,1)));const e=o.map((e=>"active"===e.Status?(B(),()=>Promise.resolve()):()=>p()({path:`/newspack/v1/plugins/${e.Slug}/configure/`,method:"POST"}).then(B).catch(M({info:S.plugin_configuration,item:`${(0,s.__)("Failed to install","newspack")} ${e.Name}`}))));for(let t=0;t<e.length;t++)await e[t]();(F&&h||O)&&(await((e,t="")=>p()({path:"/newspack/v1/wizard/newspack-setup-wizard/starter-content/init",method:"post",data:{type:e,site:t}}))(P,N).then(B).catch((e=>{window.location="/wp-admin/admin.php?page=newspack-setup-wizard&newspack-notice=_error_"+e.message})),await Promise.allSettled(l()(j,(e=>C(`post/${e}`).then(B).catch(M({info:S.starter_content,item:(0,s.__)("Failed to create a post.","newspack")}))))),await C("homepage").then(B).catch(M({info:S.starter_content,item:(0,s.__)("Failed to create the homepage.","newspack")})),await C("theme").then(B).catch(M({info:S.starter_content,item:(0,s.__)("Failed to activate the theme.","newspack")})))},R=v(),I=e.href,$=A.length>0,U=0===t,V=t===E&&!$,W=(0,a.useRef)(),[D,q]=(0,a.useState)(5);(0,a.useEffect)((()=>{0===D&&(clearInterval(W.current),R.push(I.replace("#","")))}),[D]),(0,a.useEffect)((()=>{V&&5===D&&(W.current=setInterval((()=>{q((e=>e-1))}),1e3))}),[V,D]);return(0,g.jsxs)(g.Fragment,{children:[U&&(0,g.jsxs)(x.xA,{columns:1,gutter:8,children:[(0,g.jsx)(x.qV,{simple:!0,size:36,white:!0}),(0,g.jsx)(x.X3,{title:()=>(0,g.jsxs)(g.Fragment,{children:[(0,s.__)("Welcome to Newspack,","newspack"),(0,g.jsx)("br",{}),(0,s.__)("the platform for news","newspack")]}),heading:1,centered:!0,isWhite:!0,noMargin:!0})]}),(0,g.jsx)(x.Zp,{isNarrow:!0,isWhite:!0,className:0===A.length&&t>0&&!V?"loading":null,children:(0,g.jsxs)(x.xA,{columns:1,children:[!U&&(0,g.jsxs)("h1",{children:[$?(0,g.jsx)(d.A,{className:"newspack--error",icon:u.A}):V?(0,g.jsx)("span",{className:"newspack-checkbox-icon newspack-checkbox-icon--checked",children:(0,g.jsx)(d.A,{icon:_.A})}):void 0,$?(0,s.__)("Installation error","newspack"):V?(0,s.__)("Installation complete","newspack"):(0,s.__)("Installing…","newspack")]}),0===A.length&&t>0?(0,g.jsx)(x.z2,{completed:t,total:E}):null,(0,g.jsxs)("p",{children:[$?(0,s.__)("There has been an error during the installation. Please retry or manually install required plugins to continue with the configuration of your site.","newspack"):U?(0,s.__)("We will help you get set up by installing the most relevant plugins first before requiring a few details from you in order to build your site.","newspack"):V?(0,s.__)("Click the button below to start configuring your site.","newspack"):h?(0,s.__)("We are now installing core plugins and pre-populating your site with categories and placeholder stories to help you pre-configure it. All placeholder content can be deleted later.","newspack"):(0,s.__)("We are now installing core plugins.","newspack"),V&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("br",{}),(0,g.jsxs)("i",{children:[(0,s.__)("Automatic redirection in","newspack")," ",D," ",(0,s.__)("seconds…","newspack")]})]})]}),!1===i&&(0,g.jsx)(x.$T,{isError:!0,noticeText:(0,s.__)("This site does not use HTTPS. Newspack can't be installed.","newspack")}),A.length?A.map(((e,t)=>(0,g.jsx)(x.Lz,{isSmall:!0,title:e.info.message+": "+e.item,actionText:(0,s.__)("Retry","newspack"),onClick:H,secondaryActionText:(0,s.__)("Skip","newspack"),secondaryDestructive:!0,onSecondaryActionClick:()=>(e=>{const t=[];for(let n=0;n<A.length;++n)e!==n&&t.push(A[n]);T(t),B()})(t),className:"newspack--error-actioncard"},t))):null,(U||V)&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(x.Du,{}),U&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(x.Zp,{noBorder:!0,children:[(0,g.jsx)(x.dr,{href:"#",title:(0,s.__)("Start a new site","newspack"),desc:(0,s.__)("You don't have content to import","newspack"),icon:m,className:"br--top",isPressed:F,onClick:()=>L("generated"),grouped:!0}),(0,g.jsx)(x.dr,{href:"#",title:(0,s.__)("Migrate an existing WordPress site","newspack"),desc:(0,s.__)("You have content to import","newspack"),icon:w,className:"br--bottom",isPressed:O,onClick:()=>L("import"),grouped:!0})]}),O&&(0,g.jsx)(x.xt,{label:(0,s.__)("URL","newspack"),placeholder:"https://yourgroovydomain.com/",type:"url",help:(0,s.__)("We will import the last 50 articles from your existing site to help you with the set up and customization.","newspack"),onChange:e=>z(e)})]}),(0,g.jsxs)(x.Zp,{noBorder:!0,className:"newspack-card__footer",children:[U&&F&&(0,g.jsx)(k.CheckboxControl,{checked:h,label:(0,s.__)("Install starter content","newspack"),onChange:f}),U&&(F||O)&&(0,g.jsx)(x.$n,{disabled:!i||O&&!(0,b.isURL)(N),isPrimary:!0,onClick:H,children:(0,s.__)("Get Started","newspack")}),!U&&(0,g.jsx)(x.$n,{disabled:!i,isPrimary:!0,href:V?I:null,children:(0,s.__)("Continue","newspack")})]})]})]})})]})})),T=document.title.replace(newspack_aux_data.site_title,"__SITE_TITLE__"),N=(0,x.c_)((({setError:e,wizardApiFetch:t,renderPrimaryButton:n})=>{const[{currencies:o=[],countries:r=[],wpseoFields:i=[]},l]=(0,a.useState)({}),[c,d]=x.JL.useObjectState({});(0,a.useEffect)((()=>{t({path:"/newspack/v1/profile/",method:"GET"}).then((e=>{l({currencies:e.currencies,countries:e.countries,wpseoFields:e.wpseo_fields}),d(e.profile)})).catch(e)}),[]),(0,a.useEffect)((()=>{"string"==typeof c.site_title&&(document.title=T.replace("__SITE_TITLE__",c.site_title))}),[c.site_title]);const u=({options:e,label:t,key:n,type:a,placeholder:s,className:o})=>e?(0,g.jsx)(x.Yq,{label:t,value:c[n],onChange:d(n),options:e,className:o}):"image"===a?(0,g.jsx)(x.BR,{label:t,style:{width:"102px",height:"102px"},image:c[n],isCovering:!0,onChange:d(n)}):(0,g.jsx)(x.xt,{label:t,value:c[n]||"",onChange:d(n),placeholder:s,className:o});return(0,g.jsxs)(a.Fragment,{children:[(0,g.jsx)(x.X3,{title:(0,s.__)("Site Profile","newspack"),description:(0,s.__)("Add and manage the basic information","newspack")}),(0,g.jsxs)(x.xA,{columns:3,gutter:32,rowGap:16,className:"newspack-site-profile",children:[u({key:"site_icon",label:(0,s.__)("Site Icon","newspack"),type:"image"}),(0,g.jsxs)(x.xA,{columns:1,gutter:16,children:[u({key:"site_title",label:(0,s.__)("Site Title","newspack")}),u({key:"tagline",label:(0,s.__)("Tagline","newspack")})]}),(0,g.jsxs)(x.xA,{columns:1,gutter:16,children:[u({options:r,key:"countrystate",label:(0,s.__)("Country","newspack")}),u({options:o,key:"currency",label:(0,s.__)("Currency")})]})]}),(0,g.jsx)(x.X3,{title:(0,s.__)("Social Accounts","newspack"),description:(0,s.__)("Allow visitors to quickly access your social profiles","newspack")}),(0,g.jsx)(x.xA,{columns:3,gutter:32,rowGap:16,children:i.map((e=>(0,g.jsx)(a.Fragment,{children:u({...e})},e.key)))}),(0,g.jsx)("div",{className:"newspack-buttons-card",children:n({onClick:()=>p()({path:"/newspack/v1/profile/",method:"POST",data:{profile:c}})})})]})}),{hidePrimaryButton:!0});var z=n(5880),P=n.n(z),L=n(5950),F=n.n(L),O=n(3916),M=n.n(O),E=n(583),B=n.n(E),H=n(9445),R=n(6942),I=n.n(R),$=n(2193),U=n.n($),V=n(7143);const W="newspack-audience-donations";function D({title:e,description:t,children:n=null,scrollToAnchor:a=null,className:s}){const o="newspack-wizard__section"+(s?` ${s}`:"");return(0,g.jsxs)("div",{className:o,children:[e&&(0,g.jsx)(x.X3,{id:a,heading:3,title:e,description:t}),n]})}var q=n(3276);const G=()=>{const e=(0,H.l)("newspack-audience/payment"),{saveWizardSettings:t,updateWizardSettings:n}=(0,V.useDispatch)(q.S);return(0,g.jsxs)(D,{children:[(0,g.jsx)(x.Zp,{noBorder:!0,children:(0,g.jsx)(x.Yq,{label:(0,s.__)("Select Reader Revenue Platform","newspack"),value:e.platform_data?.platform,options:[{label:(0,s.__)("Other","newspack"),value:"other"},{label:(0,s.__)("Newspack","newspack"),value:"wc"},{label:(0,s.__)("News Revenue Hub","newspack"),value:"nrh"}],onChange:e=>{t({slug:"newspack-audience/payment",payloadPath:["platform_data"],updatePayload:{path:["platform_data","platform"],value:e}})}})}),"wc"===e.platform_data?.platform&&!e.plugin_status&&(0,g.jsx)(x.I2,{plugins:["woocommerce","woocommerce-subscriptions"],onStatus:({complete:e})=>{e&&n({slug:"newspack-audience/payment",path:["plugin_status"],value:!0})},withoutFooterButton:!0})]})};class Z extends a.Component{render(){const{currencySymbol:e,error:t,label:n,min:a,value:s,onChange:o}=this.props;return(0,g.jsxs)("div",{className:"newspack-donations-wizard__money-input-container",children:[(0,g.jsx)("p",{className:"input-label",children:n}),(0,g.jsxs)("div",{className:"newspack-donations-wizard__money-input",children:[(0,g.jsx)("div",{className:"currency",children:e}),(0,g.jsx)(x.xt,{type:"number",hideLabelFromVision:!0,label:n,min:a,value:s,onChange:o})]}),t&&(0,g.jsx)("p",{className:"newspack-donations-wizard__money-input-error",children:t})]})}}const Y=Z,J=function({title:e,children:t,isFetching:n,description:a,...s}){const o=(0,V.useSelect)((e=>e(q.S).isLoading()),[]),r=s.className||"";return(0,g.jsxs)("div",{className:`${o||n?"is-fetching ":""}${r} newspack-wizard__sections`,children:[(0,g.jsx)("h1",{children:e}),a&&(0,g.jsx)("p",{className:"newspack-wizard__sections__description",children:a}),t]})},X={once:{tieredLabel:(0,s.__)("One-time donations"),staticLabel:(0,s.__)("Suggested one-time donation amount")},month:{tieredLabel:(0,s.__)("Monthly donations"),staticLabel:(0,s.__)("Suggested donation amount per month")},year:{tieredLabel:(0,s.__)("Annual donations"),staticLabel:(0,s.__)("Suggested donation amount per year")}},K=Object.keys(X),Q=()=>{const e=(0,H.l)(W),{updateWizardSettings:t}=(0,V.useDispatch)(q.S);if(!e.donation_data||"errors"in e.donation_data)return null;const{amounts:n,currencySymbol:a,tiered:o,disabledFrequencies:r,minimumDonation:i,trashed:l}=e.donation_data,c=e=>n=>t({slug:W,path:["donation_data",...e],value:n}),p=K.map((e=>({key:e,...X[e]}))),d=parseFloat(i),u=window.newspackAudienceDonations?.can_use_name_your_price;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(x.Zp,{headerActions:!0,noBorder:!0,children:[(0,g.jsx)(x.X3,{title:(0,s.__)("Suggested Donations","newspack-plugin"),description:(0,s.__)("Set suggested donation amounts. These will be the default settings for the Donate block.","newspack-plugin"),noMargin:!0}),u&&(0,g.jsx)(x.Yq,{label:(0,s.__)("Donation Type","newspack-plugin"),onChange:()=>c(["tiered"])(!o),buttonOptions:[{value:!0,label:(0,s.__)("Tiered","newspack-plugin")},{value:!1,label:(0,s.__)("Untiered","newspack-plugin")}],buttonSmall:!0,value:o,hideLabelFromVision:!0})]}),Array.isArray(l)&&0<l.length&&(0,g.jsx)(x.$T,{isError:!0,children:(0,g.jsx)("span",{dangerouslySetInnerHTML:{__html:(0,s.sprintf)(
// Translators: %1$s is a link to the trashed products. %2$s is a comma-separated list of trashed product names.
// Translators: %1$s is a link to the trashed products. %2$s is a comma-separated list of trashed product names.
(0,s.__)('One or more donation products is in trash. Please <a href="%1$s">restore the product(s)</a> to continue using donation features: %2$s',"newspack-plugin"),"/wp-admin/edit.php?post_status=trash&post_type=product",l.join(", "))}})}),o?(0,g.jsx)(x.xA,{columns:1,children:p.map((e=>{const t=r[e.key],o=Object.values(r).filter(Boolean).length===K.length-1;return(0,g.jsx)(x.Zp,{noBorder:!0,children:(0,g.jsxs)(x.xA,{columns:1,gutter:8,children:[(0,g.jsx)(k.ToggleControl,{checked:!t,onChange:()=>c(["disabledFrequencies",e.key])(!t),label:e.tieredLabel,disabled:!t&&o}),!t&&(0,g.jsxs)(x.xA,{columns:3,rowGap:16,children:[(0,g.jsx)(Y,{currencySymbol:a,label:(0,s.__)("Low-tier"),error:n[e.key][0]<d?(0,s.__)("Warning: suggested donations should be at least the minimum donation amount.","newspack-plugin"):null,value:n[e.key][0],min:d,onChange:c(["amounts",e.key,0])}),(0,g.jsx)(Y,{currencySymbol:a,label:(0,s.__)("Mid-tier"),error:n[e.key][1]<d?(0,s.__)("Warning: suggested donations should be at least the minimum donation amount.","newspack-plugin"):null,value:n[e.key][1],min:d,onChange:c(["amounts",e.key,1])}),(0,g.jsx)(Y,{currencySymbol:a,label:(0,s.__)("High-tier"),error:n[e.key][2]<d?(0,s.__)("Warning: suggested donations should be at least the minimum donation amount.","newspack-plugin"):null,value:n[e.key][2],min:d,onChange:c(["amounts",e.key,2])})]})]})},e.key)}))}):(0,g.jsx)(x.xA,{columns:1,children:(0,g.jsx)(x.Zp,{noBorder:!0,children:(0,g.jsx)(x.xA,{columns:3,rowGap:16,children:p.map((e=>{const t=r[e.key],o=Object.values(r).filter(Boolean).length===K.length-1;return(0,g.jsxs)(x.xA,{columns:1,gutter:16,children:[(0,g.jsx)(k.ToggleControl,{checked:!t,onChange:()=>c(["disabledFrequencies",e.key])(!t),label:e.tieredLabel,disabled:!t&&o}),!t&&(0,g.jsx)(Y,{currencySymbol:a,label:e.staticLabel,value:n[e.key][3],min:d,error:n[e.key][3]<d?(0,s.__)("Warning: suggested donations should be at least the minimum donation amount.","newspack-plugin"):null,onChange:c(["amounts",e.key,3])},e.key)]},e.key)}))})})}),(0,g.jsx)(x.xA,{columns:3,children:(0,g.jsx)(x.xt,{label:(0,s.__)("Minimum donation","newspack-plugin"),help:(0,s.__)("Set minimum donation amount. Setting a reasonable minimum donation amount can help protect your site from bot attacks.","newspack-plugin"),type:"number",min:1,value:d,onChange:e=>c(["minimumDonation"])(e)})})]})};var ee=n(8059),te=n.n(ee);const ne=({onUpdate:e,newslettersConfig:t,isOnboarding:n=!0,authUrl:o=!1,provider:r,setProvider:i=(()=>{}),setAuthUrl:l=(()=>{}),setLockedLists:c=(()=>{})})=>{const[d,u]=(0,a.useState)(!1),[_,h]=(0,a.useState)(!1),[m,w]=x.JL.useObjectState({});(0,a.useEffect)((()=>{const e=t?.newspack_newsletters_service_provider||"";r!==e&&(h(!1),i(e),!r&&y()?c(!1):c(!0))}),[t?.newspack_newsletters_service_provider]),(0,a.useEffect)((()=>{b(t?.newspack_newsletters_service_provider)}),[t?.newspack_newsletters_service_provider]);const b=e=>{l(!1),e&&"constant_contact"===e&&(u(!0),p()({path:`/newspack-newsletters/v1/${e}/verify_token`}).then((e=>{!e.valid&&e.auth_url?l(e.auth_url):l(!1)})).catch((()=>{l(!1)})).finally((()=>{u(!1)})))},f=t=>{w(t),e&&e(M()(t.settings,B()("value")))},v=()=>{h(!1),p()({path:"/newspack/v1/wizard/newspack-newsletters/settings"}).then(f).catch(h)},j=()=>{const e=m.settings.newspack_newsletters_service_provider,t=e?.value;return e?.options?.find((e=>e.value===t))?.name},y=()=>{const e=t?.newspack_newsletters_service_provider;if(!e)return!1;const n=new RegExp(`${e}.*key`);return Object.keys(t).filter((e=>n.test(e))).some((e=>!!t[e]))},S=()=>{o&&(window.open(o,"esp_oauth","width=500,height=600").opener={verify:te()((()=>{window.location.reload()}))})},C=async()=>{h(!1),u(!0),p()({path:"/newspack/v1/wizard/newspack-newsletters/settings",method:"POST",data:t}).finally((()=>{i(t?.newspack_newsletters_service_provider),b(t?.newspack_newsletters_service_provider),c(!1),u(!1)}))};(0,a.useEffect)(v,[]);const A=e=>({disabled:d,value:m.settings[e]?.value||"",checked:Boolean(m.settings[e]?.value),label:m.settings[e]?.description,placeholder:m.settings[e]?.placeholder,options:m.settings[e]?.options?.map((e=>({value:e.value,label:e.name})))||null,onChange:t=>f({settings:{[e]:{value:t}}})});return!_&&U()(m)?(0,g.jsx)("div",{className:"flex justify-around mt4",children:(0,g.jsx)(x.E$,{})}):(0,g.jsxs)(g.Fragment,{children:[!1===m.configured&&(0,g.jsx)(x.I2,{plugins:["newspack-newsletters"],withoutFooterButton:!0,onStatus:({complete:e})=>e&&v()}),!0===m.configured&&(()=>{const e=A("newspack_newsletters_service_provider");return(0,g.jsx)(x.Lz,{isMedium:!0,title:(0,s.__)("Email Service Provider","newspack-plugin"),description:(0,s.__)("Connect an email service provider (ESP) to author and send newsletters.","newspack-plugin"),notification:_?_?.message||(0,s.__)("Something went wrong.","newspack-plugin"):null,notificationLevel:"error",hasGreyHeader:!0,actionContent:(0,g.jsx)(x.$n,{disabled:d,variant:"primary",onClick:C,children:(0,s.__)("Save Settings","newspack-plugin")}),disabled:d,children:(0,g.jsxs)(x.xA,{gutter:16,columns:1,children:[!1!==o&&(0,g.jsxs)(x.Zp,{isSmall:!0,children:[(0,g.jsx)("h3",{children:(0,s.__)("Authorize Application","newspack-plugin")}),(0,g.jsx)("p",{children:(0,s.sprintf)(
// translators: %s is the name of the ESP.
// translators: %s is the name of the ESP.
(0,s.__)("Authorize %s to connect to Newspack.","newspack-plugin"),j())}),(0,g.jsx)(x.$n,{isSecondary:!0,onClick:S,children:(0,s.__)("Authorize","newspack-plugin")})]}),"campaign_monitor"===m?.settings?.newspack_newsletters_service_provider?.value&&(0,g.jsxs)(k.Notice,{status:"warning",isDismissible:!1,children:[(0,g.jsx)("h2",{children:(0,s.__)("Campaign Monitor support will be deprecated","newspack-plugin")}),(0,g.jsx)("p",{children:(0,s.__)("Please connect a different service provider to ensure continued support.","newspack-")})]}),P()(m.settings).filter((t=>!t.provider||t.provider===e.value)).map((e=>{if(n&&!e.onboarding)return null;switch(e.type){case"select":return(0,g.jsx)(x.Yq,{...A(e.key)},e.key);case"checkbox":return(0,g.jsx)(k.CheckboxControl,{...A(e.key)},e.key);default:return(0,g.jsxs)(x.xA,{columns:1,gutter:8,children:[(0,g.jsx)(x.xt,{...A(e.key)}),e.help&&e.helpURL&&(0,g.jsx)("p",{children:(0,g.jsx)(k.ExternalLink,{href:e.helpURL,children:e.help})})]},e.key)}}))]})})})()]})},ae=({lockedLists:e,onUpdate:t,provider:n})=>{const[o,r]=(0,a.useState)(!1),[i,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)([]),u=e=>{d(e),"function"==typeof t&&t(e)},_=(e,t)=>n=>{const a=[...c];a[e][t]=n,u(a)};if((0,a.useEffect)((()=>{r(!1),n&&!e&&(d([]),r(!1),l(!0),p()({path:"/newspack-newsletters/v1/lists"}).then(u).catch(r).finally((()=>l(!1))))}),[n,e]),!i&&!c?.length&&!o)return null;if(i&&!c?.length&&!o)return(0,g.jsx)("div",{className:"flex justify-around mt4",children:(0,g.jsx)(x.E$,{})});const h=e?(0,s.__)("Please save your ESP settings before changing your subscription lists.","newspack-plugin"):o?o?.message||(0,s.__)("Something went wrong.","newspack-plugin"):null;return(0,g.jsx)(x.Lz,{isMedium:!0,title:(0,s.__)("Subscription Lists","newspack-plugin"),description:(0,s.__)("Manage the lists available to readers for subscription.","newspack-plugin"),notification:h,notificationLevel:o?"error":"warning",hasGreyHeader:!0,actionContent:(0,g.jsxs)(g.Fragment,{children:[newspack_newsletters_wizard.new_subscription_lists_url&&(0,g.jsx)(x.$n,{variant:"secondary",disabled:i||e,href:newspack_newsletters_wizard.new_subscription_lists_url,children:(0,s.__)("Add New","newspack-plugin")}),(0,g.jsx)(x.$n,{isPrimary:!0,onClick:()=>{r(!1),l(!0),p()({path:"/newspack-newsletters/v1/lists",method:"post",data:{lists:c}}).then(u).catch(r).finally((()=>l(!1)))},disabled:i||e,children:(0,s.__)("Save Subscription Lists","newspack-plugin")})]}),disabled:i||e,children:!e&&!o&&c.map(((e,t)=>(0,g.jsx)(x.Lz,{isSmall:!0,simple:!0,hasWhiteHeader:!0,title:e.name,description:e?.type_label?e.type_label:null,disabled:i,toggleOnChange:_(t,"active"),toggleChecked:e.active,className:e?.id&&(e.id.startsWith("group")||e.id.startsWith("tag"))?"newspack-newsletters-sub-list-item":"",actionText:e?.edit_link?(0,g.jsx)(k.ExternalLink,{href:e.edit_link,children:(0,s.__)("Edit","newspack-plugin")}):null,children:e.active&&"local"!==e?.type&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(x.xt,{label:(0,s.__)("List title","newspack-plugin"),value:e.title,disabled:i||"local"===e?.type,onChange:_(t,"title")}),(0,g.jsx)(k.TextareaControl,{label:(0,s.__)("List description","newspack-plugin"),value:e.description,disabled:i||"local"===e?.type,onChange:_(t,"description")})]})},t)))})},se=()=>{const[{newslettersConfig:e},t]=x.JL.useObjectState({}),[n,o]=(0,a.useState)(""),[r,i]=(0,a.useState)(!1),[l,c]=(0,a.useState)(!1);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h1",{children:(0,s.__)("Settings","newspack-plugin")}),(0,g.jsx)(ne,{isOnboarding:!1,onUpdate:e=>t({newslettersConfig:e}),authUrl:l,newslettersConfig:e,provider:n,setProvider:o,setAuthUrl:c,setLockedLists:i}),(0,g.jsx)(ae,{lockedLists:r,provider:n})]})};(0,x.c_)((()=>(0,g.jsx)(se,{})));var oe=n(133);const re={"reader-revenue":{label:(0,s.__)("Reader Revenue","newspack"),description:(0,s.__)("Encourage site visitors to contribute to your publishing through donations","newspack"),Component:({className:e})=>{const t=(0,H.l)(W);return(0,g.jsxs)("div",{className:I()(e,{"o-50":U()(t)}),children:[(0,g.jsx)(G,{}),"nrh"===t.platform_data?.platform&&(0,g.jsx)("p",{children:(0,s.__)("To edit settings for News Revenue Hub, visit the Reader Revenue section from the Newspack dashboard.","newspack-plugin")}),"other"===t.platform_data?.platform&&(0,g.jsx)("p",{children:(0,s.__)("Use a third-party reader revenue platform.","newspack-plugin")}),"wc"===t.platform_data?.platform&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("p",{children:(0,s.__)("Use Newspack’s advanced integration with WooCommerce. For more configuration options, visit the Reader Revenue section from the Newspack dashboard.","newspack-plugin")}),(0,g.jsx)(Q,{})]})]})},configuration:{is_service_enabled:!1}},newsletters:{label:(0,s.__)("Newsletters","newspack"),description:(0,s.__)("Create email newsletters and send them to your mail lists, all without leaving your website","newspack"),Component:ne,configuration:{is_service_enabled:!1}},"google-ad-manager":{label:(0,s.__)("Google Ad Manager","newspack"),description:(0,s.__)("An advanced ad inventory creation and management platform, allowing you to be specific about ad placements","newspack"),Component:oe.A,configuration:{is_service_enabled:!1}}},ie=(0,x.c_)((({renderPrimaryButton:e})=>{const[t,n]=x.JL.useObjectState(re),[s,o]=(0,a.useState)(!0),r=F()(t),i=(0,H.l)(W);return(0,a.useEffect)((()=>{p()({path:"/newspack/v1/wizard/newspack-setup-wizard/services"}).then((e=>{n(e),o(!1)}))}),[]),(0,g.jsxs)(g.Fragment,{children:[P()(t).map(((e,t)=>{const a=r[t],o=e.Component;return(0,g.jsx)(x.Lz,{isMedium:!0,title:e.label,description:e.description,className:a,toggleChecked:e.configuration.is_service_enabled,hasGreyHeader:e.configuration.is_service_enabled,toggleOnChange:e=>n({[a]:{configuration:{is_service_enabled:e}}}),disabled:s,href:e.configuration.is_service_enabled&&e.href,actionText:e.configuration.is_service_enabled&&e.actionText,children:e.configuration.is_service_enabled&&o?(0,g.jsx)(o,{className:"newspack-action-card__region-children__inner",configuration:e.configuration,onUpdate:e=>n({[a]:{configuration:e}})}):null},t)})),(0,g.jsx)("div",{className:"newspack-buttons-card",children:e({onClick:async()=>{const e=M()(t,B()("configuration"));return e["reader-revenue"]={...e["reader-revenue"],...i},p()({path:"/newspack/v1/wizard/newspack-setup-wizard/services",method:"POST",data:e})}})})]})}),{hidePrimaryButton:!0}),le=n.p+"images/scott.334f7869.png",ce=n.p+"images/sacha.adc0ee6a.png",pe=n.p+"images/nelson.0c4682be.png",de=n.p+"images/joseph.b62a5e84.png",ue=n.p+"images/newspack.51356748.png",_e=n.p+"images/katharine.f0faa13b.png",he=({theme:e,updateTheme:t})=>(0,g.jsxs)(x.xA,{columns:3,gutter:32,children:[(0,g.jsx)(x.mi,{cardTitle:"Newspack",image:ue,url:"//newspack.newspackstaging.com",isActive:"newspack-theme"===e,onClick:()=>t("newspack-theme"),id:"card--newspack-theme"}),(0,g.jsx)(x.mi,{cardTitle:"Scott",image:le,url:"//scott.newspackstaging.com",isActive:"newspack-scott"===e,onClick:()=>t("newspack-scott"),id:"card--newspack-scott"}),(0,g.jsx)(x.mi,{cardTitle:"Nelson",image:pe,url:"//nelson.newspackstaging.com",isActive:"newspack-nelson"===e,onClick:()=>t("newspack-nelson"),id:"card--newspack-nelson"}),(0,g.jsx)(x.mi,{cardTitle:"Katharine",image:_e,url:"//katharine.newspackstaging.com",isActive:"newspack-katharine"===e,onClick:()=>t("newspack-katharine"),id:"card--newspack-katharine"}),(0,g.jsx)(x.mi,{cardTitle:"Sacha",image:ce,url:"//sacha.newspackstaging.com",isActive:"newspack-sacha"===e,onClick:()=>t("newspack-sacha"),id:"card--newspack-sacha"}),(0,g.jsx)(x.mi,{cardTitle:"Joseph",image:de,url:"//joseph.newspackstaging.com",isActive:"newspack-joseph"===e,onClick:()=>t("newspack-joseph"),id:"card--newspack-joseph"})]}),ge=Array.from({length:12},Object);function me({homepagePatternIndex:e,updateHomepagePattern:t,homepagePatterns:n,isFetching:a}){const o=a&&0===n.length?ge:n;return(0,g.jsx)(x.xA,{columns:6,gutter:16,children:o.map(((n,a)=>(0,g.jsx)(x.mi,{image:{__html:n.image},imageType:"html",isActive:a===e,onClick:()=>{t(a)},ariaLabel:`${(0,s.__)("Activate Layout","newspack-plugin")} ${a+1}`},a)))})}var we=n(2005);const be=(0,g.jsx)(h.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,g.jsx)(h.Path,{d:"M13 5.5H4V4h9v1.5Zm7 7H4V11h16v1.5Zm-7 7H4V18h9v1.5Z"})}),ke=(0,g.jsx)(h.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,g.jsx)(h.Path,{d:"M7.5 5.5h9V4h-9v1.5Zm-3.5 7h16V11H4v1.5Zm3.5 7h9V18h-9v1.5Z"})}),xe=(e,t)=>t.reduce(((t,n)=>{const a=n.label.indexOf("(*)")>0,s=n.label.replace(" (*)",""),o={label:s,value:s};return a&&!e||t.push(o),t}),[]),fe=[{label:"Alegreya"},{label:"Arvo"},{label:"BioRhyme"},{label:"BioRhyme Expanded (*)"},{label:"Bodoni Moda"},{label:"Cormorant"},{label:"Crimson Text"},{label:"EB Garamond"},{label:"Eczar"},{label:"Frank Ruhl Libre"},{label:"Georgia"},{label:"IBM Plex Serif"},{label:"Josefin Slab"},{label:"Inknut Antiqua"},{label:"Libre Baskerville"},{label:"Lora"},{label:"Merriweather"},{label:"Neuton"},{label:"Newsreader"},{label:"Noto Serif"},{label:"Old Standard TT (*)"},{label:"Playfair Display"},{label:"PT Serif"},{label:"Roboto Slab"},{label:"Source Serif Pro"},{label:"Spectral"}],ve=[{label:"Alegreya Sans"},{label:"Archivo"},{label:"Archivo Black (*)"},{label:"Archivo Narrow (*)"},{label:"Chivo"},{label:"DM Sans"},{label:"Fira Sans"},{label:"Fira Sans Condensed (*)"},{label:"Fira Sans Extra Condensed (*)"},{label:"IBM Plex Sans"},{label:"IBM Plex Sans Condensed (*)"},{label:"Inter"},{label:"Josefin Sans"},{label:"Jost"},{label:"Karla"},{label:"Lato"},{label:"Libre Franklin"},{label:"Montserrat"},{label:"Noto Sans"},{label:"Open Sans"},{label:"Oswald (*)"},{label:"Overpass"},{label:"Poppins"},{label:"PT Sans"},{label:"Raleway"},{label:"Roboto"},{label:"Roboto Condensed (*)"},{label:"Rubik"},{label:"Source Sans Pro"},{label:"Work Sans"}],je=[{label:"Abril Fatface (*)"},{label:"Bangers (*)"},{label:"Bebas Neue (*)"},{label:"Concert One (*)"},{label:"Fredoka One (*)"},{label:"Unica One (*)"}],ye=[{label:"Anonymous Pro"},{label:"IBM Plex Mono"},{label:"JetBrains Mono"},{label:"Inconsolata"},{label:"Overpass Mono"},{label:"PT Mono"},{label:"Source Code Pro"},{label:"Space Mono"},{label:"Roboto Mono"}],Se=[...fe,...ve,...je,...ye],Ce=[{value:"curated",label:(0,s.__)("Default","newspack-plugin")},{value:"custom",label:(0,s.__)("Custom","newspack-plugin")}],Ae=(e=!1)=>[{label:(0,s.__)("Serif","newspack-plugin"),fallback:"serif",options:fe},{label:(0,s.__)("Sans Serif","newspack-plugin"),fallback:"sans_serif",options:ve},{label:(0,s.__)("Display","newspack-plugin"),fallback:"display",options:je},{label:(0,s.__)("Monospace","newspack-plugin"),fallback:"monospace",options:ye}].map((t=>({...t,options:xe(e,t.options)}))).filter((e=>e.options.length)),Te=e=>Se.filter((t=>!t.label.includes(e))).length>=1,Ne=e=>`//fonts.googleapis.com/css2?family=${e.replace(/\s/g,"+")}:ital,wght@0,400;0,700;1,400;1,700&display=swap`,ze=[{value:0,label:(0,s.__)("XS","newspack-plugin")},{value:19,label:(0,s.__)("S","newspack-plugin")},{value:48,label:(0,s.__)("M","newspack-plugin")},{value:72,label:(0,s.__)("L","newspack-plugin")},{value:91,label:(0,s.__)("XL","newspack-plugin")}],Pe=(e,t=ze)=>t.reduce(((t,{value:n})=>e>=n?n:t),t[0].value);function Le({themeMods:e,updateHeader:t}){return(0,g.jsxs)(x.xA,{gutter:32,children:[(0,g.jsxs)(x.xA,{columns:1,gutter:16,children:[(0,g.jsxs)(x.xA,{gutter:16,className:"newspack-design__header__style-size",children:[(0,g.jsx)(x.Yq,{className:"icon-only",label:(0,s.__)("Style","newspack"),value:e.header_center_logo?"center":"left",onChange:n=>t({...e,header_center_logo:"center"===n}),buttonOptions:[{value:"left",icon:be},{value:"center",icon:ke}]}),(0,g.jsx)(x.Yq,{className:"icon-only",label:(0,s.__)("Size","newspack"),value:e.header_simplified?"small":"large",onChange:n=>t({...e,header_simplified:"small"===n}),buttonOptions:[{value:"small",label:"S"},{value:"large",label:"L"}]})]}),(0,g.jsx)(k.ToggleControl,{checked:Boolean(e.header_solid_background),onChange:n=>t({...e,header_solid_background:n}),label:(0,s.__)("Apply a background color to the header","newspack")}),e.header_solid_background&&(0,g.jsx)(x.sk,{label:(0,s.__)("Background color"),color:e.header_color_hex,onChange:n=>t({...e,header_color_hex:n})})]}),(0,g.jsxs)(x.xA,{columns:1,gutter:16,children:[(0,g.jsx)(x.BR,{className:"newspack-design__header__logo",style:{backgroundColor:e.header_solid_background?e.header_color_hex:"transparent"},label:(0,s.__)("Logo","newspack"),image:e.custom_logo,onChange:n=>t({...e,custom_logo:n,header_text:!n,header_display_tagline:!n})}),e.custom_logo&&(0,g.jsx)(x.Yq,{className:"icon-only",label:(0,s.__)("Logo Size","newspack"),value:Pe(e.logo_size),onChange:n=>t({...e,logo_size:n}),buttonOptions:ze})]})]})}function Fe({themeMods:e,onUpdate:t}){function n(n){t({...e,...n})}return(0,g.jsxs)(x.xA,{gutter:32,children:[(0,g.jsxs)(x.xA,{columns:1,gutter:16,children:[(0,g.jsx)(x.xt,{label:(0,s.__)("Copyright information","newspack"),value:e.footer_copyright||"",onChange:e=>n({footer_copyright:e})}),(0,g.jsx)(k.ToggleControl,{checked:"default"!==e.footer_color,onChange:e=>n({footer_color:e?"custom":"default"}),label:(0,s.__)("Apply a background color to the footer","newspack")}),"custom"===e.footer_color&&(0,g.jsx)(x.sk,{label:(0,s.__)("Background color"),color:e.footer_color_hex,onChange:e=>n({footer_color_hex:e})})]}),(0,g.jsxs)(x.xA,{columns:1,gutter:16,children:[(0,g.jsx)(x.BR,{className:"newspack-design__footer__logo",label:(0,s.__)("Alternative Logo","newspack"),help:(0,s.__)("Optional alternative logo to be displayed in the footer.","newspack"),style:{backgroundColor:"custom"===e.footer_color&&e.footer_color_hex?e.footer_color_hex:"transparent"},image:e.newspack_footer_logo,onChange:e=>n({newspack_footer_logo:e})}),e.newspack_footer_logo&&(0,g.jsx)(x.Yq,{className:"icon-only",label:(0,s.__)("Alternative logo - Size","newspack"),value:e.footer_logo_size,onChange:e=>n({footer_logo_size:e}),buttonOptions:[{value:"small",label:"S"},{value:"medium",label:"M"},{value:"large",label:"L"},{value:"xlarge",label:"XL"}]})]})]})}function Oe({themeMods:e,updateColors:t}){return(0,g.jsxs)(x.xA,{gutter:32,children:[(0,g.jsx)(x.sk,{label:(0,s.__)("Primary","newspack-plugin"),color:e.primary_color_hex,onChange:n=>t({...e,primary_color_hex:n,theme_colors:"custom"})}),(0,g.jsx)(x.sk,{label:(0,s.__)("Secondary","newspack-plugin"),color:e.secondary_color_hex,onChange:n=>t({...e,secondary_color_hex:n,theme_colors:"custom"})})]})}function Me({data:e,isFetching:t,update:n}){const[o,r]=(0,a.useState)(null);function i(t,a){t instanceof Object?n({...e,...t}):void 0!==a&&n({...e,[t]:a})}(0,a.useEffect)((()=>{o||e.font_body&&e.font_header&&r(function(){const{font_header:t,font_body:n}=e;return t&&!Te(t)||n&&!Te(n)?Ce[1].value:Ce[0].value}())}),[e.font_body,e.font_body]);const l=t=>{var n;const a="headings"===t,o=a?(0,s.__)("Headings","newspack-plugin"):(0,s.__)("Body","newspack-plugin");return(0,g.jsxs)(x.xA,{columns:1,gutter:16,children:[(0,g.jsx)(k.TextareaControl,{label:o+" - "+(0,s.__)("Font provider import code or URL","newspack-plugin"),placeholder:"https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,700;1,400;1,700&display=swap",value:null!==(n=a?e.custom_font_import_code:e.custom_font_import_code_alternate)&&void 0!==n?n:"",onChange:e=>{i(a?"custom_font_import_code":"custom_font_import_code_alternate",e)},rows:3}),(0,g.jsx)(x.xt,{label:o+" - "+(0,s.__)("Font name","newspack-plugin"),value:a?e.font_header:e.font_body,onChange:e=>{i(a?"font_header":"font_body",e)}}),(0,g.jsx)(x.Yq,{label:o+" - "+(0,s.__)("Font fallback stack","newspack-plugin"),options:[{value:"serif",label:(0,s.__)("Serif","newspack-plugin")},{value:"sans-serif",label:(0,s.__)("Sans Serif","newspack-plugin")},{value:"display",label:(0,s.__)("Display","newspack-plugin")},{value:"monospace",label:(0,s.__)("Monospace","newspack-plugin")}],value:a?e.font_header_stack:e.font_body_stack,onChange:e=>i(a?"font_header_stack":"font_body_stack",e)})]})};return(0,g.jsxs)(x.xA,{columns:1,gutter:16,children:[(0,g.jsx)(x.Yq,{label:(0,s.__)("Typography Options","newspack-plugin"),hideLabelFromVision:!0,disabled:!0,value:o||"curated",onChange:r,buttonOptions:t?[{label:(0,s.__)("Loading…","newspack-plugin"),value:null}]:Ce}),(0,g.jsx)(x.xA,{gutter:32,children:"curated"===o||null===o?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(x.Yq,{label:(0,s.__)("Headings","newspack-plugin"),optgroups:Ae(!0),value:e.font_header,onChange:(e,t)=>{i({font_header:e,custom_font_import_code:Ne(e),font_header_stack:t?.fallback})}}),(0,g.jsx)(x.Yq,{label:(0,s.__)("Body","newspack-plugin"),optgroups:Ae(),value:e.font_body,onChange:(e,t)=>{i({font_body:e,custom_font_import_code_alternate:Ne(e),font_body_stack:t?.fallback})}})]}):(0,g.jsxs)(g.Fragment,{children:[l("headings"),l("body")]})}),(0,g.jsx)(k.ToggleControl,{checked:e.accent_allcaps,onChange:e=>i("accent_allcaps",e),label:(0,s.__)("Use all-caps for accent text","newspack-plugin")})]})}const Ee={header_color:"custom",theme_colors:"default",primary_color_hex:"#003da5",secondary_color_hex:"#666666",font_header:"",font_body:"",accent_allcaps:!0,custom_font_import_code:void 0,custom_font_import_code_alternate:void 0,header_center_logo:!1,header_simplified:!1,header_solid_background:!1,header_color_hex:"#003da5",custom_logo:"",logo_size:0,header_text:!1,header_display_tagline:!1,footer_copyright:"",footer_color:"default",footer_color_hex:"",newspack_footer_logo:"",footer_logo_size:"medium",homepage_pattern_index:0,show_author_bio:!0,show_author_email:!1,author_bio_length:200,featured_image_default:"large",post_template_default:"default",featured_image_all_posts:"none",post_template_all_posts:"none",newspack_image_credits_placeholder_url:void 0,newspack_image_credits_class_name:"image-credit",newspack_image_credits_prefix_label:"Credit:",newspack_image_credits_placeholder:null,newspack_image_credits_auto_populate:!1,custom_css_post_id:-1},{useHistory:Be}=x.Ix,He={etc:{post_count:"0"},theme:"newspack-theme",homepage_patterns:[],theme_mods:{...Ee}},Re=(0,x.c_)((()=>{(0,a.useEffect)((()=>(document.body.classList.add("newspack-wizard__completed","newspack-wizard__blue"),document.querySelector(".newspack-wizard__header").remove(),()=>document.body.classList.remove("newspack-wizard__completed","newspack-wizard__blue"))),[]);const e=I()("flex","flex-column","justify-between"),t=I()("flex","flex-row-reverse");return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(x.Zp,{noBorder:!0,children:(0,g.jsx)(x.X3,{title:(0,s.__)("You’re ready to go!","newspack"),description:(0,s.__)("While you’re off to a great start, there’s plenty more you can do:","newspack"),heading:1,centered:!0,isWhite:!0})}),(0,g.jsx)(x.Zp,{isWhite:!0,children:(0,g.jsxs)(x.xA,{children:[(0,g.jsx)(x.Lz,{title:(0,s.__)("Configure Newspack","newspack"),description:(0,s.__)("Go in-depth with our various options to set up Newspack to meet your needs.","newspack"),className:e,children:(0,g.jsx)("div",{className:t,children:(0,g.jsx)(x.$n,{variant:"primary",href:newspack_urls.dashboard,children:(0,s.__)("Go to the Dashboard","newspack")})})}),(0,g.jsx)(x.Lz,{title:(0,s.__)("Explore our documentation","newspack"),description:(0,s.__)("Read about the different tools, plugins, and themes that make up Newspack.","newspack"),className:e,children:(0,g.jsx)("div",{className:t,children:(0,g.jsx)(x.$n,{variant:"primary",href:newspack_urls.support,children:(0,s.__)("Read Documentation","newspack")})})}),(0,g.jsx)(x.Lz,{title:(0,s.__)("Update your homepage","newspack"),description:(0,s.__)("We’ve created the basics, now it’s time to update the content.","newspack"),className:e,children:(0,g.jsx)("div",{className:t,children:(0,g.jsx)(x.$n,{variant:"primary",href:newspack_urls.homepage,children:(0,s.__)("Edit Homepage","newspack")})})}),(0,g.jsx)(x.Lz,{title:(0,s.__)("View your site","newspack"),description:(0,s.__)("Preview what you’ve created so far. It looks great!","newspack"),className:e,children:(0,g.jsx)("div",{className:t,children:(0,g.jsx)(x.$n,{variant:"primary",href:newspack_urls.site,children:(0,s.__)("Visit Site","newspack")})})})]})})]})}),{hidePrimaryButton:!0}),{HashRouter:Ie,Route:$e}=f.A,Ue=[{path:"/",label:(0,s.__)("Welcome","newspack"),render:e=>(0,g.jsx)(A,{...r()(e,["routes","headerText","buttonText"])}),isHiddenInNav:!0},{path:"/settings",label:(0,s.__)("Settings","newspack"),subHeaderText:(0,s.__)("Share a few details so we can start setting up your site","newspack"),render:N},{path:"/services",label:(0,s.__)("Services","newspack"),subHeaderText:(0,s.__)("Activate and configure the services that you need","newspack"),render:ie},{path:"/design",label:(0,s.__)("Design","newspack"),subHeaderText:(0,s.__)("Customize the look and feel of your site","newspack"),render:(0,x.c_)((({isPartOfSetup:e=!1})=>{const{wizardApiFetch:t,isFetching:n}=(0,we.L)("newspack-settings/theme-mods"),[o,r]=(0,a.useState)(He),i=Be();function l(e){r({...o,...e})}const c=()=>{t({data:o,path:"/newspack/v1/wizard/newspack-setup-wizard/complete",method:"POST",updateCacheMethods:["GET"]},{onSuccess:e=>{l(e),i.push("/completed")}})};async function p(){return new Promise((e=>t({data:o,path:"/newspack/v1/wizard/newspack-setup-wizard/theme",method:"POST",updateCacheMethods:["GET"]},{onSuccess:t=>{l(t),e(t)}})))}return(0,a.useEffect)((()=>{t({path:"/newspack/v1/wizard/newspack-setup-wizard/theme"},{onSuccess:l})}),[]),(0,g.jsxs)(J,{title:(0,s.__)("Theme and Brand","newspack-plugin"),isFetching:n,children:[!e&&(0,g.jsx)(a.Fragment,{children:(0,g.jsx)(D,{title:(0,s.__)("Theme","newspack-plugin"),description:(0,s.__)("Update your sites theme.","newspack-plugin"),children:(0,g.jsx)(he,{theme:n?"":o.theme||"newspack-theme",updateTheme:e=>l({...o,theme:e})})})}),e&&(0,g.jsx)(D,{title:(0,s.__)("Homepage","newspack-plugin"),description:(0,s.__)("Select a homepage layout.","newspack-plugin"),children:(0,g.jsx)(me,{isFetching:n,homepagePatternIndex:o.theme_mods.homepage_pattern_index,homepagePatterns:o.homepage_patterns,updateHomepagePattern:e=>{l({...o,theme_mods:{...o.theme_mods,homepage_pattern_index:e}})}})}),(0,g.jsx)(D,{title:(0,s.__)("Colors","newspack-plugin"),description:(0,s.__)("Pick your primary and secondary colors.","newspack-plugin"),children:(0,g.jsx)(Oe,{themeMods:o.theme_mods,updateColors:e=>{l({...o,theme_mods:e})}})}),(0,g.jsx)(D,{title:(0,s.__)("Typography","newspack-plugin"),description:(0,s.__)("Define the font pairing to use throughout your site","newspack-plugin"),children:(0,g.jsx)(Me,{data:o.theme_mods,isFetching:n,update:e=>{l({...o,theme_mods:e})}})}),(0,g.jsx)(D,{title:(0,s.__)("Header","newspack-plugin"),description:(0,s.__)("Update the header and add your logo.","newspack-plugin"),children:(0,g.jsx)(Le,{themeMods:o.theme_mods,updateHeader:e=>{l({...o,theme_mods:e})}})}),(0,g.jsx)(D,{title:(0,s.__)("Footer","newspack-plugin"),description:(0,s.__)("Personalize the footer of your site.","newspack-plugin"),children:(0,g.jsx)(Fe,{themeMods:o.theme_mods,onUpdate:e=>{l({...o,theme_mods:e})}})}),(0,g.jsx)("div",{className:"newspack-buttons-card",children:e?(0,g.jsx)(x.$n,{variant:"primary",onClick:()=>p().then(c),children:(0,s.__)("Finish","newspack-plugin")}):(0,g.jsx)(x.$n,{variant:"primary",onClick:p,children:(0,s.__)("Save","newspack-plugin")})})]})}),{hidePrimaryButton:!0})},{path:"/completed",label:(0,s.__)("Completed","newspack"),render:Re,isHiddenInNav:!0}];(0,a.render)((0,a.createElement)((0,x.Aq)((0,a.forwardRef)((({wizardApiFetch:e,setError:t},n)=>(0,g.jsxs)("div",{ref:n,children:[newspack_aux_data.has_completed_setup&&(0,g.jsx)(x.$T,{isWarning:!0,className:"ma0",children:(0,s.__)("Heads up! The setup has already been completed. No need to run it again.","newspack")}),(0,g.jsx)(Ie,{hashType:"slash",children:Ue.map(((n,a)=>{const o=Ue[a+1]?.path,r=o?{href:"#"+o}:{};return(0,g.jsx)($e,{path:n.path,exact:"/"===n.path,render:()=>n.render({wizardApiFetch:e,setError:t,disableUpcomingInTabbedNavigation:!0,tabbedNavigation:Ue,headerText:n.label,subHeaderText:n.subHeaderText,buttonText:o?n.buttonText||(0,s.__)("Continue"):(0,s.__)("Finish"),buttonAction:r,isPartOfSetup:!0})},a)}))})]}))),[]),{simpleFooter:!0}),document.getElementById("newspack-setup-wizard"))},3729:e=>{e.exports=function(e,t){for(var n=-1,a=null==e?0:e.length;++n<a&&!1!==t(e[n],n,e););return e}},4733:(e,t,n)=>{var a=n(1791),s=n(5950);e.exports=function(e,t){return e&&a(t,s(t),e)}},3838:(e,t,n)=>{var a=n(1791),s=n(7241);e.exports=function(e,t){return e&&a(t,s(t),e)}},9999:(e,t,n)=>{var a=n(7217),s=n(3729),o=n(6547),r=n(4733),i=n(3838),l=n(3290),c=n(3007),p=n(2271),d=n(8948),u=n(2),_=n(3349),h=n(5861),g=n(6189),m=n(7199),w=n(5529),b=n(6449),k=n(3656),x=n(7730),f=n(3805),v=n(8440),j=n(5950),y=n(7241),S="[object Arguments]",C="[object Function]",A="[object Object]",T={};T[S]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Map]"]=T["[object Number]"]=T[A]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Error]"]=T[C]=T["[object WeakMap]"]=!1,e.exports=function e(t,n,N,z,P,L){var F,O=1&n,M=2&n,E=4&n;if(N&&(F=P?N(t,z,P,L):N(t)),void 0!==F)return F;if(!f(t))return t;var B=b(t);if(B){if(F=g(t),!O)return c(t,F)}else{var H=h(t),R=H==C||"[object GeneratorFunction]"==H;if(k(t))return l(t,O);if(H==A||H==S||R&&!P){if(F=M||R?{}:w(t),!O)return M?d(t,i(F,t)):p(t,r(F,t))}else{if(!T[H])return P?t:{};F=m(t,H,O)}}L||(L=new a);var I=L.get(t);if(I)return I;L.set(t,F),v(t)?t.forEach((function(a){F.add(e(a,n,N,a,t,L))})):x(t)&&t.forEach((function(a,s){F.set(s,e(a,n,N,s,t,L))}));var $=B?void 0:(E?M?_:u:M?y:j)(t);return s($||t,(function(a,s){$&&(a=t[s=a]),o(F,s,e(a,n,N,s,t,L))})),F}},3120:(e,t,n)=>{var a=n(4528),s=n(5891);e.exports=function e(t,n,o,r,i){var l=-1,c=t.length;for(o||(o=s),i||(i=[]);++l<c;){var p=t[l];n>0&&o(p)?n>1?e(p,n-1,o,r,i):a(i,p):r||(i[i.length]=p)}return i}},9172:(e,t,n)=>{var a=n(5861),s=n(346);e.exports=function(e){return s(e)&&"[object Map]"==a(e)}},6038:(e,t,n)=>{var a=n(5861),s=n(346);e.exports=function(e){return s(e)&&"[object Set]"==a(e)}},9931:(e,t,n)=>{var a=n(1769),s=n(8090),o=n(8969),r=n(7797);e.exports=function(e,t){return t=a(t,e),null==(e=o(e,t))||delete e[r(s(t))]}},4066:(e,t,n)=>{var a=n(3488);e.exports=function(e){return"function"==typeof e?e:a}},6169:(e,t,n)=>{var a=n(9653);e.exports=function(e,t){var n=t?a(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},3201:e=>{var t=/\w*$/;e.exports=function(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},3736:(e,t,n)=>{var a=n(1873),s=a?a.prototype:void 0,o=s?s.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},2271:(e,t,n)=>{var a=n(1791),s=n(4664);e.exports=function(e,t){return a(e,s(e),t)}},8948:(e,t,n)=>{var a=n(1791),s=n(6375);e.exports=function(e,t){return a(e,s(e),t)}},3138:(e,t,n)=>{var a=n(1331);e.exports=function(e){return a(e)?void 0:e}},8816:(e,t,n)=>{var a=n(5970),s=n(6757),o=n(2865);e.exports=function(e){return o(s(e,void 0,a),e+"")}},3349:(e,t,n)=>{var a=n(2199),s=n(6375),o=n(7241);e.exports=function(e){return a(e,o,s)}},6375:(e,t,n)=>{var a=n(4528),s=n(8879),o=n(4664),r=n(3345),i=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)a(t,o(e)),e=s(e);return t}:r;e.exports=i},6189:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,a=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(a.index=e.index,a.input=e.input),a}},7199:(e,t,n)=>{var a=n(9653),s=n(6169),o=n(3201),r=n(3736),i=n(1961);e.exports=function(e,t,n){var l=e.constructor;switch(t){case"[object ArrayBuffer]":return a(e);case"[object Boolean]":case"[object Date]":return new l(+e);case"[object DataView]":return s(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return i(e,n);case"[object Map]":case"[object Set]":return new l;case"[object Number]":case"[object String]":return new l(e);case"[object RegExp]":return o(e);case"[object Symbol]":return r(e)}}},5891:(e,t,n)=>{var a=n(1873),s=n(2428),o=n(6449),r=a?a.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||s(e)||!!(r&&e&&e[r])}},8969:(e,t,n)=>{var a=n(7422),s=n(5160);e.exports=function(e,t){return t.length<2?e:a(e,s(t,0,-1))}},5970:(e,t,n)=>{var a=n(3120);e.exports=function(e){return null!=e&&e.length?a(e,1):[]}},7730:(e,t,n)=>{var a=n(9172),s=n(7301),o=n(6009),r=o&&o.isMap,i=r?s(r):a;e.exports=i},8440:(e,t,n)=>{var a=n(6038),s=n(7301),o=n(6009),r=o&&o.isSet,i=r?s(r):a;e.exports=i},8090:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},179:(e,t,n)=>{var a=n(4932),s=n(9999),o=n(9931),r=n(1769),i=n(1791),l=n(3138),c=n(8816),p=n(3349),d=c((function(e,t){var n={};if(null==e)return n;var c=!1;t=a(t,(function(t){return t=r(t,e),c||(c=t.length>1),t})),i(e,p(e),n),c&&(n=s(n,7,l));for(var d=t.length;d--;)o(n,t[d]);return n}));e.exports=d},6638:(e,t,n)=>{var a=n(8096),s=n(4066),o=n(1489),r=4294967295,i=Math.min;e.exports=function(e,t){if((e=o(e))<1||e>9007199254740991)return[];var n=r,l=i(e,r);t=s(t),e-=r;for(var c=a(l,t);++n<e;)t(n);return c}},1609:e=>{"use strict";e.exports=window.React},790:e=>{"use strict";e.exports=window.ReactJSXRuntime},1455:e=>{"use strict";e.exports=window.wp.apiFetch},6427:e=>{"use strict";e.exports=window.wp.components},7143:e=>{"use strict";e.exports=window.wp.data},6087:e=>{"use strict";e.exports=window.wp.element},2619:e=>{"use strict";e.exports=window.wp.hooks},8537:e=>{"use strict";e.exports=window.wp.htmlEntities},7723:e=>{"use strict";e.exports=window.wp.i18n},8558:e=>{"use strict";e.exports=window.wp.keycodes},5573:e=>{"use strict";e.exports=window.wp.primitives},3832:e=>{"use strict";e.exports=window.wp.url}},n={};function a(e){var s=n[e];if(void 0!==s)return s.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return t[e](o,o.exports,a),o.loaded=!0,o.exports}a.m=t,e=[],a.O=(t,n,s,o)=>{if(!n){var r=1/0;for(p=0;p<e.length;p++){for(var[n,s,o]=e[p],i=!0,l=0;l<n.length;l++)(!1&o||r>=o)&&Object.keys(a.O).every((e=>a.O[e](n[l])))?n.splice(l--,1):(i=!1,o<r&&(r=o));if(i){e.splice(p--,1);var c=s();void 0!==c&&(t=c)}}return t}o=o||0;for(var p=e.length;p>0&&e[p-1][2]>o;p--)e[p]=e[p-1];e[p]=[n,s,o]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),a.j=930,(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var s=n.length-1;s>-1&&(!e||!/^http(s?):/.test(e));)e=n[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={930:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var s,o,[r,i,l]=n,c=0;if(r.some((t=>0!==e[t]))){for(s in i)a.o(i,s)&&(a.m[s]=i[s]);if(l)var p=l(a)}for(t&&t(n);c<r.length;c++)o=r[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(p)},n=globalThis.webpackChunknewspack=globalThis.webpackChunknewspack||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var s=a.O(void 0,[223],(()=>a(9693)));s=a.O(s)})();