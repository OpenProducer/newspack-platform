"use strict";(globalThis.webpackChunknewspack=globalThis.webpackChunknewspack||[]).push([[218],{8169:(e,n,s)=>{s.d(n,{A:()=>i});var t=s(5573),a=s(790);const i=(0,a.jsx)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,a.jsx)(t.Path,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"})})},9214:(e,n,s)=>{s.d(n,{A:()=>i});var t=s(5573),a=s(790);const i=(0,a.jsxs)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,a.jsx)(t.Path,{d:"m19 7.5h-7.628c-.3089-.87389-1.1423-1.5-2.122-1.5-.97966 0-1.81309.62611-2.12197 1.5h-2.12803v1.5h2.12803c.30888.87389 1.14231 1.5 2.12197 1.5.9797 0 1.8131-.62611 2.122-1.5h7.628z"}),(0,a.jsx)(t.Path,{d:"m19 15h-2.128c-.3089-.8739-1.1423-1.5-2.122-1.5s-1.8131.6261-2.122 1.5h-7.628v1.5h7.628c.3089.8739 1.1423 1.5 2.122 1.5s1.8131-.6261 2.122-1.5h2.128z"})]})},1075:(e,n,s)=>{s.d(n,{A:()=>i});var t=s(4058);class a extends t.A{constructor(e,n,s,t=""){super(e,s,t),this.name="WizardApiError",this.statusCode=n,Object.setPrototypeOf(this,a.prototype)}toJSON(){return{name:this.name,message:this.message,statusCode:this.statusCode,errorCode:this.errorCode,details:this.details,stackTrace:this.stack}}}const i=a},4058:(e,n,s)=>{s.d(n,{A:()=>a});class t extends Error{constructor(e,n,s=""){super(e),this.name="WizardError",this.errorCode=n,this.details=s,Object.setPrototypeOf&&Object.setPrototypeOf(this,new.target.prototype)}toJSON(){return{name:this.name,message:this.message,errorCode:this.errorCode,details:this.details,stackTrace:this.stack}}}const a=t},7153:(e,n,s)=>{s.d(n,{M1:()=>o,Ss:()=>i.A,u:()=>a.A});var t=s(7723),a=s(4058),i=s(1075);const o={MAILCHIMP_API_KEY_INVALID:(0,t.__)("Invalid Mailchimp API Key.","newspack-plugin"),GOOGLEOAUTH_REFRESH_TOKEN_EXPIRED:(0,t.__)("Missing Google refresh token. Please re-authenticate site.","newspack-plugin"),GOOGLE:{OAUTH_POPUP_BLOCKED:(0,t.__)("Popup blocked by browser. Disable any popup blocking settings and try again.","newspack-plugin"),URL_INVALID:(0,t.__)("URL is invalid. Please try again or contact support if the issue persists.","newspack-plugin")}}},2005:(e,n,s)=>{s.d(n,{L:()=>u});var t=s(7143),a=s(8537),i=s(6087),o=s(3276),l=s(7153);function r(e){var n;return null!==(n=e.split("?").at(0))&&void 0!==n?n:e}let c={};const p=e=>{const n={message:"An unknown API error occurred.",statusCode:500,errorCode:"api_unknown_error",details:""};if(!e)return null;if("string"==typeof e)n.message=e;else if(e instanceof Error||"message"in e){var s,t,a;n.message=null!==(s=e.message)&&void 0!==s?s:n.message,n.statusCode=null!==(t=e.data?.status)&&void 0!==t?t:n.statusCode,n.errorCode=null!==(a=e.code)&&void 0!==a?a:n.errorCode,n.details=""}return new l.Ss(n.message,n.statusCode,n.errorCode,n.details)},d=e=>({on(n,s=null){const t=e?.[n];t&&"function"==typeof t&&t(s)}});function u(e){var n;const[s,l]=(0,i.useState)(!1),{wizardApiFetch:u,updateWizardSettings:_}=(0,t.useDispatch)(o.S),h=(0,t.useSelect)((n=>n(o.S).getWizardData(e)),[e]),[g,m]=(0,i.useState)(null!==(n=h.error)&&void 0!==n?n:null),w=(0,i.useRef)([]);function k(){m(null)}return(0,i.useEffect)((()=>{_({slug:e,path:["error"],value:g})}),[g,_,e]),{wizardApiFetch:(0,i.useCallback)((async(n,s)=>{const{on:t}=d(null!=s?s:{}),a=function(n){return(s,t,a=n)=>{const i=a?r(a):a;_({slug:e,path:[i,...Array.isArray(s)?s:[s]].filter((e=>"string"==typeof e)),value:t})}}(n.path),{path:i,method:o="GET"}=n,g=r(null!=i?i:""),{isCached:k="GET"===o,updateCacheKey:x=null,updateCacheMethods:b=[],...f}=n,{error:v,[g]:{[o]:j=null}={}}=h;function C(e){if(k&&a(o,e),x&&x.constructor===Object){const[n,s]=Object.entries(x)[0],t=h[n][s];let i;i=t&&t.constructor===Object?{...t,...e}:e,a(Object.entries(x)[0],i,null)}for(const n of b)a(n,e);return t("onSuccess",e),e}function A(e){const n=p(e);throw m(n),t("onError",n),n}function y(){const{[g]:e,...n}=c;c=n,w.current=w.current.filter((e=>e!==g)),l(w.current.length>0),t("onFinally")}return c[g]?(l(!0),c[g].then(C).catch(A).finally(y)):k&&(v||j)?(m(v),t("onSuccess",j),j):(l(!0),t("onStart"),w.current.push(g),c[g]=u({isQuietFetch:!0,isLocalError:!0,...f}).then(C).catch(A).finally(y),c[e])}),[u,h,_,s,e]),isFetching:s,errorMessage:g?(0,a.decodeEntities)(g.message):null,error:g,cache:n=>({get:(e="GET")=>h[n][e],set(s,t="GET"){_({slug:e,path:[n,t],value:s})}}),setError(e){null===e?k():m(p(e))},resetError:k}}},2083:(e,n,s)=>{s.r(n),s.d(n,{default:()=>q});var t=s(7723),a=s(6087),i=s(7677),o=s(5573),l=s(790);const r=(0,l.jsx)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,l.jsx)(o.Path,{fillRule:"evenodd",d:"M11.25 5h1.5v15h-1.5V5zM6 10h1.5v10H6V10zm12 4h-1.5v6H18v-6z",clipRule:"evenodd"})}),c=(0,l.jsx)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,l.jsx)(o.Path,{d:"M3.25 12a8.75 8.75 0 1117.5 0 8.75 8.75 0 01-17.5 0zM12 4.75a7.25 7.25 0 100 14.5 7.25 7.25 0 000-14.5zm-1.338 4.877c-.314.22-.412.452-.412.623 0 .171.098.403.412.623.312.218.783.377 1.338.377.825 0 1.605.233 2.198.648.59.414 1.052 1.057 1.052 1.852 0 .795-.461 1.438-1.052 1.852-.41.286-.907.486-1.448.582v.316a.75.75 0 01-1.5 0v-.316a3.64 3.64 0 01-1.448-.582c-.59-.414-1.052-1.057-1.052-1.852a.75.75 0 011.5 0c0 .171.098.403.412.623.312.218.783.377 1.338.377s1.026-.159 1.338-.377c.314-.22.412-.452.412-.623 0-.171-.098-.403-.412-.623-.312-.218-.783-.377-1.338-.377-.825 0-1.605-.233-2.198-.648-.59-.414-1.052-1.057-1.052-1.852 0-.795.461-1.438 1.052-1.852a3.64 3.64 0 011.448-.582V7.5a.75.75 0 011.5 0v.316c.54.096 1.039.296 1.448.582.59.414 1.052 1.057 1.052 1.852a.75.75 0 01-1.5 0c0-.171-.098-.403-.412-.623-.312-.218-.783-.377-1.338-.377s-1.026.159-1.338.377z"})}),p=(0,l.jsx)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,l.jsx)(o.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M3 7c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7Zm2-.5h14c.3 0 .5.2.5.5v1L12 13.5 4.5 7.9V7c0-.3.2-.5.5-.5Zm-.5 3.3V17c0 .3.2.5.5.5h14c.3 0 .5-.2.5-.5V9.8L12 15.4 4.5 9.8Z"})}),d=(0,l.jsx)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,l.jsx)(o.Path,{d:"M11.1 15.8H20v-1.5h-8.9v1.5zm0-8.6v1.5H20V7.2h-8.9zM6 13c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-7c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})}),u=(0,l.jsx)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,l.jsx)(o.Path,{d:"M12 3.3c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8s-4-8.8-8.8-8.8zm6.5 5.5h-2.6C15.4 7.3 14.8 6 14 5c2 .6 3.6 2 4.5 3.8zm.7 3.2c0 .6-.1 1.2-.2 1.8h-2.9c.1-.6.1-1.2.1-1.8s-.1-1.2-.1-1.8H19c.2.6.2 1.2.2 1.8zM12 18.7c-1-.7-1.8-1.9-2.3-3.5h4.6c-.5 1.6-1.3 2.9-2.3 3.5zm-2.6-4.9c-.1-.6-.1-1.1-.1-1.8 0-.6.1-1.2.1-1.8h5.2c.1.6.1 1.1.1 1.8s-.1 1.2-.1 1.8H9.4zM4.8 12c0-.6.1-1.2.2-1.8h2.9c-.1.6-.1 1.2-.1 1.8 0 .6.1 1.2.1 1.8H5c-.2-.6-.2-1.2-.2-1.8zM12 5.3c1 .7 1.8 1.9 2.3 3.5H9.7c.5-1.6 1.3-2.9 2.3-3.5zM10 5c-.8 1-1.4 2.3-1.8 3.8H5.5C6.4 7 8 5.6 10 5zM5.5 15.3h2.6c.4 1.5 1 2.8 1.8 3.7-1.8-.6-3.5-2-4.4-3.7zM14 19c.8-1 1.4-2.2 1.8-3.7h2.6C17.6 17 16 18.4 14 19z"})});var _=s(8176);const h=(0,l.jsx)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,l.jsx)(o.Path,{d:"M12 9c-.8 0-1.5.7-1.5 1.5S11.2 12 12 12s1.5-.7 1.5-1.5S12.8 9 12 9zm0-5c-3.6 0-6.5 2.8-6.5 6.2 0 .8.3 1.8.9 3.1.5 1.1 1.2 2.3 2 3.6.7 1 3 3.8 3.2 3.9l.4.5.4-.5c.2-.2 2.6-2.9 3.2-3.9.8-1.2 1.5-2.5 2-3.6.6-1.3.9-2.3.9-3.1C18.5 6.8 15.6 4 12 4zm4.3 8.7c-.5 1-1.1 2.2-1.9 3.4-.5.7-1.7 2.2-2.4 3-.7-.8-1.9-2.3-2.4-3-.8-1.2-1.4-2.3-1.9-3.3-.6-1.4-.7-2.2-.7-2.5 0-2.6 2.2-4.7 5-4.7s5 2.1 5 4.7c0 .2-.1 1-.7 2.4z"})}),g=(0,l.jsx)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,l.jsx)(o.Path,{fillRule:"evenodd",d:"M6.863 13.644L5 13.25h-.5a.5.5 0 01-.5-.5v-3a.5.5 0 01.5-.5H5L18 6.5h2V16h-2l-3.854-.815.026.008a3.75 3.75 0 01-7.31-1.549zm1.477.313a2.251 2.251 0 004.356.921l-4.356-.921zm-2.84-3.28L18.157 8h.343v6.5h-.343L5.5 11.823v-1.146z",clipRule:"evenodd"})}),m=(0,l.jsx)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,l.jsx)(o.Path,{fillRule:"evenodd",d:"M5.5 9.5v-2h13v2h-13zm0 3v4h13v-4h-13zM4 7a1 1 0 011-1h14a1 1 0 011 1v10a1 1 0 01-1 1H5a1 1 0 01-1-1V7z",clipRule:"evenodd"})}),w=(0,l.jsx)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,l.jsx)(o.Path,{d:"m7.3 9.7 1.4 1.4c.2-.2.3-.3.4-.5 0 0 0-.1.1-.1.3-.5.4-1.1.3-1.6L12 7 9 4 7.2 6.5c-.6-.1-1.1 0-1.6.3 0 0-.1 0-.1.1-.3.1-.4.2-.6.4l1.4 1.4L4 11v1h1l2.3-2.3zM4 20h9v-1.5H4V20zm0-5.5V16h16v-1.5H4z"})}),k=(0,l.jsxs)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,l.jsx)(o.Path,{d:"M11.696 13.972c.356-.546.599-.958.728-1.235a1.79 1.79 0 00.203-.783c0-.264-.077-.47-.23-.618-.148-.153-.354-.23-.618-.23-.295 0-.569.07-.82.212a3.413 3.413 0 00-.738.571l-.147-1.188c.289-.234.59-.41.903-.526.313-.117.66-.175 1.041-.175.375 0 .695.08.959.24.264.153.46.362.59.626.135.265.203.556.203.876 0 .362-.08.734-.24 1.115-.154.381-.427.87-.82 1.466l-.756 1.152H14v1.106h-4l1.696-2.609z"}),(0,l.jsx)(o.Path,{d:"M19.5 7h-15v12a.5.5 0 00.5.5h14a.5.5 0 00.5-.5V7zM3 7V5a2 2 0 012-2h14a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V7z"})]}),x=(0,l.jsx)(o.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)(o.Path,{d:"M18 5.5H6a.5.5 0 0 0-.5.5v12a.5.5 0 0 0 .5.5h12a.5.5 0 0 0 .5-.5V6a.5.5 0 0 0-.5-.5ZM6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Zm1 5h1.5v1.5H7V9Zm1.5 4.5H7V15h1.5v-1.5ZM10 9h7v1.5h-7V9Zm7 4.5h-7V15h7v-1.5Z"})}),b=(0,l.jsx)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,l.jsx)(o.Path,{d:"M15.1 4.8l-3-2.5V4c-4.4 0-8 3.6-8 8 0 3.7 2.5 6.9 6 7.7.3.1.6.1 1 .2l.2-1.5c-.4 0-.7-.1-1.1-.2l-.1.2v-.2c-2.6-.8-4.5-3.3-4.5-6.2 0-3.6 2.9-6.5 6.5-6.5v1.8l3-2.5zM20 11c-.2-1.4-.7-2.7-1.6-3.8l-1.2.8c.7.9 1.1 2 1.3 3.1L20 11zm-1.5 1.8c-.1.5-.2 1.1-.4 1.6s-.5 1-.8 1.5l1.2.9c.4-.5.8-1.1 1-1.8s.5-1.3.5-2l-1.5-.2zm-5.6 5.6l.2 1.5c1.4-.2 2.7-.7 3.8-1.6l-.9-1.1c-.9.7-2 1.1-3.1 1.2z"})});var f=s(9214);const v=(0,l.jsx)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,l.jsx)(o.Path,{fillRule:"evenodd",d:"M19.75 11H21V8.667L19.875 4H4.125L3 8.667V11h1.25v8.75h15.5V11zm-1.5 0H5.75v7.25H10V13h4v5.25h4.25V11zm-5.5-5.5h2.067l.486 3.24.028.76H12.75v-4zm-3.567 0h2.067v4H8.669l.028-.76.486-3.24zm7.615 3.1l-.464-3.1h2.36l.806 3.345V9.5h-2.668l-.034-.9zM7.666 5.5h-2.36L4.5 8.845V9.5h2.668l.034-.9.464-3.1z",clipRule:"evenodd"})}),j=(0,l.jsx)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,l.jsx)(o.Path,{d:"M14.103 7.128l2.26-2.26a4 4 0 00-5.207 4.804L5.828 15a2 2 0 102.828 2.828l5.329-5.328a4 4 0 004.804-5.208l-2.261 2.26-1.912-.512-.513-1.912zm-7.214 9.64a.5.5 0 11.707-.707.5.5 0 01-.707.707z"})}),C=(0,l.jsx)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,l.jsx)(o.Path,{d:"M19 5H5C4.46957 5 3.96086 5.21071 3.58579 5.58579C3.21071 5.96086 3 6.46957 3 7V17C3 17.5304 3.21071 18.0391 3.58579 18.4142C3.96086 18.7893 4.46957 19 5 19H19C19.5304 19 20.0391 18.7893 20.4142 18.4142C20.7893 18.0391 21 17.5304 21 17V7C21 6.46957 20.7893 5.96086 20.4142 5.58579C20.0391 5.21071 19.5304 5 19 5ZM19.5 17C19.5 17.1326 19.4473 17.2598 19.3536 17.3536C19.2598 17.4473 19.1326 17.5 19 17.5H5C4.86739 17.5 4.74021 17.4473 4.64645 17.3536C4.55268 17.2598 4.5 17.1326 4.5 17V7C4.5 6.86739 4.55268 6.74021 4.64645 6.64645C4.74021 6.55268 4.86739 6.5 5 6.5H19C19.1326 6.5 19.2598 6.55268 19.3536 6.64645C19.4473 6.74021 19.5 6.86739 19.5 7V17ZM16.007 9.736C15.568 9.50644 15.0783 9.3909 14.583 9.4H12.487V15H14.583C15.116 15 15.591 14.89 16.007 14.668C16.423 14.444 16.75 14.124 16.987 13.708C17.224 13.289 17.343 12.787 17.343 12.2C17.343 11.613 17.224 11.112 16.987 10.696C16.7603 10.2877 16.4198 9.95421 16.007 9.736ZM16.039 13.208C15.916 13.491 15.734 13.708 15.491 13.86C15.248 14.012 14.946 14.088 14.583 14.088H13.511V10.312H14.583C14.946 10.312 15.248 10.388 15.491 10.54C15.734 10.692 15.916 10.91 16.039 11.192C16.162 11.475 16.223 11.811 16.223 12.2C16.223 12.589 16.162 12.925 16.039 13.208ZM8.387 9.4L6.395 15H7.387L7.854 13.672H9.889L10.355 15H11.347L9.355 9.4H8.387ZM8.168 12.776L8.871 10.776L9.574 12.776H8.168Z"})}),A=(0,l.jsx)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,l.jsx)(o.Path,{d:"M4.5 16.9995V9.81253L12 15.4375L19.5 9.81253V14.3295H21V6.99953C21 6.46909 20.7893 5.96039 20.4142 5.58531C20.0391 5.21024 19.5304 4.99953 19 4.99953H5C4.46957 4.99953 3.96086 5.21024 3.58579 5.58531C3.21071 5.96039 3 6.46909 3 6.99953V16.9995C3 17.53 3.21071 18.0387 3.58579 18.4137C3.96086 18.7888 4.46957 18.9995 5 18.9995H12.42V17.4995H5C4.86739 17.4995 4.74021 17.4468 4.64645 17.3531C4.55268 17.2593 4.5 17.1321 4.5 16.9995ZM4.5 6.99953C4.5 6.86692 4.55268 6.73974 4.64645 6.64597C4.74021 6.55221 4.86739 6.49953 5 6.49953H19C19.1326 6.49953 19.2598 6.55221 19.3536 6.64597C19.4473 6.73974 19.5 6.86692 19.5 6.99953V7.93753L12 13.5625L4.5 7.93553V6.99953ZM15.035 15.8295L13.375 20.4965H14.202L14.591 19.3905H16.287L16.676 20.4975H17.502L15.842 15.8295H15.035ZM14.853 18.6435L15.439 16.9765L16.024 18.6435H14.853ZM22.203 16.9095C22.014 16.5692 21.7302 16.2913 21.386 16.1095C21.0203 15.9184 20.6125 15.8221 20.2 15.8295H18.453V20.4965H20.2C20.644 20.4965 21.04 20.4045 21.386 20.2205C21.733 20.0335 22.006 19.7665 22.203 19.4205C22.401 19.0705 22.5 18.6525 22.5 18.1635C22.5 17.6735 22.401 17.2565 22.203 16.9095ZM21.413 19.0035C21.3204 19.2274 21.1608 19.4171 20.956 19.5465C20.754 19.6735 20.502 19.7365 20.2 19.7365H19.306V16.5895H20.2C20.502 16.5895 20.754 16.6535 20.956 16.7795C21.159 16.9065 21.311 17.0875 21.413 17.3235C21.5213 17.59 21.5737 17.8759 21.567 18.1635C21.5737 18.4511 21.5213 18.737 21.413 19.0035Z"})}),y=(0,l.jsx)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,l.jsx)(o.Path,{d:"M17.25 6.5C17.25 5.83696 16.9866 5.20107 16.5178 4.73223C16.0489 4.26339 15.413 4 14.75 4C14.087 4 13.4511 4.26339 12.9822 4.73223C12.5134 5.20107 12.25 5.83696 12.25 6.5C12.25 5.83696 11.9866 5.20107 11.5178 4.73223C11.0489 4.26339 10.413 4 9.75 4C9.08696 4 8.45107 4.26339 7.98223 4.73223C7.51339 5.20107 7.25 5.83696 7.25 6.5C7.25 7.16304 7.51339 7.79893 7.98223 8.26777C8.45107 8.73661 9.08696 9 9.75 9H4V20H20V9H14.75C15.413 9 16.0489 8.73661 16.5178 8.26777C16.9866 7.79893 17.25 7.16304 17.25 6.5ZM8.75 6.5C8.75 5.95 9.2 5.5 9.75 5.5C10.3 5.5 10.75 5.95 10.75 6.5V7.5H9.75C9.2 7.5 8.75 7.05 8.75 6.5ZM11.5 18.5H5.5V10.5H11.5V18.5ZM13.75 6.5C13.75 5.95 14.2 5.5 14.75 5.5C15.3 5.5 15.75 5.95 15.75 6.5C15.75 7.05 15.3 7.5 14.75 7.5H13.75V6.5ZM18.5 10.5V18.5H13V10.5H18.5Z"})}),S={chartBar:r,currencyDollar:c,envelope:p,formatListBullets:d,globe:u,help:_.A,mapMarker:h,megaphone:g,payment:m,post:w,postDate:k,postList:x,rotateRight:b,settings:f.A,store:v,tool:j,ad:C,emailAd:A,gift:y};var E=s(5135);const{newspackDashboard:{sections:T}}=window,L=[{label:(0,t.__)("Dashboard","newspack"),path:"/",render:()=>Object.keys(T).map((e=>(0,l.jsxs)(a.Fragment,{children:[(0,l.jsx)("hr",{}),(0,l.jsxs)("div",{className:"newspack-dashboard__section",children:[(0,l.jsx)("h3",{children:T[e].title}),(0,l.jsx)("p",{children:T[e].desc}),(0,l.jsx)(E.xA,{columns:3,gutter:24,children:T[e].cards.map(((n,s)=>{return(0,l.jsx)("a",{href:n.href,children:(0,l.jsxs)(E.Zp,{className:"newspack-dashboard__card",children:[(0,l.jsx)("div",{className:"newspack-dashboard__card-icon",children:(0,l.jsx)(i.A,{size:32,icon:(t=n.icon,t in S?S[t]:S.help)})}),(0,l.jsxs)("div",{className:"newspack-dashboard__card-text",children:[(0,l.jsx)("h4",{children:n.title}),(0,l.jsx)("p",{children:n.desc})]})]})},`${e}-card-${s}`);var t}))},`${e}-grid`)]})]},e)))}],{settings:M}=window.newspackDashboard,P=()=>(0,l.jsx)("header",{className:"newspack-dashboard__brand-header",style:{backgroundColor:M.headerBgColor},children:(0,l.jsx)(E.Kk,{className:"brand-header__inner",hexColor:M.headerBgColor,children:(0,l.jsx)("h1",{children:M.siteName})})}),{newspackDashboard:{quickActions:F}}=window,N=()=>(0,l.jsxs)("div",{className:"newspack-dashboard__section",children:[(0,l.jsx)("h3",{children:(0,t.__)("Quick actions","newspack-plugin")}),(0,l.jsx)(E.xA,{style:{"--np-dash-card-icon-size":"48px"},columns:3,gutter:24,children:F.map(((e,n)=>(0,l.jsx)("a",{href:e.href,children:(0,l.jsxs)(E.Zp,{className:"newspack-dashboard__card",children:[(0,l.jsx)("div",{className:"newspack-dashboard__card-icon",children:(0,l.jsx)(i.A,{icon:S[e.icon]})}),(0,l.jsx)("h4",{children:e.title})]})},n)))})]});var I=s(1455),z=s.n(I),O=s(6427);const V=({onRequestClose:e,plugins:n,onSuccess:s})=>(0,l.jsx)(E.aF,{title:(0,t.__)("Add missing dependencies","newspack-plugin"),onRequestClose:()=>e(!1),children:(0,l.jsx)(E.I2,{plugins:n,canUninstall:!0,onStatus:({complete:n,pluginInfo:t})=>{n&&(s(t),e(!1))}})}),H={idle:void 0,success:(0,t.__)("Connected","newspack-plugin"),pending:(0,t.__)("Fetching…","newspack-plugin"),"pending-install":(0,t.__)("Installing…","newspack-plugin"),error:(0,t.__)("Disconnected","newspack-plugin"),"error-dependencies":void 0,"error-preflight":void 0,"error-request":void 0},$=({label:e="",isPreflightValid:n=!0,dependencies:s,statuses:i,endpoint:o,configLink:r,then:c})=>{const p={...H,...i},[d,u]=(0,a.useState)(200),[_,h]=(0,a.useState)("idle"),[g,m]=(0,a.useState)([]),[w,k]=(0,a.useState)(!1),x=structuredClone(s);function b(e={}){if(x&&Object.keys(e).length>0)for(const[n]of Object.entries(e))x[n].isActive=!0;return new Promise((e=>{if(x&&Object.keys(x).length>0){const n=[];for(const[e,s]of Object.entries(x))s.isActive||n.push(e);if(m(n),n.length>0)return h("error-dependencies"),void e(!1)}if(!n)return h("error-preflight"),void e(!1);h("pending"),z()({path:o,parse:!1}).then((async n=>{const s=n;u(s.status);const t=await s.json(),a=c(t);h(a?"success":"error"),e(a)})).catch((n=>{var s;const t=null!==(s=n?.status)&&void 0!==s?s:500;h(t>399?"error-request":"error"),u(t),e()}))}))}(0,a.useEffect)((()=>{b()}),[]);const f=`newspack-site-status newspack-site-status__${_}`;return(0,l.jsxs)(l.Fragment,{children:[w&&(0,l.jsx)(V,{plugins:g,onSuccess:b,onRequestClose:k}),"error"===_&&(0,l.jsx)(O.Tooltip,{text:(0,t.__)("Click to navigate to configuration","newspack-plugin"),children:(0,l.jsxs)("a",{href:r,className:f,children:[e,":"," ",(0,l.jsx)("span",{children:p[_]}),(0,l.jsx)("span",{className:"hidden",children:(0,t.__)("Configure?")})]})}),"error-dependencies"===_&&x&&(0,l.jsx)(O.Tooltip,{text:(0,t.sprintf)(
// translators: %s is a comma separated list of needed dependencies.
// translators: %s is a comma separated list of needed dependencies.
(0,t.__)("%s must be installed & activated!"),g.map((e=>x[e].label)).join(", ")),children:(0,l.jsxs)("button",{onClick:()=>k(!0),className:f,children:[e,":"," ",(0,l.jsx)("span",{children:(0,t._n)("Missing dependency","Missing dependencies",g.length,"newspack-plugin")}),(0,l.jsx)("span",{className:"hidden",children:(0,t._n)("Install dependency","Install dependencies",g.length,"newspack-plugin")})]})}),["error-preflight","success","idle","pending","error-request"].includes(_)&&(0,l.jsxs)("div",{className:f,children:[e,":"," ",(0,l.jsx)("span",{children:"error-request"===_?(0,t.sprintf)(/* translators: %d is the HTTP status code */ /* translators: %d is the HTTP status code */
(0,t.__)("Request failed - %d","newspack-plugin"),d):p[_]})]})]})},{newspackDashboard:{siteStatuses:D}}=window,B={readerActivation:{...D.readerActivation,then:({config:e})=>Boolean(e?.enabled)},googleAnalytics:{...D.googleAnalytics,then:({propertyID:e=""})=>""!==e},googleAdManager:{...D.googleAdManager,then:({services:{google_ad_manager:e}})=>e.available&&"1"===e.enabled}},R=()=>(0,l.jsxs)("div",{className:"newspack-dashboard__section",children:[(0,l.jsx)("h3",{children:(0,t.__)("Site status","newspack-plugin")}),(0,l.jsx)(E.xA,{columns:3,gutter:24,children:Object.keys(B).map((e=>(0,l.jsx)($,{...B[e]},e)))})]}),{newspack_aux_data:{is_debug_mode:G=!1}}=window,q=function(){return(0,l.jsxs)(a.Fragment,{children:[(0,l.jsx)(E.Du,{}),G&&(0,l.jsx)(E.$T,{debugMode:!0}),(0,l.jsx)(E.sQ,{headerText:(0,t.__)("Newspack / Dashboard","newspack"),sections:L,renderAboveSections:()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(P,{}),(0,l.jsx)(R,{}),(0,l.jsx)("hr",{}),(0,l.jsx)(N,{})]})})]})}},1501:(e,n,s)=>{s.r(n),s.d(n,{default:()=>L});var t=s(7723),a=s(3832),i=s(6087),o=s(8558),l=s(8169),r=s(6427),c=s(6837),p=s(5135);const d="/additional-brands";var u=s(790);const{useHistory:_}=p.Ix;function h({brand:e,deleteBrand:n}){const[s,a]=(0,i.useState)(!1),h=()=>a(!1),g=_();return(0,u.jsx)(c.A,{isSmall:!0,title:e.name,actionText:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(p.$n,{onClick:()=>a(!s),label:(0,t.__)("More options","newspack-plugin"),icon:l.A,className:s?"popover-active":""}),s&&(0,u.jsxs)(p.AM,{position:"bottom left",onKeyDown:e=>o.ESCAPE===e.keyCode&&h,onFocusOutside:h,children:[(0,u.jsx)(r.MenuItem,{onClick:()=>h(),className:"screen-reader-text",children:(0,t.__)("Close Popover","newspack-plugin")}),(0,u.jsx)(r.MenuItem,{onClick:()=>g.push(`${d}/${e.id}`),className:"newspack-button",children:(0,t.__)("Edit","newspack-plugin")}),(0,u.jsx)(r.MenuItem,{onClick:()=>n(e),className:"newspack-button",children:(0,t.__)("Delete","newspack-plugin")})]})]})})}const{NavLink:g}=p.Ix;function m({brands:e,isFetching:n,deleteBrand:s}){return(0,u.jsxs)(i.Fragment,{children:[(0,u.jsxs)(p.Zp,{headerActions:!0,noBorder:!0,children:[(0,u.jsx)("h2",{children:e.length||n?(0,t.__)("Site brands","newspack-plugin"):(0,t.__)("You have no saved brands.","newspack-plugin")}),(0,u.jsx)(g,{to:`${d}/new`,children:(0,u.jsx)(p.$n,{variant:"primary",disabled:n,children:(0,t.__)("Add New Brand","newspack-plugin")})})]}),e.length?e.map((e=>(0,u.jsx)(h,{brand:e,deleteBrand:s},e.id))):(0,u.jsx)(i.Fragment,{children:n?(0,u.jsx)("p",{children:(0,t.__)("Fetching brands…","newspack-plugin")}):(0,u.jsx)("p",{children:(0,t.__)("Create brands to enhance your readers experience.","newspack-plugin")})})]})}const{useParams:w}=p.Ix,{themeColors:k,menuLocations:x,menus:b}=window.newspackSettings["additional-brands"].sections.additionalBrands;function f({brands:e=[],upsertBrand:n,wizardApiFetch:s,fetchLogoAttachment:o,errorMessage:l}){const{brandId:r="0"}=w(),c=e.find((({id:e})=>e===Number(r))),[_,h]=p.JL.useObjectState({id:0,name:"",slug:"",meta:{_show_page_on_front:0,_custom_url:"yes",_logo:0,_theme_colors:[],_menus:[]},count:0,description:"",link:"",taxonomy:"",parent:0}),[g,m]=(0,i.useState)([]),[f,v]=(0,i.useState)("no");(0,i.useEffect)((()=>{c&&"number"==typeof c.meta._logo&&o(Number(r),c.meta._logo)}),[c?.meta._logo]),(0,i.useEffect)((()=>{c&&(h(c),v(c.meta._show_page_on_front?"yes":"no"))}),[c]),(0,i.useEffect)((()=>{s({path:(0,a.addQueryArgs)("/wp/v2/pages",{per_page:100,orderby:"title",order:"asc"})},{onSuccess:m})}),[]);const j=_.meta._theme_colors,C=_.name?.length>0&&("no"===f||"yes"===f&&_.meta._show_page_on_front>0);function A(e,n){if(!e)return;const s=j.find((n=>n.name===e));let t=[...j||[]];n?s?t=t.map((s=>s.name===e?{...s,color:n}:s)):t.push({name:e,color:n}):t=t.filter((n=>n.name!==e)),h({meta:{..._.meta,_theme_colors:t}})}const y=`${window.newspack_urls.site}/${"no"===_.meta._custom_url?"brand/":""}`;function S(e){return _.meta._menus.find((n=>n.location===e))?.menu||0}function E(){return"number"==typeof _.meta._logo&&_.meta._logo>0}return(0,u.jsxs)(i.Fragment,{children:[(0,u.jsx)(p.X3,{title:(0,t.__)("Brand","newspack-plugin"),description:(0,t.__)("Set your brand identity","newspack-plugin")}),(0,u.jsxs)(p.xA,{gutter:32,children:[(0,u.jsx)(p.xA,{columns:1,gutter:16,children:(0,u.jsx)(p.xt,{label:(0,t.__)("Name","newspack-plugin"),value:_.name||"",onChange:h("name"),onBlur:function(e){_.slug||h({slug:(0,a.cleanForSlug)(e.target.value)})},placeholder:(0,t.__)("Brand Name","newspack-plugin")})}),(0,u.jsx)(p.xA,{columns:1,gutter:16,children:(0,u.jsx)(p.BR,{className:"newspack-brand__header__logo",buttonLabel:E()?(0,t.__)("Fetching logo…","newspack-plugin"):void 0,label:(0,t.__)("Logo","newspack-plugin"),image:E()?void 0:_.meta._logo,onChange:e=>h({meta:{..._.meta,_logo:e}})})})]}),k&&(0,u.jsxs)(i.Fragment,{children:[(0,u.jsx)(p.X3,{title:(0,t.__)("Colors","newspack-plugin"),description:(0,t.__)("These are the colors you can customize for this brand in the active theme","newspack-plugin")}),k.map((e=>{var n;return(0,u.jsx)(p.Zp,{noBorder:!0,children:(0,u.jsx)(p.sk,{className:"newspack-brand__theme-mod-color-picker",label:(0,u.jsxs)(i.Fragment,{children:[(0,u.jsx)("span",{children:e.label}),j.find((n=>n.name===e.theme_mod_name))?.color&&(0,u.jsx)(p.$n,{variant:"link",onClick:()=>A(e.theme_mod_name,""),children:(0,t.__)("Reset default color","newspack-plugin")})]}),color:null!==(n=j.find((n=>n.name===e.theme_mod_name))?.color)&&void 0!==n?n:e.default,onChange:n=>A(e.theme_mod_name,n)})},e.theme_mod_name)}))]}),(0,u.jsx)(p.X3,{title:(0,t.__)("Settings","newspack-plugin")}),(0,u.jsxs)(p.Zp,{noBorder:!0,children:[(0,u.jsx)(p.bh,{className:"newspack-brand__base-url-radio-control",label:(0,t.__)("URL Base","newspack-plugin"),selected:_.meta._custom_url||"yes",options:[{label:(0,t.__)("Homepage","newspack-plugin"),value:"yes"},{label:(0,t.__)("Default","newspack-plugin"),value:"no"}],onChange:e=>h({meta:{..._.meta,_custom_url:e}})}),(0,u.jsxs)("div",{className:"newspack-brand__base-url-component",children:[(0,u.jsx)("span",{children:y}),(0,u.jsx)(p.xt,{className:"newspack-brand__base-url-component__text-control",label:(0,t.__)("Slug","newspack-plugin"),hideLabelFromVision:!0,withMargin:!1,value:_.slug||"",onChange:e=>h({slug:e}),placeholder:"brand-slug"})]})]}),(0,u.jsxs)(p.Zp,{noBorder:!0,children:[(0,u.jsx)(p.bh,{className:"newspack-brand__base-url-radio-control",label:(0,t.__)("Show on Front","newspack-plugin"),selected:f,options:[{label:(0,t.__)("Latest posts","newspack-plugin"),value:"no"},{label:(0,t.__)("A page","newspack-plugin"),value:"yes"}],onChange:function(e){v(e),h({meta:{..._.meta,_show_page_on_front:"yes"===e?1:0}})}}),"yes"===f&&(0,u.jsx)(p.Yq,{label:(0,t.__)("Homepage URL","newspack-plugin"),value:_.meta._show_page_on_front||0,options:[{label:(0,t.__)("Select a Page","newspack-plugin"),value:0,disabled:!0},...g.map((e=>({label:e.title.rendered,value:Number(e.id)})))],onChange:e=>h({meta:{..._.meta,_show_page_on_front:Number(e)}}),required:!0})]}),(0,u.jsx)(p.X3,{title:(0,t.__)("Menus","newspack-plugin"),description:(0,t.__)("Customize the menus for this brand","newspack-plugin")}),x&&Object.keys(x).map((e=>(0,u.jsx)(p.Yq,{label:x[e],value:S(e),options:[{label:(0,t.__)("Same as site","newspack-plugin"),value:0},...b],onChange:n=>function(e,n){const s=_.meta._menus.map((s=>s.location===e?{...s,menu:n}:s))||[];h({meta:{..._.meta,_menus:[...s,{location:e,menu:n}]}})}(e,n)},e))),l&&(0,u.jsx)(p.$T,{isError:!0,children:l}),(0,u.jsxs)("div",{className:"newspack-buttons-card",children:[(0,u.jsx)(p.$n,{disabled:!C,variant:"primary",onClick:()=>n(Number(r),_),children:(0,t.__)("Save","newspack-plugin")}),(0,u.jsx)(p.$n,{variant:"secondary",href:`#${d}`,children:(0,t.__)("Cancel","newspack-plugin")})]})]})}var v=s(5829),j=s(8721),C=s(2005);const{Route:A,Switch:y,useHistory:S,useRouteMatch:E,useLocation:T}=p.Ix;function L(){const{wizardApiFetch:e,isFetching:n,cache:s,errorMessage:o,resetError:l}=(0,C.L)("newspack-settings/additional-brands"),r=s("/wp/v2/brand"),[c,_]=(0,i.useState)([]),h=S(),g=T(),{path:w}=E();(0,i.useEffect)((()=>{l()}),[g.pathname]),(0,i.useEffect)((()=>{r.set(c)}),[c]);const k={isFetching:n,headerText:(0,t.__)("Brands","newspack-plugin"),subHeaderText:(0,t.__)("Configure brands settings","newspack-plugin")},x=(n,s)=>{e({path:n?`/wp/v2/brand/${n}`:"/wp/v2/brand",method:"POST",data:{...s,meta:{...s.meta,...s.meta._logo&&{_logo:s.meta._logo instanceof Object?s.meta._logo.id:s.meta._logo}}}},{onSuccess(e){_((s=>0===n?[e,...s]:s.map((s=>n===s.id?e:s)))),h.push(d)}})},b=n=>{p.Wp.confirmAction((0,t.__)("Are you sure you want to delete this brand?","newspack-plugin"))&&e({path:(0,a.addQueryArgs)(`/wp/v2/brand/${n.id}`,{force:!0}),method:"DELETE"},{onSuccess(e){e.deleted&&_((e=>e.filter((e=>n.id!==e.id))))}})},L=(n,s)=>{s&&e({path:`/wp/v2/media/${s}`},{onSuccess(e){_((s=>s.findIndex((e=>n===e.id))>-1?s.map((s=>n===s.id?{...s,meta:{...s.meta,_logo:{...e,url:e.source_url}}}:s)):s))}})};return(0,i.useEffect)((()=>{e({path:(0,a.addQueryArgs)("/wp/v2/brand",{per_page:100})},{onSuccess(e){_(e.map((e=>({...e,meta:{...e.meta,_theme_colors:e.meta._theme_colors?.length?e.meta._theme_colors:[],_menus:e.meta._menus?.length?e.meta._menus:[]}}))))}})}),[]),(0,u.jsx)(v.A,{isFetching:n,title:(0,t.__)("Additional Brands","newspack-plugin"),children:(0,u.jsx)(j.A,{children:(0,u.jsxs)(y,{children:[(0,u.jsx)(A,{exact:!0,path:w,render:()=>(0,u.jsx)(m,{...k,brands:c,deleteBrand:b})}),(0,u.jsx)(A,{path:`${w}/new`,render:()=>(0,u.jsx)(f,{...k,brands:c,upsertBrand:x,fetchLogoAttachment:L,wizardApiFetch:e})}),(0,u.jsx)(A,{path:`${w}/:brandId`,render:({match:n})=>(0,u.jsx)(f,{...k,brands:c,editBrand:Number(n.params.brandId),upsertBrand:x,fetchLogoAttachment:L,wizardApiFetch:e,errorMessage:o})})]})})})}},7896:(e,n,s)=>{s.d(n,{A:()=>p});var t=s(7723),a=s(6087),i=s(5135),o=s(6837),l=s(2005),r=s(7153),c=s(790);const p=function({onSuccess:e,isOnboarding:n}){const[s,p]=(0,a.useState)({}),d=s?.user_basic_info,u=Boolean(d&&d.email),{setError:_,errorMessage:h,wizardApiFetch:g,isFetching:m}=(0,l.L)("/newspack-settings/connections/apis/google-oauth");function w(){(function(){const e=new URLSearchParams(window.location.search),n={};for(const[s,t]of e.entries())n[s]=t;return n})().access_token||g({path:"/newspack/v1/oauth/google",isCached:!1},{onSuccess(n){p(n),n?.user_basic_info&&("function"==typeof e&&e(n),_(null))}})}return(0,a.useEffect)((()=>{n||w()}),[]),(0,a.useEffect)((()=>{u&&d&&!d.has_refresh_token&&_(new r.u(r.M1.GOOGLEOAUTH_REFRESH_TOKEN_EXPIRED,"googleoauth_refresh_token_expired"))}),[u]),(0,c.jsx)(o.A,{title:(0,t.__)("Google","newspack-plugin"),description:m?(0,t.__)("Loading…","newspack-plugin"):u?(0,t.sprintf)(
// Translators: connected user's email address.
// Translators: connected user's email address.
(0,t.__)("Connected as %s","newspack-plugin"),d?.email):(0,t.__)("Not connected","newspack-plugin"),isChecked:u,actionText:(0,c.jsx)(i.$n,{variant:"link",isDestructive:u,onClick:u?function(){g({path:"/newspack/v1/oauth/google/revoke",method:"DELETE"},{onSuccess:()=>p({})})}:function(){let e=null;g({path:"/newspack/v1/oauth/google/start",isCached:!1},{onSuccess(n){if(null===n)return void _(new r.u(r.M1.GOOGLE.URL_INVALID,"googleoauth_popup_blocked"));if(e=window.open(n,"newspack_google_oauth","width=500,height=600"),null===e)return void _(new r.u(r.M1.GOOGLE.OAUTH_POPUP_BLOCKED,"googleoauth_popup_blocked"));const s=setInterval((()=>{e?.closed&&(clearInterval(s),w())}),500)},onError(){e&&e.close()}})},disabled:m,children:u?(0,t.__)("Disconnect","newspack-plugin"):(0,t.__)("Connect","newspack-plugin")}),error:h,isMedium:!0})}},6985:(e,n,s)=>{s.r(n),s.d(n,{default:()=>cn});var t=s(7723),a=s(6087);const i=[["twitter",(0,t.__)("X (formerly Twitter) Handle","newspack-plugin"),(0,t.__)("username","newspack-plugin"),e=>0===e.length?"":e.length>15?(0,t.__)("X handle cannot exceed 15 characters!","newspack-plugin"):/^[a-zA-Z0-9_]+$/.test(e)?"":(0,t.__)("X handle may only contain letters, numbers, and underscores!","newspack-plugin")],["facebook",(0,t.__)("Facebook","newspack-plugin"),"https://facebook.com/page"],["instagram",(0,t.__)("Instagram","newspack-plugin"),"https://instagram.com/user"],["youtube",(0,t.__)("YouTube","newspack-plugin"),"https://youtube.com/c/channel"],["linkedin",(0,t.__)("LinkedIn","newspack-plugin"),"https://linkedin.com/user"],["pinterest",(0,t.__)("Pinterest","newspack-plugin"),"https://pinterest.com/user"]];var o=s(5135),l=s(790);const r=function({setData:e,data:n}){return(0,l.jsx)(o.xA,{columns:3,rowGap:16,children:i.map((([s,t,a])=>(0,l.jsx)(o.xt,{label:t,onChange:t=>e({...n,[s]:t}),value:n[s],placeholder:a},s)))})};var c=s(5829),p=s(6427);const d=function({data:e,setData:n}){return(0,l.jsxs)(o.xA,{children:[(0,l.jsx)(o.xt,{label:"Google",onChange:s=>n({...e,google:s}),value:e.google,help:(0,l.jsxs)(a.Fragment,{children:[(0,t.__)("Get your verification code in","newspack")+" ",(0,l.jsx)(p.ExternalLink,{href:`https://search.google.com/search-console/ownership?resource_id=${encodeURIComponent(window.location.origin)}`,children:(0,t.__)("Google Search Console","newspack")})]})}),(0,l.jsx)(o.xt,{label:"Bing",onChange:s=>n({...e,bing:s}),value:e.bing,help:(0,l.jsxs)(a.Fragment,{children:[`${(0,t.__)("Get your verification code in","newspack")} `,(0,l.jsx)(p.ExternalLink,{href:"https://www.bing.com/toolbox/webmaster/#/Dashboard/",children:(0,t.__)("Bing Webmaster Tools","newspack")})]})})]})};var u=s(8721),_=s(6837),h=s(7153);const g={isId:(e,n=(0,t.__)("Field cannot be empty!","newspack-plugin"))=>/^[A-Za-z0-9_-]*$/.test(e)?"":n,isUrl:(e,n=(0,t.__)("Invalid URL!","newspack-plugin"))=>""===e||/^https?:\/\/[^\s]*$/.test(e)?"":n},m=function(e,n){const[s,t]=(0,a.useState)(null);return{isInputsValid(){for(const[s,a,i]of e){const e=n[s],o=("string"==typeof a?g[a]:a)(e,i?.message);if(""!==o)return t(new h.u(o,`invalid_field_${s.toString()}`)),!1}return t(null),!0},errorMessage:s instanceof h.u?s.message:""}};var w=s(2005);const k="/newspack/v1/wizard/newspack-settings/seo",x="newspack-settings",b={header_color:"custom",theme_colors:"default",primary_color_hex:"#003da5",secondary_color_hex:"#666666",font_header:"",font_body:"",accent_allcaps:!0,custom_font_import_code:void 0,custom_font_import_code_alternate:void 0,header_center_logo:!1,header_simplified:!1,header_solid_background:!1,header_color_hex:"#003da5",custom_logo:"",logo_size:0,header_text:!1,header_display_tagline:!1,footer_copyright:"",footer_color:"default",footer_color_hex:"",newspack_footer_logo:"",footer_logo_size:"medium",homepage_pattern_index:0,show_author_bio:!0,show_author_email:!1,author_bio_length:200,featured_image_default:"large",post_template_default:"default",featured_image_all_posts:"none",post_template_all_posts:"none",newspack_image_credits_placeholder_url:void 0,newspack_image_credits_class_name:"image-credit",newspack_image_credits_prefix_label:"Credit:",newspack_image_credits_placeholder:null,newspack_image_credits_auto_populate:!1,custom_css_post_id:-1};var f=s(4058);const v=({title:e,description:n,namespace:s,path:i,defaultValue:r,fieldValidationMap:c,renderProp:p,onToggle:d=((e,n)=>({...n,active:e})),onChecked:u=(e=>e.active)})=>{const{wizardApiFetch:h,isFetching:g,errorMessage:m,setError:k,resetError:x}=(0,w.L)(s),[b,v]=(0,a.useState)({...r}),[j,C]=(0,a.useState)({...r}),A=function({setError:e}){return{isIntegerId(n){const s=n.trim();let a="";return""===s?a=(0,t.__)("Value cannot be empty!","newspack-plugin"):/^[0-9]+$/.test(s)?"0"===s&&(a=(0,t.__)("Value cannot be zero!","newspack-plugin")):a=(0,t.__)("Value may only contain numbers!","newspack-plugin"),a?(e(new f.A(a,"invalid_input_int_id")),!1):Number(s)>0},isId(n){let s="";return""===n.trim()?s=(0,t.__)("Value cannot be empty!","newspack-plugin"):/^[a-zA-Z0-9]+$/.test(n.trim())||(s=(0,t.__)("Value may only contain numbers and letters.","newspack-plugin")),!s||(e(new f.A(s,"invalid_input_id")),!1)}}}({setError:k});(0,a.useEffect)((()=>{h({path:i},{onSuccess:e=>{v(e),C(e)}})}),[]);const y=(0,a.useCallback)(((e,n=!1)=>{if(x(),!n)for(const[e,n]of c){if(n.dependsOn){const[[e,s]]=Object.entries(n.dependsOn);if(j[e]!==s)continue}if("string"==typeof n.callback){if(!A[n.callback](j[e]))return}else if("function"==typeof n.callback){const s=n.callback(j[e]);if(s)return void k(new f.A(s,`invalid_${e.toString()}`))}}h({path:i,method:"POST",data:e,updateCacheMethods:["GET"]},{onSuccess:e=>{v(e),C(e)}})}),[c,A,x,j,h]);return(s=>{const i=u(j);return(0,l.jsx)(_.A,{title:e,description:g&&!i?(0,t.__)("Loading…","newspack-plugin"):n,hasGreyHeader:i,actionContent:i&&(0,l.jsx)(o.$n,{variant:"primary",disabled:g,onClick:()=>y(j),children:g?(0,t.__)("Loading…","newspack-plugin"):(0,t.__)("Save Settings","newspack-plugin")}),error:m,disabled:g,toggleOnChange:e=>{y(d(e,j),!0)},toggleChecked:i,children:i&&(0,l.jsx)(a.Fragment,{children:(0,l.jsx)(o.xA,{noMargin:!0,rowGap:16,columns:1,children:p({settingsUpdates:j,setSettingsUpdates:C,isFetching:g})})})})})()},j=()=>(0,l.jsx)(v,{title:(0,t.__)("X Pixel","newspack-plugin"),namespace:`${x}/social/pixel/x`,description:(0,t.__)("Add the X pixel (formerly known as Twitter pixel) to your site.","newspack-plugin"),path:"/newspack/v1/wizard/newspack-settings/social/x_pixel",defaultValue:{active:!1,pixel_id:""},fieldValidationMap:[["pixel_id",{callback:"isId"}]],renderProp:({settingsUpdates:e,setSettingsUpdates:n,isFetching:s})=>{var i;return(0,l.jsx)(o.xt,{value:null!==(i=e?.pixel_id)&&void 0!==i?i:"",label:(0,t.__)("Pixel ID","newspack-plugin"),onChange:s=>n({...e,pixel_id:s}),help:(0,a.createInterpolateElement)((0,t.__)("The X Pixel ID. You only need to add the number, not the full code. Example: 123456789123456789. You can get this information <linkToFb>here</linkToFb>.","newspack-plugin"),{linkToFb:(0,l.jsx)("a",{href:"https://www.facebook.com/ads/manager/pixel/facebook_pixel",target:"_blank",rel:"noopener noreferrer"})}),disabled:s,autoComplete:"one-time-code"})}}),C=()=>(0,l.jsx)(v,{title:(0,t.__)("Meta Pixel","newspack-plugin"),namespace:`${x}/social/pixels/meta`,description:(0,t.__)("Add the Meta pixel (formerly known as Facebook pixel) to your site.","newspack-plugin"),path:"/newspack/v1/wizard/newspack-settings/social/meta_pixel",defaultValue:{active:!1,pixel_id:""},fieldValidationMap:[["pixel_id",{callback:"isIntegerId"}]],renderProp:({settingsUpdates:e,setSettingsUpdates:n,isFetching:s})=>{var i;return(0,l.jsx)(o.xt,{value:null!==(i=e?.pixel_id)&&void 0!==i?i:"",label:(0,t.__)("Pixel ID","newspack-plugin"),onChange:s=>n({...e,pixel_id:s}),help:(0,a.createInterpolateElement)((0,t.__)("The Meta Pixel ID. You only need to add the number, not the full code. Example: 123456789123456789. You can get this information <linkToFb>here</linkToFb>.","newspack-plugin"),{linkToFb:(0,l.jsx)("a",{href:"https://www.facebook.com/ads/manager/pixel/facebook_pixel",target:"_blank",rel:"noopener noreferrer"})}),disabled:s,autoComplete:"one-time-code"})}});function A(e,n="",s,t){return s({path:n?`/newspack/v1/plugins/${e}/${n}`:`/newspack/v1/plugins/${e}`,method:n?"POST":"GET"},t)}function y({isLoading:e,isSetup:n,isActive:s,isInstalled:a,isConfigurable:i,onActivate:r,onInstall:c,onConfigure:p,actionText:d={},...u}){if("page-reload"===u.status)return(0,l.jsx)("span",{className:"gray",children:(0,t.__)("Page reloading…","newspack-plugin")});if("page-redirect"===u.status)return(0,l.jsx)("span",{className:"gray",children:(0,t.__)("Page redirecting…","newspack-plugin")});if(e)return(0,l.jsx)(o.E$,{});var _,h,g;if(!a)return(0,l.jsx)(o.$n,{isLink:!0,onClick:c,children:null!==(_=d.install)&&void 0!==_?_:(0,t.sprintf)(/* translators: %s: Plugin name */ /* translators: %s: Plugin name */
(0,t.__)("Install %s","newspack-plugin"),u.title)});if(!s)return(0,l.jsx)(o.$n,{isLink:!0,onClick:r,children:null!==(h=d.activate)&&void 0!==h?h:(0,t.sprintf)(/* translators: %s: Plugin name */ /* translators: %s: Plugin name */
(0,t.__)("Activate %s","newspack-plugin"),u.title)});if(!n){var m,w;if(i)return(0,l.jsx)(o.$n,{isLink:!0,onClick:p,children:null!==(m=d.configure)&&void 0!==m?m:(0,t.sprintf)(/* translators: %s: Plugin name */ /* translators: %s: Plugin name */
(0,t.__)("Configure %s","newspack-plugin"),u.title)});if(u.editLink)return(0,l.jsx)("a",{href:u.editLink,children:null!==(w=d.complete)&&void 0!==w?w:(0,t.__)("Complete Setup","newspack-plugin")})}return u.editLink?(0,l.jsx)("a",{href:u.editLink,children:null!==(g=d.configure)&&void 0!==g?g:(0,t.__)("Configure","newspack-plugin")}):null}const S=function({slug:e,title:n,subTitle:s,editLink:i,description:r,statusDescription:c,onStatusChange:p=(()=>{}),reloadOnActivation:d=!0,isStatusPrepended:u=!0,isConfigurable:h,isTogglable:g,actionText:m={},...k}){var x;const{wizardApiFetch:b,errorMessage:f,isFetching:v}=(0,w.L)(`/newspack/wizards/plugins/${e}`),[j,C]=o.JL.useObjectState({slug:e,status:"",statusDescription:c,configured:!1}),S={isSetup:"active"===j.status&&j.configured,isActive:"active"===j.status,isLoading:!j.status,isInstalled:"uninstalled"!==j.status,isConfigured:j.configured,isError:Boolean(f)},E={init:e=>A(j.slug,void 0,b,e),activate:e=>A(j.slug,"activate",b,e),deactivate:e=>A(j.slug,"deactivate",b,e),install:e=>A(j.slug,"install",b,e),configure:e=>A(j.slug,"configure",b,e)};function T(e){const n=(d?["activate","deactivate"]:["deactivate"]).includes(e);C({status:""}),E[e]({onSuccess(e){let s=e.Status;n&&(s="page-reload"),C({status:s,configured:e.Configured})},onFinally(){n&&!f&&window.location.reload(),i&&"configure"===e&&(window.location.href=i,C({status:"page-redirect"}))}})}function L(){T("activate")}(0,a.useEffect)((()=>{T("init")}),[]),(0,a.useEffect)((()=>{p(S)}),[S]);const M={};return g&&(M.toggleChecked=S.isActive,M.toggleOnChange=()=>S.isActive?void T("deactivate"):L(),M.disabled=v),(0,l.jsx)(_.A,{title:`${n}${s?`: ${s}`:""}`,description:function(){if(S.isError)return(0,t.__)("Status: Error!","newspack-plugin");if(S.isLoading)return(0,t.__)("Loading…","newspack-plugin");const e=null!=r?r:"";let n="";var s;if(S.isInstalled)if(S.isActive)if(S.isConfigured){var a;n=null!==(a=j.statusDescription?.connected)&&void 0!==a?a:(0,t.__)("Connected.","newspack-plugin")}else{var i;n=null!==(i=j.statusDescription?.notConfigured)&&void 0!==i?i:(0,t.__)("Not connected.","newspack-plugin")}else{var o;n=null!==(o=j.statusDescription?.inactive)&&void 0!==o?o:(0,t.__)("Inactive.","newspack-plugin")}else n=null!==(s=j.statusDescription?.uninstalled)&&void 0!==s?s:(0,t.__)("Uninstalled.","newspack-plugin");return(0,l.jsxs)(l.Fragment,{children:[u&&(0,t.sprintf)(
// Translators: %s: Plugin status
// Translators: %s: Plugin status
(0,t.__)("Status: %s","newspack-plugin"),n)," ",e]})},className:`wizards-plugin-card ${e}`,actionText:S.isError?null:(0,l.jsx)(y,{title:n,editLink:i,onActivate:L,actionText:m,isConfigurable:h,onInstall:()=>T("activate"),onConfigure:()=>T("configure"),...S,...j}),isChecked:S.isSetup,error:null!==(x=k.error)&&void 0!==x?x:f,...k,...M})},E=function(){return(0,l.jsx)(S,{title:(0,t.__)("Publicize","newspack-plugin"),badge:(0,t.__)("Jetpack","newspack-plugin"),slug:"jetpack",description:(0,t.__)("Publicize makes it easy to share your site's posts on several social media networks automatically when you publish a new post.","newspack-plugin"),actionText:{complete:(0,t.__)("Configure","newspack-plugin"),activate:(0,t.__)("Activate Jetpack","newspack-plugin")},editLink:"admin.php?page=jetpack#/sharing"})},T=()=>{const e=window.newspackSettings.emails.sections,n=e.emails.postType,[s,i]=(0,a.useState)(e.emails.dependencies.newspackNewsletters),{wizardApiFetch:r,isFetching:c,errorMessage:p,resetError:d}=(0,w.L)("newspack-settings/emails"),[u,h]=(0,a.useState)(Object.values(e.emails.all));return!1===s?(0,l.jsxs)(a.Fragment,{children:[(0,l.jsxs)(o.$T,{isError:!0,children:[(0,t.__)("Newspack uses Newspack Newsletters to handle editing email-type content. Please activate this plugin to proceed.","newspack-plugin"),(0,l.jsx)("br",{}),(0,t.__)("Until this feature is configured, default receipts will be used.","newspack-plugin")]}),(0,l.jsx)(S,{slug:"newspack-newsletters",title:(0,t.__)("Newspack Newsletters","newspack-plugin"),description:(0,t.__)("Newspack Newsletters is the plugin that powers Newspack email receipts.","newspack-plugin"),onStatusChange:e=>{e.isLoading||i(e.isSetup)}})]}):(0,l.jsx)(a.Fragment,{children:u.map((e=>{const s="publish"===e.status,a="reader-activation"===e.category;let i=(0,t.__)("This email is not active.","newspack-plugin");return"receipt"===e.type&&(i=(0,t.__)("This email is not active. The default receipt will be used.","newspack-plugin")),"welcome"===e.type&&(i=(0,t.__)("This email is not active. The receipt template will be used if active.","newspack-plugin")),(0,l.jsx)(_.A,{isSmall:!0,disabled:c,title:e.label,titleLink:e.edit_link,href:e.edit_link,description:e.description,actionText:(0,t.__)("Edit","newspack-plugin"),secondaryActionText:(0,t.__)("Reset","newspack-plugin"),onSecondaryActionClick:()=>{var n;o.Wp.confirmAction((0,t.__)("Are you sure you want to reset the contents of this email?","newspack-plugin"))&&(n=e.post_id,r({path:`/newspack/v1/wizard/newspack-audience-donations/emails/${n}`,method:"DELETE"},{onSuccess(e){window.newspackSettings.emails.sections.emails.all=e,h(Object.values(e))}}))},secondaryDestructive:!0,...a?{}:{toggleChecked:s,toggleOnChange:s=>{return t=e.post_id,void r({path:`/wp/v2/${n}/${t}`,method:"POST",data:{status:a=s?"publish":"draft"}},{onStart(){d()},onSuccess(){h(u.map((e=>e.post_id===t?{...e,status:a}:e)))}});var t,a}},...s?{}:{notification:i,notificationLevel:"info"},children:p&&(0,l.jsx)(o.$T,{noticeText:p||(0,t.__)("Something went wrong.","newspack-plugin"),isError:!0})},e.post_id)}))})},{plugins:L,analytics:M}=window.newspackSettings.connections.sections,P={jetpack:{slug:"jetpack",title:(0,t.__)("Jetpack","newspack-plugin"),editLink:"admin.php?page=jetpack#/settings"},"google-site-kit":{slug:"google-site-kit",editLink:M.editLink,title:(0,t.__)("Site Kit by Google","newspack-plugin"),statusDescription:{notConfigured:(0,t.__)("Not connected for this user","newspack-plugin")}},everlit:{slug:"everlit",editLink:"admin.php?page=everlit_settings",title:(0,t.__)("Everlit","newspack-plugin"),subTitle:(0,t.__)("AI-Generated Audio Stories","newspack-plugin"),description:(0,l.jsxs)(l.Fragment,{children:[(0,t.__)("Complete setup and licensing agreement to unlock 5 free audio stories per month.","newspack-plugin")," ",(0,l.jsx)("a",{href:"https://everlit.audio/",target:"_blank",rel:"noreferrer",children:(0,t.__)("Learn more","newspack-plugin")})]}),statusDescription:{uninstalled:(0,t.__)("Not installed.","newspack-plugin"),inactive:(0,t.__)("Inactive.","newspack-plugin"),notConfigured:(0,t.__)("Pending.","newspack-plugin")}}},F=function(){const e=Object.keys(P).reduce(((e,n)=>{var s;return e[n]={...P[n],isEnabled:null===(s=L.enabled?.[n])||void 0===s||s},e}),{});return(0,l.jsx)(a.Fragment,{children:Object.keys(e).map((n=>e[n].isEnabled&&(0,l.jsx)(S,{...e[n]},n)))})},N={"/newspack/v1/webhooks/endpoints":"GET"};var I=s(5573);const z=(0,l.jsx)(I.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,l.jsx)(I.Path,{d:"M7 7.2h8.2L13.5 9l1.1 1.1 3.6-3.6-3.5-4-1.1 1 1.9 2.3H7c-.9 0-1.7.3-2.3.9-1.4 1.5-1.4 4.2-1.4 5.6v.2h1.5v-.3c0-1.1 0-3.5 1-4.5.3-.3.7-.5 1.2-.5zm13.8 4V11h-1.5v.3c0 1.1 0 3.5-1 4.5-.3.3-.7.5-1.3.5H8.8l1.7-1.7-1.1-1.1L5.9 17l3.5 4 1.1-1-1.9-2.3H17c.9 0 1.7-.3 2.3-.9 1.5-1.4 1.5-4.2 1.5-5.6z"})});var O=s(8351);const V=(0,l.jsx)(I.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,l.jsx)(I.Path,{d:"m13.06 12 6.47-6.47-1.06-1.06L12 10.94 5.53 4.47 4.47 5.53 10.94 12l-6.47 6.47 1.06 1.06L12 13.06l6.47 6.47 1.06-1.06L13.06 12Z"})});var H=s(9214);function $(e){let n=e.slice(8);return e.length>45&&(n=`${e.slice(8,38)}...${e.slice(-10)}`),n}function D(e){const{label:n,url:s}=e;return n||$(s)}function B(e){const{label:n,url:s}=e;return(0,l.jsxs)(a.Fragment,{children:[n&&(0,l.jsxs)("span",{className:"newspack-webhooks__endpoint__label",children:[n,":"," "]}),(0,l.jsx)("span",{className:"newspack-webhooks__endpoint__url",children:$(s)})]})}function R(e){return e.requests.some((e=>e.errors.length))}function G(e){if(!e)return(0,t.__)("URL is required.","newspack-plugin");try{return"https:"!==new URL(e).protocol&&(0,t.__)("HTTPS protocol is required for the endpoint URL.","newspack-plugin")}catch(e){return(0,t.__)("Invalid URL format.","newspack-plugin")}}var q=s(8558),U=s(8169);const Z=function({endpoint:e,disabled:n,isSystem:s,setAction:i}){const[o,r]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{r(!1)}),[n]),(0,l.jsxs)(a.Fragment,{children:[(0,l.jsx)(p.Button,{className:o?"popover-active":"",onClick:()=>r(!o),icon:U.A,disabled:n,label:(0,t.__)("Endpoint Actions","newspack-plugin"),tooltipPosition:"bottom left"}),o&&(0,l.jsxs)(p.Popover,{position:"bottom left",onFocusOutside:()=>r(!1),onKeyDown:e=>q.ESCAPE===e.keyCode&&r(!1),children:[(0,l.jsx)(p.MenuItem,{onClick:()=>r(!1),className:"screen-reader-text",children:(0,t.__)("Close Endpoint Actions","newspack-plugin")}),(0,l.jsx)(p.MenuItem,{onClick:()=>i("view",e.id),className:"newspack-button",children:(0,t.__)("View Requests","newspack-plugin")}),!s&&(0,l.jsx)(p.MenuItem,{onClick:()=>i("edit",e.id),className:"newspack-button",children:(0,t.__)("Edit","newspack-plugin")}),!s&&(0,l.jsx)(p.MenuItem,{onClick:()=>i("delete",e.id),className:"newspack-button",isDestructive:!0,children:(0,t.__)("Remove","newspack-plugin")})]})]})},Y=function({endpoint:e,setAction:n}){return(0,l.jsx)(_.A,{isMedium:!0,className:"newspack-webhooks__endpoint mt16",toggleChecked:!e.disabled,toggleOnChange:()=>n("toggle",e.id),title:B(e),description:()=>e.disabled&&e.disabled_error?`${(0,t.__)("Endpoint disabled due to error","newspack-plugin")}: ${e.disabled_error}`:(0,l.jsxs)(a.Fragment,{children:[(0,t.__)("Actions:","newspack-plugin")," ",e.actions.map((e=>(0,l.jsx)("span",{className:"newspack-webhooks__endpoint-action",children:e},e)))]}),actionText:(0,l.jsx)(Z,{endpoint:e,setAction:n,isSystem:e.system})},e.id)};var K=s(6154),W=s.n(K);const X=({endpoint:e,setAction:n})=>(0,l.jsxs)(o.aF,{title:(0,t.__)("Latest Requests","newspack-plugin"),onRequestClose:()=>n(null,e.id),children:[(0,l.jsx)("p",{children:(0,t.sprintf)(
// translators: %s is the endpoint title (shortened URL).
// translators: %s is the endpoint title (shortened URL).
(0,t.__)("Most recent requests for %s","newspack-plugin"),D(e))}),e.requests.length>0?(0,l.jsxs)("table",{className:"newspack-webhooks__requests "+(R(e)?"has-error":""),children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{}),(0,l.jsx)("th",{colSpan:2,children:(0,t.__)("Action","newspack-plugin")}),R(e)&&(0,l.jsx)("th",{colSpan:2,children:(0,t.__)("Error","newspack-plugin")})]}),e.requests.map((n=>{return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:`status status--${n.status}`,children:(0,l.jsx)(p.Icon,{icon:(s=n.status,{pending:z,finished:O.A,killed:V}[s]||H.A)})}),(0,l.jsx)("td",{className:"action-name",children:n.action_name}),(0,l.jsx)("td",{className:"scheduled",children:"pending"===n.status?(0,t.sprintf)(
// translators: %s is a human-readable time difference.
// translators: %s is a human-readable time difference.
(0,t.__)("sending in %s","newspack-plugin"),W()(1e3*parseInt(n.scheduled)).fromNow(!0)):(0,t.sprintf)(
// translators: %s is a human-readable time difference.
// translators: %s is a human-readable time difference.
(0,t.__)("processed %s","newspack-plugin"),W()(1e3*parseInt(n.scheduled)).fromNow())}),R(e)&&(0,l.jsxs)(a.Fragment,{children:[(0,l.jsx)("td",{className:"error",children:n.errors&&n.errors.length>0?n.errors[n.errors.length-1]:"--"}),(0,l.jsx)("td",{children:(0,l.jsx)("span",{className:"error-count",children:(0,t.sprintf)(
// translators: %s is the number of errors.
// translators: %s is the number of errors.
(0,t.__)("Attempt #%s","newspack-plugin"),n.errors.length)})})]})]},n.id);var s}))]}):(0,l.jsx)(o.$T,{noticeText:(0,t.__)("This endpoint hasn't received any requests yet.","newspack-plugin")})]}),J=({...e})=>(0,l.jsx)(p.CheckboxControl,{...e}),Q=({endpoint:e,actions:n,errorMessage:s=null,inFlight:i=!1,setError:r,setAction:c,setEndpoints:d,wizardApiFetch:u})=>{var _;const[g,m]=(0,a.useState)(e),[w,k]=(0,a.useState)({}),x=(0,a.useRef)(null);return(0,a.useEffect)((()=>{s&&x?.current?.querySelector(".components-modal__content")?.scrollTo({top:0,left:0,behavior:"smooth"})}),[s]),(0,l.jsx)(a.Fragment,{children:(0,l.jsxs)(o.aF,{ref:x,title:(0,t.__)("Webhook Endpoint","newspack-plugin"),onRequestClose:()=>{c(null,e.id)},children:[s&&(0,l.jsx)(o.$T,{isError:!0,noticeText:s}),!0===g.disabled&&(0,l.jsx)(o.$T,{noticeText:(0,t.__)("This webhook endpoint is currently disabled.","newspack-plugin")}),g.disabled&&g.disabled_error&&(0,l.jsx)(o.$T,{isError:!0,noticeText:(0,t.__)("Request Error: ","newspack-plugin")+g.disabled_error}),w.success&&(0,l.jsx)(o.$T,{isSuccess:!0,noticeText:`${w.message}: ${w.code}`}),(0,l.jsxs)(o.xA,{columns:1,gutter:16,className:"mt0",children:[(0,l.jsx)(p.TextControl,{label:(0,t.__)("URL","newspack-plugin"),help:(0,t.__)("The URL to send requests to. It's required for the URL to be under a valid TLS/SSL certificate. You can use the test button below to verify the endpoint response.","newspack-plugin"),className:"code",value:g.url,onChange:e=>m({...g,url:e}),disabled:i}),(0,l.jsx)(p.TextControl,{label:(0,t.__)("Authentication token (optional)","newspack-plugin"),help:(0,t.__)("If your endpoint requires a token authentication, enter it here. It will be sent as a Bearer token in the Authorization header.","newspack-plugin"),value:null!==(_=g.bearer_token)&&void 0!==_?_:"",onChange:e=>m({...g,bearer_token:e}),disabled:i}),(0,l.jsx)(o.Zp,{buttonsCard:!0,noBorder:!0,className:"justify-end",children:(0,l.jsx)(o.$n,{variant:"secondary",disabled:i||!g.url,onClick:()=>function(e,n){const s=G(e);s?r(s):u({path:"/newspack/v1/webhooks/endpoints/test",method:"POST",data:{url:e,bearer_token:n}},{onStart(){r(null),k({})},onSuccess(e){e.success?k(e):r(new h.Ss(`${e.code?`${e.code}: `:""}${e.message}`,e.code,"endpoint_test"))}})}(g.url,g.bearer_token),children:(0,t.__)("Send a test request","newspack-plugin")})})]}),(0,l.jsx)("hr",{}),(0,l.jsx)(p.TextControl,{label:(0,t.__)("Label (optional)","newspack-plugin"),help:(0,t.__)("A label to help you identify this endpoint. It will not be sent to the endpoint.","newspack-plugin"),value:g.label,onChange:e=>m({...g,label:e}),disabled:i}),(0,l.jsxs)(o.xA,{columns:1,gutter:16,children:[(0,l.jsx)("h3",{children:(0,t.__)("Actions","newspack-plugin")}),n.length>0&&(0,l.jsxs)(a.Fragment,{children:[(0,l.jsx)("p",{children:(0,t.__)("Select which actions should trigger this endpoint:","newspack-plugin")}),(0,l.jsx)(o.xA,{columns:2,gutter:16,children:n.map(((e,n)=>(0,l.jsx)(J,{disabled:i,label:e,checked:g.actions&&g.actions.includes(e)||!1,onChange:()=>{const n=g.actions||[];n.includes(e)?n.splice(n.indexOf(e),1):n.push(e),m({...g,actions:n})}},n)))})]}),(0,l.jsx)(o.Zp,{buttonsCard:!0,noBorder:!0,className:"justify-end",children:(0,l.jsx)(o.$n,{isPrimary:!0,onClick:()=>{null!==g&&"url"in g&&function(e){const n=function(e){const n=[],s=G(e.url);return s&&n.push(s),e.actions&&e.actions.length||n.push((0,t.__)("At least one action is required.","newspack-plugin")),n}(e);n.length?r(n.join(" ")):(r(null),u({path:`/newspack/v1/webhooks/endpoints/${e.id||""}`,method:"POST",data:e,updateCacheKey:N},{onSuccess:n=>{return s=e.id,d(n),void c(null,s);var s}}))}(g)},disabled:i||null===g,children:(0,t.__)("Save","newspack-plugin")})})]})]})})},ee=function({disabled:e,onConfirm:n,onClose:s,title:a,description:i}){return(0,l.jsxs)(o.aF,{title:a,onRequestClose:s,children:[(0,l.jsx)("p",{children:i}),(0,l.jsxs)(o.Zp,{buttonsCard:!0,noBorder:!0,className:"justify-end",children:[(0,l.jsx)(o.$n,{variant:"secondary",onClick:s,disabled:e,children:(0,t.__)("Cancel","newspack-plugin")}),(0,l.jsx)(o.$n,{variant:"primary",onClick:n,disabled:e,children:(0,t.__)("Confirm","newspack-plugin")})]})]})},ne=({endpoint:e,actions:n,action:s=null,errorMessage:i=null,inFlight:o=!1,setAction:r,setError:c,setEndpoints:p,wizardApiFetch:d})=>{const u=(e,n)=>{p(n),r(null,e)};return(0,l.jsxs)(a.Fragment,{children:["delete"===s&&(0,l.jsx)(ee,{title:(0,t.__)("Remove Endpoint","newspack-plugin"),description:(0,t.sprintf)(/* translators: %s: endpoint title */ /* translators: %s: endpoint title */
(0,t.__)("Are you sure you want to remove the endpoint %s?","newspack-plugin"),`"${$(e.url)}"`),onClose:()=>r(null,e.id),onConfirm:()=>{var n;d({path:`/newspack/v1/webhooks/endpoints/${(n=e).id}`,method:"DELETE",updateCacheKey:N},{onSuccess:e=>u(n.id,e)})},disabled:o}),"toggle"===s&&(0,l.jsx)(ee,{title:e.disabled?(0,t.__)("Enable Endpoint","newspack-plugin"):(0,t.__)("Disable Endpoint","newspack-plugin"),description:e.disabled?(0,t.sprintf)(/* translators: %s: endpoint title */ /* translators: %s: endpoint title */
(0,t.__)("Are you sure you want to enable the endpoint %s?","newspack-plugin"),`"${$(e.url)}"`):(0,t.sprintf)(/* translators: %s: endpoint title */ /* translators: %s: endpoint title */
(0,t.__)("Are you sure you want to disable the endpoint %s?","newspack-plugin"),`"${$(e.url)}"`),onClose:()=>r(null,e.id),onConfirm:()=>{var n;d({path:`/newspack/v1/webhooks/endpoints/${(n=e).id}`,method:"POST",data:{disabled:!n.disabled},updateCacheKey:N},{onSuccess:e=>u(n.id,e)})},disabled:o}),"view"===s&&(0,l.jsx)(X,{action:s,actions:n,endpoint:e,inFlight:o,setAction:r,setError:c,errorMessage:i,setEndpoints:p,wizardApiFetch:d}),["edit","new"].includes(null!=s?s:"")&&(0,l.jsx)(Q,{endpoint:e,actions:n,errorMessage:i,inFlight:o,setError:c,setAction:r,setEndpoints:p,wizardApiFetch:d})]})},se={url:"",label:"",requests:[],disabled:!1,disabled_error:!1,id:0,system:"",actions:[],bearer_token:""},te=function(){const{setError:e,resetError:n,errorMessage:s,wizardApiFetch:i,isFetching:r}=(0,w.L)("/newspack-settings/connections/webhooks"),[c,p]=(0,a.useState)(null),[d,u]=(0,a.useState)([]),[_,h]=(0,a.useState)(null),[g,m]=(0,a.useState)(null);function k(e,s){n(),p(e),null===e?m(null):"new"===e?(n(),m({...se})):_&&["edit","delete","view","toggle"].includes(e)&&m(_.find((e=>e.id===s))||null)}return(0,a.useEffect)((()=>{i({path:"/newspack/v1/data-events/actions"},{onSuccess:e=>u(e)}),i({path:"/newspack/v1/webhooks/endpoints"},{onSuccess:e=>h(e)})}),[]),(0,l.jsxs)(o.Zp,{noBorder:!0,className:"newspack-webhooks",children:[(0,l.jsxs)("div",{className:"flex justify-between items-end mb4",children:[(0,l.jsx)(o.X3,{title:(0,t.__)("Webhook Endpoints","newspack-plugin"),heading:3,description:(0,t.__)("Register webhook endpoints to integrate reader activity data to third-party services or private APIs","newspack-plugin"),noMargin:!0}),(0,l.jsx)(o.$n,{variant:"primary",onClick:()=>k("new"),disabled:r,children:r?(0,t.__)("Loading…","newspack-plugin"):(0,t.__)("Add New Endpoint","newspack-plugin")})]}),!r&&(_&&_.length>0?(0,l.jsx)(a.Fragment,{children:_.map((e=>(0,l.jsx)(Y,{endpoint:e,setAction:k},e.id)))}):(0,l.jsx)(o.$T,{noticeText:(0,t.__)("No endpoints found","newspack-plugin")})),g&&(0,l.jsx)(ne,{actions:d,setError:e,action:c,errorMessage:s,inFlight:r,wizardApiFetch:i,endpoint:g,setAction:k,setEndpoints:h})]})},{analytics:ae}=window.newspackSettings.connections.sections,ie=function(){return(0,l.jsx)(S,{editLink:ae.editLink,slug:"google-site-kit",title:(0,t.__)("Google Analytics","newspack-plugin"),actionText:{complete:(0,t.__)("View","newspack-plugin")}})},oe={RECAPTCHA:{SITE_KEY_EMPTY:(0,t.__)("Site Key cannot be empty!","newspack-plugin"),SITE_SECRET_EMPTY:(0,t.__)("Site Secret cannot be empty","newspack-plugin"),THRESHOLD_INVALID_MIN:(0,t.__)("Threshold cannot be less than 0.1","newspack-plugin"),THRESHOLD_INVALID_MAX:(0,t.__)("Threshold cannot be greater than 1","newspack-plugin"),VERSION_CHANGE:(0,t.__)("Your site key and secret must match the selected reCAPTCHA version. Please enter new credentials.","newspack-plugin")},CUSTOM_EVENTS:{INVALID_MEASUREMENT_ID:(0,t.__)('You need a valid Measurement ID (e.g. "G-ABCDE12345") to activate Newspack Custom Events.',"newspack-plugin"),INVALID_MEASUREMENT_PROTOCOL_SECRET:(0,t.__)("You need a valid Measurement API Secret to activate Newspack Custom Events.","newspack-plugin")}},le={threshold:"",use_captcha:!1,version:"v3",credentials:{v2_invisible:{site_key:"",site_secret:""},v3:{site_key:"",site_secret:""}}},re=new Map([["credentials",{dependsOn:{version:"v3"},callback:(e,n="v3")=>e[n].site_key?e[n].site_secret?"":oe.RECAPTCHA.SITE_SECRET_EMPTY:oe.RECAPTCHA.SITE_KEY_EMPTY}],["threshold",{dependsOn:{version:"v3"},callback:e=>{const n=parseFloat(e||"0");return n<.1?oe.RECAPTCHA.THRESHOLD_INVALID_MIN:n>1?oe.RECAPTCHA.THRESHOLD_INVALID_MAX:""}}]]),ce="/newspack/v1/recaptcha",pe=function(){const{wizardApiFetch:e,isFetching:n,errorMessage:s,setError:i,resetError:r}=(0,w.L)("/newspack-settings/connections/recaptcha"),[c,d]=(0,a.useState)({...le}),[u,h]=(0,a.useState)({...le}),g=(u.credentials||{})[u.version];function m(n,s=!1){if(r(),!s)for(const[e,n]of re){if(n.dependsOn){const[[e,s]]=Object.entries(n.dependsOn);if(u[e]!==s)continue}const s=n.callback(u[e],u.version);if(s)return void i(new f.A(s,e))}e({path:ce,method:"POST",data:n,updateCacheMethods:["GET"]},{onSuccess(e){d(e),h(e)}})}function k(e,n){h((s=>({...s,credentials:{...s.credentials,[s.version]:{...s.credentials[s.version],[e]:n}}})))}return(0,a.useEffect)((()=>{e({path:ce},{onSuccess(e){d(e),h(e)}})}),[]),(0,l.jsx)(_.A,{isMedium:!0,title:(0,t.__)("Use reCAPTCHA","newspack-plugin"),description:()=>(0,l.jsx)(a.Fragment,{children:n&&!c.use_captcha?(0,t.__)("Loading…","newspack-plugin"):(0,l.jsxs)(l.Fragment,{children:[(0,t.__)("Enabling reCAPTCHA can help protect your site against bot attacks and credit card testing.","newspack-plugin")," ",(0,l.jsx)(p.ExternalLink,{href:"https://www.google.com/recaptcha/admin/create",children:(0,t.__)("Get started","newspack-plugin")})]})}),hasGreyHeader:!!c.use_captcha,toggleChecked:!!c.use_captcha,toggleOnChange:()=>m({...c,use_captcha:!c.use_captcha},!0),actionContent:c.use_captcha&&(0,l.jsx)(o.$n,{variant:"primary",disabled:n||!Object.keys(u).length,onClick:()=>m(u),children:n?(0,t.__)("Loading…","newspack-plugin"):(0,t.__)("Save Settings","newspack-plugin")}),error:c.use_captcha?s:null,disabled:n,children:c.use_captcha&&(0,l.jsxs)(a.Fragment,{children:[(0,l.jsx)(o.xA,{noMargin:!0,rowGap:16,children:(0,l.jsx)(p.BaseControl,{id:"recaptcha-version",label:(0,t.__)("reCAPTCHA Version","newspack-plugin"),help:(0,l.jsx)(p.ExternalLink,{href:"https://developers.google.com/recaptcha/docs/versions",children:(0,t.__)("Learn more about reCAPTCHA versions","newspack-plugin")}),children:(0,l.jsx)(o.Yq,{label:(0,t.__)("reCAPTCHA Version","newspack-plugin"),hideLabelFromVision:!0,value:u.version||"v3",onChange:e=>h({...u,version:e}),options:[{value:"v3",label:(0,t.__)("Score based (v3)","newspack-plugin")},{value:"v2_invisible",label:(0,t.__)("Challenge (v2) - invisible reCAPTCHA badge","newspack-plugin")}]})})}),(0,l.jsxs)(o.xA,{noMargin:!0,rowGap:16,children:[(0,l.jsx)(o.xt,{value:g.site_key||"",label:(0,t.__)("Site Key","newspack-plugin"),onChange:e=>k("site_key",e),disabled:n,autoComplete:"off"}),(0,l.jsx)(o.xt,{type:"password",value:g.site_secret||"",label:(0,t.__)("Site Secret","newspack-plugin"),onChange:e=>k("site_secret",e),disabled:n,autoComplete:"one-time-code"}),"v3"===u.version&&(0,l.jsx)(o.xt,{type:"number",step:"0.05",min:"0.1",max:"1",value:parseFloat(u?.threshold||"0"),label:(0,t.__)("Threshold","newspack-plugin"),onChange:e=>h({...u,threshold:e}),disabled:n,help:(0,l.jsx)(p.ExternalLink,{href:"https://developers.google.com/recaptcha/docs/v3#interpreting_the_score",children:(0,t.__)("Learn more about the threshold value","newspack-plugin")})})]})]})})};var de=s(1455),ue=s.n(de);const _e=e=>e instanceof Error&&"message"in e,he=()=>{const[e,n]=(0,a.useState)(""),[s,i]=(0,a.useState)(!1),[r,c]=(0,a.useState)({}),[d,u]=(0,a.useState)({}),_=e=>r.available_caps?r.available_caps[e]:void 0;(0,a.useEffect)((()=>{(async()=>{i(!0);try{const e=await ue()({path:"/newspack-manager/v1/jetpack-sso"});c(e),u(e)}catch(e){n(_e(e)?e.message:(0,t.__)("Error fetching settings.","newspack-plugin"))}finally{i(!1)}})()}),[]);const h=async e=>{n(""),i(!0);try{const n=await ue()({path:"/newspack-manager/v1/jetpack-sso",method:"POST",data:e});c(n),u(n)}catch(e){n(_e(e)?e.message:(0,t.__)("Error updating settings.","newspack-plugin"))}finally{i(!1)}};return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(o.Lz,{isMedium:!0,title:(0,t.__)("Force two-factor authentication","newspack-plugin"),description:()=>(0,l.jsx)(l.Fragment,{children:(0,t.__)("Improve security by requiring two-factor authentication via WordPress.com for users with higher capabilities.","newspack-plugin")}),hasGreyHeader:!!r.force_2fa,toggleChecked:!!r.force_2fa,toggleOnChange:()=>h({force_2fa:!r.force_2fa}),actionContent:r.force_2fa&&(0,l.jsx)(o.$n,{variant:"primary",disabled:s||!Object.keys(d).length,onClick:()=>h(d),children:(0,t.__)("Save Settings","newspack-plugin")}),disabled:s,children:r.force_2fa&&(0,l.jsxs)(l.Fragment,{children:[e&&(0,l.jsx)(o.$T,{isError:!0,noticeText:e}),r.jetpack_sso_force_2fa&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.$T,{isError:!0,noticeText:(0,t.__)("Two-factor authentication is currently enforced for all users via Jetpack configuration.","newspack-plugin")}),(0,l.jsx)("p",{children:(0,t.__)("Customize which capabilties to enforce 2FA by untoggling the “Require accounts to use WordPress.com Two-Step Authentication” option in Jetpack settings.","newspack-plugin")})]}),(0,l.jsx)(o.xA,{columns:1,children:(0,l.jsx)(p.BaseControl,{id:"force-2fa-cap",label:(0,t.__)("Select the user capability to enforce two-factor authentication","newspack-plugin"),children:(0,l.jsx)(o.Yq,{label:(0,t.__)("Capability","newspack-plugin"),hideLabelFromVision:!0,value:d?.force_2fa_cap||"",onChange:e=>u({...d,force_2fa_cap:e}),options:Object.keys(r.available_caps||{}).map((e=>({label:_(e),value:e})))})})}),(0,l.jsx)(o.xA,{columns:1,children:(0,l.jsx)(p.CheckboxControl,{checked:d?.obfuscate_account||!1,onChange:e=>u({...d,obfuscate_account:e}),label:(0,t.__)("Obfuscate restricted accounts by throwing WP’s “user not found” errors on login form attempts.","newspack-plugin")})})]})})})},ge=function(){const[e,n]=(0,a.useState)(!1),{wizardApiFetch:s,isFetching:i,errorMessage:r,setError:c,resetError:d}=(0,w.L)("/newspack-settings/connections/apis/mailchimp"),[u,g]=(0,a.useState)(),[m,k]=(0,a.useState)(),x=(0,a.useRef)(null),b=Boolean(u&&u.username);function f(){n(!1),k(void 0)}function v(){s({path:"/newspack/v1/oauth/mailchimp",method:"POST",data:{api_key:m},updateCacheMethods:["GET"]},{onSuccess(e){g(e),d()},onFinally(){f()}})}return(0,a.useEffect)((()=>{s({path:"/newspack/v1/oauth/mailchimp"},{onSuccess:e=>g(e)})}),[]),(0,a.useEffect)((()=>{if(e&&x.current){const[e]=x.current.getElementsByTagName("input");e&&e.focus()}}),[e]),(0,l.jsxs)(a.Fragment,{children:[(0,l.jsx)(_.A,{title:"Mailchimp",description:i?(0,t.__)("Loading…","newspack-plugin"):b?(0,t.sprintf)(/* translators: %s: username */ /* translators: %s: username */
(0,t.__)("Connected as %s","newspack-plugin"),null!==(j=u?.username)&&void 0!==j?j:{}):(0,t.__)("Not connected","newspack-plugin"),isChecked:b,actionText:(0,l.jsx)(o.$n,{variant:"link",isDestructive:b,onClick:b?function(){s({path:"/newspack/v1/oauth/mailchimp",method:"DELETE",updateCacheMethods:["GET"]},{onSuccess(e){g(e),c(new h.u(h.M1.MAILCHIMP_API_KEY_INVALID,"MAILCHIMP_API_KEY_INVALID"))}})}:function(){return n(!0)},disabled:i,children:b?(0,t.__)("Disconnect","newspack-plugin"):(0,t.__)("Connect","newspack-plugin")}),error:r,isMedium:!0}),e&&(0,l.jsxs)(o.aF,{title:(0,t.__)("Add Mailchimp API Key","newspack-plugin"),onRequestClose:f,children:[(0,l.jsx)("div",{ref:x,children:(0,l.jsxs)(o.xA,{columns:1,gutter:8,children:[(0,l.jsx)(o.xt,{placeholder:"123457103961b1f4dc0b2b2fd59c137b-us1",label:(0,t.__)("Mailchimp API Key","newspack-plugin"),hideLabelFromVision:!0,value:null!=m?m:"",onChange:e=>k(e),onKeyDown:e=>{q.ENTER===e.keyCode&&""!==m&&(e.preventDefault(),v())}}),(0,l.jsx)("p",{children:(0,l.jsx)(p.ExternalLink,{href:"https://mailchimp.com/help/about-api-keys/#Find_or_generate_your_API_key",children:(0,t.__)("Find or generate your API key","newspack-plugin")})})]})}),(0,l.jsxs)(o.Zp,{buttonsCard:!0,noBorder:!0,className:"justify-end",children:[(0,l.jsx)(o.$n,{variant:"secondary",onClick:f,children:(0,t.__)("Cancel","newspack-plugin")}),(0,l.jsx)(o.$n,{variant:"primary",disabled:!m,onClick:v,children:m?i?(0,t.__)("Connecting…","newspack-plugin"):b?(0,t.__)("Connected","newspack-plugin"):(0,t.__)("Connect","newspack-plugin"):(0,t.__)("Invalid Mailchimp API Key.","newspack")})]})]})]});var j};var me=s(7896);let{customEvents:we}=window.newspackSettings.connections.sections;const ke=function(){const[e,n]=(0,a.useState)(we),{wizardApiFetch:s,errorMessage:i,resetError:r,setError:c}=(0,w.L)("newspack-settings/connections/custom-events");function p(){return!e.measurement_id&&!e.measurement_protocol_secret}return(0,a.useEffect)((()=>{p()?r():function(e=""){return/^G-[A-Za-z0-9]{10,}$/.test(e)}(e.measurement_id)?e.measurement_protocol_secret?r():c(new h.u(oe.CUSTOM_EVENTS.INVALID_MEASUREMENT_PROTOCOL_SECRET,"ga4_invalid_measurement_protocol_secret")):c(new h.u(oe.CUSTOM_EVENTS.INVALID_MEASUREMENT_ID,"ga4_invalid_measurement_id"))}),[e.measurement_id,e.measurement_protocol_secret]),(0,l.jsxs)("div",{className:"newspack__analytics-configuration",children:[(0,l.jsx)("div",{className:"newspack__analytics-configuration__header",children:(0,l.jsx)("p",{children:(0,t.__)("Newspack already sends some custom event data to your GA account, but adding the credentials below enables enhanced events that are fired from your site's backend. For example, when a donation is confirmed or when a user successfully subscribes to a newsletter.","newspack-plugin")})}),(0,l.jsxs)(o.xA,{noMargin:!0,rowGap:16,children:[(0,l.jsx)(o.xt,{value:e.measurement_id,label:(0,t.__)("Measurement ID","newspack-plugin"),help:(0,t.__)("You can find this in Site Kit Settings, or in Google Analytics > Admin > Data Streams and clickng the data stream. Example: G-ABCDE12345","newspack-plugin"),onChange:s=>n({...e,measurement_id:s}),autoComplete:"off"}),(0,l.jsx)(o.xt,{type:"password",value:e.measurement_protocol_secret,label:(0,t.__)("Measurement Protocol API Secret","newspack-plugin"),help:(0,t.__)('Generate an API secret from your GA dashboard in Admin > Data Streams and opening your data stream. Select "Measurement Protocol API secrets" under the Events section. Create a new secret.',"newspack-plugin"),onChange:s=>n({...e,measurement_protocol_secret:s}),autoComplete:"one-time-code"})]}),i&&(0,l.jsx)(o.$T,{isError:!0,noticeText:i}),(0,l.jsx)(o.$n,{className:"mr2",variant:"primary",onClick:function(){s({path:"/newspack/v2/wizard/analytics/ga4-credentials",method:"POST",data:{measurement_id:e.measurement_id,measurement_protocol_secret:e.measurement_protocol_secret}},{onSuccess(e){we=e,n(e)}})},disabled:p()||!!i,children:(0,t.__)("Save","newspack-plugin")}),(0,l.jsx)(o.$n,{variant:"secondary",onClick:function(){o.Wp.confirmAction((0,t.__)("Are you sure you want to reset the GA4 credentials?","newspack-plugin"))&&s({path:"/newspack/v2/wizard/analytics/ga4-credentials/reset",method:"POST"},{onSuccess(e){we={measurement_id:"",measurement_protocol_secret:""},n(e)}})},disabled:p(),children:(0,t.__)("Reset","newspack-plugin")})]})},{connections:xe}=window.newspackSettings,be=function(){const{description:e,apiData:n,isFetching:s,actionText:i,apiFetchToggle:r,errorMessage:c}=function({path:e,apiNamespace:n,refreshOn:s=[],data:i,description:l}){const[r,c]=(0,a.useState)(i),[p,d]=(0,a.useState)(null),{wizardApiFetch:u,isFetching:_,errorMessage:h}=(0,w.L)(n);function g(n,i){const o="boolean"==typeof i&&i?"POST":"GET",l={path:e,method:o};n&&(l.data=n),u(l,{onSuccess:c,onFinally(){s.includes(o)&&(d((0,a.createElement)("span",{className:"gray"},(0,t.__)("Page reloading…","newspack-plugin"))),h||window.location.reload())}})}return(0,a.useEffect)((()=>{g()}),[]),{actionText:_?(0,a.createElement)(o.E$):p,apiData:r,apiFetchToggle:g,description:_?(0,t.__)("Loading…","newspack-plugin"):l,errorMessage:h,isFetching:_}}({path:"/newspack/v1/wizard/newspack-settings/syndication",apiNamespace:"newspack-settings/syndication/rss",refreshOn:["POST"],data:{module_enabled_rss:!1,"module_enabled_media-partners":!1},description:(0,t.__)("Create and manage customized RSS feeds for syndication partners","newspack-plugin")});return(0,l.jsx)(_.A,{title:(0,t.__)("RSS Enhancements","newspack"),description:e,disabled:s,actionText:i,error:c,toggleChecked:n.module_enabled_rss,toggleOnChange:e=>r({...n,module_enabled_rss:e},!0)})},fe={"publish-to-apple-news":{slug:"publish-to-apple-news",title:(0,t.__)("Publish to Apple News","newspack-plugin"),editLink:"admin.php?page=apple-news-options",isConfigurable:!0,reloadOnActivation:!1,description:(0,t.__)("Export and synchronize posts to Apple format.","newspack-plugin")},distributor:{slug:"distributor",title:(0,t.__)("Distributor","newspack-plugin"),editLink:"admin.php?page=distributor",reloadOnActivation:!1,description:(0,t.__)("Distributor is a WordPress plugin that makes it easy to syndicate and reuse content across your websites — whether in a single multisite or across the web.","newspack-plugin")}},ve=function(){return(0,l.jsx)(a.Fragment,{children:Object.keys(fe).map((e=>(0,l.jsx)(S,{isTogglable:!0,isStatusPrepended:!1,isMedium:!1,...fe[e]},e)))})};function je({data:e,update:n,isFetching:s}){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(_.A,{title:(0,t.__)("Related Posts","newspack-plugin"),badge:"Jetpack",description:()=>(0,l.jsx)(a.Fragment,{children:s?(0,t.__)("Loading…","newspack-plugin"):(0,t.__)("Automatically add related content at the bottom of each post.","newspack-plugin")}),editLink:"admin.php?page=jetpack#/traffic",actionText:(0,l.jsx)(a.Fragment,{children:s?(0,l.jsx)(o.E$,{}):(0,l.jsx)(o.$n,{variant:"link",href:"admin.php?page=jetpack#/traffic",children:(0,t.__)("Configure","newspack-plugin")})})}),e.relatedPostsEnabled&&(0,l.jsx)(o.xA,{children:(0,l.jsx)(o.Zp,{noBorder:!0,children:(0,l.jsx)(o.xt,{help:(0,t.__)("If set, posts will be shown as related content only if published within the past number of months. If 0, any published post can be shown, regardless of publish date.","newspack-plugin"),label:(0,t.__)("Maximum age of related content, in months","newspack-plugin"),onChange:e=>n({relatedPostsMaxAge:e}),placeholder:(0,t.__)("Maximum age of related content, in months","newspack-plugin"),type:"number",value:e.relatedPostsMaxAge||0})})})]})}function Ce({data:e,isFetching:n,update:s}){return(0,l.jsxs)(o.xA,{gutter:32,children:[(0,l.jsxs)(o.xA,{columns:1,gutter:16,children:[(0,l.jsx)(p.ToggleControl,{label:(0,t.__)("Author Bio","newspack-plugin"),help:(0,t.__)("Display an author bio under individual posts.","newspack-plugin"),disabled:n,checked:e.show_author_bio,onChange:e=>s({show_author_bio:e})}),e.show_author_bio&&(0,l.jsx)(p.ToggleControl,{label:(0,t.__)("Author Email","newspack-plugin"),help:(0,t.__)("Display the author email with bio on individual posts.","newspack-plugin"),disabled:n,checked:e.show_author_email,onChange:e=>s({show_author_email:e})})]}),(0,l.jsx)(o.xA,{columns:1,gutter:16,children:e.show_author_bio&&(0,l.jsx)(o.xt,{label:(0,t.__)("Length","newspack-plugin"),help:(0,t.__)("Truncates the author bio on single posts to this approximate character length, but without breaking a word. The full bio appears on the author archive page.","newspack-plugin"),type:"number",value:e.author_bio_length,onChange:e=>s({author_bio_length:e})})})]})}function Ae({data:e,update:n,postCount:s}){return(0,l.jsxs)(a.Fragment,{children:[Number(s)>1e3&&(0,l.jsx)(p.Notice,{isDismissible:!1,status:"warning",className:"ma0 mb2",children:(0,t.__)("You have more than 1000 posts. Applying these settings might take a moment.","newspack-plugin")}),(0,l.jsxs)(o.xA,{gutter:32,children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(o.Yq,{label:(0,t.__)("Featured image position for all posts","newspack-plugin"),help:(0,t.__)("Set a featured image position for all posts.","newspack-plugin"),value:e.featured_image_all_posts,options:[{label:(0,t.__)("Select to change all posts","newspack-plugin"),value:"none"},{label:(0,t.__)("Large","newspack-plugin"),value:"large"},{label:(0,t.__)("Small","newspack-plugin"),value:"small"},{label:(0,t.__)("Behind article title","newspack-plugin"),value:"behind"},{label:(0,t.__)("Beside article title","newspack-plugin"),value:"beside"},{label:(0,t.__)("Hidden","newspack-plugin"),value:"hidden"}],onChange:e=>n({featured_image_all_posts:e})}),"none"!==e.featured_image_all_posts&&(0,l.jsx)(p.Notice,{isDismissible:!1,status:"warning",className:"ma0 mt2",children:(0,t.__)("After saving the settings with this option selected, all posts will be updated. This cannot be undone.","newspack-plugin")})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(o.Yq,{label:(0,t.__)("Template for all posts","newspack-plugin"),help:(0,t.__)("Set a template for all posts.","newspack-plugin"),value:e.post_template_all_posts,options:[{label:(0,t.__)("Select to change all posts","newspack-plugin"),value:"none"},{label:(0,t.__)("With sidebar","newspack-plugin"),value:"default"},{label:(0,t.__)("One Column","newspack-plugin"),value:"single-feature.php"},{label:(0,t.__)("One Column Wide","newspack-plugin"),value:"single-wide.php"}],onChange:e=>n({post_template_all_posts:e})}),"none"!==e.post_template_all_posts&&(0,l.jsx)(p.Notice,{isDismissible:!1,status:"warning",className:"ma0 mt2",children:(0,t.__)("After saving the settings with this option selected, all posts will be updated. This cannot be undone.","newspack-plugin")})]})]})]})}function ye({data:e,update:n}){return(0,l.jsxs)(o.xA,{gutter:32,children:[(0,l.jsx)(o.Yq,{label:(0,t.__)("Default featured image position for new posts","newspack-plugin"),help:(0,t.__)("Set a default featured image position for new posts.","newspack-plugin"),value:e.featured_image_default,options:[{label:(0,t.__)("Large","newspack-plugin"),value:"large"},{label:(0,t.__)("Small","newspack-plugin"),value:"small"},{label:(0,t.__)("Behind article title","newspack-plugin"),value:"behind"},{label:(0,t.__)("Beside article title","newspack-plugin"),value:"beside"},{label:(0,t.__)("Hidden","newspack-plugin"),value:"hidden"}],onChange:e=>n({featured_image_default:e})}),(0,l.jsx)(o.Yq,{label:(0,t.__)("Default template for new posts","newspack-plugin"),help:(0,t.__)("Set a default template for new posts.","newspack-plugin"),value:e.post_template_default,options:[{label:(0,t.__)("With sidebar","newspack-plugin"),value:"default"},{label:(0,t.__)("One Column","newspack-plugin"),value:"single-feature.php"},{label:(0,t.__)("One Column Wide","newspack-plugin"),value:"single-wide.php"}],onChange:e=>n({post_template_default:e})})]})}function Se({data:e,update:n}){const[s,i]=(0,a.useState)(null);return(0,a.useEffect)((()=>{e.newspack_image_credits_placeholder_url&&i(e.newspack_image_credits_placeholder_url)}),[e.newspack_image_credits_placeholder_url]),(0,l.jsx)(a.Fragment,{children:(0,l.jsxs)(o.xA,{gutter:32,children:[(0,l.jsxs)(o.xA,{columns:1,gutter:16,children:[(0,l.jsx)(o.xt,{label:(0,t.__)("Credit Class Name","newspack-plugin"),help:(0,t.__)("A CSS class name to be applied to all image credit elements. Leave blank to display no class name.","newspack-plugin"),value:e.newspack_image_credits_class_name,onChange:e=>n({newspack_image_credits_class_name:e})}),(0,l.jsx)(o.xt,{label:(0,t.__)("Credit Label","newspack-plugin"),help:(0,t.__)("A label to prefix all media credits. Leave blank to display no prefix.","newspack-plugin"),value:e.newspack_image_credits_prefix_label,onChange:e=>n({newspack_image_credits_prefix_label:e})})]}),(0,l.jsxs)(o.xA,{columns:1,gutter:16,children:[(0,l.jsx)(o.BR,{image:s&&e.newspack_image_credits_placeholder?{url:s}:null,label:(0,t.__)("Placeholder Image","newspack-plugin"),buttonLabel:(0,t.__)("Select","newspack-plugin"),onChange:e=>{i(e?.url||null),n({newspack_image_credits_placeholder:e?.id||null,newspack_image_credits_placeholder_url:e?.url})},help:(0,t.__)("A placeholder image to be displayed in place of images without credits. If none is chosen, the image will be displayed normally whether or not it has a credit.","newspack-plugin")}),(0,l.jsx)(p.ToggleControl,{label:(0,t.__)("Auto-populate image credits","newspack-plugin"),help:(0,t.__)("Automatically populate image credits from EXIF or IPTC metadata when uploading new images.","newspack-plugin"),checked:e.newspack_image_credits_auto_populate,onChange:e=>n({newspack_image_credits_auto_populate:e})})]})]})})}const Ee=s.p+"images/scott.334f7869.png",Te=s.p+"images/sacha.adc0ee6a.png",Le=s.p+"images/nelson.0c4682be.png",Me=s.p+"images/joseph.b62a5e84.png",Pe=s.p+"images/newspack.51356748.png",Fe=s.p+"images/katharine.f0faa13b.png",Ne=({theme:e,updateTheme:n})=>(0,l.jsxs)(o.xA,{columns:3,gutter:32,children:[(0,l.jsx)(o.mi,{cardTitle:"Newspack",image:Pe,url:"//newspack.newspackstaging.com",isActive:"newspack-theme"===e,onClick:()=>n("newspack-theme"),id:"card--newspack-theme"}),(0,l.jsx)(o.mi,{cardTitle:"Scott",image:Ee,url:"//scott.newspackstaging.com",isActive:"newspack-scott"===e,onClick:()=>n("newspack-scott"),id:"card--newspack-scott"}),(0,l.jsx)(o.mi,{cardTitle:"Nelson",image:Le,url:"//nelson.newspackstaging.com",isActive:"newspack-nelson"===e,onClick:()=>n("newspack-nelson"),id:"card--newspack-nelson"}),(0,l.jsx)(o.mi,{cardTitle:"Katharine",image:Fe,url:"//katharine.newspackstaging.com",isActive:"newspack-katharine"===e,onClick:()=>n("newspack-katharine"),id:"card--newspack-katharine"}),(0,l.jsx)(o.mi,{cardTitle:"Sacha",image:Te,url:"//sacha.newspackstaging.com",isActive:"newspack-sacha"===e,onClick:()=>n("newspack-sacha"),id:"card--newspack-sacha"}),(0,l.jsx)(o.mi,{cardTitle:"Joseph",image:Me,url:"//joseph.newspackstaging.com",isActive:"newspack-joseph"===e,onClick:()=>n("newspack-joseph"),id:"card--newspack-joseph"})]}),Ie=Array.from({length:12},Object);function ze({homepagePatternIndex:e,updateHomepagePattern:n,homepagePatterns:s,isFetching:a}){const i=a&&0===s.length?Ie:s;return(0,l.jsx)(o.xA,{columns:6,gutter:16,children:i.map(((s,a)=>(0,l.jsx)(o.mi,{image:{__html:s.image},imageType:"html",isActive:a===e,onClick:()=>{n(a)},ariaLabel:`${(0,t.__)("Activate Layout","newspack-plugin")} ${a+1}`},a)))})}const Oe=(0,l.jsx)(I.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,l.jsx)(I.Path,{d:"M13 5.5H4V4h9v1.5Zm7 7H4V11h16v1.5Zm-7 7H4V18h9v1.5Z"})}),Ve=(0,l.jsx)(I.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,l.jsx)(I.Path,{d:"M7.5 5.5h9V4h-9v1.5Zm-3.5 7h16V11H4v1.5Zm3.5 7h9V18h-9v1.5Z"})}),He=(e,n)=>n.reduce(((n,s)=>{const t=s.label.indexOf("(*)")>0,a=s.label.replace(" (*)",""),i={label:a,value:a};return t&&!e||n.push(i),n}),[]),$e=[{label:"Alegreya"},{label:"Arvo"},{label:"BioRhyme"},{label:"BioRhyme Expanded (*)"},{label:"Bodoni Moda"},{label:"Cormorant"},{label:"Crimson Text"},{label:"EB Garamond"},{label:"Eczar"},{label:"Frank Ruhl Libre"},{label:"Georgia"},{label:"IBM Plex Serif"},{label:"Josefin Slab"},{label:"Inknut Antiqua"},{label:"Libre Baskerville"},{label:"Lora"},{label:"Merriweather"},{label:"Neuton"},{label:"Newsreader"},{label:"Noto Serif"},{label:"Old Standard TT (*)"},{label:"Playfair Display"},{label:"PT Serif"},{label:"Roboto Slab"},{label:"Source Serif Pro"},{label:"Spectral"}],De=[{label:"Alegreya Sans"},{label:"Archivo"},{label:"Archivo Black (*)"},{label:"Archivo Narrow (*)"},{label:"Chivo"},{label:"DM Sans"},{label:"Fira Sans"},{label:"Fira Sans Condensed (*)"},{label:"Fira Sans Extra Condensed (*)"},{label:"IBM Plex Sans"},{label:"IBM Plex Sans Condensed (*)"},{label:"Inter"},{label:"Josefin Sans"},{label:"Jost"},{label:"Karla"},{label:"Lato"},{label:"Libre Franklin"},{label:"Montserrat"},{label:"Noto Sans"},{label:"Open Sans"},{label:"Oswald (*)"},{label:"Overpass"},{label:"Poppins"},{label:"PT Sans"},{label:"Raleway"},{label:"Roboto"},{label:"Roboto Condensed (*)"},{label:"Rubik"},{label:"Source Sans Pro"},{label:"Work Sans"}],Be=[{label:"Abril Fatface (*)"},{label:"Bangers (*)"},{label:"Bebas Neue (*)"},{label:"Concert One (*)"},{label:"Fredoka One (*)"},{label:"Unica One (*)"}],Re=[{label:"Anonymous Pro"},{label:"IBM Plex Mono"},{label:"JetBrains Mono"},{label:"Inconsolata"},{label:"Overpass Mono"},{label:"PT Mono"},{label:"Source Code Pro"},{label:"Space Mono"},{label:"Roboto Mono"}],Ge=[...$e,...De,...Be,...Re],qe=[{value:"curated",label:(0,t.__)("Default","newspack-plugin")},{value:"custom",label:(0,t.__)("Custom","newspack-plugin")}],Ue=(e=!1)=>[{label:(0,t.__)("Serif","newspack-plugin"),fallback:"serif",options:$e},{label:(0,t.__)("Sans Serif","newspack-plugin"),fallback:"sans_serif",options:De},{label:(0,t.__)("Display","newspack-plugin"),fallback:"display",options:Be},{label:(0,t.__)("Monospace","newspack-plugin"),fallback:"monospace",options:Re}].map((n=>({...n,options:He(e,n.options)}))).filter((e=>e.options.length)),Ze=e=>Ge.filter((n=>!n.label.includes(e))).length>=1,Ye=e=>`//fonts.googleapis.com/css2?family=${e.replace(/\s/g,"+")}:ital,wght@0,400;0,700;1,400;1,700&display=swap`,Ke=[{value:0,label:(0,t.__)("XS","newspack-plugin")},{value:19,label:(0,t.__)("S","newspack-plugin")},{value:48,label:(0,t.__)("M","newspack-plugin")},{value:72,label:(0,t.__)("L","newspack-plugin")},{value:91,label:(0,t.__)("XL","newspack-plugin")}],We=(e,n=Ke)=>n.reduce(((n,{value:s})=>e>=s?s:n),n[0].value);function Xe({themeMods:e,updateHeader:n}){return(0,l.jsxs)(o.xA,{gutter:32,children:[(0,l.jsxs)(o.xA,{columns:1,gutter:16,children:[(0,l.jsxs)(o.xA,{gutter:16,className:"newspack-design__header__style-size",children:[(0,l.jsx)(o.Yq,{className:"icon-only",label:(0,t.__)("Style","newspack"),value:e.header_center_logo?"center":"left",onChange:s=>n({...e,header_center_logo:"center"===s}),buttonOptions:[{value:"left",icon:Oe},{value:"center",icon:Ve}]}),(0,l.jsx)(o.Yq,{className:"icon-only",label:(0,t.__)("Size","newspack"),value:e.header_simplified?"small":"large",onChange:s=>n({...e,header_simplified:"small"===s}),buttonOptions:[{value:"small",label:"S"},{value:"large",label:"L"}]})]}),(0,l.jsx)(p.ToggleControl,{checked:Boolean(e.header_solid_background),onChange:s=>n({...e,header_solid_background:s}),label:(0,t.__)("Apply a background color to the header","newspack")}),e.header_solid_background&&(0,l.jsx)(o.sk,{label:(0,t.__)("Background color"),color:e.header_color_hex,onChange:s=>n({...e,header_color_hex:s})})]}),(0,l.jsxs)(o.xA,{columns:1,gutter:16,children:[(0,l.jsx)(o.BR,{className:"newspack-design__header__logo",style:{backgroundColor:e.header_solid_background?e.header_color_hex:"transparent"},label:(0,t.__)("Logo","newspack"),image:e.custom_logo,onChange:s=>n({...e,custom_logo:s,header_text:!s,header_display_tagline:!s})}),e.custom_logo&&(0,l.jsx)(o.Yq,{className:"icon-only",label:(0,t.__)("Logo Size","newspack"),value:We(e.logo_size),onChange:s=>n({...e,logo_size:s}),buttonOptions:Ke})]})]})}function Je({themeMods:e,onUpdate:n}){function s(s){n({...e,...s})}return(0,l.jsxs)(o.xA,{gutter:32,children:[(0,l.jsxs)(o.xA,{columns:1,gutter:16,children:[(0,l.jsx)(o.xt,{label:(0,t.__)("Copyright information","newspack"),value:e.footer_copyright||"",onChange:e=>s({footer_copyright:e})}),(0,l.jsx)(p.ToggleControl,{checked:"default"!==e.footer_color,onChange:e=>s({footer_color:e?"custom":"default"}),label:(0,t.__)("Apply a background color to the footer","newspack")}),"custom"===e.footer_color&&(0,l.jsx)(o.sk,{label:(0,t.__)("Background color"),color:e.footer_color_hex,onChange:e=>s({footer_color_hex:e})})]}),(0,l.jsxs)(o.xA,{columns:1,gutter:16,children:[(0,l.jsx)(o.BR,{className:"newspack-design__footer__logo",label:(0,t.__)("Alternative Logo","newspack"),help:(0,t.__)("Optional alternative logo to be displayed in the footer.","newspack"),style:{backgroundColor:"custom"===e.footer_color&&e.footer_color_hex?e.footer_color_hex:"transparent"},image:e.newspack_footer_logo,onChange:e=>s({newspack_footer_logo:e})}),e.newspack_footer_logo&&(0,l.jsx)(o.Yq,{className:"icon-only",label:(0,t.__)("Alternative logo - Size","newspack"),value:e.footer_logo_size,onChange:e=>s({footer_logo_size:e}),buttonOptions:[{value:"small",label:"S"},{value:"medium",label:"M"},{value:"large",label:"L"},{value:"xlarge",label:"XL"}]})]})]})}function Qe({themeMods:e,updateColors:n}){return(0,l.jsxs)(o.xA,{gutter:32,children:[(0,l.jsx)(o.sk,{label:(0,t.__)("Primary","newspack-plugin"),color:e.primary_color_hex,onChange:s=>n({...e,primary_color_hex:s,theme_colors:"custom"})}),(0,l.jsx)(o.sk,{label:(0,t.__)("Secondary","newspack-plugin"),color:e.secondary_color_hex,onChange:s=>n({...e,secondary_color_hex:s,theme_colors:"custom"})})]})}function en({data:e,isFetching:n,update:s}){const[i,r]=(0,a.useState)(null);function c(n,t){n instanceof Object?s({...e,...n}):void 0!==t&&s({...e,[n]:t})}(0,a.useEffect)((()=>{i||e.font_body&&e.font_header&&r(function(){const{font_header:n,font_body:s}=e;return n&&!Ze(n)||s&&!Ze(s)?qe[1].value:qe[0].value}())}),[e.font_body,e.font_body]);const d=n=>{var s;const a="headings"===n,i=a?(0,t.__)("Headings","newspack-plugin"):(0,t.__)("Body","newspack-plugin");return(0,l.jsxs)(o.xA,{columns:1,gutter:16,children:[(0,l.jsx)(p.TextareaControl,{label:i+" - "+(0,t.__)("Font provider import code or URL","newspack-plugin"),placeholder:"https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,700;1,400;1,700&display=swap",value:null!==(s=a?e.custom_font_import_code:e.custom_font_import_code_alternate)&&void 0!==s?s:"",onChange:e=>{c(a?"custom_font_import_code":"custom_font_import_code_alternate",e)},rows:3}),(0,l.jsx)(o.xt,{label:i+" - "+(0,t.__)("Font name","newspack-plugin"),value:a?e.font_header:e.font_body,onChange:e=>{c(a?"font_header":"font_body",e)}}),(0,l.jsx)(o.Yq,{label:i+" - "+(0,t.__)("Font fallback stack","newspack-plugin"),options:[{value:"serif",label:(0,t.__)("Serif","newspack-plugin")},{value:"sans-serif",label:(0,t.__)("Sans Serif","newspack-plugin")},{value:"display",label:(0,t.__)("Display","newspack-plugin")},{value:"monospace",label:(0,t.__)("Monospace","newspack-plugin")}],value:a?e.font_header_stack:e.font_body_stack,onChange:e=>c(a?"font_header_stack":"font_body_stack",e)})]})};return(0,l.jsxs)(o.xA,{columns:1,gutter:16,children:[(0,l.jsx)(o.Yq,{label:(0,t.__)("Typography Options","newspack-plugin"),hideLabelFromVision:!0,disabled:!0,value:i||"curated",onChange:r,buttonOptions:n?[{label:(0,t.__)("Loading…","newspack-plugin"),value:null}]:qe}),(0,l.jsx)(o.xA,{gutter:32,children:"curated"===i||null===i?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.Yq,{label:(0,t.__)("Headings","newspack-plugin"),optgroups:Ue(!0),value:e.font_header,onChange:(e,n)=>{c({font_header:e,custom_font_import_code:Ye(e),font_header_stack:n?.fallback})}}),(0,l.jsx)(o.Yq,{label:(0,t.__)("Body","newspack-plugin"),optgroups:Ue(),value:e.font_body,onChange:(e,n)=>{c({font_body:e,custom_font_import_code_alternate:Ye(e),font_body_stack:n?.fallback})}})]}):(0,l.jsxs)(l.Fragment,{children:[d("headings"),d("body")]})}),(0,l.jsx)(p.ToggleControl,{checked:e.accent_allcaps,onChange:e=>c("accent_allcaps",e),label:(0,t.__)("Use all-caps for accent text","newspack-plugin")})]})}const{useHistory:nn}=o.Ix,sn={etc:{post_count:"0"},theme:"newspack-theme",homepage_patterns:[],theme_mods:{...b}},tn=window.newspackSettings,an={connections:function(){return(0,l.jsxs)(c.A,{title:(0,t.__)("Connections","newspack-plugin"),children:[(0,l.jsx)(u.A,{title:(0,t.__)("Plugins","newspack-plugin"),children:(0,l.jsx)(F,{})}),(0,l.jsxs)(u.A,{title:(0,t.__)("APIs","newspack-plugin"),children:[xe.sections.apis.dependencies?.googleOAuth&&(0,l.jsx)(me.A,{}),(0,l.jsx)(ge,{})]}),xe.sections.jetpack_sso.dependencies?.jetpack_sso?(0,l.jsx)(u.A,{title:(0,t.__)("Jetpack SSO","newspack-plugin"),children:(0,l.jsx)(he,{})}):null,(0,l.jsx)(u.A,{scrollToAnchor:"newspack-settings-recaptcha",title:(0,t.__)("reCAPTCHA","newspack-plugin"),children:(0,l.jsx)(pe,{})}),(0,l.jsx)(u.A,{children:(0,l.jsx)(te,{})}),(0,l.jsx)(u.A,{title:(0,t.__)("Analytics","newspack-plugin"),children:(0,l.jsx)(ie,{})}),(0,l.jsx)(u.A,{title:(0,t.__)("Activate Newspack Custom Events","newspack-plugin"),description:(0,t.__)("Allows Newspack to send enhanced custom event data to your Google Analytics.","newspack-plugin"),children:(0,l.jsx)(ke,{})})]})},social:function(){return(0,l.jsxs)("div",{className:"newspack-wizard__sections",children:[(0,l.jsx)("h1",{children:(0,t.__)("Social","newspack-plugin")}),(0,l.jsxs)(u.A,{children:[(0,l.jsx)(E,{}),(0,l.jsx)(C,{}),(0,l.jsx)(j,{})]})]})},emails:function(){return(0,l.jsx)(c.A,{title:(0,t.__)("Emails","newspack-plugin"),children:(0,l.jsx)(u.A,{children:(0,l.jsx)(T,{})})})},syndication:function(){return(0,l.jsx)(c.A,{title:(0,t.__)("Syndication","newspack-plugin"),children:(0,l.jsxs)(u.A,{children:[(0,l.jsx)(be,{}),(0,l.jsx)(ve,{})]})})},seo:function(){const{wizardApiFetch:e,isFetching:n}=(0,w.L)("newspack-settings/seo"),[s,p]=(0,a.useState)({under_construction:!1,urls:{facebook:"",twitter:"",instagram:"",youtube:"",linkedin:"",pinterest:""},verification:{bing:"",google:""}}),h=m([["google","isId",{message:(0,t.__)("Invalid Google verification code!","newspack-plugin")}],["bing",e=>/^[A-Fa-f0-9_-]*$/.test(e)?"":(0,t.__)("Invalid Bing verification code!","newspack-plugin")]],s.verification),g=m(i.map((([e,n,s,a])=>[e,null!=a?a:"isUrl",a?{}:{message:(0,t.sprintf)(/* translators: %1$s: label, %2$s: placeholder */ /* translators: %1$s: label, %2$s: placeholder */
(0,t.__)('Invalid URL for "%1$s", correct format is "%2$s"',"newspack-plugin"),n,s)}]),[]),s.urls);return(0,a.useEffect)((function(){e({path:k},{onSuccess:e=>p(e)})}),[]),(0,l.jsxs)(c.A,{title:(0,t.__)("SEO","newspack-plugin"),className:n?"is-fetching":"",children:[(0,l.jsxs)(u.A,{title:(0,t.__)("Webmaster Tools","newspack-plugin"),description:(0,t.__)("Add verification meta tags to your site","newspack-plugin"),children:[h.errorMessage&&(0,l.jsx)(o.$T,{isError:!0,noticeText:h.errorMessage}),(0,l.jsx)(d,{setData:e=>p({...s,verification:e}),data:s.verification})]}),(0,l.jsxs)(u.A,{title:(0,t.__)("Social Accounts","newspack-plugin"),description:(0,t.__)("Let search engines know which social profiles are associated to your site","newspack-plugin"),children:[g.errorMessage&&(0,l.jsx)(o.$T,{isError:!0,noticeText:g.errorMessage}),(0,l.jsx)(r,{setData:e=>p({...s,urls:e}),data:s.urls})]}),(0,l.jsx)(u.A,{children:(0,l.jsx)(_.A,{isMedium:!0,disabled:n,toggleChecked:s.under_construction,title:(0,t.__)("Under construction","newspack"),toggleOnChange:e=>p({...s,under_construction:e}),description:(0,t.__)("Discourage search engines from indexing this site.","newspack")})}),(0,l.jsx)("div",{className:"newspack-buttons-card",children:(0,l.jsx)(o.$n,{isPrimary:!0,onClick:function(){const n=h.isInputsValid(),t=g.isInputsValid();n&&t&&e({path:k,method:"POST",updateCacheMethods:["GET"],data:s},{onSuccess:e=>p(e)})},disabled:n,children:n?(0,t.__)("Loading…","newspack-plugin"):(0,t.__)("Save Settings","newspack-plugin")})})]})},"theme-and-brand":({isPartOfSetup:e=!1})=>{const{wizardApiFetch:n,isFetching:s}=(0,w.L)("newspack-settings/theme-mods"),[i,r]=(0,a.useState)(sn),p=nn();function d(e){r({...i,...e})}const _=()=>{n({data:i,path:"/newspack/v1/wizard/newspack-setup-wizard/complete",method:"POST",updateCacheMethods:["GET"]},{onSuccess:e=>{d(e),p.push("/completed")}})};async function h(){return new Promise((e=>n({data:i,path:"/newspack/v1/wizard/newspack-setup-wizard/theme",method:"POST",updateCacheMethods:["GET"]},{onSuccess:n=>{d(n),e(n)}})))}return(0,a.useEffect)((()=>{n({path:"/newspack/v1/wizard/newspack-setup-wizard/theme"},{onSuccess:d})}),[]),(0,l.jsxs)(c.A,{title:(0,t.__)("Theme and Brand","newspack-plugin"),isFetching:s,children:[!e&&(0,l.jsx)(a.Fragment,{children:(0,l.jsx)(u.A,{title:(0,t.__)("Theme","newspack-plugin"),description:(0,t.__)("Update your sites theme.","newspack-plugin"),children:(0,l.jsx)(Ne,{theme:s?"":i.theme||"newspack-theme",updateTheme:e=>d({...i,theme:e})})})}),e&&(0,l.jsx)(u.A,{title:(0,t.__)("Homepage","newspack-plugin"),description:(0,t.__)("Select a homepage layout.","newspack-plugin"),children:(0,l.jsx)(ze,{isFetching:s,homepagePatternIndex:i.theme_mods.homepage_pattern_index,homepagePatterns:i.homepage_patterns,updateHomepagePattern:e=>{d({...i,theme_mods:{...i.theme_mods,homepage_pattern_index:e}})}})}),(0,l.jsx)(u.A,{title:(0,t.__)("Colors","newspack-plugin"),description:(0,t.__)("Pick your primary and secondary colors.","newspack-plugin"),children:(0,l.jsx)(Qe,{themeMods:i.theme_mods,updateColors:e=>{d({...i,theme_mods:e})}})}),(0,l.jsx)(u.A,{title:(0,t.__)("Typography","newspack-plugin"),description:(0,t.__)("Define the font pairing to use throughout your site","newspack-plugin"),children:(0,l.jsx)(en,{data:i.theme_mods,isFetching:s,update:e=>{d({...i,theme_mods:e})}})}),(0,l.jsx)(u.A,{title:(0,t.__)("Header","newspack-plugin"),description:(0,t.__)("Update the header and add your logo.","newspack-plugin"),children:(0,l.jsx)(Xe,{themeMods:i.theme_mods,updateHeader:e=>{d({...i,theme_mods:e})}})}),(0,l.jsx)(u.A,{title:(0,t.__)("Footer","newspack-plugin"),description:(0,t.__)("Personalize the footer of your site.","newspack-plugin"),children:(0,l.jsx)(Je,{themeMods:i.theme_mods,onUpdate:e=>{d({...i,theme_mods:e})}})}),(0,l.jsx)("div",{className:"newspack-buttons-card",children:e?(0,l.jsx)(o.$n,{variant:"primary",onClick:()=>h().then(_),children:(0,t.__)("Finish","newspack-plugin")}):(0,l.jsx)(o.$n,{variant:"primary",onClick:h,children:(0,t.__)("Save","newspack-plugin")})})]})},"display-settings":function(){const[e,n]=o.JL.useObjectState({...b}),[s,i]=o.JL.useObjectState({post_count:"0"}),[r,p]=o.JL.useObjectState({relatedPostsMaxAge:0,relatedPostsEnabled:!1,relatedPostsError:null,relatedPostsUpdated:!1}),{wizardApiFetch:d,isFetching:_,errorMessage:h}=(0,w.L)("newspack-settings/theme-mods"),{wizardApiFetch:g,isFetching:m}=(0,w.L)("newspack-settings/display-settings/recirculation");return(0,a.useEffect)((()=>{d({path:"/newspack/v1/wizard/newspack-setup-wizard/theme"},{onSuccess({theme_mods:e,etc:s}){n(e),i(s)}}),g({path:"/newspack/v1/wizard/newspack-settings/related-content"},{onSuccess:p})}),[]),(0,l.jsxs)(c.A,{title:(0,t.__)("Display Settings","newspack-plugin"),isFetching:_||m,children:[(0,l.jsx)(u.A,{title:(0,t.__)("Recirculation","newspack-plugin"),children:(0,l.jsx)(je,{isFetching:m,update:p,data:r})}),(0,l.jsx)(u.A,{title:(0,t.__)("Author Bio","newspack-plugin"),children:(0,l.jsx)(Ce,{update:n,data:e,isFetching:_})}),(0,l.jsx)(u.A,{title:(0,t.__)("Default Featured Image Position And Post Template","newspack-plugin"),description:(0,t.__)("Modify how the featured image and post template settings are applied to new posts.","newspack-plugin"),children:(0,l.jsx)(ye,{data:e,update:n})}),(0,l.jsx)(u.A,{title:(0,t.__)("Featured Image Position And Post Template For All Posts","newspack-plugin"),description:(0,t.__)("Modify how the featured image and post template settings are applied to existing posts. Warning: saving these options will override all posts.","newspack-plugin"),children:(0,l.jsx)(Ae,{data:e,postCount:s.post_count,update:n})}),(0,l.jsx)(u.A,{title:(0,t.__)("Media Credits","newspack-plugin"),children:(0,l.jsx)(Se,{data:e,update:n})}),h&&(0,l.jsx)(o.$T,{}),(0,l.jsxs)("div",{className:"newspack-buttons-card",children:[(0,l.jsx)(o.$n,{variant:"tertiary",href:"/wp-admin/customize.php",children:(0,t.__)("Advanced Settings","newspack-plugin")}),(0,l.jsx)(o.$n,{variant:"primary",onClick:function(){g({path:"/newspack/v1/wizard/newspack-settings/related-posts-max-age",method:"POST",updateCacheKey:{"/newspack/v1/wizard/newspack-settings/related-content":"GET"},data:r},{onSuccess:p}),("none"===e.featured_image_all_posts&&"none"===e.post_template_all_posts||o.Wp.confirmAction((0,t.__)("Saving will overwrite existing posts, this cannot be undone. Are you sure you want to proceed?","newspack-plugin")))&&d({path:"/newspack/v1/wizard/newspack-setup-wizard/theme",method:"POST",updateCacheMethods:["GET"],data:{theme_mods:e}},{onSuccess:e=>{n({...e,featured_image_all_posts:"none",post_template_all_posts:"none"})}})},children:(0,t.__)("Save","newspack-plugin")})]})]})},default:()=>(0,l.jsxs)("h2",{children:["🚫 ",(0,t.__)("Not found")]})};"additional-brands"in tn&&(an["additional-brands"]=(0,a.lazy)((()=>s.e(218).then(s.bind(s,1501)))));const on=Object.keys(tn).reduce(((e,n)=>{var s,t,a,i;return e.push({label:tn[n].label,exact:"/"===(null!==(s=tn[n].path)&&void 0!==s?s:""),path:null!==(t=tn[n].path)&&void 0!==t?t:`/${n}`,activeTabPaths:null!==(a=tn[n].activeTabPaths)&&void 0!==a?a:void 0,render:null!==(i=an[n])&&void 0!==i?i:an.default}),e}),[]);var ln=s(2098);const{newspack_aux_data:{is_debug_mode:rn=!1}}=window,cn=function(){return(0,l.jsxs)(a.Fragment,{children:[rn&&(0,l.jsx)(o.$T,{debugMode:!0}),(0,l.jsx)(o.Du,{}),(0,l.jsx)(ln.A,{className:"newspack-admin__tabs",headerText:(0,t.__)("Newspack / Settings","newspack"),sections:on,isInitialFetchTriggered:!1})]})}},6837:(e,n,s)=>{s.d(n,{A:()=>i});var t=s(5135),a=s(790);const i=({description:e,error:n,isChecked:s,notificationLevel:i="error",children:o,...l})=>{let r;return void 0!==s&&(r=s?"checked":"unchecked"),(0,a.jsx)(t.Lz,{description:e,checkbox:r,notification:n,notificationLevel:i,...l,children:o})}},8721:(e,n,s)=>{s.d(n,{A:()=>i});var t=s(5135),a=s(790);function i({title:e,description:n,children:s=null,scrollToAnchor:i=null,className:o}){const l="newspack-wizard__section"+(o?` ${o}`:"");return(0,a.jsxs)("div",{className:l,children:[e&&(0,a.jsx)(t.X3,{id:i,heading:3,title:e,description:n}),s]})}},5829:(e,n,s)=>{s.d(n,{A:()=>o});var t=s(7143),a=s(3276),i=s(790);const o=function({title:e,children:n,isFetching:s,description:o,...l}){const r=(0,t.useSelect)((e=>e(a.S).isLoading()),[]),c=l.className||"";return(0,i.jsxs)("div",{className:`${r||s?"is-fetching ":""}${c} newspack-wizard__sections`,children:[(0,i.jsx)("h1",{children:e}),o&&(0,i.jsx)("p",{className:"newspack-wizard__sections__description",children:o}),n]})}}}]);