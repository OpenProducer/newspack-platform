(()=>{"use strict";var e={r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t);var n,o;function c(e){var t=e.querySelector("iframe");t&&(t.src="about:blank"),document.body.classList.remove("newspack-modal-checkout-open"),n.disconnect(),e.style.display="none"}o=function(){var e=document.querySelector(".newspack-blocks-checkout-modal");if(e){var t=document.querySelector(".newspack-blocks-checkout-modal__spinner"),o="newspack_modal_checkout",a=document.createElement("input");a.type="hidden",a.name="modal_checkout",a.value="1";var r=e.querySelector(".newspack-blocks-checkout-modal__content"),d=document.createElement("iframe");d.name=o,r.appendChild(d),document.querySelectorAll(".wpbnbd.wpbnbd--platform-wc,.wp-block-newspack-blocks-checkout-button").forEach((function(c){c.querySelectorAll("form").forEach((function(c){c.appendChild(a.cloneNode()),c.target=o,c.addEventListener("submit",(function(){t.style.display="flex",e.style.display="block",document.body.classList.add("newspack-modal-checkout-open"),n=new ResizeObserver((function(e){if(e&&e.length){var t=e[0].contentRect;t&&(r.style.height=t.top+t.bottom+"px")}})),d.addEventListener("load",(function(){var e=d.contentWindow.location;if(window.newspackReaderActivation&&e.href.indexOf("order-received")>-1){var o=window.newspackReaderActivation,c=new Proxy(new URLSearchParams(e.search),{get:function(e,t){return e.get(t)}});c.email&&(o.setReaderEmail(c.email),o.setAuthenticated(!0))}var a=d.contentWindow.document.querySelector("#newspack_modal_checkout");a&&n.observe(a),t.style.display="none"}))}))}))})),e.addEventListener("click",(function(t){t.target===e&&c(e)})),e.querySelectorAll(".newspack-blocks-checkout-modal__close").forEach((function(t){t.addEventListener("click",(function(t){t.preventDefault(),c(e)}))}))}},"undefined"!=typeof document&&("complete"!==document.readyState&&"interactive"!==document.readyState?document.addEventListener("DOMContentLoaded",o):o());var a=window;for(var r in t)a[r]=t[r];t.__esModule&&Object.defineProperty(a,"__esModule",{value:!0})})();